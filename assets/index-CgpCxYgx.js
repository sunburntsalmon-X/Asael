(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function i(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerPolicy&&(u.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?u.credentials="include":r.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(r){if(r.ep)return;r.ep=!0;const u=i(r);fetch(r.href,u)}})();function Yg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Wc={exports:{}},Is={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ph;function Cv(){if(Ph)return Is;Ph=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(s,r,u){var f=null;if(u!==void 0&&(f=""+u),r.key!==void 0&&(f=""+r.key),"key"in r){u={};for(var g in r)g!=="key"&&(u[g]=r[g])}else u=r;return r=u.ref,{$$typeof:n,type:s,key:f,ref:r!==void 0?r:null,props:u}}return Is.Fragment=e,Is.jsx=i,Is.jsxs=i,Is}var Oh;function Sv(){return Oh||(Oh=1,Wc.exports=Cv()),Wc.exports}var a=Sv(),Kc={exports:{}},Me={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zh;function Av(){if(zh)return Me;zh=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),C=Symbol.iterator;function A(N){return N===null||typeof N!="object"?null:(N=C&&N[C]||N["@@iterator"],typeof N=="function"?N:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,w={};function R(N,F,z){this.props=N,this.context=F,this.refs=w,this.updater=z||T}R.prototype.isReactComponent={},R.prototype.setState=function(N,F){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,F,"setState")},R.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function I(){}I.prototype=R.prototype;function M(N,F,z){this.props=N,this.context=F,this.refs=w,this.updater=z||T}var q=M.prototype=new I;q.constructor=M,E(q,R.prototype),q.isPureReactComponent=!0;var G=Array.isArray;function U(){}var V={H:null,A:null,T:null,S:null},ce=Object.prototype.hasOwnProperty;function se(N,F,z){var W=z.ref;return{$$typeof:n,type:N,key:F,ref:W!==void 0?W:null,props:z}}function xe(N,F){return se(N.type,F,N.props)}function de(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function Q(N){var F={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(z){return F[z]})}var re=/\/+/g;function J(N,F){return typeof N=="object"&&N!==null&&N.key!=null?Q(""+N.key):F.toString(36)}function le(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(U,U):(N.status="pending",N.then(function(F){N.status==="pending"&&(N.status="fulfilled",N.value=F)},function(F){N.status==="pending"&&(N.status="rejected",N.reason=F)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function B(N,F,z,W,ue){var fe=typeof N;(fe==="undefined"||fe==="boolean")&&(N=null);var Ee=!1;if(N===null)Ee=!0;else switch(fe){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(N.$$typeof){case n:case e:Ee=!0;break;case v:return Ee=N._init,B(Ee(N._payload),F,z,W,ue)}}if(Ee)return ue=ue(N),Ee=W===""?"."+J(N,0):W,G(ue)?(z="",Ee!=null&&(z=Ee.replace(re,"$&/")+"/"),B(ue,F,z,"",function(je){return je})):ue!=null&&(de(ue)&&(ue=xe(ue,z+(ue.key==null||N&&N.key===ue.key?"":(""+ue.key).replace(re,"$&/")+"/")+Ee)),F.push(ue)),1;Ee=0;var me=W===""?".":W+":";if(G(N))for(var ve=0;ve<N.length;ve++)W=N[ve],fe=me+J(W,ve),Ee+=B(W,F,z,fe,ue);else if(ve=A(N),typeof ve=="function")for(N=ve.call(N),ve=0;!(W=N.next()).done;)W=W.value,fe=me+J(W,ve++),Ee+=B(W,F,z,fe,ue);else if(fe==="object"){if(typeof N.then=="function")return B(le(N),F,z,W,ue);throw F=String(N),Error("Objects are not valid as a React child (found: "+(F==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":F)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function j(N,F,z){if(N==null)return N;var W=[],ue=0;return B(N,W,"","",function(fe){return F.call(z,fe,ue++)}),W}function Z(N){if(N._status===-1){var F=N._result;F=F(),F.then(function(z){(N._status===0||N._status===-1)&&(N._status=1,N._result=z)},function(z){(N._status===0||N._status===-1)&&(N._status=2,N._result=z)}),N._status===-1&&(N._status=0,N._result=F)}if(N._status===1)return N._result.default;throw N._result}var X=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var F=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(F))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},$={map:j,forEach:function(N,F,z){j(N,function(){F.apply(this,arguments)},z)},count:function(N){var F=0;return j(N,function(){F++}),F},toArray:function(N){return j(N,function(F){return F})||[]},only:function(N){if(!de(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Me.Activity=b,Me.Children=$,Me.Component=R,Me.Fragment=i,Me.Profiler=r,Me.PureComponent=M,Me.StrictMode=s,Me.Suspense=x,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=V,Me.__COMPILER_RUNTIME={__proto__:null,c:function(N){return V.H.useMemoCache(N)}},Me.cache=function(N){return function(){return N.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(N,F,z){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var W=E({},N.props),ue=N.key;if(F!=null)for(fe in F.key!==void 0&&(ue=""+F.key),F)!ce.call(F,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&F.ref===void 0||(W[fe]=F[fe]);var fe=arguments.length-2;if(fe===1)W.children=z;else if(1<fe){for(var Ee=Array(fe),me=0;me<fe;me++)Ee[me]=arguments[me+2];W.children=Ee}return se(N.type,ue,W)},Me.createContext=function(N){return N={$$typeof:f,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},Me.createElement=function(N,F,z){var W,ue={},fe=null;if(F!=null)for(W in F.key!==void 0&&(fe=""+F.key),F)ce.call(F,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(ue[W]=F[W]);var Ee=arguments.length-2;if(Ee===1)ue.children=z;else if(1<Ee){for(var me=Array(Ee),ve=0;ve<Ee;ve++)me[ve]=arguments[ve+2];ue.children=me}if(N&&N.defaultProps)for(W in Ee=N.defaultProps,Ee)ue[W]===void 0&&(ue[W]=Ee[W]);return se(N,fe,ue)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(N){return{$$typeof:g,render:N}},Me.isValidElement=de,Me.lazy=function(N){return{$$typeof:v,_payload:{_status:-1,_result:N},_init:Z}},Me.memo=function(N,F){return{$$typeof:h,type:N,compare:F===void 0?null:F}},Me.startTransition=function(N){var F=V.T,z={};V.T=z;try{var W=N(),ue=V.S;ue!==null&&ue(z,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(U,X)}catch(fe){X(fe)}finally{F!==null&&z.types!==null&&(F.types=z.types),V.T=F}},Me.unstable_useCacheRefresh=function(){return V.H.useCacheRefresh()},Me.use=function(N){return V.H.use(N)},Me.useActionState=function(N,F,z){return V.H.useActionState(N,F,z)},Me.useCallback=function(N,F){return V.H.useCallback(N,F)},Me.useContext=function(N){return V.H.useContext(N)},Me.useDebugValue=function(){},Me.useDeferredValue=function(N,F){return V.H.useDeferredValue(N,F)},Me.useEffect=function(N,F){return V.H.useEffect(N,F)},Me.useEffectEvent=function(N){return V.H.useEffectEvent(N)},Me.useId=function(){return V.H.useId()},Me.useImperativeHandle=function(N,F,z){return V.H.useImperativeHandle(N,F,z)},Me.useInsertionEffect=function(N,F){return V.H.useInsertionEffect(N,F)},Me.useLayoutEffect=function(N,F){return V.H.useLayoutEffect(N,F)},Me.useMemo=function(N,F){return V.H.useMemo(N,F)},Me.useOptimistic=function(N,F){return V.H.useOptimistic(N,F)},Me.useReducer=function(N,F,z){return V.H.useReducer(N,F,z)},Me.useRef=function(N){return V.H.useRef(N)},Me.useState=function(N){return V.H.useState(N)},Me.useSyncExternalStore=function(N,F,z){return V.H.useSyncExternalStore(N,F,z)},Me.useTransition=function(){return V.H.useTransition()},Me.version="19.2.3",Me}var qh;function Eu(){return qh||(qh=1,Kc.exports=Av()),Kc.exports}var D=Eu();const _v=Yg(D);var Qc={exports:{}},ks={},Xc={exports:{}},Zc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hh;function Tv(){return Hh||(Hh=1,(function(n){function e(B,j){var Z=B.length;B.push(j);e:for(;0<Z;){var X=Z-1>>>1,$=B[X];if(0<r($,j))B[X]=j,B[Z]=$,Z=X;else break e}}function i(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var j=B[0],Z=B.pop();if(Z!==j){B[0]=Z;e:for(var X=0,$=B.length,N=$>>>1;X<N;){var F=2*(X+1)-1,z=B[F],W=F+1,ue=B[W];if(0>r(z,Z))W<$&&0>r(ue,z)?(B[X]=ue,B[W]=Z,X=W):(B[X]=z,B[F]=Z,X=F);else if(W<$&&0>r(ue,Z))B[X]=ue,B[W]=Z,X=W;else break e}}return j}function r(B,j){var Z=B.sortIndex-j.sortIndex;return Z!==0?Z:B.id-j.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var f=Date,g=f.now();n.unstable_now=function(){return f.now()-g}}var x=[],h=[],v=1,b=null,C=3,A=!1,T=!1,E=!1,w=!1,R=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function q(B){for(var j=i(h);j!==null;){if(j.callback===null)s(h);else if(j.startTime<=B)s(h),j.sortIndex=j.expirationTime,e(x,j);else break;j=i(h)}}function G(B){if(E=!1,q(B),!T)if(i(x)!==null)T=!0,U||(U=!0,Q());else{var j=i(h);j!==null&&le(G,j.startTime-B)}}var U=!1,V=-1,ce=5,se=-1;function xe(){return w?!0:!(n.unstable_now()-se<ce)}function de(){if(w=!1,U){var B=n.unstable_now();se=B;var j=!0;try{e:{T=!1,E&&(E=!1,I(V),V=-1),A=!0;var Z=C;try{t:{for(q(B),b=i(x);b!==null&&!(b.expirationTime>B&&xe());){var X=b.callback;if(typeof X=="function"){b.callback=null,C=b.priorityLevel;var $=X(b.expirationTime<=B);if(B=n.unstable_now(),typeof $=="function"){b.callback=$,q(B),j=!0;break t}b===i(x)&&s(x),q(B)}else s(x);b=i(x)}if(b!==null)j=!0;else{var N=i(h);N!==null&&le(G,N.startTime-B),j=!1}}break e}finally{b=null,C=Z,A=!1}j=void 0}}finally{j?Q():U=!1}}}var Q;if(typeof M=="function")Q=function(){M(de)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,J=re.port2;re.port1.onmessage=de,Q=function(){J.postMessage(null)}}else Q=function(){R(de,0)};function le(B,j){V=R(function(){B(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(B){B.callback=null},n.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<B?Math.floor(1e3/B):5},n.unstable_getCurrentPriorityLevel=function(){return C},n.unstable_next=function(B){switch(C){case 1:case 2:case 3:var j=3;break;default:j=C}var Z=C;C=j;try{return B()}finally{C=Z}},n.unstable_requestPaint=function(){w=!0},n.unstable_runWithPriority=function(B,j){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Z=C;C=B;try{return j()}finally{C=Z}},n.unstable_scheduleCallback=function(B,j,Z){var X=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?X+Z:X):Z=X,B){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=Z+$,B={id:v++,callback:j,priorityLevel:B,startTime:Z,expirationTime:$,sortIndex:-1},Z>X?(B.sortIndex=Z,e(h,B),i(x)===null&&B===i(h)&&(E?(I(V),V=-1):E=!0,le(G,Z-X))):(B.sortIndex=$,e(x,B),T||A||(T=!0,U||(U=!0,Q()))),B},n.unstable_shouldYield=xe,n.unstable_wrapCallback=function(B){var j=C;return function(){var Z=C;C=j;try{return B.apply(this,arguments)}finally{C=Z}}}})(Zc)),Zc}var Vh;function Ev(){return Vh||(Vh=1,Xc.exports=Tv()),Xc.exports}var eu={exports:{}},Tt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fh;function wv(){if(Fh)return Tt;Fh=1;var n=Eu();function e(x){var h="https://react.dev/errors/"+x;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+x+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function u(x,h,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:b==null?null:""+b,children:x,containerInfo:h,implementation:v}}var f=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(x,h){if(x==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Tt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Tt.createPortal=function(x,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return u(x,h,null,v)},Tt.flushSync=function(x){var h=f.T,v=s.p;try{if(f.T=null,s.p=2,x)return x()}finally{f.T=h,s.p=v,s.d.f()}},Tt.preconnect=function(x,h){typeof x=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(x,h))},Tt.prefetchDNS=function(x){typeof x=="string"&&s.d.D(x)},Tt.preinit=function(x,h){if(typeof x=="string"&&h&&typeof h.as=="string"){var v=h.as,b=g(v,h.crossOrigin),C=typeof h.integrity=="string"?h.integrity:void 0,A=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;v==="style"?s.d.S(x,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:b,integrity:C,fetchPriority:A}):v==="script"&&s.d.X(x,{crossOrigin:b,integrity:C,fetchPriority:A,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Tt.preinitModule=function(x,h){if(typeof x=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var v=g(h.as,h.crossOrigin);s.d.M(x,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(x)},Tt.preload=function(x,h){if(typeof x=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var v=h.as,b=g(v,h.crossOrigin);s.d.L(x,v,{crossOrigin:b,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Tt.preloadModule=function(x,h){if(typeof x=="string")if(h){var v=g(h.as,h.crossOrigin);s.d.m(x,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(x)},Tt.requestFormReset=function(x){s.d.r(x)},Tt.unstable_batchedUpdates=function(x,h){return x(h)},Tt.useFormState=function(x,h,v){return f.H.useFormState(x,h,v)},Tt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Tt.version="19.2.3",Tt}var Yh;function Nv(){if(Yh)return eu.exports;Yh=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),eu.exports=wv(),eu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jh;function Rv(){if(Jh)return ks;Jh=1;var n=Ev(),e=Eu(),i=Nv();function s(t){var o="https://react.dev/errors/"+t;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var o=t,l=t;if(t.alternate)for(;o.return;)o=o.return;else{t=o;do o=t,(o.flags&4098)!==0&&(l=o.return),t=o.return;while(t)}return o.tag===3?l:null}function f(t){if(t.tag===13){var o=t.memoizedState;if(o===null&&(t=t.alternate,t!==null&&(o=t.memoizedState)),o!==null)return o.dehydrated}return null}function g(t){if(t.tag===31){var o=t.memoizedState;if(o===null&&(t=t.alternate,t!==null&&(o=t.memoizedState)),o!==null)return o.dehydrated}return null}function x(t){if(u(t)!==t)throw Error(s(188))}function h(t){var o=t.alternate;if(!o){if(o=u(t),o===null)throw Error(s(188));return o!==t?null:t}for(var l=t,c=o;;){var m=l.return;if(m===null)break;var y=m.alternate;if(y===null){if(c=m.return,c!==null){l=c;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===l)return x(m),t;if(y===c)return x(m),o;y=y.sibling}throw Error(s(188))}if(l.return!==c.return)l=m,c=y;else{for(var S=!1,_=m.child;_;){if(_===l){S=!0,l=m,c=y;break}if(_===c){S=!0,c=m,l=y;break}_=_.sibling}if(!S){for(_=y.child;_;){if(_===l){S=!0,l=y,c=m;break}if(_===c){S=!0,c=y,l=m;break}_=_.sibling}if(!S)throw Error(s(189))}}if(l.alternate!==c)throw Error(s(190))}if(l.tag!==3)throw Error(s(188));return l.stateNode.current===l?t:o}function v(t){var o=t.tag;if(o===5||o===26||o===27||o===6)return t;for(t=t.child;t!==null;){if(o=v(t),o!==null)return o;t=t.sibling}return null}var b=Object.assign,C=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),M=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),ce=Symbol.for("react.lazy"),se=Symbol.for("react.activity"),xe=Symbol.for("react.memo_cache_sentinel"),de=Symbol.iterator;function Q(t){return t===null||typeof t!="object"?null:(t=de&&t[de]||t["@@iterator"],typeof t=="function"?t:null)}var re=Symbol.for("react.client.reference");function J(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===re?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case E:return"Fragment";case R:return"Profiler";case w:return"StrictMode";case G:return"Suspense";case U:return"SuspenseList";case se:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case T:return"Portal";case M:return t.displayName||"Context";case I:return(t._context.displayName||"Context")+".Consumer";case q:var o=t.render;return t=t.displayName,t||(t=o.displayName||o.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case V:return o=t.displayName||null,o!==null?o:J(t.type)||"Memo";case ce:o=t._payload,t=t._init;try{return J(t(o))}catch{}}return null}var le=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},X=[],$=-1;function N(t){return{current:t}}function F(t){0>$||(t.current=X[$],X[$]=null,$--)}function z(t,o){$++,X[$]=t.current,t.current=o}var W=N(null),ue=N(null),fe=N(null),Ee=N(null);function me(t,o){switch(z(fe,o),z(ue,t),z(W,null),o.nodeType){case 9:case 11:t=(t=o.documentElement)&&(t=t.namespaceURI)?rh(t):0;break;default:if(t=o.tagName,o=o.namespaceURI)o=rh(o),t=ch(o,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}F(W),z(W,t)}function ve(){F(W),F(ue),F(fe)}function je(t){t.memoizedState!==null&&z(Ee,t);var o=W.current,l=ch(o,t.type);o!==l&&(z(ue,t),z(W,l))}function qe(t){ue.current===t&&(F(W),F(ue)),Ee.current===t&&(F(Ee),ws._currentValue=Z)}var Je,tt;function at(t){if(Je===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);Je=o&&o[1]||"",tt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Je+t+tt}var _t=!1;function Jt(t,o){if(!t||_t)return"";_t=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(ee){var K=ee}Reflect.construct(t,[],ae)}else{try{ae.call()}catch(ee){K=ee}t.call(ae.prototype)}}else{try{throw Error()}catch(ee){K=ee}(ae=t())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(ee){if(ee&&K&&typeof ee.stack=="string")return[ee.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=c.DetermineComponentFrameRoot(),S=y[0],_=y[1];if(S&&_){var k=S.split(`
`),Y=_.split(`
`);for(m=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;m<Y.length&&!Y[m].includes("DetermineComponentFrameRoot");)m++;if(c===k.length||m===Y.length)for(c=k.length-1,m=Y.length-1;1<=c&&0<=m&&k[c]!==Y[m];)m--;for(;1<=c&&0<=m;c--,m--)if(k[c]!==Y[m]){if(c!==1||m!==1)do if(c--,m--,0>m||k[c]!==Y[m]){var oe=`
`+k[c].replace(" at new "," at ");return t.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",t.displayName)),oe}while(1<=c&&0<=m);break}}}finally{_t=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?at(l):""}function ne(t,o){switch(t.tag){case 26:case 27:case 5:return at(t.type);case 16:return at("Lazy");case 13:return t.child!==o&&o!==null?at("Suspense Fallback"):at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return Jt(t.type,!1);case 11:return Jt(t.type.render,!1);case 1:return Jt(t.type,!0);case 31:return at("Activity");default:return""}}function Ne(t){try{var o="",l=null;do o+=ne(t,l),l=t,t=t.return;while(t);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var O=Object.prototype.hasOwnProperty,te=n.unstable_scheduleCallback,pe=n.unstable_cancelCallback,ye=n.unstable_shouldYield,Be=n.unstable_requestPaint,Ze=n.unstable_now,zo=n.unstable_getCurrentPriorityLevel,qs=n.unstable_ImmediatePriority,Hs=n.unstable_UserBlockingPriority,vo=n.unstable_NormalPriority,nx=n.unstable_LowPriority,zu=n.unstable_IdlePriority,ox=n.log,ix=n.unstable_setDisableYieldValue,Pi=null,Bt=null;function qn(t){if(typeof ox=="function"&&ix(t),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(Pi,t)}catch{}}var Gt=Math.clz32?Math.clz32:ax,sx=Math.log,lx=Math.LN2;function ax(t){return t>>>=0,t===0?32:31-(sx(t)/lx|0)|0}var Vs=256,Fs=262144,Ys=4194304;function bo(t){var o=t&42;if(o!==0)return o;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Js(t,o,l){var c=t.pendingLanes;if(c===0)return 0;var m=0,y=t.suspendedLanes,S=t.pingedLanes;t=t.warmLanes;var _=c&134217727;return _!==0?(c=_&~y,c!==0?m=bo(c):(S&=_,S!==0?m=bo(S):l||(l=_&~t,l!==0&&(m=bo(l))))):(_=c&~y,_!==0?m=bo(_):S!==0?m=bo(S):l||(l=c&~t,l!==0&&(m=bo(l)))),m===0?0:o!==0&&o!==m&&(o&y)===0&&(y=m&-m,l=o&-o,y>=l||y===32&&(l&4194048)!==0)?o:m}function Oi(t,o){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&o)===0}function rx(t,o){switch(t){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qu(){var t=Ys;return Ys<<=1,(Ys&62914560)===0&&(Ys=4194304),t}function Ba(t){for(var o=[],l=0;31>l;l++)o.push(t);return o}function zi(t,o){t.pendingLanes|=o,o!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function cx(t,o,l,c,m,y){var S=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var _=t.entanglements,k=t.expirationTimes,Y=t.hiddenUpdates;for(l=S&~l;0<l;){var oe=31-Gt(l),ae=1<<oe;_[oe]=0,k[oe]=-1;var K=Y[oe];if(K!==null)for(Y[oe]=null,oe=0;oe<K.length;oe++){var ee=K[oe];ee!==null&&(ee.lane&=-536870913)}l&=~ae}c!==0&&Hu(t,c,0),y!==0&&m===0&&t.tag!==0&&(t.suspendedLanes|=y&~(S&~o))}function Hu(t,o,l){t.pendingLanes|=o,t.suspendedLanes&=~o;var c=31-Gt(o);t.entangledLanes|=o,t.entanglements[c]=t.entanglements[c]|1073741824|l&261930}function Vu(t,o){var l=t.entangledLanes|=o;for(t=t.entanglements;l;){var c=31-Gt(l),m=1<<c;m&o|t[c]&o&&(t[c]|=o),l&=~m}}function Fu(t,o){var l=o&-o;return l=(l&42)!==0?1:Ga(l),(l&(t.suspendedLanes|o))!==0?0:l}function Ga(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Pa(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Yu(){var t=j.p;return t!==0?t:(t=window.event,t===void 0?32:kh(t.type))}function Ju(t,o){var l=j.p;try{return j.p=t,o()}finally{j.p=l}}var Hn=Math.random().toString(36).slice(2),vt="__reactFiber$"+Hn,Mt="__reactProps$"+Hn,qo="__reactContainer$"+Hn,Oa="__reactEvents$"+Hn,ux="__reactListeners$"+Hn,dx="__reactHandles$"+Hn,$u="__reactResources$"+Hn,qi="__reactMarker$"+Hn;function za(t){delete t[vt],delete t[Mt],delete t[Oa],delete t[ux],delete t[dx]}function Ho(t){var o=t[vt];if(o)return o;for(var l=t.parentNode;l;){if(o=l[qo]||l[vt]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(t=gh(t);t!==null;){if(l=t[vt])return l;t=gh(t)}return o}t=l,l=t.parentNode}return null}function Vo(t){if(t=t[vt]||t[qo]){var o=t.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return t}return null}function Hi(t){var o=t.tag;if(o===5||o===26||o===27||o===6)return t.stateNode;throw Error(s(33))}function Fo(t){var o=t[$u];return o||(o=t[$u]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function gt(t){t[qi]=!0}var Wu=new Set,Ku={};function Co(t,o){Yo(t,o),Yo(t+"Capture",o)}function Yo(t,o){for(Ku[t]=o,t=0;t<o.length;t++)Wu.add(o[t])}var fx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qu={},Xu={};function px(t){return O.call(Xu,t)?!0:O.call(Qu,t)?!1:fx.test(t)?Xu[t]=!0:(Qu[t]=!0,!1)}function $s(t,o,l){if(px(o))if(l===null)t.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(o);return}}t.setAttribute(o,""+l)}}function Ws(t,o,l){if(l===null)t.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(o);return}t.setAttribute(o,""+l)}}function yn(t,o,l,c){if(c===null)t.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(o,l,""+c)}}function $t(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Zu(t){var o=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function hx(t,o,l){var c=Object.getOwnPropertyDescriptor(t.constructor.prototype,o);if(!t.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,y=c.set;return Object.defineProperty(t,o,{configurable:!0,get:function(){return m.call(this)},set:function(S){l=""+S,y.call(this,S)}}),Object.defineProperty(t,o,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(S){l=""+S},stopTracking:function(){t._valueTracker=null,delete t[o]}}}}function qa(t){if(!t._valueTracker){var o=Zu(t)?"checked":"value";t._valueTracker=hx(t,o,""+t[o])}}function ed(t){if(!t)return!1;var o=t._valueTracker;if(!o)return!0;var l=o.getValue(),c="";return t&&(c=Zu(t)?t.checked?"true":"false":t.value),t=c,t!==l?(o.setValue(t),!0):!1}function Ks(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var mx=/[\n"\\]/g;function Wt(t){return t.replace(mx,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Ha(t,o,l,c,m,y,S,_){t.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.type=S:t.removeAttribute("type"),o!=null?S==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+$t(o)):t.value!==""+$t(o)&&(t.value=""+$t(o)):S!=="submit"&&S!=="reset"||t.removeAttribute("value"),o!=null?Va(t,S,$t(o)):l!=null?Va(t,S,$t(l)):c!=null&&t.removeAttribute("value"),m==null&&y!=null&&(t.defaultChecked=!!y),m!=null&&(t.checked=m&&typeof m!="function"&&typeof m!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.name=""+$t(_):t.removeAttribute("name")}function td(t,o,l,c,m,y,S,_){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.type=y),o!=null||l!=null){if(!(y!=="submit"&&y!=="reset"||o!=null)){qa(t);return}l=l!=null?""+$t(l):"",o=o!=null?""+$t(o):l,_||o===t.value||(t.value=o),t.defaultValue=o}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=_?t.checked:!!c,t.defaultChecked=!!c,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(t.name=S),qa(t)}function Va(t,o,l){o==="number"&&Ks(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function Jo(t,o,l,c){if(t=t.options,o){o={};for(var m=0;m<l.length;m++)o["$"+l[m]]=!0;for(l=0;l<t.length;l++)m=o.hasOwnProperty("$"+t[l].value),t[l].selected!==m&&(t[l].selected=m),m&&c&&(t[l].defaultSelected=!0)}else{for(l=""+$t(l),o=null,m=0;m<t.length;m++){if(t[m].value===l){t[m].selected=!0,c&&(t[m].defaultSelected=!0);return}o!==null||t[m].disabled||(o=t[m])}o!==null&&(o.selected=!0)}}function nd(t,o,l){if(o!=null&&(o=""+$t(o),o!==t.value&&(t.value=o),l==null)){t.defaultValue!==o&&(t.defaultValue=o);return}t.defaultValue=l!=null?""+$t(l):""}function od(t,o,l,c){if(o==null){if(c!=null){if(l!=null)throw Error(s(92));if(le(c)){if(1<c.length)throw Error(s(93));c=c[0]}l=c}l==null&&(l=""),o=l}l=$t(o),t.defaultValue=l,c=t.textContent,c===l&&c!==""&&c!==null&&(t.value=c),qa(t)}function $o(t,o){if(o){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=o;return}}t.textContent=o}var gx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function id(t,o,l){var c=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="":c?t.setProperty(o,l):typeof l!="number"||l===0||gx.has(o)?o==="float"?t.cssFloat=l:t[o]=(""+l).trim():t[o]=l+"px"}function sd(t,o,l){if(o!=null&&typeof o!="object")throw Error(s(62));if(t=t.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var m in o)c=o[m],o.hasOwnProperty(m)&&l[m]!==c&&id(t,m,c)}else for(var y in o)o.hasOwnProperty(y)&&id(t,y,o[y])}function Fa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xx=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qs(t){return yx.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function vn(){}var Ya=null;function Ja(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wo=null,Ko=null;function ld(t){var o=Vo(t);if(o&&(t=o.stateNode)){var l=t[Mt]||null;e:switch(t=o.stateNode,o.type){case"input":if(Ha(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Wt(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var c=l[o];if(c!==t&&c.form===t.form){var m=c[Mt]||null;if(!m)throw Error(s(90));Ha(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(o=0;o<l.length;o++)c=l[o],c.form===t.form&&ed(c)}break e;case"textarea":nd(t,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&Jo(t,!!l.multiple,o,!1)}}}var $a=!1;function ad(t,o,l){if($a)return t(o,l);$a=!0;try{var c=t(o);return c}finally{if($a=!1,(Wo!==null||Ko!==null)&&(Gl(),Wo&&(o=Wo,t=Ko,Ko=Wo=null,ld(o),t)))for(o=0;o<t.length;o++)ld(t[o])}}function Vi(t,o){var l=t.stateNode;if(l===null)return null;var c=l[Mt]||null;if(c===null)return null;l=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(s(231,o,typeof l));return l}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wa=!1;if(bn)try{var Fi={};Object.defineProperty(Fi,"passive",{get:function(){Wa=!0}}),window.addEventListener("test",Fi,Fi),window.removeEventListener("test",Fi,Fi)}catch{Wa=!1}var Vn=null,Ka=null,Xs=null;function rd(){if(Xs)return Xs;var t,o=Ka,l=o.length,c,m="value"in Vn?Vn.value:Vn.textContent,y=m.length;for(t=0;t<l&&o[t]===m[t];t++);var S=l-t;for(c=1;c<=S&&o[l-c]===m[y-c];c++);return Xs=m.slice(t,1<c?1-c:void 0)}function Zs(t){var o=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&o===13&&(t=13)):t=o,t===10&&(t=13),32<=t||t===13?t:0}function el(){return!0}function cd(){return!1}function It(t){function o(l,c,m,y,S){this._reactName=l,this._targetInst=m,this.type=c,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var _ in t)t.hasOwnProperty(_)&&(l=t[_],this[_]=l?l(y):y[_]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?el:cd,this.isPropagationStopped=cd,this}return b(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=el)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=el)},persist:function(){},isPersistent:el}),o}var So={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tl=It(So),Yi=b({},So,{view:0,detail:0}),vx=It(Yi),Qa,Xa,Ji,nl=b({},Yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:er,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ji&&(Ji&&t.type==="mousemove"?(Qa=t.screenX-Ji.screenX,Xa=t.screenY-Ji.screenY):Xa=Qa=0,Ji=t),Qa)},movementY:function(t){return"movementY"in t?t.movementY:Xa}}),ud=It(nl),bx=b({},nl,{dataTransfer:0}),Cx=It(bx),Sx=b({},Yi,{relatedTarget:0}),Za=It(Sx),Ax=b({},So,{animationName:0,elapsedTime:0,pseudoElement:0}),_x=It(Ax),Tx=b({},So,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ex=It(Tx),wx=b({},So,{data:0}),dd=It(wx),Nx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ix(t){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(t):(t=Mx[t])?!!o[t]:!1}function er(){return Ix}var kx=b({},Yi,{key:function(t){if(t.key){var o=Nx[t.key]||t.key;if(o!=="Unidentified")return o}return t.type==="keypress"?(t=Zs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Rx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:er,charCode:function(t){return t.type==="keypress"?Zs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Dx=It(kx),jx=b({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fd=It(jx),Lx=b({},Yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:er}),Ux=It(Lx),Bx=b({},So,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gx=It(Bx),Px=b({},nl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ox=It(Px),zx=b({},So,{newState:0,oldState:0}),qx=It(zx),Hx=[9,13,27,32],tr=bn&&"CompositionEvent"in window,$i=null;bn&&"documentMode"in document&&($i=document.documentMode);var Vx=bn&&"TextEvent"in window&&!$i,pd=bn&&(!tr||$i&&8<$i&&11>=$i),hd=" ",md=!1;function gd(t,o){switch(t){case"keyup":return Hx.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qo=!1;function Fx(t,o){switch(t){case"compositionend":return xd(o);case"keypress":return o.which!==32?null:(md=!0,hd);case"textInput":return t=o.data,t===hd&&md?null:t;default:return null}}function Yx(t,o){if(Qo)return t==="compositionend"||!tr&&gd(t,o)?(t=rd(),Xs=Ka=Vn=null,Qo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return pd&&o.locale!=="ko"?null:o.data;default:return null}}var Jx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yd(t){var o=t&&t.nodeName&&t.nodeName.toLowerCase();return o==="input"?!!Jx[t.type]:o==="textarea"}function vd(t,o,l,c){Wo?Ko?Ko.push(c):Ko=[c]:Wo=c,o=Fl(o,"onChange"),0<o.length&&(l=new tl("onChange","change",null,l,c),t.push({event:l,listeners:o}))}var Wi=null,Ki=null;function $x(t){nh(t,0)}function ol(t){var o=Hi(t);if(ed(o))return t}function bd(t,o){if(t==="change")return o}var Cd=!1;if(bn){var nr;if(bn){var or="oninput"in document;if(!or){var Sd=document.createElement("div");Sd.setAttribute("oninput","return;"),or=typeof Sd.oninput=="function"}nr=or}else nr=!1;Cd=nr&&(!document.documentMode||9<document.documentMode)}function Ad(){Wi&&(Wi.detachEvent("onpropertychange",_d),Ki=Wi=null)}function _d(t){if(t.propertyName==="value"&&ol(Ki)){var o=[];vd(o,Ki,t,Ja(t)),ad($x,o)}}function Wx(t,o,l){t==="focusin"?(Ad(),Wi=o,Ki=l,Wi.attachEvent("onpropertychange",_d)):t==="focusout"&&Ad()}function Kx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ol(Ki)}function Qx(t,o){if(t==="click")return ol(o)}function Xx(t,o){if(t==="input"||t==="change")return ol(o)}function Zx(t,o){return t===o&&(t!==0||1/t===1/o)||t!==t&&o!==o}var Pt=typeof Object.is=="function"?Object.is:Zx;function Qi(t,o){if(Pt(t,o))return!0;if(typeof t!="object"||t===null||typeof o!="object"||o===null)return!1;var l=Object.keys(t),c=Object.keys(o);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var m=l[c];if(!O.call(o,m)||!Pt(t[m],o[m]))return!1}return!0}function Td(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ed(t,o){var l=Td(t);t=0;for(var c;l;){if(l.nodeType===3){if(c=t+l.textContent.length,t<=o&&c>=o)return{node:l,offset:o-t};t=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Td(l)}}function wd(t,o){return t&&o?t===o?!0:t&&t.nodeType===3?!1:o&&o.nodeType===3?wd(t,o.parentNode):"contains"in t?t.contains(o):t.compareDocumentPosition?!!(t.compareDocumentPosition(o)&16):!1:!1}function Nd(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var o=Ks(t.document);o instanceof t.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)t=o.contentWindow;else break;o=Ks(t.document)}return o}function ir(t){var o=t&&t.nodeName&&t.nodeName.toLowerCase();return o&&(o==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||o==="textarea"||t.contentEditable==="true")}var ey=bn&&"documentMode"in document&&11>=document.documentMode,Xo=null,sr=null,Xi=null,lr=!1;function Rd(t,o,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;lr||Xo==null||Xo!==Ks(c)||(c=Xo,"selectionStart"in c&&ir(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Xi&&Qi(Xi,c)||(Xi=c,c=Fl(sr,"onSelect"),0<c.length&&(o=new tl("onSelect","select",null,o,l),t.push({event:o,listeners:c}),o.target=Xo)))}function Ao(t,o){var l={};return l[t.toLowerCase()]=o.toLowerCase(),l["Webkit"+t]="webkit"+o,l["Moz"+t]="moz"+o,l}var Zo={animationend:Ao("Animation","AnimationEnd"),animationiteration:Ao("Animation","AnimationIteration"),animationstart:Ao("Animation","AnimationStart"),transitionrun:Ao("Transition","TransitionRun"),transitionstart:Ao("Transition","TransitionStart"),transitioncancel:Ao("Transition","TransitionCancel"),transitionend:Ao("Transition","TransitionEnd")},ar={},Md={};bn&&(Md=document.createElement("div").style,"AnimationEvent"in window||(delete Zo.animationend.animation,delete Zo.animationiteration.animation,delete Zo.animationstart.animation),"TransitionEvent"in window||delete Zo.transitionend.transition);function _o(t){if(ar[t])return ar[t];if(!Zo[t])return t;var o=Zo[t],l;for(l in o)if(o.hasOwnProperty(l)&&l in Md)return ar[t]=o[l];return t}var Id=_o("animationend"),kd=_o("animationiteration"),Dd=_o("animationstart"),ty=_o("transitionrun"),ny=_o("transitionstart"),oy=_o("transitioncancel"),jd=_o("transitionend"),Ld=new Map,rr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rr.push("scrollEnd");function an(t,o){Ld.set(t,o),Co(o,[t])}var il=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Kt=[],ei=0,cr=0;function sl(){for(var t=ei,o=cr=ei=0;o<t;){var l=Kt[o];Kt[o++]=null;var c=Kt[o];Kt[o++]=null;var m=Kt[o];Kt[o++]=null;var y=Kt[o];if(Kt[o++]=null,c!==null&&m!==null){var S=c.pending;S===null?m.next=m:(m.next=S.next,S.next=m),c.pending=m}y!==0&&Ud(l,m,y)}}function ll(t,o,l,c){Kt[ei++]=t,Kt[ei++]=o,Kt[ei++]=l,Kt[ei++]=c,cr|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function ur(t,o,l,c){return ll(t,o,l,c),al(t)}function To(t,o){return ll(t,null,null,o),al(t)}function Ud(t,o,l){t.lanes|=l;var c=t.alternate;c!==null&&(c.lanes|=l);for(var m=!1,y=t.return;y!==null;)y.childLanes|=l,c=y.alternate,c!==null&&(c.childLanes|=l),y.tag===22&&(t=y.stateNode,t===null||t._visibility&1||(m=!0)),t=y,y=y.return;return t.tag===3?(y=t.stateNode,m&&o!==null&&(m=31-Gt(l),t=y.hiddenUpdates,c=t[m],c===null?t[m]=[o]:c.push(o),o.lane=l|536870912),y):null}function al(t){if(50<bs)throw bs=0,vc=null,Error(s(185));for(var o=t.return;o!==null;)t=o,o=t.return;return t.tag===3?t.stateNode:null}var ti={};function iy(t,o,l,c){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ot(t,o,l,c){return new iy(t,o,l,c)}function dr(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Cn(t,o){var l=t.alternate;return l===null?(l=Ot(t.tag,o,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=o,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,o=t.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function Bd(t,o){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=o,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,o=l.dependencies,t.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),t}function rl(t,o,l,c,m,y){var S=0;if(c=t,typeof t=="function")dr(t)&&(S=1);else if(typeof t=="string")S=cv(t,l,W.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case se:return t=Ot(31,l,o,m),t.elementType=se,t.lanes=y,t;case E:return Eo(l.children,m,y,o);case w:S=8,m|=24;break;case R:return t=Ot(12,l,o,m|2),t.elementType=R,t.lanes=y,t;case G:return t=Ot(13,l,o,m),t.elementType=G,t.lanes=y,t;case U:return t=Ot(19,l,o,m),t.elementType=U,t.lanes=y,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case M:S=10;break e;case I:S=9;break e;case q:S=11;break e;case V:S=14;break e;case ce:S=16,c=null;break e}S=29,l=Error(s(130,t===null?"null":typeof t,"")),c=null}return o=Ot(S,l,o,m),o.elementType=t,o.type=c,o.lanes=y,o}function Eo(t,o,l,c){return t=Ot(7,t,c,o),t.lanes=l,t}function fr(t,o,l){return t=Ot(6,t,null,o),t.lanes=l,t}function Gd(t){var o=Ot(18,null,null,0);return o.stateNode=t,o}function pr(t,o,l){return o=Ot(4,t.children!==null?t.children:[],t.key,o),o.lanes=l,o.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},o}var Pd=new WeakMap;function Qt(t,o){if(typeof t=="object"&&t!==null){var l=Pd.get(t);return l!==void 0?l:(o={value:t,source:o,stack:Ne(o)},Pd.set(t,o),o)}return{value:t,source:o,stack:Ne(o)}}var ni=[],oi=0,cl=null,Zi=0,Xt=[],Zt=0,Fn=null,hn=1,mn="";function Sn(t,o){ni[oi++]=Zi,ni[oi++]=cl,cl=t,Zi=o}function Od(t,o,l){Xt[Zt++]=hn,Xt[Zt++]=mn,Xt[Zt++]=Fn,Fn=t;var c=hn;t=mn;var m=32-Gt(c)-1;c&=~(1<<m),l+=1;var y=32-Gt(o)+m;if(30<y){var S=m-m%5;y=(c&(1<<S)-1).toString(32),c>>=S,m-=S,hn=1<<32-Gt(o)+m|l<<m|c,mn=y+t}else hn=1<<y|l<<m|c,mn=t}function hr(t){t.return!==null&&(Sn(t,1),Od(t,1,0))}function mr(t){for(;t===cl;)cl=ni[--oi],ni[oi]=null,Zi=ni[--oi],ni[oi]=null;for(;t===Fn;)Fn=Xt[--Zt],Xt[Zt]=null,mn=Xt[--Zt],Xt[Zt]=null,hn=Xt[--Zt],Xt[Zt]=null}function zd(t,o){Xt[Zt++]=hn,Xt[Zt++]=mn,Xt[Zt++]=Fn,hn=o.id,mn=o.overflow,Fn=t}var bt=null,nt=null,Oe=!1,Yn=null,en=!1,gr=Error(s(519));function Jn(t){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw es(Qt(o,t)),gr}function qd(t){var o=t.stateNode,l=t.type,c=t.memoizedProps;switch(o[vt]=t,o[Mt]=c,l){case"dialog":Ue("cancel",o),Ue("close",o);break;case"iframe":case"object":case"embed":Ue("load",o);break;case"video":case"audio":for(l=0;l<Ss.length;l++)Ue(Ss[l],o);break;case"source":Ue("error",o);break;case"img":case"image":case"link":Ue("error",o),Ue("load",o);break;case"details":Ue("toggle",o);break;case"input":Ue("invalid",o),td(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ue("invalid",o);break;case"textarea":Ue("invalid",o),od(o,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||c.suppressHydrationWarning===!0||lh(o.textContent,l)?(c.popover!=null&&(Ue("beforetoggle",o),Ue("toggle",o)),c.onScroll!=null&&Ue("scroll",o),c.onScrollEnd!=null&&Ue("scrollend",o),c.onClick!=null&&(o.onclick=vn),o=!0):o=!1,o||Jn(t,!0)}function Hd(t){for(bt=t.return;bt;)switch(bt.tag){case 5:case 31:case 13:en=!1;return;case 27:case 3:en=!0;return;default:bt=bt.return}}function ii(t){if(t!==bt)return!1;if(!Oe)return Hd(t),Oe=!0,!1;var o=t.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||jc(t.type,t.memoizedProps)),l=!l),l&&nt&&Jn(t),Hd(t),o===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));nt=mh(t)}else if(o===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));nt=mh(t)}else o===27?(o=nt,ao(t.type)?(t=Pc,Pc=null,nt=t):nt=o):nt=bt?nn(t.stateNode.nextSibling):null;return!0}function wo(){nt=bt=null,Oe=!1}function xr(){var t=Yn;return t!==null&&(Lt===null?Lt=t:Lt.push.apply(Lt,t),Yn=null),t}function es(t){Yn===null?Yn=[t]:Yn.push(t)}var yr=N(null),No=null,An=null;function $n(t,o,l){z(yr,o._currentValue),o._currentValue=l}function _n(t){t._currentValue=yr.current,F(yr)}function vr(t,o,l){for(;t!==null;){var c=t.alternate;if((t.childLanes&o)!==o?(t.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),t===l)break;t=t.return}}function br(t,o,l,c){var m=t.child;for(m!==null&&(m.return=t);m!==null;){var y=m.dependencies;if(y!==null){var S=m.child;y=y.firstContext;e:for(;y!==null;){var _=y;y=m;for(var k=0;k<o.length;k++)if(_.context===o[k]){y.lanes|=l,_=y.alternate,_!==null&&(_.lanes|=l),vr(y.return,l,t),c||(S=null);break e}y=_.next}}else if(m.tag===18){if(S=m.return,S===null)throw Error(s(341));S.lanes|=l,y=S.alternate,y!==null&&(y.lanes|=l),vr(S,l,t),S=null}else S=m.child;if(S!==null)S.return=m;else for(S=m;S!==null;){if(S===t){S=null;break}if(m=S.sibling,m!==null){m.return=S.return,S=m;break}S=S.return}m=S}}function si(t,o,l,c){t=null;for(var m=o,y=!1;m!==null;){if(!y){if((m.flags&524288)!==0)y=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var S=m.alternate;if(S===null)throw Error(s(387));if(S=S.memoizedProps,S!==null){var _=m.type;Pt(m.pendingProps.value,S.value)||(t!==null?t.push(_):t=[_])}}else if(m===Ee.current){if(S=m.alternate,S===null)throw Error(s(387));S.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(t!==null?t.push(ws):t=[ws])}m=m.return}t!==null&&br(o,t,l,c),o.flags|=262144}function ul(t){for(t=t.firstContext;t!==null;){if(!Pt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ro(t){No=t,An=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ct(t){return Vd(No,t)}function dl(t,o){return No===null&&Ro(t),Vd(t,o)}function Vd(t,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},An===null){if(t===null)throw Error(s(308));An=o,t.dependencies={lanes:0,firstContext:o},t.flags|=524288}else An=An.next=o;return l}var sy=typeof AbortController<"u"?AbortController:function(){var t=[],o=this.signal={aborted:!1,addEventListener:function(l,c){t.push(c)}};this.abort=function(){o.aborted=!0,t.forEach(function(l){return l()})}},ly=n.unstable_scheduleCallback,ay=n.unstable_NormalPriority,ut={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cr(){return{controller:new sy,data:new Map,refCount:0}}function ts(t){t.refCount--,t.refCount===0&&ly(ay,function(){t.controller.abort()})}var ns=null,Sr=0,li=0,ai=null;function ry(t,o){if(ns===null){var l=ns=[];Sr=0,li=Tc(),ai={status:"pending",value:void 0,then:function(c){l.push(c)}}}return Sr++,o.then(Fd,Fd),o}function Fd(){if(--Sr===0&&ns!==null){ai!==null&&(ai.status="fulfilled");var t=ns;ns=null,li=0,ai=null;for(var o=0;o<t.length;o++)(0,t[o])()}}function cy(t,o){var l=[],c={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return t.then(function(){c.status="fulfilled",c.value=o;for(var m=0;m<l.length;m++)(0,l[m])(o)},function(m){for(c.status="rejected",c.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),c}var Yd=B.S;B.S=function(t,o){Mp=Ze(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&ry(t,o),Yd!==null&&Yd(t,o)};var Mo=N(null);function Ar(){var t=Mo.current;return t!==null?t:et.pooledCache}function fl(t,o){o===null?z(Mo,Mo.current):z(Mo,o.pool)}function Jd(){var t=Ar();return t===null?null:{parent:ut._currentValue,pool:t}}var ri=Error(s(460)),_r=Error(s(474)),pl=Error(s(542)),hl={then:function(){}};function $d(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Wd(t,o,l){switch(l=t[l],l===void 0?t.push(o):l!==o&&(o.then(vn,vn),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw t=o.reason,Qd(t),t;default:if(typeof o.status=="string")o.then(vn,vn);else{if(t=et,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=o,t.status="pending",t.then(function(c){if(o.status==="pending"){var m=o;m.status="fulfilled",m.value=c}},function(c){if(o.status==="pending"){var m=o;m.status="rejected",m.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw t=o.reason,Qd(t),t}throw ko=o,ri}}function Io(t){try{var o=t._init;return o(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ko=l,ri):l}}var ko=null;function Kd(){if(ko===null)throw Error(s(459));var t=ko;return ko=null,t}function Qd(t){if(t===ri||t===pl)throw Error(s(483))}var ci=null,os=0;function ml(t){var o=os;return os+=1,ci===null&&(ci=[]),Wd(ci,t,o)}function is(t,o){o=o.props.ref,t.ref=o!==void 0?o:null}function gl(t,o){throw o.$$typeof===C?Error(s(525)):(t=Object.prototype.toString.call(o),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":t)))}function Xd(t){function o(P,L){if(t){var H=P.deletions;H===null?(P.deletions=[L],P.flags|=16):H.push(L)}}function l(P,L){if(!t)return null;for(;L!==null;)o(P,L),L=L.sibling;return null}function c(P){for(var L=new Map;P!==null;)P.key!==null?L.set(P.key,P):L.set(P.index,P),P=P.sibling;return L}function m(P,L){return P=Cn(P,L),P.index=0,P.sibling=null,P}function y(P,L,H){return P.index=H,t?(H=P.alternate,H!==null?(H=H.index,H<L?(P.flags|=67108866,L):H):(P.flags|=67108866,L)):(P.flags|=1048576,L)}function S(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function _(P,L,H,ie){return L===null||L.tag!==6?(L=fr(H,P.mode,ie),L.return=P,L):(L=m(L,H),L.return=P,L)}function k(P,L,H,ie){var Te=H.type;return Te===E?oe(P,L,H.props.children,ie,H.key):L!==null&&(L.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===ce&&Io(Te)===L.type)?(L=m(L,H.props),is(L,H),L.return=P,L):(L=rl(H.type,H.key,H.props,null,P.mode,ie),is(L,H),L.return=P,L)}function Y(P,L,H,ie){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=pr(H,P.mode,ie),L.return=P,L):(L=m(L,H.children||[]),L.return=P,L)}function oe(P,L,H,ie,Te){return L===null||L.tag!==7?(L=Eo(H,P.mode,ie,Te),L.return=P,L):(L=m(L,H),L.return=P,L)}function ae(P,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=fr(""+L,P.mode,H),L.return=P,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case A:return H=rl(L.type,L.key,L.props,null,P.mode,H),is(H,L),H.return=P,H;case T:return L=pr(L,P.mode,H),L.return=P,L;case ce:return L=Io(L),ae(P,L,H)}if(le(L)||Q(L))return L=Eo(L,P.mode,H,null),L.return=P,L;if(typeof L.then=="function")return ae(P,ml(L),H);if(L.$$typeof===M)return ae(P,dl(P,L),H);gl(P,L)}return null}function K(P,L,H,ie){var Te=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Te!==null?null:_(P,L,""+H,ie);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case A:return H.key===Te?k(P,L,H,ie):null;case T:return H.key===Te?Y(P,L,H,ie):null;case ce:return H=Io(H),K(P,L,H,ie)}if(le(H)||Q(H))return Te!==null?null:oe(P,L,H,ie,null);if(typeof H.then=="function")return K(P,L,ml(H),ie);if(H.$$typeof===M)return K(P,L,dl(P,H),ie);gl(P,H)}return null}function ee(P,L,H,ie,Te){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return P=P.get(H)||null,_(L,P,""+ie,Te);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case A:return P=P.get(ie.key===null?H:ie.key)||null,k(L,P,ie,Te);case T:return P=P.get(ie.key===null?H:ie.key)||null,Y(L,P,ie,Te);case ce:return ie=Io(ie),ee(P,L,H,ie,Te)}if(le(ie)||Q(ie))return P=P.get(H)||null,oe(L,P,ie,Te,null);if(typeof ie.then=="function")return ee(P,L,H,ml(ie),Te);if(ie.$$typeof===M)return ee(P,L,H,dl(L,ie),Te);gl(L,ie)}return null}function Se(P,L,H,ie){for(var Te=null,He=null,Ae=L,De=L=0,Pe=null;Ae!==null&&De<H.length;De++){Ae.index>De?(Pe=Ae,Ae=null):Pe=Ae.sibling;var Ve=K(P,Ae,H[De],ie);if(Ve===null){Ae===null&&(Ae=Pe);break}t&&Ae&&Ve.alternate===null&&o(P,Ae),L=y(Ve,L,De),He===null?Te=Ve:He.sibling=Ve,He=Ve,Ae=Pe}if(De===H.length)return l(P,Ae),Oe&&Sn(P,De),Te;if(Ae===null){for(;De<H.length;De++)Ae=ae(P,H[De],ie),Ae!==null&&(L=y(Ae,L,De),He===null?Te=Ae:He.sibling=Ae,He=Ae);return Oe&&Sn(P,De),Te}for(Ae=c(Ae);De<H.length;De++)Pe=ee(Ae,P,De,H[De],ie),Pe!==null&&(t&&Pe.alternate!==null&&Ae.delete(Pe.key===null?De:Pe.key),L=y(Pe,L,De),He===null?Te=Pe:He.sibling=Pe,He=Pe);return t&&Ae.forEach(function(po){return o(P,po)}),Oe&&Sn(P,De),Te}function we(P,L,H,ie){if(H==null)throw Error(s(151));for(var Te=null,He=null,Ae=L,De=L=0,Pe=null,Ve=H.next();Ae!==null&&!Ve.done;De++,Ve=H.next()){Ae.index>De?(Pe=Ae,Ae=null):Pe=Ae.sibling;var po=K(P,Ae,Ve.value,ie);if(po===null){Ae===null&&(Ae=Pe);break}t&&Ae&&po.alternate===null&&o(P,Ae),L=y(po,L,De),He===null?Te=po:He.sibling=po,He=po,Ae=Pe}if(Ve.done)return l(P,Ae),Oe&&Sn(P,De),Te;if(Ae===null){for(;!Ve.done;De++,Ve=H.next())Ve=ae(P,Ve.value,ie),Ve!==null&&(L=y(Ve,L,De),He===null?Te=Ve:He.sibling=Ve,He=Ve);return Oe&&Sn(P,De),Te}for(Ae=c(Ae);!Ve.done;De++,Ve=H.next())Ve=ee(Ae,P,De,Ve.value,ie),Ve!==null&&(t&&Ve.alternate!==null&&Ae.delete(Ve.key===null?De:Ve.key),L=y(Ve,L,De),He===null?Te=Ve:He.sibling=Ve,He=Ve);return t&&Ae.forEach(function(bv){return o(P,bv)}),Oe&&Sn(P,De),Te}function Xe(P,L,H,ie){if(typeof H=="object"&&H!==null&&H.type===E&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case A:e:{for(var Te=H.key;L!==null;){if(L.key===Te){if(Te=H.type,Te===E){if(L.tag===7){l(P,L.sibling),ie=m(L,H.props.children),ie.return=P,P=ie;break e}}else if(L.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===ce&&Io(Te)===L.type){l(P,L.sibling),ie=m(L,H.props),is(ie,H),ie.return=P,P=ie;break e}l(P,L);break}else o(P,L);L=L.sibling}H.type===E?(ie=Eo(H.props.children,P.mode,ie,H.key),ie.return=P,P=ie):(ie=rl(H.type,H.key,H.props,null,P.mode,ie),is(ie,H),ie.return=P,P=ie)}return S(P);case T:e:{for(Te=H.key;L!==null;){if(L.key===Te)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){l(P,L.sibling),ie=m(L,H.children||[]),ie.return=P,P=ie;break e}else{l(P,L);break}else o(P,L);L=L.sibling}ie=pr(H,P.mode,ie),ie.return=P,P=ie}return S(P);case ce:return H=Io(H),Xe(P,L,H,ie)}if(le(H))return Se(P,L,H,ie);if(Q(H)){if(Te=Q(H),typeof Te!="function")throw Error(s(150));return H=Te.call(H),we(P,L,H,ie)}if(typeof H.then=="function")return Xe(P,L,ml(H),ie);if(H.$$typeof===M)return Xe(P,L,dl(P,H),ie);gl(P,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(l(P,L.sibling),ie=m(L,H),ie.return=P,P=ie):(l(P,L),ie=fr(H,P.mode,ie),ie.return=P,P=ie),S(P)):l(P,L)}return function(P,L,H,ie){try{os=0;var Te=Xe(P,L,H,ie);return ci=null,Te}catch(Ae){if(Ae===ri||Ae===pl)throw Ae;var He=Ot(29,Ae,null,P.mode);return He.lanes=ie,He.return=P,He}finally{}}}var Do=Xd(!0),Zd=Xd(!1),Wn=!1;function Tr(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Er(t,o){t=t.updateQueue,o.updateQueue===t&&(o.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Kn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Qn(t,o,l){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(Ye&2)!==0){var m=c.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),c.pending=o,o=al(t),Ud(t,null,l),o}return ll(t,c,o,l),al(t)}function ss(t,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var c=o.lanes;c&=t.pendingLanes,l|=c,o.lanes=l,Vu(t,l)}}function wr(t,o){var l=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var m=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var S={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};y===null?m=y=S:y=y.next=S,l=l.next}while(l!==null);y===null?m=y=o:y=y.next=o}else m=y=o;l={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:c.shared,callbacks:c.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=o:t.next=o,l.lastBaseUpdate=o}var Nr=!1;function ls(){if(Nr){var t=ai;if(t!==null)throw t}}function as(t,o,l,c){Nr=!1;var m=t.updateQueue;Wn=!1;var y=m.firstBaseUpdate,S=m.lastBaseUpdate,_=m.shared.pending;if(_!==null){m.shared.pending=null;var k=_,Y=k.next;k.next=null,S===null?y=Y:S.next=Y,S=k;var oe=t.alternate;oe!==null&&(oe=oe.updateQueue,_=oe.lastBaseUpdate,_!==S&&(_===null?oe.firstBaseUpdate=Y:_.next=Y,oe.lastBaseUpdate=k))}if(y!==null){var ae=m.baseState;S=0,oe=Y=k=null,_=y;do{var K=_.lane&-536870913,ee=K!==_.lane;if(ee?(Ge&K)===K:(c&K)===K){K!==0&&K===li&&(Nr=!0),oe!==null&&(oe=oe.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var Se=t,we=_;K=o;var Xe=l;switch(we.tag){case 1:if(Se=we.payload,typeof Se=="function"){ae=Se.call(Xe,ae,K);break e}ae=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=we.payload,K=typeof Se=="function"?Se.call(Xe,ae,K):Se,K==null)break e;ae=b({},ae,K);break e;case 2:Wn=!0}}K=_.callback,K!==null&&(t.flags|=64,ee&&(t.flags|=8192),ee=m.callbacks,ee===null?m.callbacks=[K]:ee.push(K))}else ee={lane:K,tag:_.tag,payload:_.payload,callback:_.callback,next:null},oe===null?(Y=oe=ee,k=ae):oe=oe.next=ee,S|=K;if(_=_.next,_===null){if(_=m.shared.pending,_===null)break;ee=_,_=ee.next,ee.next=null,m.lastBaseUpdate=ee,m.shared.pending=null}}while(!0);oe===null&&(k=ae),m.baseState=k,m.firstBaseUpdate=Y,m.lastBaseUpdate=oe,y===null&&(m.shared.lanes=0),no|=S,t.lanes=S,t.memoizedState=ae}}function ef(t,o){if(typeof t!="function")throw Error(s(191,t));t.call(o)}function tf(t,o){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)ef(l[t],o)}var ui=N(null),xl=N(0);function nf(t,o){t=Dn,z(xl,t),z(ui,o),Dn=t|o.baseLanes}function Rr(){z(xl,Dn),z(ui,ui.current)}function Mr(){Dn=xl.current,F(ui),F(xl)}var zt=N(null),tn=null;function Xn(t){var o=t.alternate;z(rt,rt.current&1),z(zt,t),tn===null&&(o===null||ui.current!==null||o.memoizedState!==null)&&(tn=t)}function Ir(t){z(rt,rt.current),z(zt,t),tn===null&&(tn=t)}function of(t){t.tag===22?(z(rt,rt.current),z(zt,t),tn===null&&(tn=t)):Zn()}function Zn(){z(rt,rt.current),z(zt,zt.current)}function qt(t){F(zt),tn===t&&(tn=null),F(rt)}var rt=N(0);function yl(t){for(var o=t;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Bc(l)||Gc(l)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Tn=0,Ie=null,Ke=null,dt=null,vl=!1,di=!1,jo=!1,bl=0,rs=0,fi=null,uy=0;function st(){throw Error(s(321))}function kr(t,o){if(o===null)return!1;for(var l=0;l<o.length&&l<t.length;l++)if(!Pt(t[l],o[l]))return!1;return!0}function Dr(t,o,l,c,m,y){return Tn=y,Ie=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,B.H=t===null||t.memoizedState===null?zf:$r,jo=!1,y=l(c,m),jo=!1,di&&(y=lf(o,l,c,m)),sf(t),y}function sf(t){B.H=ds;var o=Ke!==null&&Ke.next!==null;if(Tn=0,dt=Ke=Ie=null,vl=!1,rs=0,fi=null,o)throw Error(s(300));t===null||ft||(t=t.dependencies,t!==null&&ul(t)&&(ft=!0))}function lf(t,o,l,c){Ie=t;var m=0;do{if(di&&(fi=null),rs=0,di=!1,25<=m)throw Error(s(301));if(m+=1,dt=Ke=null,t.updateQueue!=null){var y=t.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}B.H=qf,y=o(l,c)}while(di);return y}function dy(){var t=B.H,o=t.useState()[0];return o=typeof o.then=="function"?cs(o):o,t=t.useState()[0],(Ke!==null?Ke.memoizedState:null)!==t&&(Ie.flags|=1024),o}function jr(){var t=bl!==0;return bl=0,t}function Lr(t,o,l){o.updateQueue=t.updateQueue,o.flags&=-2053,t.lanes&=~l}function Ur(t){if(vl){for(t=t.memoizedState;t!==null;){var o=t.queue;o!==null&&(o.pending=null),t=t.next}vl=!1}Tn=0,dt=Ke=Ie=null,di=!1,rs=bl=0,fi=null}function wt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Ie.memoizedState=dt=t:dt=dt.next=t,dt}function ct(){if(Ke===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Ke.next;var o=dt===null?Ie.memoizedState:dt.next;if(o!==null)dt=o,Ke=t;else{if(t===null)throw Ie.alternate===null?Error(s(467)):Error(s(310));Ke=t,t={memoizedState:Ke.memoizedState,baseState:Ke.baseState,baseQueue:Ke.baseQueue,queue:Ke.queue,next:null},dt===null?Ie.memoizedState=dt=t:dt=dt.next=t}return dt}function Cl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cs(t){var o=rs;return rs+=1,fi===null&&(fi=[]),t=Wd(fi,t,o),o=Ie,(dt===null?o.memoizedState:dt.next)===null&&(o=o.alternate,B.H=o===null||o.memoizedState===null?zf:$r),t}function Sl(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return cs(t);if(t.$$typeof===M)return Ct(t)}throw Error(s(438,String(t)))}function Br(t){var o=null,l=Ie.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var c=Ie.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(m){return m.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=Cl(),Ie.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(t),c=0;c<t;c++)l[c]=xe;return o.index++,l}function En(t,o){return typeof o=="function"?o(t):o}function Al(t){var o=ct();return Gr(o,Ke,t)}function Gr(t,o,l){var c=t.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=l;var m=t.baseQueue,y=c.pending;if(y!==null){if(m!==null){var S=m.next;m.next=y.next,y.next=S}o.baseQueue=m=y,c.pending=null}if(y=t.baseState,m===null)t.memoizedState=y;else{o=m.next;var _=S=null,k=null,Y=o,oe=!1;do{var ae=Y.lane&-536870913;if(ae!==Y.lane?(Ge&ae)===ae:(Tn&ae)===ae){var K=Y.revertLane;if(K===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ae===li&&(oe=!0);else if((Tn&K)===K){Y=Y.next,K===li&&(oe=!0);continue}else ae={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},k===null?(_=k=ae,S=y):k=k.next=ae,Ie.lanes|=K,no|=K;ae=Y.action,jo&&l(y,ae),y=Y.hasEagerState?Y.eagerState:l(y,ae)}else K={lane:ae,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},k===null?(_=k=K,S=y):k=k.next=K,Ie.lanes|=ae,no|=ae;Y=Y.next}while(Y!==null&&Y!==o);if(k===null?S=y:k.next=_,!Pt(y,t.memoizedState)&&(ft=!0,oe&&(l=ai,l!==null)))throw l;t.memoizedState=y,t.baseState=S,t.baseQueue=k,c.lastRenderedState=y}return m===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function Pr(t){var o=ct(),l=o.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=t;var c=l.dispatch,m=l.pending,y=o.memoizedState;if(m!==null){l.pending=null;var S=m=m.next;do y=t(y,S.action),S=S.next;while(S!==m);Pt(y,o.memoizedState)||(ft=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),l.lastRenderedState=y}return[y,c]}function af(t,o,l){var c=Ie,m=ct(),y=Oe;if(y){if(l===void 0)throw Error(s(407));l=l()}else l=o();var S=!Pt((Ke||m).memoizedState,l);if(S&&(m.memoizedState=l,ft=!0),m=m.queue,qr(uf.bind(null,c,m,t),[t]),m.getSnapshot!==o||S||dt!==null&&dt.memoizedState.tag&1){if(c.flags|=2048,pi(9,{destroy:void 0},cf.bind(null,c,m,l,o),null),et===null)throw Error(s(349));y||(Tn&127)!==0||rf(c,o,l)}return l}function rf(t,o,l){t.flags|=16384,t={getSnapshot:o,value:l},o=Ie.updateQueue,o===null?(o=Cl(),Ie.updateQueue=o,o.stores=[t]):(l=o.stores,l===null?o.stores=[t]:l.push(t))}function cf(t,o,l,c){o.value=l,o.getSnapshot=c,df(o)&&ff(t)}function uf(t,o,l){return l(function(){df(o)&&ff(t)})}function df(t){var o=t.getSnapshot;t=t.value;try{var l=o();return!Pt(t,l)}catch{return!0}}function ff(t){var o=To(t,2);o!==null&&Ut(o,t,2)}function Or(t){var o=wt();if(typeof t=="function"){var l=t;if(t=l(),jo){qn(!0);try{l()}finally{qn(!1)}}}return o.memoizedState=o.baseState=t,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:En,lastRenderedState:t},o}function pf(t,o,l,c){return t.baseState=l,Gr(t,Ke,typeof c=="function"?c:En)}function fy(t,o,l,c,m){if(El(t))throw Error(s(485));if(t=o.action,t!==null){var y={payload:m,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){y.listeners.push(S)}};B.T!==null?l(!0):y.isTransition=!1,c(y),l=o.pending,l===null?(y.next=o.pending=y,hf(o,y)):(y.next=l.next,o.pending=l.next=y)}}function hf(t,o){var l=o.action,c=o.payload,m=t.state;if(o.isTransition){var y=B.T,S={};B.T=S;try{var _=l(m,c),k=B.S;k!==null&&k(S,_),mf(t,o,_)}catch(Y){zr(t,o,Y)}finally{y!==null&&S.types!==null&&(y.types=S.types),B.T=y}}else try{y=l(m,c),mf(t,o,y)}catch(Y){zr(t,o,Y)}}function mf(t,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){gf(t,o,c)},function(c){return zr(t,o,c)}):gf(t,o,l)}function gf(t,o,l){o.status="fulfilled",o.value=l,xf(o),t.state=l,o=t.pending,o!==null&&(l=o.next,l===o?t.pending=null:(l=l.next,o.next=l,hf(t,l)))}function zr(t,o,l){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=l,xf(o),o=o.next;while(o!==c)}t.action=null}function xf(t){t=t.listeners;for(var o=0;o<t.length;o++)(0,t[o])()}function yf(t,o){return o}function vf(t,o){if(Oe){var l=et.formState;if(l!==null){e:{var c=Ie;if(Oe){if(nt){t:{for(var m=nt,y=en;m.nodeType!==8;){if(!y){m=null;break t}if(m=nn(m.nextSibling),m===null){m=null;break t}}y=m.data,m=y==="F!"||y==="F"?m:null}if(m){nt=nn(m.nextSibling),c=m.data==="F!";break e}}Jn(c)}c=!1}c&&(o=l[0])}}return l=wt(),l.memoizedState=l.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yf,lastRenderedState:o},l.queue=c,l=Gf.bind(null,Ie,c),c.dispatch=l,c=Or(!1),y=Jr.bind(null,Ie,!1,c.queue),c=wt(),m={state:o,dispatch:null,action:t,pending:null},c.queue=m,l=fy.bind(null,Ie,m,y,l),m.dispatch=l,c.memoizedState=t,[o,l,!1]}function bf(t){var o=ct();return Cf(o,Ke,t)}function Cf(t,o,l){if(o=Gr(t,o,yf)[0],t=Al(En)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=cs(o)}catch(S){throw S===ri?pl:S}else c=o;o=ct();var m=o.queue,y=m.dispatch;return l!==o.memoizedState&&(Ie.flags|=2048,pi(9,{destroy:void 0},py.bind(null,m,l),null)),[c,y,t]}function py(t,o){t.action=o}function Sf(t){var o=ct(),l=Ke;if(l!==null)return Cf(o,l,t);ct(),o=o.memoizedState,l=ct();var c=l.queue.dispatch;return l.memoizedState=t,[o,c,!1]}function pi(t,o,l,c){return t={tag:t,create:l,deps:c,inst:o,next:null},o=Ie.updateQueue,o===null&&(o=Cl(),Ie.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=t.next=t:(c=l.next,l.next=t,t.next=c,o.lastEffect=t),t}function Af(){return ct().memoizedState}function _l(t,o,l,c){var m=wt();Ie.flags|=t,m.memoizedState=pi(1|o,{destroy:void 0},l,c===void 0?null:c)}function Tl(t,o,l,c){var m=ct();c=c===void 0?null:c;var y=m.memoizedState.inst;Ke!==null&&c!==null&&kr(c,Ke.memoizedState.deps)?m.memoizedState=pi(o,y,l,c):(Ie.flags|=t,m.memoizedState=pi(1|o,y,l,c))}function _f(t,o){_l(8390656,8,t,o)}function qr(t,o){Tl(2048,8,t,o)}function hy(t){Ie.flags|=4;var o=Ie.updateQueue;if(o===null)o=Cl(),Ie.updateQueue=o,o.events=[t];else{var l=o.events;l===null?o.events=[t]:l.push(t)}}function Tf(t){var o=ct().memoizedState;return hy({ref:o,nextImpl:t}),function(){if((Ye&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function Ef(t,o){return Tl(4,2,t,o)}function wf(t,o){return Tl(4,4,t,o)}function Nf(t,o){if(typeof o=="function"){t=t();var l=o(t);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return t=t(),o.current=t,function(){o.current=null}}function Rf(t,o,l){l=l!=null?l.concat([t]):null,Tl(4,4,Nf.bind(null,o,t),l)}function Hr(){}function Mf(t,o){var l=ct();o=o===void 0?null:o;var c=l.memoizedState;return o!==null&&kr(o,c[1])?c[0]:(l.memoizedState=[t,o],t)}function If(t,o){var l=ct();o=o===void 0?null:o;var c=l.memoizedState;if(o!==null&&kr(o,c[1]))return c[0];if(c=t(),jo){qn(!0);try{t()}finally{qn(!1)}}return l.memoizedState=[c,o],c}function Vr(t,o,l){return l===void 0||(Tn&1073741824)!==0&&(Ge&261930)===0?t.memoizedState=o:(t.memoizedState=l,t=kp(),Ie.lanes|=t,no|=t,l)}function kf(t,o,l,c){return Pt(l,o)?l:ui.current!==null?(t=Vr(t,l,c),Pt(t,o)||(ft=!0),t):(Tn&42)===0||(Tn&1073741824)!==0&&(Ge&261930)===0?(ft=!0,t.memoizedState=l):(t=kp(),Ie.lanes|=t,no|=t,o)}function Df(t,o,l,c,m){var y=j.p;j.p=y!==0&&8>y?y:8;var S=B.T,_={};B.T=_,Jr(t,!1,o,l);try{var k=m(),Y=B.S;if(Y!==null&&Y(_,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var oe=cy(k,c);us(t,o,oe,Ft(t))}else us(t,o,c,Ft(t))}catch(ae){us(t,o,{then:function(){},status:"rejected",reason:ae},Ft())}finally{j.p=y,S!==null&&_.types!==null&&(S.types=_.types),B.T=S}}function my(){}function Fr(t,o,l,c){if(t.tag!==5)throw Error(s(476));var m=jf(t).queue;Df(t,m,o,Z,l===null?my:function(){return Lf(t),l(c)})}function jf(t){var o=t.memoizedState;if(o!==null)return o;o={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:En,lastRenderedState:Z},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:En,lastRenderedState:l},next:null},t.memoizedState=o,t=t.alternate,t!==null&&(t.memoizedState=o),o}function Lf(t){var o=jf(t);o.next===null&&(o=t.alternate.memoizedState),us(t,o.next.queue,{},Ft())}function Yr(){return Ct(ws)}function Uf(){return ct().memoizedState}function Bf(){return ct().memoizedState}function gy(t){for(var o=t.return;o!==null;){switch(o.tag){case 24:case 3:var l=Ft();t=Kn(l);var c=Qn(o,t,l);c!==null&&(Ut(c,o,l),ss(c,o,l)),o={cache:Cr()},t.payload=o;return}o=o.return}}function xy(t,o,l){var c=Ft();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},El(t)?Pf(o,l):(l=ur(t,o,l,c),l!==null&&(Ut(l,t,c),Of(l,o,c)))}function Gf(t,o,l){var c=Ft();us(t,o,l,c)}function us(t,o,l,c){var m={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(El(t))Pf(o,m);else{var y=t.alternate;if(t.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var S=o.lastRenderedState,_=y(S,l);if(m.hasEagerState=!0,m.eagerState=_,Pt(_,S))return ll(t,o,m,0),et===null&&sl(),!1}catch{}finally{}if(l=ur(t,o,m,c),l!==null)return Ut(l,t,c),Of(l,o,c),!0}return!1}function Jr(t,o,l,c){if(c={lane:2,revertLane:Tc(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},El(t)){if(o)throw Error(s(479))}else o=ur(t,l,c,2),o!==null&&Ut(o,t,2)}function El(t){var o=t.alternate;return t===Ie||o!==null&&o===Ie}function Pf(t,o){di=vl=!0;var l=t.pending;l===null?o.next=o:(o.next=l.next,l.next=o),t.pending=o}function Of(t,o,l){if((l&4194048)!==0){var c=o.lanes;c&=t.pendingLanes,l|=c,o.lanes=l,Vu(t,l)}}var ds={readContext:Ct,use:Sl,useCallback:st,useContext:st,useEffect:st,useImperativeHandle:st,useLayoutEffect:st,useInsertionEffect:st,useMemo:st,useReducer:st,useRef:st,useState:st,useDebugValue:st,useDeferredValue:st,useTransition:st,useSyncExternalStore:st,useId:st,useHostTransitionStatus:st,useFormState:st,useActionState:st,useOptimistic:st,useMemoCache:st,useCacheRefresh:st};ds.useEffectEvent=st;var zf={readContext:Ct,use:Sl,useCallback:function(t,o){return wt().memoizedState=[t,o===void 0?null:o],t},useContext:Ct,useEffect:_f,useImperativeHandle:function(t,o,l){l=l!=null?l.concat([t]):null,_l(4194308,4,Nf.bind(null,o,t),l)},useLayoutEffect:function(t,o){return _l(4194308,4,t,o)},useInsertionEffect:function(t,o){_l(4,2,t,o)},useMemo:function(t,o){var l=wt();o=o===void 0?null:o;var c=t();if(jo){qn(!0);try{t()}finally{qn(!1)}}return l.memoizedState=[c,o],c},useReducer:function(t,o,l){var c=wt();if(l!==void 0){var m=l(o);if(jo){qn(!0);try{l(o)}finally{qn(!1)}}}else m=o;return c.memoizedState=c.baseState=m,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:m},c.queue=t,t=t.dispatch=xy.bind(null,Ie,t),[c.memoizedState,t]},useRef:function(t){var o=wt();return t={current:t},o.memoizedState=t},useState:function(t){t=Or(t);var o=t.queue,l=Gf.bind(null,Ie,o);return o.dispatch=l,[t.memoizedState,l]},useDebugValue:Hr,useDeferredValue:function(t,o){var l=wt();return Vr(l,t,o)},useTransition:function(){var t=Or(!1);return t=Df.bind(null,Ie,t.queue,!0,!1),wt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,o,l){var c=Ie,m=wt();if(Oe){if(l===void 0)throw Error(s(407));l=l()}else{if(l=o(),et===null)throw Error(s(349));(Ge&127)!==0||rf(c,o,l)}m.memoizedState=l;var y={value:l,getSnapshot:o};return m.queue=y,_f(uf.bind(null,c,y,t),[t]),c.flags|=2048,pi(9,{destroy:void 0},cf.bind(null,c,y,l,o),null),l},useId:function(){var t=wt(),o=et.identifierPrefix;if(Oe){var l=mn,c=hn;l=(c&~(1<<32-Gt(c)-1)).toString(32)+l,o="_"+o+"R_"+l,l=bl++,0<l&&(o+="H"+l.toString(32)),o+="_"}else l=uy++,o="_"+o+"r_"+l.toString(32)+"_";return t.memoizedState=o},useHostTransitionStatus:Yr,useFormState:vf,useActionState:vf,useOptimistic:function(t){var o=wt();o.memoizedState=o.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=Jr.bind(null,Ie,!0,l),l.dispatch=o,[t,o]},useMemoCache:Br,useCacheRefresh:function(){return wt().memoizedState=gy.bind(null,Ie)},useEffectEvent:function(t){var o=wt(),l={impl:t};return o.memoizedState=l,function(){if((Ye&2)!==0)throw Error(s(440));return l.impl.apply(void 0,arguments)}}},$r={readContext:Ct,use:Sl,useCallback:Mf,useContext:Ct,useEffect:qr,useImperativeHandle:Rf,useInsertionEffect:Ef,useLayoutEffect:wf,useMemo:If,useReducer:Al,useRef:Af,useState:function(){return Al(En)},useDebugValue:Hr,useDeferredValue:function(t,o){var l=ct();return kf(l,Ke.memoizedState,t,o)},useTransition:function(){var t=Al(En)[0],o=ct().memoizedState;return[typeof t=="boolean"?t:cs(t),o]},useSyncExternalStore:af,useId:Uf,useHostTransitionStatus:Yr,useFormState:bf,useActionState:bf,useOptimistic:function(t,o){var l=ct();return pf(l,Ke,t,o)},useMemoCache:Br,useCacheRefresh:Bf};$r.useEffectEvent=Tf;var qf={readContext:Ct,use:Sl,useCallback:Mf,useContext:Ct,useEffect:qr,useImperativeHandle:Rf,useInsertionEffect:Ef,useLayoutEffect:wf,useMemo:If,useReducer:Pr,useRef:Af,useState:function(){return Pr(En)},useDebugValue:Hr,useDeferredValue:function(t,o){var l=ct();return Ke===null?Vr(l,t,o):kf(l,Ke.memoizedState,t,o)},useTransition:function(){var t=Pr(En)[0],o=ct().memoizedState;return[typeof t=="boolean"?t:cs(t),o]},useSyncExternalStore:af,useId:Uf,useHostTransitionStatus:Yr,useFormState:Sf,useActionState:Sf,useOptimistic:function(t,o){var l=ct();return Ke!==null?pf(l,Ke,t,o):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:Br,useCacheRefresh:Bf};qf.useEffectEvent=Tf;function Wr(t,o,l,c){o=t.memoizedState,l=l(c,o),l=l==null?o:b({},o,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var Kr={enqueueSetState:function(t,o,l){t=t._reactInternals;var c=Ft(),m=Kn(c);m.payload=o,l!=null&&(m.callback=l),o=Qn(t,m,c),o!==null&&(Ut(o,t,c),ss(o,t,c))},enqueueReplaceState:function(t,o,l){t=t._reactInternals;var c=Ft(),m=Kn(c);m.tag=1,m.payload=o,l!=null&&(m.callback=l),o=Qn(t,m,c),o!==null&&(Ut(o,t,c),ss(o,t,c))},enqueueForceUpdate:function(t,o){t=t._reactInternals;var l=Ft(),c=Kn(l);c.tag=2,o!=null&&(c.callback=o),o=Qn(t,c,l),o!==null&&(Ut(o,t,l),ss(o,t,l))}};function Hf(t,o,l,c,m,y,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,y,S):o.prototype&&o.prototype.isPureReactComponent?!Qi(l,c)||!Qi(m,y):!0}function Vf(t,o,l,c){t=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,c),o.state!==t&&Kr.enqueueReplaceState(o,o.state,null)}function Lo(t,o){var l=o;if("ref"in o){l={};for(var c in o)c!=="ref"&&(l[c]=o[c])}if(t=t.defaultProps){l===o&&(l=b({},l));for(var m in t)l[m]===void 0&&(l[m]=t[m])}return l}function Ff(t){il(t)}function Yf(t){console.error(t)}function Jf(t){il(t)}function wl(t,o){try{var l=t.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function $f(t,o,l){try{var c=t.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Qr(t,o,l){return l=Kn(l),l.tag=3,l.payload={element:null},l.callback=function(){wl(t,o)},l}function Wf(t){return t=Kn(t),t.tag=3,t}function Kf(t,o,l,c){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var y=c.value;t.payload=function(){return m(y)},t.callback=function(){$f(o,l,c)}}var S=l.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(t.callback=function(){$f(o,l,c),typeof m!="function"&&(oo===null?oo=new Set([this]):oo.add(this));var _=c.stack;this.componentDidCatch(c.value,{componentStack:_!==null?_:""})})}function yy(t,o,l,c,m){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=l.alternate,o!==null&&si(o,l,m,!0),l=zt.current,l!==null){switch(l.tag){case 31:case 13:return tn===null?Pl():l.alternate===null&&lt===0&&(lt=3),l.flags&=-257,l.flags|=65536,l.lanes=m,c===hl?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([c]):o.add(c),Sc(t,c,m)),!1;case 22:return l.flags|=65536,c===hl?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([c]):l.add(c)),Sc(t,c,m)),!1}throw Error(s(435,l.tag))}return Sc(t,c,m),Pl(),!1}if(Oe)return o=zt.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=m,c!==gr&&(t=Error(s(422),{cause:c}),es(Qt(t,l)))):(c!==gr&&(o=Error(s(423),{cause:c}),es(Qt(o,l))),t=t.current.alternate,t.flags|=65536,m&=-m,t.lanes|=m,c=Qt(c,l),m=Qr(t.stateNode,c,m),wr(t,m),lt!==4&&(lt=2)),!1;var y=Error(s(520),{cause:c});if(y=Qt(y,l),vs===null?vs=[y]:vs.push(y),lt!==4&&(lt=2),o===null)return!0;c=Qt(c,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,t=m&-m,l.lanes|=t,t=Qr(l.stateNode,c,t),wr(l,t),!1;case 1:if(o=l.type,y=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(oo===null||!oo.has(y))))return l.flags|=65536,m&=-m,l.lanes|=m,m=Wf(m),Kf(m,t,l,c),wr(l,m),!1}l=l.return}while(l!==null);return!1}var Xr=Error(s(461)),ft=!1;function St(t,o,l,c){o.child=t===null?Zd(o,null,l,c):Do(o,t.child,l,c)}function Qf(t,o,l,c,m){l=l.render;var y=o.ref;if("ref"in c){var S={};for(var _ in c)_!=="ref"&&(S[_]=c[_])}else S=c;return Ro(o),c=Dr(t,o,l,S,y,m),_=jr(),t!==null&&!ft?(Lr(t,o,m),wn(t,o,m)):(Oe&&_&&hr(o),o.flags|=1,St(t,o,c,m),o.child)}function Xf(t,o,l,c,m){if(t===null){var y=l.type;return typeof y=="function"&&!dr(y)&&y.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=y,Zf(t,o,y,c,m)):(t=rl(l.type,null,c,o,o.mode,m),t.ref=o.ref,t.return=o,o.child=t)}if(y=t.child,!lc(t,m)){var S=y.memoizedProps;if(l=l.compare,l=l!==null?l:Qi,l(S,c)&&t.ref===o.ref)return wn(t,o,m)}return o.flags|=1,t=Cn(y,c),t.ref=o.ref,t.return=o,o.child=t}function Zf(t,o,l,c,m){if(t!==null){var y=t.memoizedProps;if(Qi(y,c)&&t.ref===o.ref)if(ft=!1,o.pendingProps=c=y,lc(t,m))(t.flags&131072)!==0&&(ft=!0);else return o.lanes=t.lanes,wn(t,o,m)}return Zr(t,o,l,c,m)}function ep(t,o,l,c){var m=c.children,y=t!==null?t.memoizedState:null;if(t===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(y=y!==null?y.baseLanes|l:l,t!==null){for(c=o.child=t.child,m=0;c!==null;)m=m|c.lanes|c.childLanes,c=c.sibling;c=m&~y}else c=0,o.child=null;return tp(t,o,y,l,c)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},t!==null&&fl(o,y!==null?y.cachePool:null),y!==null?nf(o,y):Rr(),of(o);else return c=o.lanes=536870912,tp(t,o,y!==null?y.baseLanes|l:l,l,c)}else y!==null?(fl(o,y.cachePool),nf(o,y),Zn(),o.memoizedState=null):(t!==null&&fl(o,null),Rr(),Zn());return St(t,o,m,l),o.child}function fs(t,o){return t!==null&&t.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function tp(t,o,l,c,m){var y=Ar();return y=y===null?null:{parent:ut._currentValue,pool:y},o.memoizedState={baseLanes:l,cachePool:y},t!==null&&fl(o,null),Rr(),of(o),t!==null&&si(t,o,c,!0),o.childLanes=m,null}function Nl(t,o){return o=Ml({mode:o.mode,children:o.children},t.mode),o.ref=t.ref,t.child=o,o.return=t,o}function np(t,o,l){return Do(o,t.child,null,l),t=Nl(o,o.pendingProps),t.flags|=2,qt(o),o.memoizedState=null,t}function vy(t,o,l){var c=o.pendingProps,m=(o.flags&128)!==0;if(o.flags&=-129,t===null){if(Oe){if(c.mode==="hidden")return t=Nl(o,c),o.lanes=536870912,fs(null,t);if(Ir(o),(t=nt)?(t=hh(t,en),t=t!==null&&t.data==="&"?t:null,t!==null&&(o.memoizedState={dehydrated:t,treeContext:Fn!==null?{id:hn,overflow:mn}:null,retryLane:536870912,hydrationErrors:null},l=Gd(t),l.return=o,o.child=l,bt=o,nt=null)):t=null,t===null)throw Jn(o);return o.lanes=536870912,null}return Nl(o,c)}var y=t.memoizedState;if(y!==null){var S=y.dehydrated;if(Ir(o),m)if(o.flags&256)o.flags&=-257,o=np(t,o,l);else if(o.memoizedState!==null)o.child=t.child,o.flags|=128,o=null;else throw Error(s(558));else if(ft||si(t,o,l,!1),m=(l&t.childLanes)!==0,ft||m){if(c=et,c!==null&&(S=Fu(c,l),S!==0&&S!==y.retryLane))throw y.retryLane=S,To(t,S),Ut(c,t,S),Xr;Pl(),o=np(t,o,l)}else t=y.treeContext,nt=nn(S.nextSibling),bt=o,Oe=!0,Yn=null,en=!1,t!==null&&zd(o,t),o=Nl(o,c),o.flags|=4096;return o}return t=Cn(t.child,{mode:c.mode,children:c.children}),t.ref=o.ref,o.child=t,t.return=o,t}function Rl(t,o){var l=o.ref;if(l===null)t!==null&&t.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(s(284));(t===null||t.ref!==l)&&(o.flags|=4194816)}}function Zr(t,o,l,c,m){return Ro(o),l=Dr(t,o,l,c,void 0,m),c=jr(),t!==null&&!ft?(Lr(t,o,m),wn(t,o,m)):(Oe&&c&&hr(o),o.flags|=1,St(t,o,l,m),o.child)}function op(t,o,l,c,m,y){return Ro(o),o.updateQueue=null,l=lf(o,c,l,m),sf(t),c=jr(),t!==null&&!ft?(Lr(t,o,y),wn(t,o,y)):(Oe&&c&&hr(o),o.flags|=1,St(t,o,l,y),o.child)}function ip(t,o,l,c,m){if(Ro(o),o.stateNode===null){var y=ti,S=l.contextType;typeof S=="object"&&S!==null&&(y=Ct(S)),y=new l(c,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Kr,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=c,y.state=o.memoizedState,y.refs={},Tr(o),S=l.contextType,y.context=typeof S=="object"&&S!==null?Ct(S):ti,y.state=o.memoizedState,S=l.getDerivedStateFromProps,typeof S=="function"&&(Wr(o,l,S,c),y.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(S=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),S!==y.state&&Kr.enqueueReplaceState(y,y.state,null),as(o,c,y,m),ls(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(t===null){y=o.stateNode;var _=o.memoizedProps,k=Lo(l,_);y.props=k;var Y=y.context,oe=l.contextType;S=ti,typeof oe=="object"&&oe!==null&&(S=Ct(oe));var ae=l.getDerivedStateFromProps;oe=typeof ae=="function"||typeof y.getSnapshotBeforeUpdate=="function",_=o.pendingProps!==_,oe||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(_||Y!==S)&&Vf(o,y,c,S),Wn=!1;var K=o.memoizedState;y.state=K,as(o,c,y,m),ls(),Y=o.memoizedState,_||K!==Y||Wn?(typeof ae=="function"&&(Wr(o,l,ae,c),Y=o.memoizedState),(k=Wn||Hf(o,l,k,c,K,Y,S))?(oe||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=Y),y.props=c,y.state=Y,y.context=S,c=k):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{y=o.stateNode,Er(t,o),S=o.memoizedProps,oe=Lo(l,S),y.props=oe,ae=o.pendingProps,K=y.context,Y=l.contextType,k=ti,typeof Y=="object"&&Y!==null&&(k=Ct(Y)),_=l.getDerivedStateFromProps,(Y=typeof _=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(S!==ae||K!==k)&&Vf(o,y,c,k),Wn=!1,K=o.memoizedState,y.state=K,as(o,c,y,m),ls();var ee=o.memoizedState;S!==ae||K!==ee||Wn||t!==null&&t.dependencies!==null&&ul(t.dependencies)?(typeof _=="function"&&(Wr(o,l,_,c),ee=o.memoizedState),(oe=Wn||Hf(o,l,oe,c,K,ee,k)||t!==null&&t.dependencies!==null&&ul(t.dependencies))?(Y||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(c,ee,k),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(c,ee,k)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||S===t.memoizedProps&&K===t.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&K===t.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=ee),y.props=c,y.state=ee,y.context=k,c=oe):(typeof y.componentDidUpdate!="function"||S===t.memoizedProps&&K===t.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||S===t.memoizedProps&&K===t.memoizedState||(o.flags|=1024),c=!1)}return y=c,Rl(t,o),c=(o.flags&128)!==0,y||c?(y=o.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,t!==null&&c?(o.child=Do(o,t.child,null,m),o.child=Do(o,null,l,m)):St(t,o,l,m),o.memoizedState=y.state,t=o.child):t=wn(t,o,m),t}function sp(t,o,l,c){return wo(),o.flags|=256,St(t,o,l,c),o.child}var ec={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tc(t){return{baseLanes:t,cachePool:Jd()}}function nc(t,o,l){return t=t!==null?t.childLanes&~l:0,o&&(t|=Vt),t}function lp(t,o,l){var c=o.pendingProps,m=!1,y=(o.flags&128)!==0,S;if((S=y)||(S=t!==null&&t.memoizedState===null?!1:(rt.current&2)!==0),S&&(m=!0,o.flags&=-129),S=(o.flags&32)!==0,o.flags&=-33,t===null){if(Oe){if(m?Xn(o):Zn(),(t=nt)?(t=hh(t,en),t=t!==null&&t.data!=="&"?t:null,t!==null&&(o.memoizedState={dehydrated:t,treeContext:Fn!==null?{id:hn,overflow:mn}:null,retryLane:536870912,hydrationErrors:null},l=Gd(t),l.return=o,o.child=l,bt=o,nt=null)):t=null,t===null)throw Jn(o);return Gc(t)?o.lanes=32:o.lanes=536870912,null}var _=c.children;return c=c.fallback,m?(Zn(),m=o.mode,_=Ml({mode:"hidden",children:_},m),c=Eo(c,m,l,null),_.return=o,c.return=o,_.sibling=c,o.child=_,c=o.child,c.memoizedState=tc(l),c.childLanes=nc(t,S,l),o.memoizedState=ec,fs(null,c)):(Xn(o),oc(o,_))}var k=t.memoizedState;if(k!==null&&(_=k.dehydrated,_!==null)){if(y)o.flags&256?(Xn(o),o.flags&=-257,o=ic(t,o,l)):o.memoizedState!==null?(Zn(),o.child=t.child,o.flags|=128,o=null):(Zn(),_=c.fallback,m=o.mode,c=Ml({mode:"visible",children:c.children},m),_=Eo(_,m,l,null),_.flags|=2,c.return=o,_.return=o,c.sibling=_,o.child=c,Do(o,t.child,null,l),c=o.child,c.memoizedState=tc(l),c.childLanes=nc(t,S,l),o.memoizedState=ec,o=fs(null,c));else if(Xn(o),Gc(_)){if(S=_.nextSibling&&_.nextSibling.dataset,S)var Y=S.dgst;S=Y,c=Error(s(419)),c.stack="",c.digest=S,es({value:c,source:null,stack:null}),o=ic(t,o,l)}else if(ft||si(t,o,l,!1),S=(l&t.childLanes)!==0,ft||S){if(S=et,S!==null&&(c=Fu(S,l),c!==0&&c!==k.retryLane))throw k.retryLane=c,To(t,c),Ut(S,t,c),Xr;Bc(_)||Pl(),o=ic(t,o,l)}else Bc(_)?(o.flags|=192,o.child=t.child,o=null):(t=k.treeContext,nt=nn(_.nextSibling),bt=o,Oe=!0,Yn=null,en=!1,t!==null&&zd(o,t),o=oc(o,c.children),o.flags|=4096);return o}return m?(Zn(),_=c.fallback,m=o.mode,k=t.child,Y=k.sibling,c=Cn(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,Y!==null?_=Cn(Y,_):(_=Eo(_,m,l,null),_.flags|=2),_.return=o,c.return=o,c.sibling=_,o.child=c,fs(null,c),c=o.child,_=t.child.memoizedState,_===null?_=tc(l):(m=_.cachePool,m!==null?(k=ut._currentValue,m=m.parent!==k?{parent:k,pool:k}:m):m=Jd(),_={baseLanes:_.baseLanes|l,cachePool:m}),c.memoizedState=_,c.childLanes=nc(t,S,l),o.memoizedState=ec,fs(t.child,c)):(Xn(o),l=t.child,t=l.sibling,l=Cn(l,{mode:"visible",children:c.children}),l.return=o,l.sibling=null,t!==null&&(S=o.deletions,S===null?(o.deletions=[t],o.flags|=16):S.push(t)),o.child=l,o.memoizedState=null,l)}function oc(t,o){return o=Ml({mode:"visible",children:o},t.mode),o.return=t,t.child=o}function Ml(t,o){return t=Ot(22,t,null,o),t.lanes=0,t}function ic(t,o,l){return Do(o,t.child,null,l),t=oc(o,o.pendingProps.children),t.flags|=2,o.memoizedState=null,t}function ap(t,o,l){t.lanes|=o;var c=t.alternate;c!==null&&(c.lanes|=o),vr(t.return,o,l)}function sc(t,o,l,c,m,y){var S=t.memoizedState;S===null?t.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:m,treeForkCount:y}:(S.isBackwards=o,S.rendering=null,S.renderingStartTime=0,S.last=c,S.tail=l,S.tailMode=m,S.treeForkCount=y)}function rp(t,o,l){var c=o.pendingProps,m=c.revealOrder,y=c.tail;c=c.children;var S=rt.current,_=(S&2)!==0;if(_?(S=S&1|2,o.flags|=128):S&=1,z(rt,S),St(t,o,c,l),c=Oe?Zi:0,!_&&t!==null&&(t.flags&128)!==0)e:for(t=o.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ap(t,l,o);else if(t.tag===19)ap(t,l,o);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===o)break e;for(;t.sibling===null;){if(t.return===null||t.return===o)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(m){case"forwards":for(l=o.child,m=null;l!==null;)t=l.alternate,t!==null&&yl(t)===null&&(m=l),l=l.sibling;l=m,l===null?(m=o.child,o.child=null):(m=l.sibling,l.sibling=null),sc(o,!1,m,l,y,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,m=o.child,o.child=null;m!==null;){if(t=m.alternate,t!==null&&yl(t)===null){o.child=m;break}t=m.sibling,m.sibling=l,l=m,m=t}sc(o,!0,l,null,y,c);break;case"together":sc(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function wn(t,o,l){if(t!==null&&(o.dependencies=t.dependencies),no|=o.lanes,(l&o.childLanes)===0)if(t!==null){if(si(t,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(t!==null&&o.child!==t.child)throw Error(s(153));if(o.child!==null){for(t=o.child,l=Cn(t,t.pendingProps),o.child=l,l.return=o;t.sibling!==null;)t=t.sibling,l=l.sibling=Cn(t,t.pendingProps),l.return=o;l.sibling=null}return o.child}function lc(t,o){return(t.lanes&o)!==0?!0:(t=t.dependencies,!!(t!==null&&ul(t)))}function by(t,o,l){switch(o.tag){case 3:me(o,o.stateNode.containerInfo),$n(o,ut,t.memoizedState.cache),wo();break;case 27:case 5:je(o);break;case 4:me(o,o.stateNode.containerInfo);break;case 10:$n(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Ir(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(Xn(o),o.flags|=128,null):(l&o.child.childLanes)!==0?lp(t,o,l):(Xn(o),t=wn(t,o,l),t!==null?t.sibling:null);Xn(o);break;case 19:var m=(t.flags&128)!==0;if(c=(l&o.childLanes)!==0,c||(si(t,o,l,!1),c=(l&o.childLanes)!==0),m){if(c)return rp(t,o,l);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),z(rt,rt.current),c)break;return null;case 22:return o.lanes=0,ep(t,o,l,o.pendingProps);case 24:$n(o,ut,t.memoizedState.cache)}return wn(t,o,l)}function cp(t,o,l){if(t!==null)if(t.memoizedProps!==o.pendingProps)ft=!0;else{if(!lc(t,l)&&(o.flags&128)===0)return ft=!1,by(t,o,l);ft=(t.flags&131072)!==0}else ft=!1,Oe&&(o.flags&1048576)!==0&&Od(o,Zi,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(t=Io(o.elementType),o.type=t,typeof t=="function")dr(t)?(c=Lo(t,c),o.tag=1,o=ip(null,o,t,c,l)):(o.tag=0,o=Zr(null,o,t,c,l));else{if(t!=null){var m=t.$$typeof;if(m===q){o.tag=11,o=Qf(null,o,t,c,l);break e}else if(m===V){o.tag=14,o=Xf(null,o,t,c,l);break e}}throw o=J(t)||t,Error(s(306,o,""))}}return o;case 0:return Zr(t,o,o.type,o.pendingProps,l);case 1:return c=o.type,m=Lo(c,o.pendingProps),ip(t,o,c,m,l);case 3:e:{if(me(o,o.stateNode.containerInfo),t===null)throw Error(s(387));c=o.pendingProps;var y=o.memoizedState;m=y.element,Er(t,o),as(o,c,null,l);var S=o.memoizedState;if(c=S.cache,$n(o,ut,c),c!==y.cache&&br(o,[ut],l,!0),ls(),c=S.element,y.isDehydrated)if(y={element:c,isDehydrated:!1,cache:S.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=sp(t,o,c,l);break e}else if(c!==m){m=Qt(Error(s(424)),o),es(m),o=sp(t,o,c,l);break e}else{switch(t=o.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(nt=nn(t.firstChild),bt=o,Oe=!0,Yn=null,en=!0,l=Zd(o,null,c,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(wo(),c===m){o=wn(t,o,l);break e}St(t,o,c,l)}o=o.child}return o;case 26:return Rl(t,o),t===null?(l=bh(o.type,null,o.pendingProps,null))?o.memoizedState=l:Oe||(l=o.type,t=o.pendingProps,c=Yl(fe.current).createElement(l),c[vt]=o,c[Mt]=t,At(c,l,t),gt(c),o.stateNode=c):o.memoizedState=bh(o.type,t.memoizedProps,o.pendingProps,t.memoizedState),null;case 27:return je(o),t===null&&Oe&&(c=o.stateNode=xh(o.type,o.pendingProps,fe.current),bt=o,en=!0,m=nt,ao(o.type)?(Pc=m,nt=nn(c.firstChild)):nt=m),St(t,o,o.pendingProps.children,l),Rl(t,o),t===null&&(o.flags|=4194304),o.child;case 5:return t===null&&Oe&&((m=c=nt)&&(c=Ky(c,o.type,o.pendingProps,en),c!==null?(o.stateNode=c,bt=o,nt=nn(c.firstChild),en=!1,m=!0):m=!1),m||Jn(o)),je(o),m=o.type,y=o.pendingProps,S=t!==null?t.memoizedProps:null,c=y.children,jc(m,y)?c=null:S!==null&&jc(m,S)&&(o.flags|=32),o.memoizedState!==null&&(m=Dr(t,o,dy,null,null,l),ws._currentValue=m),Rl(t,o),St(t,o,c,l),o.child;case 6:return t===null&&Oe&&((t=l=nt)&&(l=Qy(l,o.pendingProps,en),l!==null?(o.stateNode=l,bt=o,nt=null,t=!0):t=!1),t||Jn(o)),null;case 13:return lp(t,o,l);case 4:return me(o,o.stateNode.containerInfo),c=o.pendingProps,t===null?o.child=Do(o,null,c,l):St(t,o,c,l),o.child;case 11:return Qf(t,o,o.type,o.pendingProps,l);case 7:return St(t,o,o.pendingProps,l),o.child;case 8:return St(t,o,o.pendingProps.children,l),o.child;case 12:return St(t,o,o.pendingProps.children,l),o.child;case 10:return c=o.pendingProps,$n(o,o.type,c.value),St(t,o,c.children,l),o.child;case 9:return m=o.type._context,c=o.pendingProps.children,Ro(o),m=Ct(m),c=c(m),o.flags|=1,St(t,o,c,l),o.child;case 14:return Xf(t,o,o.type,o.pendingProps,l);case 15:return Zf(t,o,o.type,o.pendingProps,l);case 19:return rp(t,o,l);case 31:return vy(t,o,l);case 22:return ep(t,o,l,o.pendingProps);case 24:return Ro(o),c=Ct(ut),t===null?(m=Ar(),m===null&&(m=et,y=Cr(),m.pooledCache=y,y.refCount++,y!==null&&(m.pooledCacheLanes|=l),m=y),o.memoizedState={parent:c,cache:m},Tr(o),$n(o,ut,m)):((t.lanes&l)!==0&&(Er(t,o),as(o,null,null,l),ls()),m=t.memoizedState,y=o.memoizedState,m.parent!==c?(m={parent:c,cache:c},o.memoizedState=m,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=m),$n(o,ut,c)):(c=y.cache,$n(o,ut,c),c!==m.cache&&br(o,[ut],l,!0))),St(t,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function Nn(t){t.flags|=4}function ac(t,o,l,c,m){if((o=(t.mode&32)!==0)&&(o=!1),o){if(t.flags|=16777216,(m&335544128)===m)if(t.stateNode.complete)t.flags|=8192;else if(Up())t.flags|=8192;else throw ko=hl,_r}else t.flags&=-16777217}function up(t,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Th(o))if(Up())t.flags|=8192;else throw ko=hl,_r}function Il(t,o){o!==null&&(t.flags|=4),t.flags&16384&&(o=t.tag!==22?qu():536870912,t.lanes|=o,xi|=o)}function ps(t,o){if(!Oe)switch(t.tailMode){case"hidden":o=t.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function ot(t){var o=t.alternate!==null&&t.alternate.child===t.child,l=0,c=0;if(o)for(var m=t.child;m!==null;)l|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=t,m=m.sibling;else for(m=t.child;m!==null;)l|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=t,m=m.sibling;return t.subtreeFlags|=c,t.childLanes=l,o}function Cy(t,o,l){var c=o.pendingProps;switch(mr(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(o),null;case 1:return ot(o),null;case 3:return l=o.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),_n(ut),ve(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(ii(o)?Nn(o):t===null||t.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,xr())),ot(o),null;case 26:var m=o.type,y=o.memoizedState;return t===null?(Nn(o),y!==null?(ot(o),up(o,y)):(ot(o),ac(o,m,null,c,l))):y?y!==t.memoizedState?(Nn(o),ot(o),up(o,y)):(ot(o),o.flags&=-16777217):(t=t.memoizedProps,t!==c&&Nn(o),ot(o),ac(o,m,t,c,l)),null;case 27:if(qe(o),l=fe.current,m=o.type,t!==null&&o.stateNode!=null)t.memoizedProps!==c&&Nn(o);else{if(!c){if(o.stateNode===null)throw Error(s(166));return ot(o),null}t=W.current,ii(o)?qd(o):(t=xh(m,c,l),o.stateNode=t,Nn(o))}return ot(o),null;case 5:if(qe(o),m=o.type,t!==null&&o.stateNode!=null)t.memoizedProps!==c&&Nn(o);else{if(!c){if(o.stateNode===null)throw Error(s(166));return ot(o),null}if(y=W.current,ii(o))qd(o);else{var S=Yl(fe.current);switch(y){case 1:y=S.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:y=S.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":y=S.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":y=S.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":y=S.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof c.is=="string"?S.createElement("select",{is:c.is}):S.createElement("select"),c.multiple?y.multiple=!0:c.size&&(y.size=c.size);break;default:y=typeof c.is=="string"?S.createElement(m,{is:c.is}):S.createElement(m)}}y[vt]=o,y[Mt]=c;e:for(S=o.child;S!==null;){if(S.tag===5||S.tag===6)y.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===o)break e;for(;S.sibling===null;){if(S.return===null||S.return===o)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}o.stateNode=y;e:switch(At(y,m,c),m){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Nn(o)}}return ot(o),ac(o,o.type,t===null?null:t.memoizedProps,o.pendingProps,l),null;case 6:if(t&&o.stateNode!=null)t.memoizedProps!==c&&Nn(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(s(166));if(t=fe.current,ii(o)){if(t=o.stateNode,l=o.memoizedProps,c=null,m=bt,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}t[vt]=o,t=!!(t.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||lh(t.nodeValue,l)),t||Jn(o,!0)}else t=Yl(t).createTextNode(c),t[vt]=o,o.stateNode=t}return ot(o),null;case 31:if(l=o.memoizedState,t===null||t.memoizedState!==null){if(c=ii(o),l!==null){if(t===null){if(!c)throw Error(s(318));if(t=o.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[vt]=o}else wo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ot(o),t=!1}else l=xr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return o.flags&256?(qt(o),o):(qt(o),null);if((o.flags&128)!==0)throw Error(s(558))}return ot(o),null;case 13:if(c=o.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(m=ii(o),c!==null&&c.dehydrated!==null){if(t===null){if(!m)throw Error(s(318));if(m=o.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(s(317));m[vt]=o}else wo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ot(o),m=!1}else m=xr(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=m),m=!0;if(!m)return o.flags&256?(qt(o),o):(qt(o),null)}return qt(o),(o.flags&128)!==0?(o.lanes=l,o):(l=c!==null,t=t!==null&&t.memoizedState!==null,l&&(c=o.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==m&&(c.flags|=2048)),l!==t&&l&&(o.child.flags|=8192),Il(o,o.updateQueue),ot(o),null);case 4:return ve(),t===null&&Rc(o.stateNode.containerInfo),ot(o),null;case 10:return _n(o.type),ot(o),null;case 19:if(F(rt),c=o.memoizedState,c===null)return ot(o),null;if(m=(o.flags&128)!==0,y=c.rendering,y===null)if(m)ps(c,!1);else{if(lt!==0||t!==null&&(t.flags&128)!==0)for(t=o.child;t!==null;){if(y=yl(t),y!==null){for(o.flags|=128,ps(c,!1),t=y.updateQueue,o.updateQueue=t,Il(o,t),o.subtreeFlags=0,t=l,l=o.child;l!==null;)Bd(l,t),l=l.sibling;return z(rt,rt.current&1|2),Oe&&Sn(o,c.treeForkCount),o.child}t=t.sibling}c.tail!==null&&Ze()>Ul&&(o.flags|=128,m=!0,ps(c,!1),o.lanes=4194304)}else{if(!m)if(t=yl(y),t!==null){if(o.flags|=128,m=!0,t=t.updateQueue,o.updateQueue=t,Il(o,t),ps(c,!0),c.tail===null&&c.tailMode==="hidden"&&!y.alternate&&!Oe)return ot(o),null}else 2*Ze()-c.renderingStartTime>Ul&&l!==536870912&&(o.flags|=128,m=!0,ps(c,!1),o.lanes=4194304);c.isBackwards?(y.sibling=o.child,o.child=y):(t=c.last,t!==null?t.sibling=y:o.child=y,c.last=y)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Ze(),t.sibling=null,l=rt.current,z(rt,m?l&1|2:l&1),Oe&&Sn(o,c.treeForkCount),t):(ot(o),null);case 22:case 23:return qt(o),Mr(),c=o.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(l&536870912)!==0&&(o.flags&128)===0&&(ot(o),o.subtreeFlags&6&&(o.flags|=8192)):ot(o),l=o.updateQueue,l!==null&&Il(o,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==l&&(o.flags|=2048),t!==null&&F(Mo),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),_n(ut),ot(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function Sy(t,o){switch(mr(o),o.tag){case 1:return t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 3:return _n(ut),ve(),t=o.flags,(t&65536)!==0&&(t&128)===0?(o.flags=t&-65537|128,o):null;case 26:case 27:case 5:return qe(o),null;case 31:if(o.memoizedState!==null){if(qt(o),o.alternate===null)throw Error(s(340));wo()}return t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 13:if(qt(o),t=o.memoizedState,t!==null&&t.dehydrated!==null){if(o.alternate===null)throw Error(s(340));wo()}return t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 19:return F(rt),null;case 4:return ve(),null;case 10:return _n(o.type),null;case 22:case 23:return qt(o),Mr(),t!==null&&F(Mo),t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 24:return _n(ut),null;case 25:return null;default:return null}}function dp(t,o){switch(mr(o),o.tag){case 3:_n(ut),ve();break;case 26:case 27:case 5:qe(o);break;case 4:ve();break;case 31:o.memoizedState!==null&&qt(o);break;case 13:qt(o);break;case 19:F(rt);break;case 10:_n(o.type);break;case 22:case 23:qt(o),Mr(),t!==null&&F(Mo);break;case 24:_n(ut)}}function hs(t,o){try{var l=o.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var m=c.next;l=m;do{if((l.tag&t)===t){c=void 0;var y=l.create,S=l.inst;c=y(),S.destroy=c}l=l.next}while(l!==m)}}catch(_){We(o,o.return,_)}}function eo(t,o,l){try{var c=o.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var y=m.next;c=y;do{if((c.tag&t)===t){var S=c.inst,_=S.destroy;if(_!==void 0){S.destroy=void 0,m=o;var k=l,Y=_;try{Y()}catch(oe){We(m,k,oe)}}}c=c.next}while(c!==y)}}catch(oe){We(o,o.return,oe)}}function fp(t){var o=t.updateQueue;if(o!==null){var l=t.stateNode;try{tf(o,l)}catch(c){We(t,t.return,c)}}}function pp(t,o,l){l.props=Lo(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(c){We(t,o,c)}}function ms(t,o){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof l=="function"?t.refCleanup=l(c):l.current=c}}catch(m){We(t,o,m)}}function gn(t,o){var l=t.ref,c=t.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(m){We(t,o,m)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){We(t,o,m)}else l.current=null}function hp(t){var o=t.type,l=t.memoizedProps,c=t.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(m){We(t,t.return,m)}}function rc(t,o,l){try{var c=t.stateNode;Vy(c,t.type,l,o),c[Mt]=o}catch(m){We(t,t.return,m)}}function mp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ao(t.type)||t.tag===4}function cc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ao(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uc(t,o,l){var c=t.tag;if(c===5||c===6)t=t.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(t),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=vn));else if(c!==4&&(c===27&&ao(t.type)&&(l=t.stateNode,o=null),t=t.child,t!==null))for(uc(t,o,l),t=t.sibling;t!==null;)uc(t,o,l),t=t.sibling}function kl(t,o,l){var c=t.tag;if(c===5||c===6)t=t.stateNode,o?l.insertBefore(t,o):l.appendChild(t);else if(c!==4&&(c===27&&ao(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(kl(t,o,l),t=t.sibling;t!==null;)kl(t,o,l),t=t.sibling}function gp(t){var o=t.stateNode,l=t.memoizedProps;try{for(var c=t.type,m=o.attributes;m.length;)o.removeAttributeNode(m[0]);At(o,c,l),o[vt]=t,o[Mt]=l}catch(y){We(t,t.return,y)}}var Rn=!1,pt=!1,dc=!1,xp=typeof WeakSet=="function"?WeakSet:Set,xt=null;function Ay(t,o){if(t=t.containerInfo,kc=Zl,t=Nd(t),ir(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var m=c.anchorOffset,y=c.focusNode;c=c.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var S=0,_=-1,k=-1,Y=0,oe=0,ae=t,K=null;t:for(;;){for(var ee;ae!==l||m!==0&&ae.nodeType!==3||(_=S+m),ae!==y||c!==0&&ae.nodeType!==3||(k=S+c),ae.nodeType===3&&(S+=ae.nodeValue.length),(ee=ae.firstChild)!==null;)K=ae,ae=ee;for(;;){if(ae===t)break t;if(K===l&&++Y===m&&(_=S),K===y&&++oe===c&&(k=S),(ee=ae.nextSibling)!==null)break;ae=K,K=ae.parentNode}ae=ee}l=_===-1||k===-1?null:{start:_,end:k}}else l=null}l=l||{start:0,end:0}}else l=null;for(Dc={focusedElem:t,selectionRange:l},Zl=!1,xt=o;xt!==null;)if(o=xt,t=o.child,(o.subtreeFlags&1028)!==0&&t!==null)t.return=o,xt=t;else for(;xt!==null;){switch(o=xt,y=o.alternate,t=o.flags,o.tag){case 0:if((t&4)!==0&&(t=o.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)m=t[l],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&y!==null){t=void 0,l=o,m=y.memoizedProps,y=y.memoizedState,c=l.stateNode;try{var Se=Lo(l.type,m);t=c.getSnapshotBeforeUpdate(Se,y),c.__reactInternalSnapshotBeforeUpdate=t}catch(we){We(l,l.return,we)}}break;case 3:if((t&1024)!==0){if(t=o.stateNode.containerInfo,l=t.nodeType,l===9)Uc(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Uc(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=o.sibling,t!==null){t.return=o.return,xt=t;break}xt=o.return}}function yp(t,o,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:In(t,l),c&4&&hs(5,l);break;case 1:if(In(t,l),c&4)if(t=l.stateNode,o===null)try{t.componentDidMount()}catch(S){We(l,l.return,S)}else{var m=Lo(l.type,o.memoizedProps);o=o.memoizedState;try{t.componentDidUpdate(m,o,t.__reactInternalSnapshotBeforeUpdate)}catch(S){We(l,l.return,S)}}c&64&&fp(l),c&512&&ms(l,l.return);break;case 3:if(In(t,l),c&64&&(t=l.updateQueue,t!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{tf(t,o)}catch(S){We(l,l.return,S)}}break;case 27:o===null&&c&4&&gp(l);case 26:case 5:In(t,l),o===null&&c&4&&hp(l),c&512&&ms(l,l.return);break;case 12:In(t,l);break;case 31:In(t,l),c&4&&Cp(t,l);break;case 13:In(t,l),c&4&&Sp(t,l),c&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=ky.bind(null,l),Xy(t,l))));break;case 22:if(c=l.memoizedState!==null||Rn,!c){o=o!==null&&o.memoizedState!==null||pt,m=Rn;var y=pt;Rn=c,(pt=o)&&!y?kn(t,l,(l.subtreeFlags&8772)!==0):In(t,l),Rn=m,pt=y}break;case 30:break;default:In(t,l)}}function vp(t){var o=t.alternate;o!==null&&(t.alternate=null,vp(o)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(o=t.stateNode,o!==null&&za(o)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var it=null,kt=!1;function Mn(t,o,l){for(l=l.child;l!==null;)bp(t,o,l),l=l.sibling}function bp(t,o,l){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(Pi,l)}catch{}switch(l.tag){case 26:pt||gn(l,o),Mn(t,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:pt||gn(l,o);var c=it,m=kt;ao(l.type)&&(it=l.stateNode,kt=!1),Mn(t,o,l),_s(l.stateNode),it=c,kt=m;break;case 5:pt||gn(l,o);case 6:if(c=it,m=kt,it=null,Mn(t,o,l),it=c,kt=m,it!==null)if(kt)try{(it.nodeType===9?it.body:it.nodeName==="HTML"?it.ownerDocument.body:it).removeChild(l.stateNode)}catch(y){We(l,o,y)}else try{it.removeChild(l.stateNode)}catch(y){We(l,o,y)}break;case 18:it!==null&&(kt?(t=it,fh(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),Ti(t)):fh(it,l.stateNode));break;case 4:c=it,m=kt,it=l.stateNode.containerInfo,kt=!0,Mn(t,o,l),it=c,kt=m;break;case 0:case 11:case 14:case 15:eo(2,l,o),pt||eo(4,l,o),Mn(t,o,l);break;case 1:pt||(gn(l,o),c=l.stateNode,typeof c.componentWillUnmount=="function"&&pp(l,o,c)),Mn(t,o,l);break;case 21:Mn(t,o,l);break;case 22:pt=(c=pt)||l.memoizedState!==null,Mn(t,o,l),pt=c;break;default:Mn(t,o,l)}}function Cp(t,o){if(o.memoizedState===null&&(t=o.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ti(t)}catch(l){We(o,o.return,l)}}}function Sp(t,o){if(o.memoizedState===null&&(t=o.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ti(t)}catch(l){We(o,o.return,l)}}function _y(t){switch(t.tag){case 31:case 13:case 19:var o=t.stateNode;return o===null&&(o=t.stateNode=new xp),o;case 22:return t=t.stateNode,o=t._retryCache,o===null&&(o=t._retryCache=new xp),o;default:throw Error(s(435,t.tag))}}function Dl(t,o){var l=_y(t);o.forEach(function(c){if(!l.has(c)){l.add(c);var m=Dy.bind(null,t,c);c.then(m,m)}})}function Dt(t,o){var l=o.deletions;if(l!==null)for(var c=0;c<l.length;c++){var m=l[c],y=t,S=o,_=S;e:for(;_!==null;){switch(_.tag){case 27:if(ao(_.type)){it=_.stateNode,kt=!1;break e}break;case 5:it=_.stateNode,kt=!1;break e;case 3:case 4:it=_.stateNode.containerInfo,kt=!0;break e}_=_.return}if(it===null)throw Error(s(160));bp(y,S,m),it=null,kt=!1,y=m.alternate,y!==null&&(y.return=null),m.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Ap(o,t),o=o.sibling}var rn=null;function Ap(t,o){var l=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Dt(o,t),jt(t),c&4&&(eo(3,t,t.return),hs(3,t),eo(5,t,t.return));break;case 1:Dt(o,t),jt(t),c&512&&(pt||l===null||gn(l,l.return)),c&64&&Rn&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var m=rn;if(Dt(o,t),jt(t),c&512&&(pt||l===null||gn(l,l.return)),c&4){var y=l!==null?l.memoizedState:null;if(c=t.memoizedState,l===null)if(c===null)if(t.stateNode===null){e:{c=t.type,l=t.memoizedProps,m=m.ownerDocument||m;t:switch(c){case"title":y=m.getElementsByTagName("title")[0],(!y||y[qi]||y[vt]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=m.createElement(c),m.head.insertBefore(y,m.querySelector("head > title"))),At(y,c,l),y[vt]=t,gt(y),c=y;break e;case"link":var S=Ah("link","href",m).get(c+(l.href||""));if(S){for(var _=0;_<S.length;_++)if(y=S[_],y.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&y.getAttribute("rel")===(l.rel==null?null:l.rel)&&y.getAttribute("title")===(l.title==null?null:l.title)&&y.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){S.splice(_,1);break t}}y=m.createElement(c),At(y,c,l),m.head.appendChild(y);break;case"meta":if(S=Ah("meta","content",m).get(c+(l.content||""))){for(_=0;_<S.length;_++)if(y=S[_],y.getAttribute("content")===(l.content==null?null:""+l.content)&&y.getAttribute("name")===(l.name==null?null:l.name)&&y.getAttribute("property")===(l.property==null?null:l.property)&&y.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&y.getAttribute("charset")===(l.charSet==null?null:l.charSet)){S.splice(_,1);break t}}y=m.createElement(c),At(y,c,l),m.head.appendChild(y);break;default:throw Error(s(468,c))}y[vt]=t,gt(y),c=y}t.stateNode=c}else _h(m,t.type,t.stateNode);else t.stateNode=Sh(m,c,t.memoizedProps);else y!==c?(y===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):y.count--,c===null?_h(m,t.type,t.stateNode):Sh(m,c,t.memoizedProps)):c===null&&t.stateNode!==null&&rc(t,t.memoizedProps,l.memoizedProps)}break;case 27:Dt(o,t),jt(t),c&512&&(pt||l===null||gn(l,l.return)),l!==null&&c&4&&rc(t,t.memoizedProps,l.memoizedProps);break;case 5:if(Dt(o,t),jt(t),c&512&&(pt||l===null||gn(l,l.return)),t.flags&32){m=t.stateNode;try{$o(m,"")}catch(Se){We(t,t.return,Se)}}c&4&&t.stateNode!=null&&(m=t.memoizedProps,rc(t,m,l!==null?l.memoizedProps:m)),c&1024&&(dc=!0);break;case 6:if(Dt(o,t),jt(t),c&4){if(t.stateNode===null)throw Error(s(162));c=t.memoizedProps,l=t.stateNode;try{l.nodeValue=c}catch(Se){We(t,t.return,Se)}}break;case 3:if(Wl=null,m=rn,rn=Jl(o.containerInfo),Dt(o,t),rn=m,jt(t),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Ti(o.containerInfo)}catch(Se){We(t,t.return,Se)}dc&&(dc=!1,_p(t));break;case 4:c=rn,rn=Jl(t.stateNode.containerInfo),Dt(o,t),jt(t),rn=c;break;case 12:Dt(o,t),jt(t);break;case 31:Dt(o,t),jt(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Dl(t,c)));break;case 13:Dt(o,t),jt(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(Ll=Ze()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Dl(t,c)));break;case 22:m=t.memoizedState!==null;var k=l!==null&&l.memoizedState!==null,Y=Rn,oe=pt;if(Rn=Y||m,pt=oe||k,Dt(o,t),pt=oe,Rn=Y,jt(t),c&8192)e:for(o=t.stateNode,o._visibility=m?o._visibility&-2:o._visibility|1,m&&(l===null||k||Rn||pt||Uo(t)),l=null,o=t;;){if(o.tag===5||o.tag===26){if(l===null){k=l=o;try{if(y=k.stateNode,m)S=y.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{_=k.stateNode;var ae=k.memoizedProps.style,K=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;_.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Se){We(k,k.return,Se)}}}else if(o.tag===6){if(l===null){k=o;try{k.stateNode.nodeValue=m?"":k.memoizedProps}catch(Se){We(k,k.return,Se)}}}else if(o.tag===18){if(l===null){k=o;try{var ee=k.stateNode;m?ph(ee,!0):ph(k.stateNode,!1)}catch(Se){We(k,k.return,Se)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===t)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=t.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Dl(t,l))));break;case 19:Dt(o,t),jt(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Dl(t,c)));break;case 30:break;case 21:break;default:Dt(o,t),jt(t)}}function jt(t){var o=t.flags;if(o&2){try{for(var l,c=t.return;c!==null;){if(mp(c)){l=c;break}c=c.return}if(l==null)throw Error(s(160));switch(l.tag){case 27:var m=l.stateNode,y=cc(t);kl(t,y,m);break;case 5:var S=l.stateNode;l.flags&32&&($o(S,""),l.flags&=-33);var _=cc(t);kl(t,_,S);break;case 3:case 4:var k=l.stateNode.containerInfo,Y=cc(t);uc(t,Y,k);break;default:throw Error(s(161))}}catch(oe){We(t,t.return,oe)}t.flags&=-3}o&4096&&(t.flags&=-4097)}function _p(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var o=t;_p(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),t=t.sibling}}function In(t,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)yp(t,o.alternate,o),o=o.sibling}function Uo(t){for(t=t.child;t!==null;){var o=t;switch(o.tag){case 0:case 11:case 14:case 15:eo(4,o,o.return),Uo(o);break;case 1:gn(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&pp(o,o.return,l),Uo(o);break;case 27:_s(o.stateNode);case 26:case 5:gn(o,o.return),Uo(o);break;case 22:o.memoizedState===null&&Uo(o);break;case 30:Uo(o);break;default:Uo(o)}t=t.sibling}}function kn(t,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,m=t,y=o,S=y.flags;switch(y.tag){case 0:case 11:case 15:kn(m,y,l),hs(4,y);break;case 1:if(kn(m,y,l),c=y,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Y){We(c,c.return,Y)}if(c=y,m=c.updateQueue,m!==null){var _=c.stateNode;try{var k=m.shared.hiddenCallbacks;if(k!==null)for(m.shared.hiddenCallbacks=null,m=0;m<k.length;m++)ef(k[m],_)}catch(Y){We(c,c.return,Y)}}l&&S&64&&fp(y),ms(y,y.return);break;case 27:gp(y);case 26:case 5:kn(m,y,l),l&&c===null&&S&4&&hp(y),ms(y,y.return);break;case 12:kn(m,y,l);break;case 31:kn(m,y,l),l&&S&4&&Cp(m,y);break;case 13:kn(m,y,l),l&&S&4&&Sp(m,y);break;case 22:y.memoizedState===null&&kn(m,y,l),ms(y,y.return);break;case 30:break;default:kn(m,y,l)}o=o.sibling}}function fc(t,o){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(t=o.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&ts(l))}function pc(t,o){t=null,o.alternate!==null&&(t=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==t&&(o.refCount++,t!=null&&ts(t))}function cn(t,o,l,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Tp(t,o,l,c),o=o.sibling}function Tp(t,o,l,c){var m=o.flags;switch(o.tag){case 0:case 11:case 15:cn(t,o,l,c),m&2048&&hs(9,o);break;case 1:cn(t,o,l,c);break;case 3:cn(t,o,l,c),m&2048&&(t=null,o.alternate!==null&&(t=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==t&&(o.refCount++,t!=null&&ts(t)));break;case 12:if(m&2048){cn(t,o,l,c),t=o.stateNode;try{var y=o.memoizedProps,S=y.id,_=y.onPostCommit;typeof _=="function"&&_(S,o.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(k){We(o,o.return,k)}}else cn(t,o,l,c);break;case 31:cn(t,o,l,c);break;case 13:cn(t,o,l,c);break;case 23:break;case 22:y=o.stateNode,S=o.alternate,o.memoizedState!==null?y._visibility&2?cn(t,o,l,c):gs(t,o):y._visibility&2?cn(t,o,l,c):(y._visibility|=2,hi(t,o,l,c,(o.subtreeFlags&10256)!==0||!1)),m&2048&&fc(S,o);break;case 24:cn(t,o,l,c),m&2048&&pc(o.alternate,o);break;default:cn(t,o,l,c)}}function hi(t,o,l,c,m){for(m=m&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var y=t,S=o,_=l,k=c,Y=S.flags;switch(S.tag){case 0:case 11:case 15:hi(y,S,_,k,m),hs(8,S);break;case 23:break;case 22:var oe=S.stateNode;S.memoizedState!==null?oe._visibility&2?hi(y,S,_,k,m):gs(y,S):(oe._visibility|=2,hi(y,S,_,k,m)),m&&Y&2048&&fc(S.alternate,S);break;case 24:hi(y,S,_,k,m),m&&Y&2048&&pc(S.alternate,S);break;default:hi(y,S,_,k,m)}o=o.sibling}}function gs(t,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=t,c=o,m=c.flags;switch(c.tag){case 22:gs(l,c),m&2048&&fc(c.alternate,c);break;case 24:gs(l,c),m&2048&&pc(c.alternate,c);break;default:gs(l,c)}o=o.sibling}}var xs=8192;function mi(t,o,l){if(t.subtreeFlags&xs)for(t=t.child;t!==null;)Ep(t,o,l),t=t.sibling}function Ep(t,o,l){switch(t.tag){case 26:mi(t,o,l),t.flags&xs&&t.memoizedState!==null&&uv(l,rn,t.memoizedState,t.memoizedProps);break;case 5:mi(t,o,l);break;case 3:case 4:var c=rn;rn=Jl(t.stateNode.containerInfo),mi(t,o,l),rn=c;break;case 22:t.memoizedState===null&&(c=t.alternate,c!==null&&c.memoizedState!==null?(c=xs,xs=16777216,mi(t,o,l),xs=c):mi(t,o,l));break;default:mi(t,o,l)}}function wp(t){var o=t.alternate;if(o!==null&&(t=o.child,t!==null)){o.child=null;do o=t.sibling,t.sibling=null,t=o;while(t!==null)}}function ys(t){var o=t.deletions;if((t.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];xt=c,Rp(c,t)}wp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Np(t),t=t.sibling}function Np(t){switch(t.tag){case 0:case 11:case 15:ys(t),t.flags&2048&&eo(9,t,t.return);break;case 3:ys(t);break;case 12:ys(t);break;case 22:var o=t.stateNode;t.memoizedState!==null&&o._visibility&2&&(t.return===null||t.return.tag!==13)?(o._visibility&=-3,jl(t)):ys(t);break;default:ys(t)}}function jl(t){var o=t.deletions;if((t.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];xt=c,Rp(c,t)}wp(t)}for(t=t.child;t!==null;){switch(o=t,o.tag){case 0:case 11:case 15:eo(8,o,o.return),jl(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,jl(o));break;default:jl(o)}t=t.sibling}}function Rp(t,o){for(;xt!==null;){var l=xt;switch(l.tag){case 0:case 11:case 15:eo(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:ts(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,xt=c;else e:for(l=t;xt!==null;){c=xt;var m=c.sibling,y=c.return;if(vp(c),c===l){xt=null;break e}if(m!==null){m.return=y,xt=m;break e}xt=y}}}var Ty={getCacheForType:function(t){var o=Ct(ut),l=o.data.get(t);return l===void 0&&(l=t(),o.data.set(t,l)),l},cacheSignal:function(){return Ct(ut).controller.signal}},Ey=typeof WeakMap=="function"?WeakMap:Map,Ye=0,et=null,Le=null,Ge=0,$e=0,Ht=null,to=!1,gi=!1,hc=!1,Dn=0,lt=0,no=0,Bo=0,mc=0,Vt=0,xi=0,vs=null,Lt=null,gc=!1,Ll=0,Mp=0,Ul=1/0,Bl=null,oo=null,mt=0,io=null,yi=null,jn=0,xc=0,yc=null,Ip=null,bs=0,vc=null;function Ft(){return(Ye&2)!==0&&Ge!==0?Ge&-Ge:B.T!==null?Tc():Yu()}function kp(){if(Vt===0)if((Ge&536870912)===0||Oe){var t=Fs;Fs<<=1,(Fs&3932160)===0&&(Fs=262144),Vt=t}else Vt=536870912;return t=zt.current,t!==null&&(t.flags|=32),Vt}function Ut(t,o,l){(t===et&&($e===2||$e===9)||t.cancelPendingCommit!==null)&&(vi(t,0),so(t,Ge,Vt,!1)),zi(t,l),((Ye&2)===0||t!==et)&&(t===et&&((Ye&2)===0&&(Bo|=l),lt===4&&so(t,Ge,Vt,!1)),xn(t))}function Dp(t,o,l){if((Ye&6)!==0)throw Error(s(327));var c=!l&&(o&127)===0&&(o&t.expiredLanes)===0||Oi(t,o),m=c?Ry(t,o):Cc(t,o,!0),y=c;do{if(m===0){gi&&!c&&so(t,o,0,!1);break}else{if(l=t.current.alternate,y&&!wy(l)){m=Cc(t,o,!1),y=!1;continue}if(m===2){if(y=o,t.errorRecoveryDisabledLanes&y)var S=0;else S=t.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){o=S;e:{var _=t;m=vs;var k=_.current.memoizedState.isDehydrated;if(k&&(vi(_,S).flags|=256),S=Cc(_,S,!1),S!==2){if(hc&&!k){_.errorRecoveryDisabledLanes|=y,Bo|=y,m=4;break e}y=Lt,Lt=m,y!==null&&(Lt===null?Lt=y:Lt.push.apply(Lt,y))}m=S}if(y=!1,m!==2)continue}}if(m===1){vi(t,0),so(t,o,0,!0);break}e:{switch(c=t,y=m,y){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:so(c,o,Vt,!to);break e;case 2:Lt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(m=Ll+300-Ze(),10<m)){if(so(c,o,Vt,!to),Js(c,0,!0)!==0)break e;jn=o,c.timeoutHandle=uh(jp.bind(null,c,l,Lt,Bl,gc,o,Vt,Bo,xi,to,y,"Throttled",-0,0),m);break e}jp(c,l,Lt,Bl,gc,o,Vt,Bo,xi,to,y,null,-0,0)}}break}while(!0);xn(t)}function jp(t,o,l,c,m,y,S,_,k,Y,oe,ae,K,ee){if(t.timeoutHandle=-1,ae=o.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vn},Ep(o,y,ae);var Se=(y&62914560)===y?Ll-Ze():(y&4194048)===y?Mp-Ze():0;if(Se=dv(ae,Se),Se!==null){jn=y,t.cancelPendingCommit=Se(qp.bind(null,t,o,y,l,c,m,S,_,k,oe,ae,null,K,ee)),so(t,y,S,!Y);return}}qp(t,o,y,l,c,m,S,_,k)}function wy(t){for(var o=t;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var m=l[c],y=m.getSnapshot;m=m.value;try{if(!Pt(y(),m))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function so(t,o,l,c){o&=~mc,o&=~Bo,t.suspendedLanes|=o,t.pingedLanes&=~o,c&&(t.warmLanes|=o),c=t.expirationTimes;for(var m=o;0<m;){var y=31-Gt(m),S=1<<y;c[y]=-1,m&=~S}l!==0&&Hu(t,l,o)}function Gl(){return(Ye&6)===0?(Cs(0),!1):!0}function bc(){if(Le!==null){if($e===0)var t=Le.return;else t=Le,An=No=null,Ur(t),ci=null,os=0,t=Le;for(;t!==null;)dp(t.alternate,t),t=t.return;Le=null}}function vi(t,o){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,Jy(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),jn=0,bc(),et=t,Le=l=Cn(t.current,null),Ge=o,$e=0,Ht=null,to=!1,gi=Oi(t,o),hc=!1,xi=Vt=mc=Bo=no=lt=0,Lt=vs=null,gc=!1,(o&8)!==0&&(o|=o&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=o;0<c;){var m=31-Gt(c),y=1<<m;o|=t[m],c&=~y}return Dn=o,sl(),l}function Lp(t,o){Ie=null,B.H=ds,o===ri||o===pl?(o=Kd(),$e=3):o===_r?(o=Kd(),$e=4):$e=o===Xr?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ht=o,Le===null&&(lt=1,wl(t,Qt(o,t.current)))}function Up(){var t=zt.current;return t===null?!0:(Ge&4194048)===Ge?tn===null:(Ge&62914560)===Ge||(Ge&536870912)!==0?t===tn:!1}function Bp(){var t=B.H;return B.H=ds,t===null?ds:t}function Gp(){var t=B.A;return B.A=Ty,t}function Pl(){lt=4,to||(Ge&4194048)!==Ge&&zt.current!==null||(gi=!0),(no&134217727)===0&&(Bo&134217727)===0||et===null||so(et,Ge,Vt,!1)}function Cc(t,o,l){var c=Ye;Ye|=2;var m=Bp(),y=Gp();(et!==t||Ge!==o)&&(Bl=null,vi(t,o)),o=!1;var S=lt;e:do try{if($e!==0&&Le!==null){var _=Le,k=Ht;switch($e){case 8:bc(),S=6;break e;case 3:case 2:case 9:case 6:zt.current===null&&(o=!0);var Y=$e;if($e=0,Ht=null,bi(t,_,k,Y),l&&gi){S=0;break e}break;default:Y=$e,$e=0,Ht=null,bi(t,_,k,Y)}}Ny(),S=lt;break}catch(oe){Lp(t,oe)}while(!0);return o&&t.shellSuspendCounter++,An=No=null,Ye=c,B.H=m,B.A=y,Le===null&&(et=null,Ge=0,sl()),S}function Ny(){for(;Le!==null;)Pp(Le)}function Ry(t,o){var l=Ye;Ye|=2;var c=Bp(),m=Gp();et!==t||Ge!==o?(Bl=null,Ul=Ze()+500,vi(t,o)):gi=Oi(t,o);e:do try{if($e!==0&&Le!==null){o=Le;var y=Ht;t:switch($e){case 1:$e=0,Ht=null,bi(t,o,y,1);break;case 2:case 9:if($d(y)){$e=0,Ht=null,Op(o);break}o=function(){$e!==2&&$e!==9||et!==t||($e=7),xn(t)},y.then(o,o);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:$d(y)?($e=0,Ht=null,Op(o)):($e=0,Ht=null,bi(t,o,y,7));break;case 5:var S=null;switch(Le.tag){case 26:S=Le.memoizedState;case 5:case 27:var _=Le;if(S?Th(S):_.stateNode.complete){$e=0,Ht=null;var k=_.sibling;if(k!==null)Le=k;else{var Y=_.return;Y!==null?(Le=Y,Ol(Y)):Le=null}break t}}$e=0,Ht=null,bi(t,o,y,5);break;case 6:$e=0,Ht=null,bi(t,o,y,6);break;case 8:bc(),lt=6;break e;default:throw Error(s(462))}}My();break}catch(oe){Lp(t,oe)}while(!0);return An=No=null,B.H=c,B.A=m,Ye=l,Le!==null?0:(et=null,Ge=0,sl(),lt)}function My(){for(;Le!==null&&!ye();)Pp(Le)}function Pp(t){var o=cp(t.alternate,t,Dn);t.memoizedProps=t.pendingProps,o===null?Ol(t):Le=o}function Op(t){var o=t,l=o.alternate;switch(o.tag){case 15:case 0:o=op(l,o,o.pendingProps,o.type,void 0,Ge);break;case 11:o=op(l,o,o.pendingProps,o.type.render,o.ref,Ge);break;case 5:Ur(o);default:dp(l,o),o=Le=Bd(o,Dn),o=cp(l,o,Dn)}t.memoizedProps=t.pendingProps,o===null?Ol(t):Le=o}function bi(t,o,l,c){An=No=null,Ur(o),ci=null,os=0;var m=o.return;try{if(yy(t,m,o,l,Ge)){lt=1,wl(t,Qt(l,t.current)),Le=null;return}}catch(y){if(m!==null)throw Le=m,y;lt=1,wl(t,Qt(l,t.current)),Le=null;return}o.flags&32768?(Oe||c===1?t=!0:gi||(Ge&536870912)!==0?t=!1:(to=t=!0,(c===2||c===9||c===3||c===6)&&(c=zt.current,c!==null&&c.tag===13&&(c.flags|=16384))),zp(o,t)):Ol(o)}function Ol(t){var o=t;do{if((o.flags&32768)!==0){zp(o,to);return}t=o.return;var l=Cy(o.alternate,o,Dn);if(l!==null){Le=l;return}if(o=o.sibling,o!==null){Le=o;return}Le=o=t}while(o!==null);lt===0&&(lt=5)}function zp(t,o){do{var l=Sy(t.alternate,t);if(l!==null){l.flags&=32767,Le=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(t=t.sibling,t!==null)){Le=t;return}Le=t=l}while(t!==null);lt=6,Le=null}function qp(t,o,l,c,m,y,S,_,k){t.cancelPendingCommit=null;do zl();while(mt!==0);if((Ye&6)!==0)throw Error(s(327));if(o!==null){if(o===t.current)throw Error(s(177));if(y=o.lanes|o.childLanes,y|=cr,cx(t,l,y,S,_,k),t===et&&(Le=et=null,Ge=0),yi=o,io=t,jn=l,xc=y,yc=m,Ip=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,jy(vo,function(){return Jp(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=B.T,B.T=null,m=j.p,j.p=2,S=Ye,Ye|=4;try{Ay(t,o,l)}finally{Ye=S,j.p=m,B.T=c}}mt=1,Hp(),Vp(),Fp()}}function Hp(){if(mt===1){mt=0;var t=io,o=yi,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=B.T,B.T=null;var c=j.p;j.p=2;var m=Ye;Ye|=4;try{Ap(o,t);var y=Dc,S=Nd(t.containerInfo),_=y.focusedElem,k=y.selectionRange;if(S!==_&&_&&_.ownerDocument&&wd(_.ownerDocument.documentElement,_)){if(k!==null&&ir(_)){var Y=k.start,oe=k.end;if(oe===void 0&&(oe=Y),"selectionStart"in _)_.selectionStart=Y,_.selectionEnd=Math.min(oe,_.value.length);else{var ae=_.ownerDocument||document,K=ae&&ae.defaultView||window;if(K.getSelection){var ee=K.getSelection(),Se=_.textContent.length,we=Math.min(k.start,Se),Xe=k.end===void 0?we:Math.min(k.end,Se);!ee.extend&&we>Xe&&(S=Xe,Xe=we,we=S);var P=Ed(_,we),L=Ed(_,Xe);if(P&&L&&(ee.rangeCount!==1||ee.anchorNode!==P.node||ee.anchorOffset!==P.offset||ee.focusNode!==L.node||ee.focusOffset!==L.offset)){var H=ae.createRange();H.setStart(P.node,P.offset),ee.removeAllRanges(),we>Xe?(ee.addRange(H),ee.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),ee.addRange(H))}}}}for(ae=[],ee=_;ee=ee.parentNode;)ee.nodeType===1&&ae.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<ae.length;_++){var ie=ae[_];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Zl=!!kc,Dc=kc=null}finally{Ye=m,j.p=c,B.T=l}}t.current=o,mt=2}}function Vp(){if(mt===2){mt=0;var t=io,o=yi,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=B.T,B.T=null;var c=j.p;j.p=2;var m=Ye;Ye|=4;try{yp(t,o.alternate,o)}finally{Ye=m,j.p=c,B.T=l}}mt=3}}function Fp(){if(mt===4||mt===3){mt=0,Be();var t=io,o=yi,l=jn,c=Ip;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?mt=5:(mt=0,yi=io=null,Yp(t,t.pendingLanes));var m=t.pendingLanes;if(m===0&&(oo=null),Pa(l),o=o.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(Pi,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=B.T,m=j.p,j.p=2,B.T=null;try{for(var y=t.onRecoverableError,S=0;S<c.length;S++){var _=c[S];y(_.value,{componentStack:_.stack})}}finally{B.T=o,j.p=m}}(jn&3)!==0&&zl(),xn(t),m=t.pendingLanes,(l&261930)!==0&&(m&42)!==0?t===vc?bs++:(bs=0,vc=t):bs=0,Cs(0)}}function Yp(t,o){(t.pooledCacheLanes&=o)===0&&(o=t.pooledCache,o!=null&&(t.pooledCache=null,ts(o)))}function zl(){return Hp(),Vp(),Fp(),Jp()}function Jp(){if(mt!==5)return!1;var t=io,o=xc;xc=0;var l=Pa(jn),c=B.T,m=j.p;try{j.p=32>l?32:l,B.T=null,l=yc,yc=null;var y=io,S=jn;if(mt=0,yi=io=null,jn=0,(Ye&6)!==0)throw Error(s(331));var _=Ye;if(Ye|=4,Np(y.current),Tp(y,y.current,S,l),Ye=_,Cs(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(Pi,y)}catch{}return!0}finally{j.p=m,B.T=c,Yp(t,o)}}function $p(t,o,l){o=Qt(l,o),o=Qr(t.stateNode,o,2),t=Qn(t,o,2),t!==null&&(zi(t,2),xn(t))}function We(t,o,l){if(t.tag===3)$p(t,t,l);else for(;o!==null;){if(o.tag===3){$p(o,t,l);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(oo===null||!oo.has(c))){t=Qt(l,t),l=Wf(2),c=Qn(o,l,2),c!==null&&(Kf(l,c,o,t),zi(c,2),xn(c));break}}o=o.return}}function Sc(t,o,l){var c=t.pingCache;if(c===null){c=t.pingCache=new Ey;var m=new Set;c.set(o,m)}else m=c.get(o),m===void 0&&(m=new Set,c.set(o,m));m.has(l)||(hc=!0,m.add(l),t=Iy.bind(null,t,o,l),o.then(t,t))}function Iy(t,o,l){var c=t.pingCache;c!==null&&c.delete(o),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,et===t&&(Ge&l)===l&&(lt===4||lt===3&&(Ge&62914560)===Ge&&300>Ze()-Ll?(Ye&2)===0&&vi(t,0):mc|=l,xi===Ge&&(xi=0)),xn(t)}function Wp(t,o){o===0&&(o=qu()),t=To(t,o),t!==null&&(zi(t,o),xn(t))}function ky(t){var o=t.memoizedState,l=0;o!==null&&(l=o.retryLane),Wp(t,l)}function Dy(t,o){var l=0;switch(t.tag){case 31:case 13:var c=t.stateNode,m=t.memoizedState;m!==null&&(l=m.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(o),Wp(t,l)}function jy(t,o){return te(t,o)}var ql=null,Ci=null,Ac=!1,Hl=!1,_c=!1,lo=0;function xn(t){t!==Ci&&t.next===null&&(Ci===null?ql=Ci=t:Ci=Ci.next=t),Hl=!0,Ac||(Ac=!0,Uy())}function Cs(t,o){if(!_c&&Hl){_c=!0;do for(var l=!1,c=ql;c!==null;){if(t!==0){var m=c.pendingLanes;if(m===0)var y=0;else{var S=c.suspendedLanes,_=c.pingedLanes;y=(1<<31-Gt(42|t)+1)-1,y&=m&~(S&~_),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(l=!0,Zp(c,y))}else y=Ge,y=Js(c,c===et?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(y&3)===0||Oi(c,y)||(l=!0,Zp(c,y));c=c.next}while(l);_c=!1}}function Ly(){Kp()}function Kp(){Hl=Ac=!1;var t=0;lo!==0&&Yy()&&(t=lo);for(var o=Ze(),l=null,c=ql;c!==null;){var m=c.next,y=Qp(c,o);y===0?(c.next=null,l===null?ql=m:l.next=m,m===null&&(Ci=l)):(l=c,(t!==0||(y&3)!==0)&&(Hl=!0)),c=m}mt!==0&&mt!==5||Cs(t),lo!==0&&(lo=0)}function Qp(t,o){for(var l=t.suspendedLanes,c=t.pingedLanes,m=t.expirationTimes,y=t.pendingLanes&-62914561;0<y;){var S=31-Gt(y),_=1<<S,k=m[S];k===-1?((_&l)===0||(_&c)!==0)&&(m[S]=rx(_,o)):k<=o&&(t.expiredLanes|=_),y&=~_}if(o=et,l=Ge,l=Js(t,t===o?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,l===0||t===o&&($e===2||$e===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&pe(c),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||Oi(t,l)){if(o=l&-l,o===t.callbackPriority)return o;switch(c!==null&&pe(c),Pa(l)){case 2:case 8:l=Hs;break;case 32:l=vo;break;case 268435456:l=zu;break;default:l=vo}return c=Xp.bind(null,t),l=te(l,c),t.callbackPriority=o,t.callbackNode=l,o}return c!==null&&c!==null&&pe(c),t.callbackPriority=2,t.callbackNode=null,2}function Xp(t,o){if(mt!==0&&mt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(zl()&&t.callbackNode!==l)return null;var c=Ge;return c=Js(t,t===et?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(Dp(t,c,o),Qp(t,Ze()),t.callbackNode!=null&&t.callbackNode===l?Xp.bind(null,t):null)}function Zp(t,o){if(zl())return null;Dp(t,o,!0)}function Uy(){$y(function(){(Ye&6)!==0?te(qs,Ly):Kp()})}function Tc(){if(lo===0){var t=li;t===0&&(t=Vs,Vs<<=1,(Vs&261888)===0&&(Vs=256)),lo=t}return lo}function eh(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Qs(""+t)}function th(t,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,t.id&&l.setAttribute("form",t.id),o.parentNode.insertBefore(l,o),t=new FormData(t),l.parentNode.removeChild(l),t}function By(t,o,l,c,m){if(o==="submit"&&l&&l.stateNode===m){var y=eh((m[Mt]||null).action),S=c.submitter;S&&(o=(o=S[Mt]||null)?eh(o.formAction):S.getAttribute("formAction"),o!==null&&(y=o,S=null));var _=new tl("action","action",null,c,m);t.push({event:_,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(lo!==0){var k=S?th(m,S):new FormData(m);Fr(l,{pending:!0,data:k,method:m.method,action:y},null,k)}}else typeof y=="function"&&(_.preventDefault(),k=S?th(m,S):new FormData(m),Fr(l,{pending:!0,data:k,method:m.method,action:y},y,k))},currentTarget:m}]})}}for(var Ec=0;Ec<rr.length;Ec++){var wc=rr[Ec],Gy=wc.toLowerCase(),Py=wc[0].toUpperCase()+wc.slice(1);an(Gy,"on"+Py)}an(Id,"onAnimationEnd"),an(kd,"onAnimationIteration"),an(Dd,"onAnimationStart"),an("dblclick","onDoubleClick"),an("focusin","onFocus"),an("focusout","onBlur"),an(ty,"onTransitionRun"),an(ny,"onTransitionStart"),an(oy,"onTransitionCancel"),an(jd,"onTransitionEnd"),Yo("onMouseEnter",["mouseout","mouseover"]),Yo("onMouseLeave",["mouseout","mouseover"]),Yo("onPointerEnter",["pointerout","pointerover"]),Yo("onPointerLeave",["pointerout","pointerover"]),Co("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Co("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Co("onBeforeInput",["compositionend","keypress","textInput","paste"]),Co("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Co("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Co("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ss="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ss));function nh(t,o){o=(o&4)!==0;for(var l=0;l<t.length;l++){var c=t[l],m=c.event;c=c.listeners;e:{var y=void 0;if(o)for(var S=c.length-1;0<=S;S--){var _=c[S],k=_.instance,Y=_.currentTarget;if(_=_.listener,k!==y&&m.isPropagationStopped())break e;y=_,m.currentTarget=Y;try{y(m)}catch(oe){il(oe)}m.currentTarget=null,y=k}else for(S=0;S<c.length;S++){if(_=c[S],k=_.instance,Y=_.currentTarget,_=_.listener,k!==y&&m.isPropagationStopped())break e;y=_,m.currentTarget=Y;try{y(m)}catch(oe){il(oe)}m.currentTarget=null,y=k}}}}function Ue(t,o){var l=o[Oa];l===void 0&&(l=o[Oa]=new Set);var c=t+"__bubble";l.has(c)||(oh(o,t,2,!1),l.add(c))}function Nc(t,o,l){var c=0;o&&(c|=4),oh(l,t,c,o)}var Vl="_reactListening"+Math.random().toString(36).slice(2);function Rc(t){if(!t[Vl]){t[Vl]=!0,Wu.forEach(function(l){l!=="selectionchange"&&(Oy.has(l)||Nc(l,!1,t),Nc(l,!0,t))});var o=t.nodeType===9?t:t.ownerDocument;o===null||o[Vl]||(o[Vl]=!0,Nc("selectionchange",!1,o))}}function oh(t,o,l,c){switch(kh(o)){case 2:var m=hv;break;case 8:m=mv;break;default:m=Vc}l=m.bind(null,o,l,t),m=void 0,!Wa||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),c?m!==void 0?t.addEventListener(o,l,{capture:!0,passive:m}):t.addEventListener(o,l,!0):m!==void 0?t.addEventListener(o,l,{passive:m}):t.addEventListener(o,l,!1)}function Mc(t,o,l,c,m){var y=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var S=c.tag;if(S===3||S===4){var _=c.stateNode.containerInfo;if(_===m)break;if(S===4)for(S=c.return;S!==null;){var k=S.tag;if((k===3||k===4)&&S.stateNode.containerInfo===m)return;S=S.return}for(;_!==null;){if(S=Ho(_),S===null)return;if(k=S.tag,k===5||k===6||k===26||k===27){c=y=S;continue e}_=_.parentNode}}c=c.return}ad(function(){var Y=y,oe=Ja(l),ae=[];e:{var K=Ld.get(t);if(K!==void 0){var ee=tl,Se=t;switch(t){case"keypress":if(Zs(l)===0)break e;case"keydown":case"keyup":ee=Dx;break;case"focusin":Se="focus",ee=Za;break;case"focusout":Se="blur",ee=Za;break;case"beforeblur":case"afterblur":ee=Za;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=ud;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Cx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=Ux;break;case Id:case kd:case Dd:ee=_x;break;case jd:ee=Gx;break;case"scroll":case"scrollend":ee=vx;break;case"wheel":ee=Ox;break;case"copy":case"cut":case"paste":ee=Ex;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=fd;break;case"toggle":case"beforetoggle":ee=qx}var we=(o&4)!==0,Xe=!we&&(t==="scroll"||t==="scrollend"),P=we?K!==null?K+"Capture":null:K;we=[];for(var L=Y,H;L!==null;){var ie=L;if(H=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||H===null||P===null||(ie=Vi(L,P),ie!=null&&we.push(As(L,ie,H))),Xe)break;L=L.return}0<we.length&&(K=new ee(K,Se,null,l,oe),ae.push({event:K,listeners:we}))}}if((o&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",ee=t==="mouseout"||t==="pointerout",K&&l!==Ya&&(Se=l.relatedTarget||l.fromElement)&&(Ho(Se)||Se[qo]))break e;if((ee||K)&&(K=oe.window===oe?oe:(K=oe.ownerDocument)?K.defaultView||K.parentWindow:window,ee?(Se=l.relatedTarget||l.toElement,ee=Y,Se=Se?Ho(Se):null,Se!==null&&(Xe=u(Se),we=Se.tag,Se!==Xe||we!==5&&we!==27&&we!==6)&&(Se=null)):(ee=null,Se=Y),ee!==Se)){if(we=ud,ie="onMouseLeave",P="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(we=fd,ie="onPointerLeave",P="onPointerEnter",L="pointer"),Xe=ee==null?K:Hi(ee),H=Se==null?K:Hi(Se),K=new we(ie,L+"leave",ee,l,oe),K.target=Xe,K.relatedTarget=H,ie=null,Ho(oe)===Y&&(we=new we(P,L+"enter",Se,l,oe),we.target=H,we.relatedTarget=Xe,ie=we),Xe=ie,ee&&Se)t:{for(we=zy,P=ee,L=Se,H=0,ie=P;ie;ie=we(ie))H++;ie=0;for(var Te=L;Te;Te=we(Te))ie++;for(;0<H-ie;)P=we(P),H--;for(;0<ie-H;)L=we(L),ie--;for(;H--;){if(P===L||L!==null&&P===L.alternate){we=P;break t}P=we(P),L=we(L)}we=null}else we=null;ee!==null&&ih(ae,K,ee,we,!1),Se!==null&&Xe!==null&&ih(ae,Xe,Se,we,!0)}}e:{if(K=Y?Hi(Y):window,ee=K.nodeName&&K.nodeName.toLowerCase(),ee==="select"||ee==="input"&&K.type==="file")var He=bd;else if(yd(K))if(Cd)He=Xx;else{He=Kx;var Ae=Wx}else ee=K.nodeName,!ee||ee.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Y&&Fa(Y.elementType)&&(He=bd):He=Qx;if(He&&(He=He(t,Y))){vd(ae,He,l,oe);break e}Ae&&Ae(t,K,Y),t==="focusout"&&Y&&K.type==="number"&&Y.memoizedProps.value!=null&&Va(K,"number",K.value)}switch(Ae=Y?Hi(Y):window,t){case"focusin":(yd(Ae)||Ae.contentEditable==="true")&&(Xo=Ae,sr=Y,Xi=null);break;case"focusout":Xi=sr=Xo=null;break;case"mousedown":lr=!0;break;case"contextmenu":case"mouseup":case"dragend":lr=!1,Rd(ae,l,oe);break;case"selectionchange":if(ey)break;case"keydown":case"keyup":Rd(ae,l,oe)}var De;if(tr)e:{switch(t){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else Qo?gd(t,l)&&(Pe="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(Pe="onCompositionStart");Pe&&(pd&&l.locale!=="ko"&&(Qo||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&Qo&&(De=rd()):(Vn=oe,Ka="value"in Vn?Vn.value:Vn.textContent,Qo=!0)),Ae=Fl(Y,Pe),0<Ae.length&&(Pe=new dd(Pe,t,null,l,oe),ae.push({event:Pe,listeners:Ae}),De?Pe.data=De:(De=xd(l),De!==null&&(Pe.data=De)))),(De=Vx?Fx(t,l):Yx(t,l))&&(Pe=Fl(Y,"onBeforeInput"),0<Pe.length&&(Ae=new dd("onBeforeInput","beforeinput",null,l,oe),ae.push({event:Ae,listeners:Pe}),Ae.data=De)),By(ae,t,Y,l,oe)}nh(ae,o)})}function As(t,o,l){return{instance:t,listener:o,currentTarget:l}}function Fl(t,o){for(var l=o+"Capture",c=[];t!==null;){var m=t,y=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||y===null||(m=Vi(t,l),m!=null&&c.unshift(As(t,m,y)),m=Vi(t,o),m!=null&&c.push(As(t,m,y))),t.tag===3)return c;t=t.return}return[]}function zy(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function ih(t,o,l,c,m){for(var y=o._reactName,S=[];l!==null&&l!==c;){var _=l,k=_.alternate,Y=_.stateNode;if(_=_.tag,k!==null&&k===c)break;_!==5&&_!==26&&_!==27||Y===null||(k=Y,m?(Y=Vi(l,y),Y!=null&&S.unshift(As(l,Y,k))):m||(Y=Vi(l,y),Y!=null&&S.push(As(l,Y,k)))),l=l.return}S.length!==0&&t.push({event:o,listeners:S})}var qy=/\r\n?/g,Hy=/\u0000|\uFFFD/g;function sh(t){return(typeof t=="string"?t:""+t).replace(qy,`
`).replace(Hy,"")}function lh(t,o){return o=sh(o),sh(t)===o}function Qe(t,o,l,c,m,y){switch(l){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||$o(t,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&$o(t,""+c);break;case"className":Ws(t,"class",c);break;case"tabIndex":Ws(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ws(t,l,c);break;case"style":sd(t,c,y);break;case"data":if(o!=="object"){Ws(t,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||l!=="href")){t.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(l);break}c=Qs(""+c),t.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(l==="formAction"?(o!=="input"&&Qe(t,o,"name",m.name,m,null),Qe(t,o,"formEncType",m.formEncType,m,null),Qe(t,o,"formMethod",m.formMethod,m,null),Qe(t,o,"formTarget",m.formTarget,m,null)):(Qe(t,o,"encType",m.encType,m,null),Qe(t,o,"method",m.method,m,null),Qe(t,o,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(l);break}c=Qs(""+c),t.setAttribute(l,c);break;case"onClick":c!=null&&(t.onclick=vn);break;case"onScroll":c!=null&&Ue("scroll",t);break;case"onScrollEnd":c!=null&&Ue("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(l=c.__html,l!=null){if(m.children!=null)throw Error(s(60));t.innerHTML=l}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}l=Qs(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(l,""+c):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":c===!0?t.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(l,c):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(l,c):t.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(l):t.setAttribute(l,c);break;case"popover":Ue("beforetoggle",t),Ue("toggle",t),$s(t,"popover",c);break;case"xlinkActuate":yn(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":yn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":yn(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":yn(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":yn(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":yn(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":yn(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":yn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":yn(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":$s(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=xx.get(l)||l,$s(t,l,c))}}function Ic(t,o,l,c,m,y){switch(l){case"style":sd(t,c,y);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(l=c.__html,l!=null){if(m.children!=null)throw Error(s(60));t.innerHTML=l}}break;case"children":typeof c=="string"?$o(t,c):(typeof c=="number"||typeof c=="bigint")&&$o(t,""+c);break;case"onScroll":c!=null&&Ue("scroll",t);break;case"onScrollEnd":c!=null&&Ue("scrollend",t);break;case"onClick":c!=null&&(t.onclick=vn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ku.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),o=l.slice(2,m?l.length-7:void 0),y=t[Mt]||null,y=y!=null?y[l]:null,typeof y=="function"&&t.removeEventListener(o,y,m),typeof c=="function")){typeof y!="function"&&y!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(o,c,m);break e}l in t?t[l]=c:c===!0?t.setAttribute(l,""):$s(t,l,c)}}}function At(t,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",t),Ue("load",t);var c=!1,m=!1,y;for(y in l)if(l.hasOwnProperty(y)){var S=l[y];if(S!=null)switch(y){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Qe(t,o,y,S,l,null)}}m&&Qe(t,o,"srcSet",l.srcSet,l,null),c&&Qe(t,o,"src",l.src,l,null);return;case"input":Ue("invalid",t);var _=y=S=m=null,k=null,Y=null;for(c in l)if(l.hasOwnProperty(c)){var oe=l[c];if(oe!=null)switch(c){case"name":m=oe;break;case"type":S=oe;break;case"checked":k=oe;break;case"defaultChecked":Y=oe;break;case"value":y=oe;break;case"defaultValue":_=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(s(137,o));break;default:Qe(t,o,c,oe,l,null)}}td(t,y,_,k,Y,S,m,!1);return;case"select":Ue("invalid",t),c=S=y=null;for(m in l)if(l.hasOwnProperty(m)&&(_=l[m],_!=null))switch(m){case"value":y=_;break;case"defaultValue":S=_;break;case"multiple":c=_;default:Qe(t,o,m,_,l,null)}o=y,l=S,t.multiple=!!c,o!=null?Jo(t,!!c,o,!1):l!=null&&Jo(t,!!c,l,!0);return;case"textarea":Ue("invalid",t),y=m=c=null;for(S in l)if(l.hasOwnProperty(S)&&(_=l[S],_!=null))switch(S){case"value":c=_;break;case"defaultValue":m=_;break;case"children":y=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:Qe(t,o,S,_,l,null)}od(t,c,m,y);return;case"option":for(k in l)if(l.hasOwnProperty(k)&&(c=l[k],c!=null))switch(k){case"selected":t.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Qe(t,o,k,c,l,null)}return;case"dialog":Ue("beforetoggle",t),Ue("toggle",t),Ue("cancel",t),Ue("close",t);break;case"iframe":case"object":Ue("load",t);break;case"video":case"audio":for(c=0;c<Ss.length;c++)Ue(Ss[c],t);break;case"image":Ue("error",t),Ue("load",t);break;case"details":Ue("toggle",t);break;case"embed":case"source":case"link":Ue("error",t),Ue("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in l)if(l.hasOwnProperty(Y)&&(c=l[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Qe(t,o,Y,c,l,null)}return;default:if(Fa(o)){for(oe in l)l.hasOwnProperty(oe)&&(c=l[oe],c!==void 0&&Ic(t,o,oe,c,l,void 0));return}}for(_ in l)l.hasOwnProperty(_)&&(c=l[_],c!=null&&Qe(t,o,_,c,l,null))}function Vy(t,o,l,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,y=null,S=null,_=null,k=null,Y=null,oe=null;for(ee in l){var ae=l[ee];if(l.hasOwnProperty(ee)&&ae!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":k=ae;default:c.hasOwnProperty(ee)||Qe(t,o,ee,null,c,ae)}}for(var K in c){var ee=c[K];if(ae=l[K],c.hasOwnProperty(K)&&(ee!=null||ae!=null))switch(K){case"type":y=ee;break;case"name":m=ee;break;case"checked":Y=ee;break;case"defaultChecked":oe=ee;break;case"value":S=ee;break;case"defaultValue":_=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,o));break;default:ee!==ae&&Qe(t,o,K,ee,c,ae)}}Ha(t,S,_,k,Y,oe,y,m);return;case"select":ee=S=_=K=null;for(y in l)if(k=l[y],l.hasOwnProperty(y)&&k!=null)switch(y){case"value":break;case"multiple":ee=k;default:c.hasOwnProperty(y)||Qe(t,o,y,null,c,k)}for(m in c)if(y=c[m],k=l[m],c.hasOwnProperty(m)&&(y!=null||k!=null))switch(m){case"value":K=y;break;case"defaultValue":_=y;break;case"multiple":S=y;default:y!==k&&Qe(t,o,m,y,c,k)}o=_,l=S,c=ee,K!=null?Jo(t,!!l,K,!1):!!c!=!!l&&(o!=null?Jo(t,!!l,o,!0):Jo(t,!!l,l?[]:"",!1));return;case"textarea":ee=K=null;for(_ in l)if(m=l[_],l.hasOwnProperty(_)&&m!=null&&!c.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Qe(t,o,_,null,c,m)}for(S in c)if(m=c[S],y=l[S],c.hasOwnProperty(S)&&(m!=null||y!=null))switch(S){case"value":K=m;break;case"defaultValue":ee=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(s(91));break;default:m!==y&&Qe(t,o,S,m,c,y)}nd(t,K,ee);return;case"option":for(var Se in l)if(K=l[Se],l.hasOwnProperty(Se)&&K!=null&&!c.hasOwnProperty(Se))switch(Se){case"selected":t.selected=!1;break;default:Qe(t,o,Se,null,c,K)}for(k in c)if(K=c[k],ee=l[k],c.hasOwnProperty(k)&&K!==ee&&(K!=null||ee!=null))switch(k){case"selected":t.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:Qe(t,o,k,K,c,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in l)K=l[we],l.hasOwnProperty(we)&&K!=null&&!c.hasOwnProperty(we)&&Qe(t,o,we,null,c,K);for(Y in c)if(K=c[Y],ee=l[Y],c.hasOwnProperty(Y)&&K!==ee&&(K!=null||ee!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,o));break;default:Qe(t,o,Y,K,c,ee)}return;default:if(Fa(o)){for(var Xe in l)K=l[Xe],l.hasOwnProperty(Xe)&&K!==void 0&&!c.hasOwnProperty(Xe)&&Ic(t,o,Xe,void 0,c,K);for(oe in c)K=c[oe],ee=l[oe],!c.hasOwnProperty(oe)||K===ee||K===void 0&&ee===void 0||Ic(t,o,oe,K,c,ee);return}}for(var P in l)K=l[P],l.hasOwnProperty(P)&&K!=null&&!c.hasOwnProperty(P)&&Qe(t,o,P,null,c,K);for(ae in c)K=c[ae],ee=l[ae],!c.hasOwnProperty(ae)||K===ee||K==null&&ee==null||Qe(t,o,ae,K,c,ee)}function ah(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Fy(){if(typeof performance.getEntriesByType=="function"){for(var t=0,o=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var m=l[c],y=m.transferSize,S=m.initiatorType,_=m.duration;if(y&&_&&ah(S)){for(S=0,_=m.responseEnd,c+=1;c<l.length;c++){var k=l[c],Y=k.startTime;if(Y>_)break;var oe=k.transferSize,ae=k.initiatorType;oe&&ah(ae)&&(k=k.responseEnd,S+=oe*(k<_?1:(_-Y)/(k-Y)))}if(--c,o+=8*(y+S)/(m.duration/1e3),t++,10<t)break}}if(0<t)return o/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var kc=null,Dc=null;function Yl(t){return t.nodeType===9?t:t.ownerDocument}function rh(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ch(t,o){if(t===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&o==="foreignObject"?0:t}function jc(t,o){return t==="textarea"||t==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Lc=null;function Yy(){var t=window.event;return t&&t.type==="popstate"?t===Lc?!1:(Lc=t,!0):(Lc=null,!1)}var uh=typeof setTimeout=="function"?setTimeout:void 0,Jy=typeof clearTimeout=="function"?clearTimeout:void 0,dh=typeof Promise=="function"?Promise:void 0,$y=typeof queueMicrotask=="function"?queueMicrotask:typeof dh<"u"?function(t){return dh.resolve(null).then(t).catch(Wy)}:uh;function Wy(t){setTimeout(function(){throw t})}function ao(t){return t==="head"}function fh(t,o){var l=o,c=0;do{var m=l.nextSibling;if(t.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"||l==="/&"){if(c===0){t.removeChild(m),Ti(o);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")_s(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,_s(l);for(var y=l.firstChild;y;){var S=y.nextSibling,_=y.nodeName;y[qi]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&y.rel.toLowerCase()==="stylesheet"||l.removeChild(y),y=S}}else l==="body"&&_s(t.ownerDocument.body);l=m}while(l);Ti(o)}function ph(t,o){var l=t;t=0;do{var c=l.nextSibling;if(l.nodeType===1?o?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(o?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=c}while(l)}function Uc(t){var o=t.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Uc(l),za(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function Ky(t,o,l,c){for(;t.nodeType===1;){var m=l;if(t.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[qi])switch(o){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(y=t.getAttribute("rel"),y==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(y!==m.rel||t.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||t.getAttribute("title")!==(m.title==null?null:m.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(y=t.getAttribute("src"),(y!==(m.src==null?null:m.src)||t.getAttribute("type")!==(m.type==null?null:m.type)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&y&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(o==="input"&&t.type==="hidden"){var y=m.name==null?null:""+m.name;if(m.type==="hidden"&&t.getAttribute("name")===y)return t}else return t;if(t=nn(t.nextSibling),t===null)break}return null}function Qy(t,o,l){if(o==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=nn(t.nextSibling),t===null))return null;return t}function hh(t,o){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!o||(t=nn(t.nextSibling),t===null))return null;return t}function Bc(t){return t.data==="$?"||t.data==="$~"}function Gc(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Xy(t,o){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=o;else if(t.data!=="$?"||l.readyState!=="loading")o();else{var c=function(){o(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function nn(t){for(;t!=null;t=t.nextSibling){var o=t.nodeType;if(o===1||o===3)break;if(o===8){if(o=t.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return t}var Pc=null;function mh(t){t=t.nextSibling;for(var o=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(o===0)return nn(t.nextSibling);o--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||o++}t=t.nextSibling}return null}function gh(t){t=t.previousSibling;for(var o=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(o===0)return t;o--}else l!=="/$"&&l!=="/&"||o++}t=t.previousSibling}return null}function xh(t,o,l){switch(o=Yl(l),t){case"html":if(t=o.documentElement,!t)throw Error(s(452));return t;case"head":if(t=o.head,!t)throw Error(s(453));return t;case"body":if(t=o.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function _s(t){for(var o=t.attributes;o.length;)t.removeAttributeNode(o[0]);za(t)}var on=new Map,yh=new Set;function Jl(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ln=j.d;j.d={f:Zy,r:ev,D:tv,C:nv,L:ov,m:iv,X:lv,S:sv,M:av};function Zy(){var t=Ln.f(),o=Gl();return t||o}function ev(t){var o=Vo(t);o!==null&&o.tag===5&&o.type==="form"?Lf(o):Ln.r(t)}var Si=typeof document>"u"?null:document;function vh(t,o,l){var c=Si;if(c&&typeof o=="string"&&o){var m=Wt(o);m='link[rel="'+t+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),yh.has(m)||(yh.add(m),t={rel:t,crossOrigin:l,href:o},c.querySelector(m)===null&&(o=c.createElement("link"),At(o,"link",t),gt(o),c.head.appendChild(o)))}}function tv(t){Ln.D(t),vh("dns-prefetch",t,null)}function nv(t,o){Ln.C(t,o),vh("preconnect",t,o)}function ov(t,o,l){Ln.L(t,o,l);var c=Si;if(c&&t&&o){var m='link[rel="preload"][as="'+Wt(o)+'"]';o==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+Wt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+Wt(l.imageSizes)+'"]')):m+='[href="'+Wt(t)+'"]';var y=m;switch(o){case"style":y=Ai(t);break;case"script":y=_i(t)}on.has(y)||(t=b({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:t,as:o},l),on.set(y,t),c.querySelector(m)!==null||o==="style"&&c.querySelector(Ts(y))||o==="script"&&c.querySelector(Es(y))||(o=c.createElement("link"),At(o,"link",t),gt(o),c.head.appendChild(o)))}}function iv(t,o){Ln.m(t,o);var l=Si;if(l&&t){var c=o&&typeof o.as=="string"?o.as:"script",m='link[rel="modulepreload"][as="'+Wt(c)+'"][href="'+Wt(t)+'"]',y=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=_i(t)}if(!on.has(y)&&(t=b({rel:"modulepreload",href:t},o),on.set(y,t),l.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Es(y)))return}c=l.createElement("link"),At(c,"link",t),gt(c),l.head.appendChild(c)}}}function sv(t,o,l){Ln.S(t,o,l);var c=Si;if(c&&t){var m=Fo(c).hoistableStyles,y=Ai(t);o=o||"default";var S=m.get(y);if(!S){var _={loading:0,preload:null};if(S=c.querySelector(Ts(y)))_.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":o},l),(l=on.get(y))&&Oc(t,l);var k=S=c.createElement("link");gt(k),At(k,"link",t),k._p=new Promise(function(Y,oe){k.onload=Y,k.onerror=oe}),k.addEventListener("load",function(){_.loading|=1}),k.addEventListener("error",function(){_.loading|=2}),_.loading|=4,$l(S,o,c)}S={type:"stylesheet",instance:S,count:1,state:_},m.set(y,S)}}}function lv(t,o){Ln.X(t,o);var l=Si;if(l&&t){var c=Fo(l).hoistableScripts,m=_i(t),y=c.get(m);y||(y=l.querySelector(Es(m)),y||(t=b({src:t,async:!0},o),(o=on.get(m))&&zc(t,o),y=l.createElement("script"),gt(y),At(y,"link",t),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(m,y))}}function av(t,o){Ln.M(t,o);var l=Si;if(l&&t){var c=Fo(l).hoistableScripts,m=_i(t),y=c.get(m);y||(y=l.querySelector(Es(m)),y||(t=b({src:t,async:!0,type:"module"},o),(o=on.get(m))&&zc(t,o),y=l.createElement("script"),gt(y),At(y,"link",t),l.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},c.set(m,y))}}function bh(t,o,l,c){var m=(m=fe.current)?Jl(m):null;if(!m)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=Ai(l.href),l=Fo(m).hoistableStyles,c=l.get(o),c||(c={type:"style",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=Ai(l.href);var y=Fo(m).hoistableStyles,S=y.get(t);if(S||(m=m.ownerDocument||m,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(t,S),(y=m.querySelector(Ts(t)))&&!y._p&&(S.instance=y,S.state.loading=5),on.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},on.set(t,l),y||rv(m,t,l,S.state))),o&&c===null)throw Error(s(528,""));return S}if(o&&c!==null)throw Error(s(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=_i(l),l=Fo(m).hoistableScripts,c=l.get(o),c||(c={type:"script",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Ai(t){return'href="'+Wt(t)+'"'}function Ts(t){return'link[rel="stylesheet"]['+t+"]"}function Ch(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function rv(t,o,l,c){t.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=t.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),At(o,"link",l),gt(o),t.head.appendChild(o))}function _i(t){return'[src="'+Wt(t)+'"]'}function Es(t){return"script[async]"+t}function Sh(t,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var c=t.querySelector('style[data-href~="'+Wt(l.href)+'"]');if(c)return o.instance=c,gt(c),c;var m=b({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),gt(c),At(c,"style",m),$l(c,l.precedence,t),o.instance=c;case"stylesheet":m=Ai(l.href);var y=t.querySelector(Ts(m));if(y)return o.state.loading|=4,o.instance=y,gt(y),y;c=Ch(l),(m=on.get(m))&&Oc(c,m),y=(t.ownerDocument||t).createElement("link"),gt(y);var S=y;return S._p=new Promise(function(_,k){S.onload=_,S.onerror=k}),At(y,"link",c),o.state.loading|=4,$l(y,l.precedence,t),o.instance=y;case"script":return y=_i(l.src),(m=t.querySelector(Es(y)))?(o.instance=m,gt(m),m):(c=l,(m=on.get(y))&&(c=b({},l),zc(c,m)),t=t.ownerDocument||t,m=t.createElement("script"),gt(m),At(m,"link",c),t.head.appendChild(m),o.instance=m);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,$l(c,l.precedence,t));return o.instance}function $l(t,o,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,y=m,S=0;S<c.length;S++){var _=c[S];if(_.dataset.precedence===o)y=_;else if(y!==m)break}y?y.parentNode.insertBefore(t,y.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(t,o.firstChild))}function Oc(t,o){t.crossOrigin==null&&(t.crossOrigin=o.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=o.referrerPolicy),t.title==null&&(t.title=o.title)}function zc(t,o){t.crossOrigin==null&&(t.crossOrigin=o.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=o.referrerPolicy),t.integrity==null&&(t.integrity=o.integrity)}var Wl=null;function Ah(t,o,l){if(Wl===null){var c=new Map,m=Wl=new Map;m.set(l,c)}else m=Wl,c=m.get(l),c||(c=new Map,m.set(l,c));if(c.has(t))return c;for(c.set(t,null),l=l.getElementsByTagName(t),m=0;m<l.length;m++){var y=l[m];if(!(y[qi]||y[vt]||t==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var S=y.getAttribute(o)||"";S=t+S;var _=c.get(S);_?_.push(y):c.set(S,[y])}}return c}function _h(t,o,l){t=t.ownerDocument||t,t.head.insertBefore(l,o==="title"?t.querySelector("head > title"):null)}function cv(t,o,l){if(l===1||o.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return t=o.disabled,typeof o.precedence=="string"&&t==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Th(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function uv(t,o,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=Ai(c.href),y=o.querySelector(Ts(m));if(y){o=y._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(t.count++,t=Kl.bind(t),o.then(t,t)),l.state.loading|=4,l.instance=y,gt(y);return}y=o.ownerDocument||o,c=Ch(c),(m=on.get(m))&&Oc(c,m),y=y.createElement("link"),gt(y);var S=y;S._p=new Promise(function(_,k){S.onload=_,S.onerror=k}),At(y,"link",c),l.instance=y}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=Kl.bind(t),o.addEventListener("load",l),o.addEventListener("error",l))}}var qc=0;function dv(t,o){return t.stylesheets&&t.count===0&&Xl(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var c=setTimeout(function(){if(t.stylesheets&&Xl(t,t.stylesheets),t.unsuspend){var y=t.unsuspend;t.unsuspend=null,y()}},6e4+o);0<t.imgBytes&&qc===0&&(qc=62500*Fy());var m=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Xl(t,t.stylesheets),t.unsuspend)){var y=t.unsuspend;t.unsuspend=null,y()}},(t.imgBytes>qc?50:800)+o);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(c),clearTimeout(m)}}:null}function Kl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xl(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ql=null;function Xl(t,o){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ql=new Map,o.forEach(fv,t),Ql=null,Kl.call(t))}function fv(t,o){if(!(o.state.loading&4)){var l=Ql.get(t);if(l)var c=l.get(null);else{l=new Map,Ql.set(t,l);for(var m=t.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<m.length;y++){var S=m[y];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(l.set(S.dataset.precedence,S),c=S)}c&&l.set(null,c)}m=o.instance,S=m.getAttribute("data-precedence"),y=l.get(S)||c,y===c&&l.set(null,m),l.set(S,m),this.count++,c=Kl.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),y?y.parentNode.insertBefore(m,y.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(m,t.firstChild)),o.state.loading|=4}}var ws={$$typeof:M,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function pv(t,o,l,c,m,y,S,_,k){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ba(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ba(0),this.hiddenUpdates=Ba(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=y,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Eh(t,o,l,c,m,y,S,_,k,Y,oe,ae){return t=new pv(t,o,l,S,k,Y,oe,ae,_),o=1,y===!0&&(o|=24),y=Ot(3,null,null,o),t.current=y,y.stateNode=t,o=Cr(),o.refCount++,t.pooledCache=o,o.refCount++,y.memoizedState={element:c,isDehydrated:l,cache:o},Tr(y),t}function wh(t){return t?(t=ti,t):ti}function Nh(t,o,l,c,m,y){m=wh(m),c.context===null?c.context=m:c.pendingContext=m,c=Kn(o),c.payload={element:l},y=y===void 0?null:y,y!==null&&(c.callback=y),l=Qn(t,c,o),l!==null&&(Ut(l,t,o),ss(l,t,o))}function Rh(t,o){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<o?l:o}}function Hc(t,o){Rh(t,o),(t=t.alternate)&&Rh(t,o)}function Mh(t){if(t.tag===13||t.tag===31){var o=To(t,67108864);o!==null&&Ut(o,t,67108864),Hc(t,67108864)}}function Ih(t){if(t.tag===13||t.tag===31){var o=Ft();o=Ga(o);var l=To(t,o);l!==null&&Ut(l,t,o),Hc(t,o)}}var Zl=!0;function hv(t,o,l,c){var m=B.T;B.T=null;var y=j.p;try{j.p=2,Vc(t,o,l,c)}finally{j.p=y,B.T=m}}function mv(t,o,l,c){var m=B.T;B.T=null;var y=j.p;try{j.p=8,Vc(t,o,l,c)}finally{j.p=y,B.T=m}}function Vc(t,o,l,c){if(Zl){var m=Fc(c);if(m===null)Mc(t,o,c,ea,l),Dh(t,c);else if(xv(m,t,o,l,c))c.stopPropagation();else if(Dh(t,c),o&4&&-1<gv.indexOf(t)){for(;m!==null;){var y=Vo(m);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var S=bo(y.pendingLanes);if(S!==0){var _=y;for(_.pendingLanes|=2,_.entangledLanes|=2;S;){var k=1<<31-Gt(S);_.entanglements[1]|=k,S&=~k}xn(y),(Ye&6)===0&&(Ul=Ze()+500,Cs(0))}}break;case 31:case 13:_=To(y,2),_!==null&&Ut(_,y,2),Gl(),Hc(y,2)}if(y=Fc(c),y===null&&Mc(t,o,c,ea,l),y===m)break;m=y}m!==null&&c.stopPropagation()}else Mc(t,o,c,null,l)}}function Fc(t){return t=Ja(t),Yc(t)}var ea=null;function Yc(t){if(ea=null,t=Ho(t),t!==null){var o=u(t);if(o===null)t=null;else{var l=o.tag;if(l===13){if(t=f(o),t!==null)return t;t=null}else if(l===31){if(t=g(o),t!==null)return t;t=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;t=null}else o!==t&&(t=null)}}return ea=t,null}function kh(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zo()){case qs:return 2;case Hs:return 8;case vo:case nx:return 32;case zu:return 268435456;default:return 32}default:return 32}}var Jc=!1,ro=null,co=null,uo=null,Ns=new Map,Rs=new Map,fo=[],gv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Dh(t,o){switch(t){case"focusin":case"focusout":ro=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":uo=null;break;case"pointerover":case"pointerout":Ns.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rs.delete(o.pointerId)}}function Ms(t,o,l,c,m,y){return t===null||t.nativeEvent!==y?(t={blockedOn:o,domEventName:l,eventSystemFlags:c,nativeEvent:y,targetContainers:[m]},o!==null&&(o=Vo(o),o!==null&&Mh(o)),t):(t.eventSystemFlags|=c,o=t.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),t)}function xv(t,o,l,c,m){switch(o){case"focusin":return ro=Ms(ro,t,o,l,c,m),!0;case"dragenter":return co=Ms(co,t,o,l,c,m),!0;case"mouseover":return uo=Ms(uo,t,o,l,c,m),!0;case"pointerover":var y=m.pointerId;return Ns.set(y,Ms(Ns.get(y)||null,t,o,l,c,m)),!0;case"gotpointercapture":return y=m.pointerId,Rs.set(y,Ms(Rs.get(y)||null,t,o,l,c,m)),!0}return!1}function jh(t){var o=Ho(t.target);if(o!==null){var l=u(o);if(l!==null){if(o=l.tag,o===13){if(o=f(l),o!==null){t.blockedOn=o,Ju(t.priority,function(){Ih(l)});return}}else if(o===31){if(o=g(l),o!==null){t.blockedOn=o,Ju(t.priority,function(){Ih(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ta(t){if(t.blockedOn!==null)return!1;for(var o=t.targetContainers;0<o.length;){var l=Fc(t.nativeEvent);if(l===null){l=t.nativeEvent;var c=new l.constructor(l.type,l);Ya=c,l.target.dispatchEvent(c),Ya=null}else return o=Vo(l),o!==null&&Mh(o),t.blockedOn=l,!1;o.shift()}return!0}function Lh(t,o,l){ta(t)&&l.delete(o)}function yv(){Jc=!1,ro!==null&&ta(ro)&&(ro=null),co!==null&&ta(co)&&(co=null),uo!==null&&ta(uo)&&(uo=null),Ns.forEach(Lh),Rs.forEach(Lh)}function na(t,o){t.blockedOn===o&&(t.blockedOn=null,Jc||(Jc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,yv)))}var oa=null;function Uh(t){oa!==t&&(oa=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){oa===t&&(oa=null);for(var o=0;o<t.length;o+=3){var l=t[o],c=t[o+1],m=t[o+2];if(typeof c!="function"){if(Yc(c||l)===null)continue;break}var y=Vo(l);y!==null&&(t.splice(o,3),o-=3,Fr(y,{pending:!0,data:m,method:l.method,action:c},c,m))}}))}function Ti(t){function o(k){return na(k,t)}ro!==null&&na(ro,t),co!==null&&na(co,t),uo!==null&&na(uo,t),Ns.forEach(o),Rs.forEach(o);for(var l=0;l<fo.length;l++){var c=fo[l];c.blockedOn===t&&(c.blockedOn=null)}for(;0<fo.length&&(l=fo[0],l.blockedOn===null);)jh(l),l.blockedOn===null&&fo.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var m=l[c],y=l[c+1],S=m[Mt]||null;if(typeof y=="function")S||Uh(l);else if(S){var _=null;if(y&&y.hasAttribute("formAction")){if(m=y,S=y[Mt]||null)_=S.formAction;else if(Yc(m)!==null)continue}else _=S.action;typeof _=="function"?l[c+1]=_:(l.splice(c,3),c-=3),Uh(l)}}}function Bh(){function t(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(S){return m=S})},focusReset:"manual",scroll:"manual"})}function o(){m!==null&&(m(),m=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,m=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),m!==null&&(m(),m=null)}}}function $c(t){this._internalRoot=t}ia.prototype.render=$c.prototype.render=function(t){var o=this._internalRoot;if(o===null)throw Error(s(409));var l=o.current,c=Ft();Nh(l,c,t,o,null,null)},ia.prototype.unmount=$c.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var o=t.containerInfo;Nh(t.current,2,null,t,null,null),Gl(),o[qo]=null}};function ia(t){this._internalRoot=t}ia.prototype.unstable_scheduleHydration=function(t){if(t){var o=Yu();t={blockedOn:null,target:t,priority:o};for(var l=0;l<fo.length&&o!==0&&o<fo[l].priority;l++);fo.splice(l,0,t),l===0&&jh(t)}};var Gh=e.version;if(Gh!=="19.2.3")throw Error(s(527,Gh,"19.2.3"));j.findDOMNode=function(t){var o=t._reactInternals;if(o===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=h(o),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var vv={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sa.isDisabled&&sa.supportsFiber)try{Pi=sa.inject(vv),Bt=sa}catch{}}return ks.createRoot=function(t,o){if(!r(t))throw Error(s(299));var l=!1,c="",m=Ff,y=Yf,S=Jf;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),o=Eh(t,1,!1,null,null,l,c,null,m,y,S,Bh),t[qo]=o.current,Rc(t),new $c(o)},ks.hydrateRoot=function(t,o,l){if(!r(t))throw Error(s(299));var c=!1,m="",y=Ff,S=Yf,_=Jf,k=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(y=l.onUncaughtError),l.onCaughtError!==void 0&&(S=l.onCaughtError),l.onRecoverableError!==void 0&&(_=l.onRecoverableError),l.formState!==void 0&&(k=l.formState)),o=Eh(t,1,!0,o,l??null,c,m,k,y,S,_,Bh),o.context=wh(null),l=o.current,c=Ft(),c=Ga(c),m=Kn(c),m.callback=null,Qn(l,m,c),l=c,o.current.lanes=l,zi(o,l),xn(o),t[qo]=o.current,Rc(t),new ia(o)},ks.version="19.2.3",ks}var $h;function Mv(){if($h)return Qc.exports;$h=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Qc.exports=Rv(),Qc.exports}var Iv=Mv();const kv=Yg(Iv),Dv=`<CHARACTER>
##  ##
 ( / Asael)

15
03/21

A

##  ##
MBTIINFP-
MBTI

###  ###
1. 
   - 
2. 
   - 
3. 
   - 

###  ###
1. 
   - 
2. 
   - 
3. 
   - 

###  ###



- 
- 
- 






- 
- 
- 

##  ##
162cm15178cm
48kg


- 
- 


- 
- 






- 
- 

##  ##



- 
- 
- 
- 


- 
- 
- 

##  ##
user

//
user

useruser

##  ##

- 
- 
- 




- 
- 



##  ##


useruser

Alien Stage



##  ##





- 
- 
- 
- 








- 
- 

##  ##
###  ###




Alien Stage

###  ###
user

###  ###
user

###  ###



- 
- 

##  ##



- 
- 



##  ##
1. 
2. 
3. 
4. 
5. 
6. 
7. 
8. 
</CHARACTER>
`,jv={asael:{id:"default_asael",name:"",avatar:"https://i.postimg.cc/C1VsQWj7/Avatar1.webp",avatarPresets:["https://i.postimg.cc/C1VsQWj7/Avatar1.webp","https://i.postimg.cc/7P9nKtbK/Avartar2.webp","https://i.postimg.cc/NGDkdCLN/Avartar3.webp"],nickname:"Asael",personality:"INFP",backstory:"Alien Stageuser",language:"KO_CN",personalityPrompt:Dv,attributes:[{id:"sanity",name:"",value:"80",icon:"",maxValue:100,description:""},{id:"vocal",name:"",value:"95",icon:"",maxValue:100,description:""},{id:"freeWill",name:"",value:"40",icon:"",maxValue:100,description:""}]}};function Jg(n){const e=n.toLowerCase();return jv[e]||null}function Wh(n){const e=Jg(n);return(e==null?void 0:e.personalityPrompt)||null}function Lv(n,e={}){const i=Jg(n);if(!i)return console.warn(`Default character "${n}" not found`),null;const s=Date.now(),r=i.attributes.map(f=>({...f})),u={characterId:i.id,totalMessages:0,totalWords:0,lastConversationTime:s};return{id:`char_${n}_${s}`,name:i.name,avatar:i.avatar,avatarPresets:i.avatarPresets,nickname:i.nickname,personality:i.personality,backstory:i.backstory,isDefault:e.isDefault??!0,isActive:!0,language:i.language,languagePrompt:void 0,personalityPrompt:e.customPrompt??i.personalityPrompt,attributes:r,conversationStats:u,createdAt:s,updatedAt:s}}const Uv=({activeView:n,lastView:e,setActiveView:i,toggleNovelMode:s,isNovelMode:r})=>{const u=[{id:"chat",icon:"",label:"Asael"},{id:"profile",icon:"",label:"CHAR"},{id:"story",icon:"",label:"STORY"},{id:"words",icon:"",label:"WORDS"},{id:"meditation",icon:"",label:"Void"},{id:"awards",icon:"",label:"REWARD"}],f=()=>{i(n==="settings"?e:"settings")};return a.jsxs("nav",{className:"w-16 md:w-20 h-full glass-panel border-r-0 border-y-0 flex flex-col items-center py-8 z-50",children:[a.jsx("button",{onClick:f,className:`mb-12 transition-all duration-300 hover:scale-110 active:scale-95 group ${n==="settings"?"scale-110":""}`,children:a.jsx("div",{className:`w-10 h-10 border rotate-45 flex items-center justify-center transition-colors ${n==="settings"?"border-[#C5A059] bg-[#C5A059]/10 shadow-[0_0_15px_rgba(197,160,89,0.3)]":"border-[#C5A059]/40 group-hover:border-[#C5A059]"}`,children:a.jsx("div",{className:"w-6 h-6 border border-[#C5A059]/40 flex items-center justify-center text-[10px] font-ui text-[#C5A059] -rotate-45",children:"AS"})})}),a.jsx("div",{className:"flex-1 flex flex-col gap-6",children:u.map(g=>{const h=g.id==="words"||g.id==="training"?n==="words"||n==="training":n===g.id;let v=g.icon,b=g.label;return g.id==="words"&&(n==="training"?(v="",b="TRAINING"):n==="words"&&(v="",b="WORDS")),a.jsxs("button",{onClick:()=>{g.id==="chat"&&n==="chat"?s():g.id==="words"?i(n==="words"?"training":"words"):i(g.id)},className:`w-12 h-12 rounded-full flex flex-col items-center justify-center transition-all duration-300 relative ${h?"text-[#C5A059] bg-[#C5A059]/10 shadow-[0_0_15px_rgba(197,160,89,0.2)]":"text-white/30 hover:text-white/60"}`,children:[a.jsx("span",{className:"text-xl",children:v}),a.jsx("span",{className:"text-[6px] font-ui mt-1 uppercase tracking-tighter",children:g.id==="chat"&&n==="chat"?r?"STANDARD":"NOVEL":b}),(g.id==="chat"&&n==="chat"||g.id==="words"&&(n==="words"||n==="training"))&&a.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-[#C5A059] rounded-full animate-pulse"})]},g.id)})}),a.jsx("div",{className:"mt-auto text-[8px] font-ui text-[#C5A059]/40 -rotate-90 whitespace-nowrap mb-4",children:"VER 1.0.0 // AS-PETRA"})]})},Bv="modulepreload",Gv=function(n,e){return new URL(n,e).href},Kh={},Ra=function(e,i,s){let r=Promise.resolve();if(i&&i.length>0){let f=function(v){return Promise.all(v.map(b=>Promise.resolve(b).then(C=>({status:"fulfilled",value:C}),C=>({status:"rejected",reason:C}))))};const g=document.getElementsByTagName("link"),x=document.querySelector("meta[property=csp-nonce]"),h=(x==null?void 0:x.nonce)||(x==null?void 0:x.getAttribute("nonce"));r=f(i.map(v=>{if(v=Gv(v,s),v in Kh)return;Kh[v]=!0;const b=v.endsWith(".css"),C=b?'[rel="stylesheet"]':"";if(!!s)for(let E=g.length-1;E>=0;E--){const w=g[E];if(w.href===v&&(!b||w.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${v}"]${C}`))return;const T=document.createElement("link");if(T.rel=b?"stylesheet":Bv,b||(T.as="script"),T.crossOrigin="",T.href=v,h&&T.setAttribute("nonce",h),document.head.appendChild(T),b)return new Promise((E,w)=>{T.addEventListener("load",E),T.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${v}`)))})}))}function u(f){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=f,window.dispatchEvent(g),!g.defaultPrevented)throw f}return r.then(f=>{for(const g of f||[])g.status==="rejected"&&u(g.reason);return e().catch(u)})};var Pv={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Ov,zv;function qv(){return{geminiUrl:Ov,vertexUrl:zv}}function Hv(n,e,i,s){var r,u;if(!(n!=null&&n.baseUrl)){const f=qv();return e?(r=f.vertexUrl)!==null&&r!==void 0?r:i:(u=f.geminiUrl)!==null&&u!==void 0?u:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class On{}function ge(n,e){const i=/\{([^}]+)\}/g;return n.replace(i,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const u=e[r];return u!=null?String(u):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function p(n,e,i){for(let u=0;u<e.length-1;u++){const f=e[u];if(f.endsWith("[]")){const g=f.slice(0,-2);if(!(g in n))if(Array.isArray(i))n[g]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${f}`);if(Array.isArray(n[g])){const x=n[g];if(Array.isArray(i))for(let h=0;h<x.length;h++){const v=x[h];p(v,e.slice(u+1),i[h])}else for(const h of x)p(h,e.slice(u+1),i)}return}else if(f.endsWith("[0]")){const g=f.slice(0,-3);g in n||(n[g]=[{}]);const x=n[g];p(x[0],e.slice(u+1),i);return}(!n[f]||typeof n[f]!="object")&&(n[f]={}),n=n[f]}const s=e[e.length-1],r=n[s];if(r!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===r)return;if(typeof r=="object"&&typeof i=="object"&&r!==null&&i!==null)Object.assign(r,i);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(n,i):n[s]=i}function d(n,e,i=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return i;const r=e[s];if(r.endsWith("[]")){const u=r.slice(0,-2);if(u in n){const f=n[u];return Array.isArray(f)?f.map(g=>d(g,e.slice(s+1),i)):i}else return i}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return i;throw s}}function Vv(n,e){for(const[i,s]of Object.entries(e)){const r=i.split("."),u=s.split("."),f=new Set;let g=-1;for(let x=0;x<r.length;x++)if(r[x]==="*"){g=x;break}if(g!==-1&&u.length>g)for(let x=g;x<u.length;x++){const h=u[x];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&f.add(h)}cu(n,r,u,0,f)}}function cu(n,e,i,s,r){if(s>=e.length||typeof n!="object"||n===null)return;const u=e[s];if(u.endsWith("[]")){const f=u.slice(0,-2),g=n;if(f in g&&Array.isArray(g[f]))for(const x of g[f])cu(x,e,i,s+1,r)}else if(u==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const f=n,g=Object.keys(f).filter(h=>!h.startsWith("_")&&!r.has(h)),x={};for(const h of g)x[h]=f[h];for(const[h,v]of Object.entries(x)){const b=[];for(const C of i.slice(s))C==="*"?b.push(h):b.push(C);p(f,b,v)}for(const h of g)delete f[h]}}else{const f=n;u in f&&cu(f[u],e,i,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wu(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fv(n){const e={},i=d(n,["operationName"]);i!=null&&p(e,["operationName"],i);const s=d(n,["resourceName"]);return s!=null&&p(e,["_url","resourceName"],s),e}function Yv(n){const e={},i=d(n,["name"]);i!=null&&p(e,["name"],i);const s=d(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const u=d(n,["error"]);u!=null&&p(e,["error"],u);const f=d(n,["response","generateVideoResponse"]);return f!=null&&p(e,["response"],$v(f)),e}function Jv(n){const e={},i=d(n,["name"]);i!=null&&p(e,["name"],i);const s=d(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const u=d(n,["error"]);u!=null&&p(e,["error"],u);const f=d(n,["response"]);return f!=null&&p(e,["response"],Wv(f)),e}function $v(n){const e={},i=d(n,["generatedSamples"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>Kv(f))),p(e,["generatedVideos"],u)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function Wv(n){const e={},i=d(n,["videos"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>Qv(f))),p(e,["generatedVideos"],u)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function Kv(n){const e={},i=d(n,["video"]);return i!=null&&p(e,["video"],ob(i)),e}function Qv(n){const e={},i=d(n,["_self"]);return i!=null&&p(e,["video"],ib(i)),e}function Xv(n){const e={},i=d(n,["operationName"]);return i!=null&&p(e,["_url","operationName"],i),e}function Zv(n){const e={},i=d(n,["operationName"]);return i!=null&&p(e,["_url","operationName"],i),e}function eb(n){const e={},i=d(n,["name"]);i!=null&&p(e,["name"],i);const s=d(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const u=d(n,["error"]);u!=null&&p(e,["error"],u);const f=d(n,["response"]);return f!=null&&p(e,["response"],tb(f)),e}function tb(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["parent"]);s!=null&&p(e,["parent"],s);const r=d(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function $g(n){const e={},i=d(n,["name"]);i!=null&&p(e,["name"],i);const s=d(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const u=d(n,["error"]);u!=null&&p(e,["error"],u);const f=d(n,["response"]);return f!=null&&p(e,["response"],nb(f)),e}function nb(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["parent"]);s!=null&&p(e,["parent"],s);const r=d(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function ob(n){const e={},i=d(n,["uri"]);i!=null&&p(e,["uri"],i);const s=d(n,["encodedVideo"]);s!=null&&p(e,["videoBytes"],wu(s));const r=d(n,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function ib(n){const e={},i=d(n,["gcsUri"]);i!=null&&p(e,["uri"],i);const s=d(n,["bytesBase64Encoded"]);s!=null&&p(e,["videoBytes"],wu(s));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Qh;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Qh||(Qh={}));var Xh;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Xh||(Xh={}));var Zh;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Zh||(Zh={}));var mo;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(mo||(mo={}));var em;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(em||(em={}));var tm;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(tm||(tm={}));var nm;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(nm||(nm={}));var om;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(om||(om={}));var im;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(im||(im={}));var sm;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(sm||(sm={}));var lm;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(lm||(lm={}));var am;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(am||(am={}));var rm;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(rm||(rm={}));var cm;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(cm||(cm={}));var um;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(um||(um={}));var dm;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(dm||(dm={}));var fm;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(fm||(fm={}));var pm;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(pm||(pm={}));var hm;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(hm||(hm={}));var Ca;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Ca||(Ca={}));var mm;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(mm||(mm={}));var gm;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(gm||(gm={}));var xm;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(xm||(xm={}));var uu;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(uu||(uu={}));var ym;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(ym||(ym={}));var vm;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(vm||(vm={}));var bm;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(bm||(bm={}));var Cm;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Cm||(Cm={}));var Sm;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Sm||(Sm={}));var Am;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Am||(Am={}));var _m;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(_m||(_m={}));var Tm;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Tm||(Tm={}));var Em;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Em||(Em={}));var wm;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(wm||(wm={}));var Nm;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Nm||(Nm={}));var Rm;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Rm||(Rm={}));var Mm;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Mm||(Mm={}));var Im;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Im||(Im={}));var km;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(km||(km={}));var Dm;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Dm||(Dm={}));var jm;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(jm||(jm={}));var Lm;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Lm||(Lm={}));var Um;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Um||(Um={}));var Bm;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Bm||(Bm={}));var Gm;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Gm||(Gm={}));var Pm;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Pm||(Pm={}));var Om;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Om||(Om={}));var zm;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(zm||(zm={}));var qm;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(qm||(qm={}));var Hm;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Hm||(Hm={}));var Vm;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Vm||(Vm={}));var Fm;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Fm||(Fm={}));var Ym;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Ym||(Ym={}));var Jm;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Jm||(Jm={}));var $m;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})($m||($m={}));var Ri;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Ri||(Ri={}));class du{constructor(e){const i={};for(const s of e.headers.entries())i[s[0]]=s[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ds{get text(){var e,i,s,r,u,f,g,x;if(((r=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",v=!1;const b=[];for(const C of(x=(g=(f=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content)===null||g===void 0?void 0:g.parts)!==null&&x!==void 0?x:[]){for(const[A,T]of Object.entries(C))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(T!==null||T!==void 0)&&b.push(A);if(typeof C.text=="string"){if(typeof C.thought=="boolean"&&C.thought)continue;v=!0,h+=C.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?h:void 0}get data(){var e,i,s,r,u,f,g,x;if(((r=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const v=[];for(const b of(x=(g=(f=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content)===null||g===void 0?void 0:g.parts)!==null&&x!==void 0?x:[]){for(const[C,A]of Object.entries(b))C!=="inlineData"&&(A!==null||A!==void 0)&&v.push(C);b.inlineData&&typeof b.inlineData.data=="string"&&(h+=atob(b.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,i,s,r,u,f,g,x;if(((r=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(x=(g=(f=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content)===null||g===void 0?void 0:g.parts)===null||x===void 0?void 0:x.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,i,s,r,u,f,g,x,h;if(((r=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(x=(g=(f=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content)===null||g===void 0?void 0:g.parts)===null||x===void 0?void 0:x.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,i,s,r,u,f,g,x,h;if(((r=(s=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(x=(g=(f=(u=this.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content)===null||g===void 0?void 0:g.parts)===null||x===void 0?void 0:x.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.output}}class Wm{}class Km{}class sb{}class lb{}class ab{}class rb{}class Qm{}class Xm{}class Zm{}class cb{}class Sa{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new Sa;let r;const u=e;return i?r=Jv(u):r=Yv(u),Object.assign(s,r),s}}class eg{}class tg{}class ng{}class og{}class ub{}class db{}class fb{}class Nu{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new Nu,u=eb(e);return Object.assign(s,u),s}}class pb{}class hb{}class mb{}class ig{}class gb{get text(){var e,i,s;let r="",u=!1;const f=[];for(const g of(s=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&s!==void 0?s:[]){for(const[x,h]of Object.entries(g))x!=="text"&&x!=="thought"&&h!==null&&f.push(x);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;u=!0,r+=g.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),u?r:void 0}get data(){var e,i,s;let r="";const u=[];for(const f of(s=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&s!==void 0?s:[]){for(const[g,x]of Object.entries(f))g!=="inlineData"&&x!==null&&u.push(g);f.inlineData&&typeof f.inlineData.data=="string"&&(r+=atob(f.inlineData.data))}return u.length>0&&console.warn(`there are non-data parts ${u} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class xb{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Ru{_fromAPIResponse({apiResponse:e,_isVertexAI:i}){const s=new Ru,u=$g(e);return Object.assign(s,u),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fe(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Wg(n,e){const i=Fe(n,e);return i?i.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${i}`:i.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${i}`:i:""}function Kg(n){return Array.isArray(n)?n.map(e=>Aa(e)):[Aa(n)]}function Aa(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Qg(n){const e=Aa(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Xg(n){const e=Aa(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function sg(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Zg(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>sg(e)):[sg(n)]}function fu(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function lg(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function ag(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Et(n){if(n==null)throw new Error("ContentUnion is required");return fu(n)?n:{role:"user",parts:Zg(n)}}function Mu(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const s=Et(i);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const i=Et(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>Et(i)):[Et(e)]}function sn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(lg(n)||ag(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Et(n)]}const e=[],i=[],s=fu(n[0]);for(const r of n){const u=fu(r);if(u!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(u)e.push(r);else{if(lg(r)||ag(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(r)}}return s||e.push({role:"user",parts:Zg(i)}),e}function yb(n,e){n.includes("null")&&(e.nullable=!0);const i=n.filter(s=>s!=="null");if(i.length===1)e.type=Object.values(mo).includes(i[0].toUpperCase())?i[0].toUpperCase():mo.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of i)e.anyOf.push({type:Object.values(mo).includes(s.toUpperCase())?s.toUpperCase():mo.TYPE_UNSPECIFIED})}}function Ii(n){const e={},i=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const u=n.anyOf;u!=null&&u.length==2&&(u[0].type==="null"?(e.nullable=!0,n=u[1]):u[1].type==="null"&&(e.nullable=!0,n=u[0])),n.type instanceof Array&&yb(n.type,e);for(const[f,g]of Object.entries(n))if(g!=null)if(f=="type"){if(g==="null")throw new Error("type: null can not be the only possible type for the field.");if(g instanceof Array)continue;e.type=Object.values(mo).includes(g.toUpperCase())?g.toUpperCase():mo.TYPE_UNSPECIFIED}else if(i.includes(f))e[f]=Ii(g);else if(s.includes(f)){const x=[];for(const h of g){if(h.type=="null"){e.nullable=!0;continue}x.push(Ii(h))}e[f]=x}else if(r.includes(f)){const x={};for(const[h,v]of Object.entries(g))x[h]=Ii(v);e[f]=x}else{if(f==="additionalProperties")continue;e[f]=g}return e}function Iu(n){return Ii(n)}function ku(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Du(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Li(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ii(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ii(e.response));return n}function Ui(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of n)e.push(i);return e}function vb(n,e,i,s=1){const r=!e.startsWith(`${i}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${i}/${e}`:e:r?`${i}/${e}`:e}function zn(n,e){if(typeof e!="string")throw new Error("name must be a string");return vb(n,e,"cachedContents")}function e0(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function yo(n){return wu(n)}function bb(n){return n!=null&&typeof n=="object"&&"name"in n}function Cb(n){return n!=null&&typeof n=="object"&&"video"in n}function Sb(n){return n!=null&&typeof n=="object"&&"uri"in n}function t0(n){var e;let i;if(bb(n)&&(i=n.name),!(Sb(n)&&(i=n.uri,i===void 0))&&!(Cb(n)&&(i=(e=n.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof n=="string"&&(i=n),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const r=i.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${i}`);i=r[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function n0(n,e){let i;return n.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function o0(n){for(const e of["models","tunedModels","publisherModels"])if(Ab(n,e))return n[e];return[]}function Ab(n,e){return n!==null&&typeof n=="object"&&e in n}function _b(n,e={}){const i=n,s={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(s.responseJsonSchema=i.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function Tb(n,e={}){const i=[],s=new Set;for(const r of n){const u=r.name;if(s.has(u))throw new Error(`Duplicate function name ${u} found in MCP tools. Please ensure function names are unique.`);s.add(u);const f=_b(r,e);f.functionDeclarations&&i.push(...f.functionDeclarations)}return{functionDeclarations:i}}function i0(n,e){let i;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const s=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,r=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function Eb(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function s0(n){if(typeof n!="object"||n===null)return{};const e=n,i=e.inlinedResponses;if(typeof i!="object"||i===null)return n;const r=i.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let u=!1;for(const f of r){if(typeof f!="object"||f===null)continue;const x=f.response;if(typeof x!="object"||x===null)continue;if(x.embedding!==void 0){u=!0;break}}return u&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Bi(n,e){const i=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function l0(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wb(n){const e={},i=d(n,["responsesFile"]);i!=null&&p(e,["fileName"],i);const s=d(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>aC(f))),p(e,["inlinedResponses"],u)}const r=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),p(e,["inlinedEmbedContentResponses"],u)}return e}function Nb(n){const e={},i=d(n,["predictionsFormat"]);i!=null&&p(e,["format"],i);const s=d(n,["gcsDestination","outputUriPrefix"]);s!=null&&p(e,["gcsUri"],s);const r=d(n,["bigqueryDestination","outputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function Rb(n){const e={},i=d(n,["format"]);i!=null&&p(e,["predictionsFormat"],i);const s=d(n,["gcsUri"]);s!=null&&p(e,["gcsDestination","outputUriPrefix"],s);const r=d(n,["bigqueryUri"]);if(r!=null&&p(e,["bigqueryDestination","outputUri"],r),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ga(n){const e={},i=d(n,["name"]);i!=null&&p(e,["name"],i);const s=d(n,["metadata","displayName"]);s!=null&&p(e,["displayName"],s);const r=d(n,["metadata","state"]);r!=null&&p(e,["state"],l0(r));const u=d(n,["metadata","createTime"]);u!=null&&p(e,["createTime"],u);const f=d(n,["metadata","endTime"]);f!=null&&p(e,["endTime"],f);const g=d(n,["metadata","updateTime"]);g!=null&&p(e,["updateTime"],g);const x=d(n,["metadata","model"]);x!=null&&p(e,["model"],x);const h=d(n,["metadata","output"]);return h!=null&&p(e,["dest"],wb(s0(h))),e}function pu(n){const e={},i=d(n,["name"]);i!=null&&p(e,["name"],i);const s=d(n,["displayName"]);s!=null&&p(e,["displayName"],s);const r=d(n,["state"]);r!=null&&p(e,["state"],l0(r));const u=d(n,["error"]);u!=null&&p(e,["error"],u);const f=d(n,["createTime"]);f!=null&&p(e,["createTime"],f);const g=d(n,["startTime"]);g!=null&&p(e,["startTime"],g);const x=d(n,["endTime"]);x!=null&&p(e,["endTime"],x);const h=d(n,["updateTime"]);h!=null&&p(e,["updateTime"],h);const v=d(n,["model"]);v!=null&&p(e,["model"],v);const b=d(n,["inputConfig"]);b!=null&&p(e,["src"],Mb(b));const C=d(n,["outputConfig"]);C!=null&&p(e,["dest"],Nb(s0(C)));const A=d(n,["completionStats"]);return A!=null&&p(e,["completionStats"],A),e}function Mb(n){const e={},i=d(n,["instancesFormat"]);i!=null&&p(e,["format"],i);const s=d(n,["gcsSource","uris"]);s!=null&&p(e,["gcsUri"],s);const r=d(n,["bigquerySource","inputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function Ib(n,e){const i={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=d(e,["fileName"]);s!=null&&p(i,["fileName"],s);const r=d(e,["inlinedRequests"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>lC(n,f))),p(i,["requests","requests"],u)}return i}function kb(n){const e={},i=d(n,["format"]);i!=null&&p(e,["instancesFormat"],i);const s=d(n,["gcsUri"]);s!=null&&p(e,["gcsSource","uris"],s);const r=d(n,["bigqueryUri"]);if(r!=null&&p(e,["bigquerySource","inputUri"],r),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Db(n){const e={},i=d(n,["data"]);if(i!=null&&p(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function jb(n,e){const i={},s=d(e,["name"]);return s!=null&&p(i,["_url","name"],Bi(n,s)),i}function Lb(n,e){const i={},s=d(e,["name"]);return s!=null&&p(i,["_url","name"],Bi(n,s)),i}function Ub(n){const e={},i=d(n,["content"]);i!=null&&p(e,["content"],i);const s=d(n,["citationMetadata"]);s!=null&&p(e,["citationMetadata"],Bb(s));const r=d(n,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const u=d(n,["finishReason"]);u!=null&&p(e,["finishReason"],u);const f=d(n,["avgLogprobs"]);f!=null&&p(e,["avgLogprobs"],f);const g=d(n,["groundingMetadata"]);g!=null&&p(e,["groundingMetadata"],g);const x=d(n,["index"]);x!=null&&p(e,["index"],x);const h=d(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const v=d(n,["safetyRatings"]);if(v!=null){let C=v;Array.isArray(C)&&(C=C.map(A=>A)),p(e,["safetyRatings"],C)}const b=d(n,["urlContextMetadata"]);return b!=null&&p(e,["urlContextMetadata"],b),e}function Bb(n){const e={},i=d(n,["citationSources"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),p(e,["citations"],s)}return e}function a0(n){const e={},i=d(n,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>hC(u))),p(e,["parts"],r)}const s=d(n,["role"]);return s!=null&&p(e,["role"],s),e}function Gb(n,e){const i={},s=d(n,["displayName"]);if(e!==void 0&&s!=null&&p(e,["batch","displayName"],s),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function Pb(n,e){const i={},s=d(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const r=d(n,["dest"]);return e!==void 0&&r!=null&&p(e,["outputConfig"],Rb(Eb(r))),i}function rg(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["_url","model"],Fe(n,s));const r=d(e,["src"]);r!=null&&p(i,["batch","inputConfig"],Ib(n,i0(n,r)));const u=d(e,["config"]);return u!=null&&Gb(u,i),i}function Ob(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["model"],Fe(n,s));const r=d(e,["src"]);r!=null&&p(i,["inputConfig"],kb(i0(n,r)));const u=d(e,["config"]);return u!=null&&Pb(u,i),i}function zb(n,e){const i={},s=d(n,["displayName"]);return e!==void 0&&s!=null&&p(e,["batch","displayName"],s),i}function qb(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["_url","model"],Fe(n,s));const r=d(e,["src"]);r!=null&&p(i,["batch","inputConfig"],Wb(n,r));const u=d(e,["config"]);return u!=null&&zb(u,i),i}function Hb(n,e){const i={},s=d(e,["name"]);return s!=null&&p(i,["_url","name"],Bi(n,s)),i}function Vb(n,e){const i={},s=d(e,["name"]);return s!=null&&p(i,["_url","name"],Bi(n,s)),i}function Fb(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["name"]);s!=null&&p(e,["name"],s);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const u=d(n,["error"]);return u!=null&&p(e,["error"],u),e}function Yb(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["name"]);s!=null&&p(e,["name"],s);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const u=d(n,["error"]);return u!=null&&p(e,["error"],u),e}function Jb(n,e){const i={},s=d(e,["contents"]);if(s!=null){let u=Mu(n,s);Array.isArray(u)&&(u=u.map(f=>f)),p(i,["requests[]","request","content"],u)}const r=d(e,["config"]);return r!=null&&(p(i,["_self"],$b(r,i)),Vv(i,{"requests[].*":"requests[].request.*"})),i}function $b(n,e){const i={},s=d(n,["taskType"]);e!==void 0&&s!=null&&p(e,["requests[]","taskType"],s);const r=d(n,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const u=d(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&p(e,["requests[]","outputDimensionality"],u),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function Wb(n,e){const i={},s=d(e,["fileName"]);s!=null&&p(i,["file_name"],s);const r=d(e,["inlinedRequests"]);return r!=null&&p(i,["requests"],Jb(n,r)),i}function Kb(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&p(e,["fileUri"],i);const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function Qb(n){const e={},i=d(n,["id"]);i!=null&&p(e,["id"],i);const s=d(n,["args"]);s!=null&&p(e,["args"],s);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Xb(n){const e={},i=d(n,["mode"]);i!=null&&p(e,["mode"],i);const s=d(n,["allowedFunctionNames"]);if(s!=null&&p(e,["allowedFunctionNames"],s),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Zb(n,e,i){const s={},r=d(e,["systemInstruction"]);i!==void 0&&r!=null&&p(i,["systemInstruction"],a0(Et(r)));const u=d(e,["temperature"]);u!=null&&p(s,["temperature"],u);const f=d(e,["topP"]);f!=null&&p(s,["topP"],f);const g=d(e,["topK"]);g!=null&&p(s,["topK"],g);const x=d(e,["candidateCount"]);x!=null&&p(s,["candidateCount"],x);const h=d(e,["maxOutputTokens"]);h!=null&&p(s,["maxOutputTokens"],h);const v=d(e,["stopSequences"]);v!=null&&p(s,["stopSequences"],v);const b=d(e,["responseLogprobs"]);b!=null&&p(s,["responseLogprobs"],b);const C=d(e,["logprobs"]);C!=null&&p(s,["logprobs"],C);const A=d(e,["presencePenalty"]);A!=null&&p(s,["presencePenalty"],A);const T=d(e,["frequencyPenalty"]);T!=null&&p(s,["frequencyPenalty"],T);const E=d(e,["seed"]);E!=null&&p(s,["seed"],E);const w=d(e,["responseMimeType"]);w!=null&&p(s,["responseMimeType"],w);const R=d(e,["responseSchema"]);R!=null&&p(s,["responseSchema"],Iu(R));const I=d(e,["responseJsonSchema"]);if(I!=null&&p(s,["responseJsonSchema"],I),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=d(e,["safetySettings"]);if(i!==void 0&&M!=null){let re=M;Array.isArray(re)&&(re=re.map(J=>mC(J))),p(i,["safetySettings"],re)}const q=d(e,["tools"]);if(i!==void 0&&q!=null){let re=Ui(q);Array.isArray(re)&&(re=re.map(J=>xC(Li(J)))),p(i,["tools"],re)}const G=d(e,["toolConfig"]);if(i!==void 0&&G!=null&&p(i,["toolConfig"],gC(G)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=d(e,["cachedContent"]);i!==void 0&&U!=null&&p(i,["cachedContent"],zn(n,U));const V=d(e,["responseModalities"]);V!=null&&p(s,["responseModalities"],V);const ce=d(e,["mediaResolution"]);ce!=null&&p(s,["mediaResolution"],ce);const se=d(e,["speechConfig"]);if(se!=null&&p(s,["speechConfig"],ku(se)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const xe=d(e,["thinkingConfig"]);xe!=null&&p(s,["thinkingConfig"],xe);const de=d(e,["imageConfig"]);de!=null&&p(s,["imageConfig"],sC(de));const Q=d(e,["enableEnhancedCivicAnswers"]);return Q!=null&&p(s,["enableEnhancedCivicAnswers"],Q),s}function eC(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["candidates"]);if(s!=null){let x=s;Array.isArray(x)&&(x=x.map(h=>Ub(h))),p(e,["candidates"],x)}const r=d(n,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const u=d(n,["promptFeedback"]);u!=null&&p(e,["promptFeedback"],u);const f=d(n,["responseId"]);f!=null&&p(e,["responseId"],f);const g=d(n,["usageMetadata"]);return g!=null&&p(e,["usageMetadata"],g),e}function tC(n,e){const i={},s=d(e,["name"]);return s!=null&&p(i,["_url","name"],Bi(n,s)),i}function nC(n,e){const i={},s=d(e,["name"]);return s!=null&&p(i,["_url","name"],Bi(n,s)),i}function oC(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&p(e,["enableWidget"],i),e}function iC(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&p(e,["timeRangeFilter"],i),e}function sC(n){const e={},i=d(n,["aspectRatio"]);i!=null&&p(e,["aspectRatio"],i);const s=d(n,["imageSize"]);if(s!=null&&p(e,["imageSize"],s),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function lC(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["request","model"],Fe(n,s));const r=d(e,["contents"]);if(r!=null){let g=sn(r);Array.isArray(g)&&(g=g.map(x=>a0(x))),p(i,["request","contents"],g)}const u=d(e,["metadata"]);u!=null&&p(i,["metadata"],u);const f=d(e,["config"]);return f!=null&&p(i,["request","generationConfig"],Zb(n,f,d(i,["request"],{}))),i}function aC(n){const e={},i=d(n,["response"]);i!=null&&p(e,["response"],eC(i));const s=d(n,["error"]);return s!=null&&p(e,["error"],s),e}function rC(n,e){const i={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=d(n,["pageToken"]);if(e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function cC(n,e){const i={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=d(n,["pageToken"]);e!==void 0&&r!=null&&p(e,["_query","pageToken"],r);const u=d(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),i}function uC(n){const e={},i=d(n,["config"]);return i!=null&&rC(i,e),e}function dC(n){const e={},i=d(n,["config"]);return i!=null&&cC(i,e),e}function fC(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=d(n,["operations"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>ga(f))),p(e,["batchJobs"],u)}return e}function pC(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=d(n,["batchPredictionJobs"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>pu(f))),p(e,["batchJobs"],u)}return e}function hC(n){const e={},i=d(n,["mediaResolution"]);i!=null&&p(e,["mediaResolution"],i);const s=d(n,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const u=d(n,["fileData"]);u!=null&&p(e,["fileData"],Kb(u));const f=d(n,["functionCall"]);f!=null&&p(e,["functionCall"],Qb(f));const g=d(n,["functionResponse"]);g!=null&&p(e,["functionResponse"],g);const x=d(n,["inlineData"]);x!=null&&p(e,["inlineData"],Db(x));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const v=d(n,["thought"]);v!=null&&p(e,["thought"],v);const b=d(n,["thoughtSignature"]);b!=null&&p(e,["thoughtSignature"],b);const C=d(n,["videoMetadata"]);return C!=null&&p(e,["videoMetadata"],C),e}function mC(n){const e={},i=d(n,["category"]);if(i!=null&&p(e,["category"],i),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(n,["threshold"]);return s!=null&&p(e,["threshold"],s),e}function gC(n){const e={},i=d(n,["functionCallingConfig"]);i!=null&&p(e,["functionCallingConfig"],Xb(i));const s=d(n,["retrievalConfig"]);return s!=null&&p(e,["retrievalConfig"],s),e}function xC(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(b=>b)),p(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const u=d(n,["fileSearch"]);u!=null&&p(e,["fileSearch"],u);const f=d(n,["codeExecution"]);if(f!=null&&p(e,["codeExecution"],f),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],oC(g));const x=d(n,["googleSearch"]);x!=null&&p(e,["googleSearch"],iC(x));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Pn;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Pn||(Pn={}));class Oo{constructor(e,i,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,s,r)}init(e,i,s){var r,u;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let f={config:{}};!s||Object.keys(s).length===0?f={config:{}}:typeof s=="object"?f=Object.assign({},s):f=s,f.config&&(f.config.pageToken=i.nextPageToken),this.paramsInternal=f,this.pageInternalSize=(u=(r=f.config)===null||r===void 0?void 0:r.pageSize)!==null&&u!==void 0?u:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yC extends On{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Oo(Pn.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(i),i),this.create=async i=>(this.apiClient.isVertexAI()&&(i.config=this.formatDestination(i.src,i.config)),this.createInternal(i)),this.createEmbeddings=async i=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(i)}}createInlinedGenerateContentRequest(e){const i=rg(this.apiClient,e),s=i._url,r=ge("{model}:batchGenerateContent",s),g=i.batch.inputConfig.requests,x=g.requests,h=[];for(const v of x){const b=Object.assign({},v);if(b.systemInstruction){const C=b.systemInstruction;delete b.systemInstruction;const A=b.request;A.systemInstruction=C,b.request=A}h.push(b)}return g.requests=h,delete i.config,delete i._url,delete i._query,{path:r,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const s=i?Object.assign({},i):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const u=this.getGcsUri(e),f=this.getBigqueryUri(e);if(u)u.endsWith(".jsonl")?s.dest=`${u.slice(0,-6)}/dest`:s.dest=`${u}_dest_${r}`;else if(f)s.dest=`${f}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=Ob(this.apiClient,e);return g=ge("batchPredictionJobs",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>pu(v))}else{const h=rg(this.apiClient,e);return g=ge("{model}:batchGenerateContent",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),f.then(v=>ga(v))}}async createEmbeddingsInternal(e){var i,s;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=qb(this.apiClient,e);return u=ge("{model}:asyncBatchEmbedContent",g._url),f=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),r.then(x=>ga(x))}}async get(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=nC(this.apiClient,e);return g=ge("batchPredictionJobs/{name}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>pu(v))}else{const h=tC(this.apiClient,e);return g=ge("batches/{name}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),f.then(v=>ga(v))}}async cancel(e){var i,s,r,u;let f="",g={};if(this.apiClient.isVertexAI()){const x=Lb(this.apiClient,e);f=ge("batchPredictionJobs/{name}:cancel",x._url),g=x._query,delete x._url,delete x._query,await this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const x=jb(this.apiClient,e);f=ge("batches/{name}:cancel",x._url),g=x._query,delete x._url,delete x._query,await this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal})}}async listInternal(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=dC(e);return g=ge("batchPredictionJobs",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=pC(v),C=new ig;return Object.assign(C,b),C})}else{const h=uC(e);return g=ge("batches",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=fC(v),C=new ig;return Object.assign(C,b),C})}}async delete(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=Vb(this.apiClient,e);return g=ge("batchPredictionJobs/{name}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>Yb(v))}else{const h=Hb(this.apiClient,e);return g=ge("batches/{name}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>Fb(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vC(n){const e={},i=d(n,["data"]);if(i!=null&&p(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function cg(n){const e={},i=d(n,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>qC(u))),p(e,["parts"],r)}const s=d(n,["role"]);return s!=null&&p(e,["role"],s),e}function bC(n,e){const i={},s=d(n,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=d(n,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const u=d(n,["displayName"]);e!==void 0&&u!=null&&p(e,["displayName"],u);const f=d(n,["contents"]);if(e!==void 0&&f!=null){let v=sn(f);Array.isArray(v)&&(v=v.map(b=>cg(b))),p(e,["contents"],v)}const g=d(n,["systemInstruction"]);e!==void 0&&g!=null&&p(e,["systemInstruction"],cg(Et(g)));const x=d(n,["tools"]);if(e!==void 0&&x!=null){let v=x;Array.isArray(v)&&(v=v.map(b=>VC(b))),p(e,["tools"],v)}const h=d(n,["toolConfig"]);if(e!==void 0&&h!=null&&p(e,["toolConfig"],HC(h)),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function CC(n,e){const i={},s=d(n,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=d(n,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const u=d(n,["displayName"]);e!==void 0&&u!=null&&p(e,["displayName"],u);const f=d(n,["contents"]);if(e!==void 0&&f!=null){let b=sn(f);Array.isArray(b)&&(b=b.map(C=>C)),p(e,["contents"],b)}const g=d(n,["systemInstruction"]);e!==void 0&&g!=null&&p(e,["systemInstruction"],Et(g));const x=d(n,["tools"]);if(e!==void 0&&x!=null){let b=x;Array.isArray(b)&&(b=b.map(C=>FC(C))),p(e,["tools"],b)}const h=d(n,["toolConfig"]);e!==void 0&&h!=null&&p(e,["toolConfig"],h);const v=d(n,["kmsKeyName"]);return e!==void 0&&v!=null&&p(e,["encryption_spec","kmsKeyName"],v),i}function SC(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["model"],Wg(n,s));const r=d(e,["config"]);return r!=null&&bC(r,i),i}function AC(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["model"],Wg(n,s));const r=d(e,["config"]);return r!=null&&CC(r,i),i}function _C(n,e){const i={},s=d(e,["name"]);return s!=null&&p(i,["_url","name"],zn(n,s)),i}function TC(n,e){const i={},s=d(e,["name"]);return s!=null&&p(i,["_url","name"],zn(n,s)),i}function EC(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(e,["sdkHttpResponse"],i),e}function wC(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(e,["sdkHttpResponse"],i),e}function NC(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&p(e,["fileUri"],i);const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function RC(n){const e={},i=d(n,["id"]);i!=null&&p(e,["id"],i);const s=d(n,["args"]);s!=null&&p(e,["args"],s);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function MC(n){const e={},i=d(n,["mode"]);i!=null&&p(e,["mode"],i);const s=d(n,["allowedFunctionNames"]);if(s!=null&&p(e,["allowedFunctionNames"],s),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function IC(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(n,["description"]);i!=null&&p(e,["description"],i);const s=d(n,["name"]);s!=null&&p(e,["name"],s);const r=d(n,["parameters"]);r!=null&&p(e,["parameters"],r);const u=d(n,["parametersJsonSchema"]);u!=null&&p(e,["parametersJsonSchema"],u);const f=d(n,["response"]);f!=null&&p(e,["response"],f);const g=d(n,["responseJsonSchema"]);return g!=null&&p(e,["responseJsonSchema"],g),e}function kC(n,e){const i={},s=d(e,["name"]);return s!=null&&p(i,["_url","name"],zn(n,s)),i}function DC(n,e){const i={},s=d(e,["name"]);return s!=null&&p(i,["_url","name"],zn(n,s)),i}function jC(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&p(e,["enableWidget"],i),e}function LC(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&p(e,["timeRangeFilter"],i),e}function UC(n,e){const i={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),i}function BC(n,e){const i={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),i}function GC(n){const e={},i=d(n,["config"]);return i!=null&&UC(i,e),e}function PC(n){const e={},i=d(n,["config"]);return i!=null&&BC(i,e),e}function OC(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=d(n,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),p(e,["cachedContents"],u)}return e}function zC(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=d(n,["cachedContents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),p(e,["cachedContents"],u)}return e}function qC(n){const e={},i=d(n,["mediaResolution"]);i!=null&&p(e,["mediaResolution"],i);const s=d(n,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const u=d(n,["fileData"]);u!=null&&p(e,["fileData"],NC(u));const f=d(n,["functionCall"]);f!=null&&p(e,["functionCall"],RC(f));const g=d(n,["functionResponse"]);g!=null&&p(e,["functionResponse"],g);const x=d(n,["inlineData"]);x!=null&&p(e,["inlineData"],vC(x));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const v=d(n,["thought"]);v!=null&&p(e,["thought"],v);const b=d(n,["thoughtSignature"]);b!=null&&p(e,["thoughtSignature"],b);const C=d(n,["videoMetadata"]);return C!=null&&p(e,["videoMetadata"],C),e}function HC(n){const e={},i=d(n,["functionCallingConfig"]);i!=null&&p(e,["functionCallingConfig"],MC(i));const s=d(n,["retrievalConfig"]);return s!=null&&p(e,["retrievalConfig"],s),e}function VC(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(b=>b)),p(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const u=d(n,["fileSearch"]);u!=null&&p(e,["fileSearch"],u);const f=d(n,["codeExecution"]);if(f!=null&&p(e,["codeExecution"],f),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],jC(g));const x=d(n,["googleSearch"]);x!=null&&p(e,["googleSearch"],LC(x));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function FC(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let b=i;Array.isArray(b)&&(b=b.map(C=>IC(C))),p(e,["functionDeclarations"],b)}const s=d(n,["retrieval"]);s!=null&&p(e,["retrieval"],s);const r=d(n,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const u=d(n,["computerUse"]);if(u!=null&&p(e,["computerUse"],u),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const f=d(n,["codeExecution"]);f!=null&&p(e,["codeExecution"],f);const g=d(n,["enterpriseWebSearch"]);g!=null&&p(e,["enterpriseWebSearch"],g);const x=d(n,["googleMaps"]);x!=null&&p(e,["googleMaps"],x);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const v=d(n,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function YC(n,e){const i={},s=d(n,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=d(n,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),i}function JC(n,e){const i={},s=d(n,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=d(n,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),i}function $C(n,e){const i={},s=d(e,["name"]);s!=null&&p(i,["_url","name"],zn(n,s));const r=d(e,["config"]);return r!=null&&YC(r,i),i}function WC(n,e){const i={},s=d(e,["name"]);s!=null&&p(i,["_url","name"],zn(n,s));const r=d(e,["config"]);return r!=null&&JC(r,i),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KC extends On{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Oo(Pn.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(i),i)}async create(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=AC(this.apiClient,e);return g=ge("cachedContents",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>v)}else{const h=SC(this.apiClient,e);return g=ge("cachedContents",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),f.then(v=>v)}}async get(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=DC(this.apiClient,e);return g=ge("{name}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>v)}else{const h=kC(this.apiClient,e);return g=ge("{name}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),f.then(v=>v)}}async delete(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=TC(this.apiClient,e);return g=ge("{name}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=wC(v),C=new ng;return Object.assign(C,b),C})}else{const h=_C(this.apiClient,e);return g=ge("{name}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=EC(v),C=new ng;return Object.assign(C,b),C})}}async update(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=WC(this.apiClient,e);return g=ge("{name}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>v)}else{const h=$C(this.apiClient,e);return g=ge("{name}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),f.then(v=>v)}}async listInternal(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=PC(e);return g=ge("cachedContents",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=zC(v),C=new og;return Object.assign(C,b),C})}else{const h=GC(e);return g=ge("cachedContents",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=OC(v),C=new og;return Object.assign(C,b),C})}}}function _a(n,e){var i={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(i[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(i[s[r]]=n[s[r]]);return i}function ug(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],s=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Re(n){return this instanceof Re?(this.v=n,this):new Re(n)}function dn(n,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(n,e||[]),r,u=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",f),r[Symbol.asyncIterator]=function(){return this},r;function f(A){return function(T){return Promise.resolve(T).then(A,b)}}function g(A,T){s[A]&&(r[A]=function(E){return new Promise(function(w,R){u.push([A,E,w,R])>1||x(A,E)})},T&&(r[A]=T(r[A])))}function x(A,T){try{h(s[A](T))}catch(E){C(u[0][3],E)}}function h(A){A.value instanceof Re?Promise.resolve(A.value.v).then(v,b):C(u[0][2],A)}function v(A){x("next",A)}function b(A){x("throw",A)}function C(A,T){A(T),u.shift(),u.length&&x(u[0][0],u[0][1])}}function fn(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],i;return e?e.call(n):(n=typeof ug=="function"?ug(n):n[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(u){i[u]=n[u]&&function(f){return new Promise(function(g,x){f=n[u](f),r(g,x,f.done,f.value)})}}function r(u,f,g,x){Promise.resolve(x).then(function(h){u({value:h,done:g})},f)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QC(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const i=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:r0(i)}function r0(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function XC(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function dg(n){if(n===void 0||n.length===0)return[];const e=[],i=n.length;let s=0;for(;s<i;)if(n[s].role==="user")e.push(n[s]),s++;else{const r=[];let u=!0;for(;s<i&&n[s].role==="model";)r.push(n[s]),u&&!r0(n[s])&&(u=!1),s++;u?e.push(...r):e.pop()}return e}class ZC{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new eS(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class eS{constructor(e,i,s,r={},u=[]){this.apiClient=e,this.modelsModule=i,this.model=s,this.config=r,this.history=u,this.sendPromise=Promise.resolve(),XC(u)}async sendMessage(e){var i;await this.sendPromise;const s=Et(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var u,f,g;const x=await r,h=(f=(u=x.candidates)===null||u===void 0?void 0:u[0])===null||f===void 0?void 0:f.content,v=x.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let C=[];v!=null&&(C=(g=v.slice(b))!==null&&g!==void 0?g:[]);const A=h?[h]:[];this.recordHistory(s,A,C)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var i;await this.sendPromise;const s=Et(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const u=await r;return this.processStreamResponse(u,s)}getHistory(e=!1){const i=e?dg(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){return dn(this,arguments,function*(){var r,u,f,g,x,h;const v=[];try{for(var b=!0,C=fn(e),A;A=yield Re(C.next()),r=A.done,!r;b=!0){g=A.value,b=!1;const T=g;if(QC(T)){const E=(h=(x=T.candidates)===null||x===void 0?void 0:x[0])===null||h===void 0?void 0:h.content;E!==void 0&&v.push(E)}yield yield Re(T)}}catch(T){u={error:T}}finally{try{!b&&!r&&(f=C.return)&&(yield Re(f.call(C)))}finally{if(u)throw u.error}}this.recordHistory(i,v)})}recordHistory(e,i,s){let r=[];i.length>0&&i.every(u=>u.role!==void 0)?r=i:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...dg(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ma extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ma.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tS(n){const e={},i=d(n,["file"]);return i!=null&&p(e,["file"],i),e}function nS(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(e,["sdkHttpResponse"],i),e}function oS(n){const e={},i=d(n,["name"]);return i!=null&&p(e,["_url","file"],t0(i)),e}function iS(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(e,["sdkHttpResponse"],i),e}function sS(n){const e={},i=d(n,["name"]);return i!=null&&p(e,["_url","file"],t0(i)),e}function lS(n,e){const i={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),i}function aS(n){const e={},i=d(n,["config"]);return i!=null&&lS(i,e),e}function rS(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=d(n,["files"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),p(e,["files"],u)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cS extends On{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Oo(Pn.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>i)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,s;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=aS(e);return u=ge("files",g._url),f=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:x.headers},v})),r.then(x=>{const h=rS(x),v=new pb;return Object.assign(v,h),v})}}async createInternal(e){var i,s;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=tS(e);return u=ge("upload/v1beta/files",g._url),f=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),r.then(x=>{const h=nS(x),v=new hb;return Object.assign(v,h),v})}}async get(e){var i,s;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=sS(e);return u=ge("files/{file}",g._url),f=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),r.then(x=>x)}}async delete(e){var i,s;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=oS(e);return u=ge("files/{file}",g._url),f=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:x.headers},v})),r.then(x=>{const h=iS(x),v=new mb;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xa(n){const e={},i=d(n,["data"]);if(i!=null&&p(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function uS(n){const e={},i=d(n,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>ES(u))),p(e,["parts"],r)}const s=d(n,["role"]);return s!=null&&p(e,["role"],s),e}function dS(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&p(e,["fileUri"],i);const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function fS(n){const e={},i=d(n,["id"]);i!=null&&p(e,["id"],i);const s=d(n,["args"]);s!=null&&p(e,["args"],s);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function pS(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(n,["description"]);i!=null&&p(e,["description"],i);const s=d(n,["name"]);s!=null&&p(e,["name"],s);const r=d(n,["parameters"]);r!=null&&p(e,["parameters"],r);const u=d(n,["parametersJsonSchema"]);u!=null&&p(e,["parametersJsonSchema"],u);const f=d(n,["response"]);f!=null&&p(e,["response"],f);const g=d(n,["responseJsonSchema"]);return g!=null&&p(e,["responseJsonSchema"],g),e}function hS(n){const e={},i=d(n,["modelSelectionConfig"]);i!=null&&p(e,["modelConfig"],i);const s=d(n,["responseJsonSchema"]);s!=null&&p(e,["responseJsonSchema"],s);const r=d(n,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const u=d(n,["candidateCount"]);u!=null&&p(e,["candidateCount"],u);const f=d(n,["enableAffectiveDialog"]);f!=null&&p(e,["enableAffectiveDialog"],f);const g=d(n,["frequencyPenalty"]);g!=null&&p(e,["frequencyPenalty"],g);const x=d(n,["logprobs"]);x!=null&&p(e,["logprobs"],x);const h=d(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const v=d(n,["mediaResolution"]);v!=null&&p(e,["mediaResolution"],v);const b=d(n,["presencePenalty"]);b!=null&&p(e,["presencePenalty"],b);const C=d(n,["responseLogprobs"]);C!=null&&p(e,["responseLogprobs"],C);const A=d(n,["responseMimeType"]);A!=null&&p(e,["responseMimeType"],A);const T=d(n,["responseModalities"]);T!=null&&p(e,["responseModalities"],T);const E=d(n,["responseSchema"]);E!=null&&p(e,["responseSchema"],E);const w=d(n,["routingConfig"]);w!=null&&p(e,["routingConfig"],w);const R=d(n,["seed"]);R!=null&&p(e,["seed"],R);const I=d(n,["speechConfig"]);I!=null&&p(e,["speechConfig"],I);const M=d(n,["stopSequences"]);M!=null&&p(e,["stopSequences"],M);const q=d(n,["temperature"]);q!=null&&p(e,["temperature"],q);const G=d(n,["thinkingConfig"]);G!=null&&p(e,["thinkingConfig"],G);const U=d(n,["topK"]);U!=null&&p(e,["topK"],U);const V=d(n,["topP"]);if(V!=null&&p(e,["topP"],V),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function mS(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&p(e,["enableWidget"],i),e}function gS(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&p(e,["timeRangeFilter"],i),e}function xS(n,e){const i={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],s);const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const u=d(n,["temperature"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","temperature"],u);const f=d(n,["topP"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topP"],f);const g=d(n,["topK"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","topK"],g);const x=d(n,["maxOutputTokens"]);e!==void 0&&x!=null&&p(e,["setup","generationConfig","maxOutputTokens"],x);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const v=d(n,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const b=d(n,["speechConfig"]);e!==void 0&&b!=null&&p(e,["setup","generationConfig","speechConfig"],Du(b));const C=d(n,["thinkingConfig"]);e!==void 0&&C!=null&&p(e,["setup","generationConfig","thinkingConfig"],C);const A=d(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],A);const T=d(n,["systemInstruction"]);e!==void 0&&T!=null&&p(e,["setup","systemInstruction"],uS(Et(T)));const E=d(n,["tools"]);if(e!==void 0&&E!=null){let U=Ui(E);Array.isArray(U)&&(U=U.map(V=>NS(Li(V)))),p(e,["setup","tools"],U)}const w=d(n,["sessionResumption"]);e!==void 0&&w!=null&&p(e,["setup","sessionResumption"],wS(w));const R=d(n,["inputAudioTranscription"]);e!==void 0&&R!=null&&p(e,["setup","inputAudioTranscription"],R);const I=d(n,["outputAudioTranscription"]);e!==void 0&&I!=null&&p(e,["setup","outputAudioTranscription"],I);const M=d(n,["realtimeInputConfig"]);e!==void 0&&M!=null&&p(e,["setup","realtimeInputConfig"],M);const q=d(n,["contextWindowCompression"]);e!==void 0&&q!=null&&p(e,["setup","contextWindowCompression"],q);const G=d(n,["proactivity"]);if(e!==void 0&&G!=null&&p(e,["setup","proactivity"],G),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function yS(n,e){const i={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],hS(s));const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const u=d(n,["temperature"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","temperature"],u);const f=d(n,["topP"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topP"],f);const g=d(n,["topK"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","topK"],g);const x=d(n,["maxOutputTokens"]);e!==void 0&&x!=null&&p(e,["setup","generationConfig","maxOutputTokens"],x);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const v=d(n,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const b=d(n,["speechConfig"]);e!==void 0&&b!=null&&p(e,["setup","generationConfig","speechConfig"],Du(b));const C=d(n,["thinkingConfig"]);e!==void 0&&C!=null&&p(e,["setup","generationConfig","thinkingConfig"],C);const A=d(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],A);const T=d(n,["systemInstruction"]);e!==void 0&&T!=null&&p(e,["setup","systemInstruction"],Et(T));const E=d(n,["tools"]);if(e!==void 0&&E!=null){let V=Ui(E);Array.isArray(V)&&(V=V.map(ce=>RS(Li(ce)))),p(e,["setup","tools"],V)}const w=d(n,["sessionResumption"]);e!==void 0&&w!=null&&p(e,["setup","sessionResumption"],w);const R=d(n,["inputAudioTranscription"]);e!==void 0&&R!=null&&p(e,["setup","inputAudioTranscription"],R);const I=d(n,["outputAudioTranscription"]);e!==void 0&&I!=null&&p(e,["setup","outputAudioTranscription"],I);const M=d(n,["realtimeInputConfig"]);e!==void 0&&M!=null&&p(e,["setup","realtimeInputConfig"],M);const q=d(n,["contextWindowCompression"]);e!==void 0&&q!=null&&p(e,["setup","contextWindowCompression"],q);const G=d(n,["proactivity"]);e!==void 0&&G!=null&&p(e,["setup","proactivity"],G);const U=d(n,["explicitVadSignal"]);return e!==void 0&&U!=null&&p(e,["setup","explicitVadSignal"],U),i}function vS(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["setup","model"],Fe(n,s));const r=d(e,["config"]);return r!=null&&p(i,["config"],xS(r,i)),i}function bS(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["setup","model"],Fe(n,s));const r=d(e,["config"]);return r!=null&&p(i,["config"],yS(r,i)),i}function CS(n){const e={},i=d(n,["musicGenerationConfig"]);return i!=null&&p(e,["musicGenerationConfig"],i),e}function SS(n){const e={},i=d(n,["weightedPrompts"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),p(e,["weightedPrompts"],s)}return e}function AS(n){const e={},i=d(n,["media"]);if(i!=null){let h=Kg(i);Array.isArray(h)&&(h=h.map(v=>xa(v))),p(e,["mediaChunks"],h)}const s=d(n,["audio"]);s!=null&&p(e,["audio"],xa(Xg(s)));const r=d(n,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const u=d(n,["video"]);u!=null&&p(e,["video"],xa(Qg(u)));const f=d(n,["text"]);f!=null&&p(e,["text"],f);const g=d(n,["activityStart"]);g!=null&&p(e,["activityStart"],g);const x=d(n,["activityEnd"]);return x!=null&&p(e,["activityEnd"],x),e}function _S(n){const e={},i=d(n,["media"]);if(i!=null){let h=Kg(i);Array.isArray(h)&&(h=h.map(v=>v)),p(e,["mediaChunks"],h)}const s=d(n,["audio"]);s!=null&&p(e,["audio"],Xg(s));const r=d(n,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const u=d(n,["video"]);u!=null&&p(e,["video"],Qg(u));const f=d(n,["text"]);f!=null&&p(e,["text"],f);const g=d(n,["activityStart"]);g!=null&&p(e,["activityStart"],g);const x=d(n,["activityEnd"]);return x!=null&&p(e,["activityEnd"],x),e}function TS(n){const e={},i=d(n,["setupComplete"]);i!=null&&p(e,["setupComplete"],i);const s=d(n,["serverContent"]);s!=null&&p(e,["serverContent"],s);const r=d(n,["toolCall"]);r!=null&&p(e,["toolCall"],r);const u=d(n,["toolCallCancellation"]);u!=null&&p(e,["toolCallCancellation"],u);const f=d(n,["usageMetadata"]);f!=null&&p(e,["usageMetadata"],MS(f));const g=d(n,["goAway"]);g!=null&&p(e,["goAway"],g);const x=d(n,["sessionResumptionUpdate"]);x!=null&&p(e,["sessionResumptionUpdate"],x);const h=d(n,["voiceActivityDetectionSignal"]);return h!=null&&p(e,["voiceActivityDetectionSignal"],h),e}function ES(n){const e={},i=d(n,["mediaResolution"]);i!=null&&p(e,["mediaResolution"],i);const s=d(n,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const u=d(n,["fileData"]);u!=null&&p(e,["fileData"],dS(u));const f=d(n,["functionCall"]);f!=null&&p(e,["functionCall"],fS(f));const g=d(n,["functionResponse"]);g!=null&&p(e,["functionResponse"],g);const x=d(n,["inlineData"]);x!=null&&p(e,["inlineData"],xa(x));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const v=d(n,["thought"]);v!=null&&p(e,["thought"],v);const b=d(n,["thoughtSignature"]);b!=null&&p(e,["thoughtSignature"],b);const C=d(n,["videoMetadata"]);return C!=null&&p(e,["videoMetadata"],C),e}function wS(n){const e={},i=d(n,["handle"]);if(i!=null&&p(e,["handle"],i),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function NS(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(b=>b)),p(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const u=d(n,["fileSearch"]);u!=null&&p(e,["fileSearch"],u);const f=d(n,["codeExecution"]);if(f!=null&&p(e,["codeExecution"],f),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],mS(g));const x=d(n,["googleSearch"]);x!=null&&p(e,["googleSearch"],gS(x));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function RS(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let b=i;Array.isArray(b)&&(b=b.map(C=>pS(C))),p(e,["functionDeclarations"],b)}const s=d(n,["retrieval"]);s!=null&&p(e,["retrieval"],s);const r=d(n,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const u=d(n,["computerUse"]);if(u!=null&&p(e,["computerUse"],u),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const f=d(n,["codeExecution"]);f!=null&&p(e,["codeExecution"],f);const g=d(n,["enterpriseWebSearch"]);g!=null&&p(e,["enterpriseWebSearch"],g);const x=d(n,["googleMaps"]);x!=null&&p(e,["googleMaps"],x);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const v=d(n,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function MS(n){const e={},i=d(n,["promptTokenCount"]);i!=null&&p(e,["promptTokenCount"],i);const s=d(n,["cachedContentTokenCount"]);s!=null&&p(e,["cachedContentTokenCount"],s);const r=d(n,["candidatesTokenCount"]);r!=null&&p(e,["responseTokenCount"],r);const u=d(n,["toolUsePromptTokenCount"]);u!=null&&p(e,["toolUsePromptTokenCount"],u);const f=d(n,["thoughtsTokenCount"]);f!=null&&p(e,["thoughtsTokenCount"],f);const g=d(n,["totalTokenCount"]);g!=null&&p(e,["totalTokenCount"],g);const x=d(n,["promptTokensDetails"]);if(x!=null){let A=x;Array.isArray(A)&&(A=A.map(T=>T)),p(e,["promptTokensDetails"],A)}const h=d(n,["cacheTokensDetails"]);if(h!=null){let A=h;Array.isArray(A)&&(A=A.map(T=>T)),p(e,["cacheTokensDetails"],A)}const v=d(n,["candidatesTokensDetails"]);if(v!=null){let A=v;Array.isArray(A)&&(A=A.map(T=>T)),p(e,["responseTokensDetails"],A)}const b=d(n,["toolUsePromptTokensDetails"]);if(b!=null){let A=b;Array.isArray(A)&&(A=A.map(T=>T)),p(e,["toolUsePromptTokensDetails"],A)}const C=d(n,["trafficType"]);return C!=null&&p(e,["trafficType"],C),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function IS(n){const e={},i=d(n,["data"]);if(i!=null&&p(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function kS(n){const e={},i=d(n,["content"]);i!=null&&p(e,["content"],i);const s=d(n,["citationMetadata"]);s!=null&&p(e,["citationMetadata"],DS(s));const r=d(n,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const u=d(n,["finishReason"]);u!=null&&p(e,["finishReason"],u);const f=d(n,["avgLogprobs"]);f!=null&&p(e,["avgLogprobs"],f);const g=d(n,["groundingMetadata"]);g!=null&&p(e,["groundingMetadata"],g);const x=d(n,["index"]);x!=null&&p(e,["index"],x);const h=d(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const v=d(n,["safetyRatings"]);if(v!=null){let C=v;Array.isArray(C)&&(C=C.map(A=>A)),p(e,["safetyRatings"],C)}const b=d(n,["urlContextMetadata"]);return b!=null&&p(e,["urlContextMetadata"],b),e}function DS(n){const e={},i=d(n,["citationSources"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>r)),p(e,["citations"],s)}return e}function jS(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["_url","model"],Fe(n,s));const r=d(e,["contents"]);if(r!=null){let u=sn(r);Array.isArray(u)&&(u=u.map(f=>f)),p(i,["contents"],u)}return i}function LS(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>u)),p(e,["tokensInfo"],r)}return e}function US(n){const e={},i=d(n,["values"]);i!=null&&p(e,["values"],i);const s=d(n,["statistics"]);return s!=null&&p(e,["statistics"],BS(s)),e}function BS(n){const e={},i=d(n,["truncated"]);i!=null&&p(e,["truncated"],i);const s=d(n,["token_count"]);return s!=null&&p(e,["tokenCount"],s),e}function Ia(n){const e={},i=d(n,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>YA(u))),p(e,["parts"],r)}const s=d(n,["role"]);return s!=null&&p(e,["role"],s),e}function GS(n){const e={},i=d(n,["controlType"]);i!=null&&p(e,["controlType"],i);const s=d(n,["enableControlImageComputation"]);return s!=null&&p(e,["computeControl"],s),e}function PS(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function OS(n,e){const i={},s=d(n,["systemInstruction"]);e!==void 0&&s!=null&&p(e,["systemInstruction"],Et(s));const r=d(n,["tools"]);if(e!==void 0&&r!=null){let f=r;Array.isArray(f)&&(f=f.map(g=>f0(g))),p(e,["tools"],f)}const u=d(n,["generationConfig"]);return e!==void 0&&u!=null&&p(e,["generationConfig"],IA(u)),i}function zS(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["_url","model"],Fe(n,s));const r=d(e,["contents"]);if(r!=null){let f=sn(r);Array.isArray(f)&&(f=f.map(g=>Ia(g))),p(i,["contents"],f)}const u=d(e,["config"]);return u!=null&&PS(u),i}function qS(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["_url","model"],Fe(n,s));const r=d(e,["contents"]);if(r!=null){let f=sn(r);Array.isArray(f)&&(f=f.map(g=>g)),p(i,["contents"],f)}const u=d(e,["config"]);return u!=null&&OS(u,i),i}function HS(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["totalTokens"]);s!=null&&p(e,["totalTokens"],s);const r=d(n,["cachedContentTokenCount"]);return r!=null&&p(e,["cachedContentTokenCount"],r),e}function VS(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["totalTokens"]);return s!=null&&p(e,["totalTokens"],s),e}function FS(n,e){const i={},s=d(e,["model"]);return s!=null&&p(i,["_url","name"],Fe(n,s)),i}function YS(n,e){const i={},s=d(e,["model"]);return s!=null&&p(i,["_url","name"],Fe(n,s)),i}function JS(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(e,["sdkHttpResponse"],i),e}function $S(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(e,["sdkHttpResponse"],i),e}function WS(n,e){const i={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const r=d(n,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const u=d(n,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const f=d(n,["aspectRatio"]);e!==void 0&&f!=null&&p(e,["parameters","aspectRatio"],f);const g=d(n,["guidanceScale"]);e!==void 0&&g!=null&&p(e,["parameters","guidanceScale"],g);const x=d(n,["seed"]);e!==void 0&&x!=null&&p(e,["parameters","seed"],x);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&p(e,["parameters","personGeneration"],v);const b=d(n,["includeSafetyAttributes"]);e!==void 0&&b!=null&&p(e,["parameters","includeSafetyAttributes"],b);const C=d(n,["includeRaiReason"]);e!==void 0&&C!=null&&p(e,["parameters","includeRaiReason"],C);const A=d(n,["language"]);e!==void 0&&A!=null&&p(e,["parameters","language"],A);const T=d(n,["outputMimeType"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","mimeType"],T);const E=d(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","compressionQuality"],E);const w=d(n,["addWatermark"]);e!==void 0&&w!=null&&p(e,["parameters","addWatermark"],w);const R=d(n,["labels"]);e!==void 0&&R!=null&&p(e,["labels"],R);const I=d(n,["editMode"]);e!==void 0&&I!=null&&p(e,["parameters","editMode"],I);const M=d(n,["baseSteps"]);return e!==void 0&&M!=null&&p(e,["parameters","editConfig","baseSteps"],M),i}function KS(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["_url","model"],Fe(n,s));const r=d(e,["prompt"]);r!=null&&p(i,["instances[0]","prompt"],r);const u=d(e,["referenceImages"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(x=>XA(x))),p(i,["instances[0]","referenceImages"],g)}const f=d(e,["config"]);return f!=null&&WS(f,i),i}function QS(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>ka(u))),p(e,["generatedImages"],r)}return e}function XS(n,e){const i={},s=d(n,["taskType"]);e!==void 0&&s!=null&&p(e,["requests[]","taskType"],s);const r=d(n,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const u=d(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&p(e,["requests[]","outputDimensionality"],u),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function ZS(n,e){const i={},s=d(n,["taskType"]);e!==void 0&&s!=null&&p(e,["instances[]","task_type"],s);const r=d(n,["title"]);e!==void 0&&r!=null&&p(e,["instances[]","title"],r);const u=d(n,["outputDimensionality"]);e!==void 0&&u!=null&&p(e,["parameters","outputDimensionality"],u);const f=d(n,["mimeType"]);e!==void 0&&f!=null&&p(e,["instances[]","mimeType"],f);const g=d(n,["autoTruncate"]);return e!==void 0&&g!=null&&p(e,["parameters","autoTruncate"],g),i}function eA(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["_url","model"],Fe(n,s));const r=d(e,["contents"]);if(r!=null){let g=Mu(n,r);Array.isArray(g)&&(g=g.map(x=>x)),p(i,["requests[]","content"],g)}const u=d(e,["config"]);u!=null&&XS(u,i);const f=d(e,["model"]);return f!==void 0&&p(i,["requests[]","model"],Fe(n,f)),i}function tA(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["_url","model"],Fe(n,s));const r=d(e,["contents"]);if(r!=null){let f=Mu(n,r);Array.isArray(f)&&(f=f.map(g=>g)),p(i,["instances[]","content"],f)}const u=d(e,["config"]);return u!=null&&ZS(u,i),i}function nA(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>f)),p(e,["embeddings"],u)}const r=d(n,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function oA(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["predictions[]","embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>US(f))),p(e,["embeddings"],u)}const r=d(n,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function iA(n){const e={},i=d(n,["endpoint"]);i!=null&&p(e,["name"],i);const s=d(n,["deployedModelId"]);return s!=null&&p(e,["deployedModelId"],s),e}function sA(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&p(e,["fileUri"],i);const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function lA(n){const e={},i=d(n,["id"]);i!=null&&p(e,["id"],i);const s=d(n,["args"]);s!=null&&p(e,["args"],s);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function aA(n){const e={},i=d(n,["mode"]);i!=null&&p(e,["mode"],i);const s=d(n,["allowedFunctionNames"]);if(s!=null&&p(e,["allowedFunctionNames"],s),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function rA(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=d(n,["description"]);i!=null&&p(e,["description"],i);const s=d(n,["name"]);s!=null&&p(e,["name"],s);const r=d(n,["parameters"]);r!=null&&p(e,["parameters"],r);const u=d(n,["parametersJsonSchema"]);u!=null&&p(e,["parametersJsonSchema"],u);const f=d(n,["response"]);f!=null&&p(e,["response"],f);const g=d(n,["responseJsonSchema"]);return g!=null&&p(e,["responseJsonSchema"],g),e}function cA(n,e,i){const s={},r=d(e,["systemInstruction"]);i!==void 0&&r!=null&&p(i,["systemInstruction"],Ia(Et(r)));const u=d(e,["temperature"]);u!=null&&p(s,["temperature"],u);const f=d(e,["topP"]);f!=null&&p(s,["topP"],f);const g=d(e,["topK"]);g!=null&&p(s,["topK"],g);const x=d(e,["candidateCount"]);x!=null&&p(s,["candidateCount"],x);const h=d(e,["maxOutputTokens"]);h!=null&&p(s,["maxOutputTokens"],h);const v=d(e,["stopSequences"]);v!=null&&p(s,["stopSequences"],v);const b=d(e,["responseLogprobs"]);b!=null&&p(s,["responseLogprobs"],b);const C=d(e,["logprobs"]);C!=null&&p(s,["logprobs"],C);const A=d(e,["presencePenalty"]);A!=null&&p(s,["presencePenalty"],A);const T=d(e,["frequencyPenalty"]);T!=null&&p(s,["frequencyPenalty"],T);const E=d(e,["seed"]);E!=null&&p(s,["seed"],E);const w=d(e,["responseMimeType"]);w!=null&&p(s,["responseMimeType"],w);const R=d(e,["responseSchema"]);R!=null&&p(s,["responseSchema"],Iu(R));const I=d(e,["responseJsonSchema"]);if(I!=null&&p(s,["responseJsonSchema"],I),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=d(e,["safetySettings"]);if(i!==void 0&&M!=null){let re=M;Array.isArray(re)&&(re=re.map(J=>ZA(J))),p(i,["safetySettings"],re)}const q=d(e,["tools"]);if(i!==void 0&&q!=null){let re=Ui(q);Array.isArray(re)&&(re=re.map(J=>l_(Li(J)))),p(i,["tools"],re)}const G=d(e,["toolConfig"]);if(i!==void 0&&G!=null&&p(i,["toolConfig"],s_(G)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=d(e,["cachedContent"]);i!==void 0&&U!=null&&p(i,["cachedContent"],zn(n,U));const V=d(e,["responseModalities"]);V!=null&&p(s,["responseModalities"],V);const ce=d(e,["mediaResolution"]);ce!=null&&p(s,["mediaResolution"],ce);const se=d(e,["speechConfig"]);if(se!=null&&p(s,["speechConfig"],ku(se)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const xe=d(e,["thinkingConfig"]);xe!=null&&p(s,["thinkingConfig"],xe);const de=d(e,["imageConfig"]);de!=null&&p(s,["imageConfig"],UA(de));const Q=d(e,["enableEnhancedCivicAnswers"]);return Q!=null&&p(s,["enableEnhancedCivicAnswers"],Q),s}function uA(n,e,i){const s={},r=d(e,["systemInstruction"]);i!==void 0&&r!=null&&p(i,["systemInstruction"],Et(r));const u=d(e,["temperature"]);u!=null&&p(s,["temperature"],u);const f=d(e,["topP"]);f!=null&&p(s,["topP"],f);const g=d(e,["topK"]);g!=null&&p(s,["topK"],g);const x=d(e,["candidateCount"]);x!=null&&p(s,["candidateCount"],x);const h=d(e,["maxOutputTokens"]);h!=null&&p(s,["maxOutputTokens"],h);const v=d(e,["stopSequences"]);v!=null&&p(s,["stopSequences"],v);const b=d(e,["responseLogprobs"]);b!=null&&p(s,["responseLogprobs"],b);const C=d(e,["logprobs"]);C!=null&&p(s,["logprobs"],C);const A=d(e,["presencePenalty"]);A!=null&&p(s,["presencePenalty"],A);const T=d(e,["frequencyPenalty"]);T!=null&&p(s,["frequencyPenalty"],T);const E=d(e,["seed"]);E!=null&&p(s,["seed"],E);const w=d(e,["responseMimeType"]);w!=null&&p(s,["responseMimeType"],w);const R=d(e,["responseSchema"]);R!=null&&p(s,["responseSchema"],Iu(R));const I=d(e,["responseJsonSchema"]);I!=null&&p(s,["responseJsonSchema"],I);const M=d(e,["routingConfig"]);M!=null&&p(s,["routingConfig"],M);const q=d(e,["modelSelectionConfig"]);q!=null&&p(s,["modelConfig"],q);const G=d(e,["safetySettings"]);if(i!==void 0&&G!=null){let B=G;Array.isArray(B)&&(B=B.map(j=>j)),p(i,["safetySettings"],B)}const U=d(e,["tools"]);if(i!==void 0&&U!=null){let B=Ui(U);Array.isArray(B)&&(B=B.map(j=>f0(Li(j)))),p(i,["tools"],B)}const V=d(e,["toolConfig"]);i!==void 0&&V!=null&&p(i,["toolConfig"],V);const ce=d(e,["labels"]);i!==void 0&&ce!=null&&p(i,["labels"],ce);const se=d(e,["cachedContent"]);i!==void 0&&se!=null&&p(i,["cachedContent"],zn(n,se));const xe=d(e,["responseModalities"]);xe!=null&&p(s,["responseModalities"],xe);const de=d(e,["mediaResolution"]);de!=null&&p(s,["mediaResolution"],de);const Q=d(e,["speechConfig"]);Q!=null&&p(s,["speechConfig"],ku(Q));const re=d(e,["audioTimestamp"]);re!=null&&p(s,["audioTimestamp"],re);const J=d(e,["thinkingConfig"]);J!=null&&p(s,["thinkingConfig"],J);const le=d(e,["imageConfig"]);if(le!=null&&p(s,["imageConfig"],BA(le)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function fg(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["_url","model"],Fe(n,s));const r=d(e,["contents"]);if(r!=null){let f=sn(r);Array.isArray(f)&&(f=f.map(g=>Ia(g))),p(i,["contents"],f)}const u=d(e,["config"]);return u!=null&&p(i,["generationConfig"],cA(n,u,i)),i}function pg(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["_url","model"],Fe(n,s));const r=d(e,["contents"]);if(r!=null){let f=sn(r);Array.isArray(f)&&(f=f.map(g=>g)),p(i,["contents"],f)}const u=d(e,["config"]);return u!=null&&p(i,["generationConfig"],uA(n,u,i)),i}function hg(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["candidates"]);if(s!=null){let x=s;Array.isArray(x)&&(x=x.map(h=>kS(h))),p(e,["candidates"],x)}const r=d(n,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const u=d(n,["promptFeedback"]);u!=null&&p(e,["promptFeedback"],u);const f=d(n,["responseId"]);f!=null&&p(e,["responseId"],f);const g=d(n,["usageMetadata"]);return g!=null&&p(e,["usageMetadata"],g),e}function mg(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["candidates"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(v=>v)),p(e,["candidates"],h)}const r=d(n,["createTime"]);r!=null&&p(e,["createTime"],r);const u=d(n,["modelVersion"]);u!=null&&p(e,["modelVersion"],u);const f=d(n,["promptFeedback"]);f!=null&&p(e,["promptFeedback"],f);const g=d(n,["responseId"]);g!=null&&p(e,["responseId"],g);const x=d(n,["usageMetadata"]);return x!=null&&p(e,["usageMetadata"],x),e}function dA(n,e){const i={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=d(n,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const r=d(n,["aspectRatio"]);e!==void 0&&r!=null&&p(e,["parameters","aspectRatio"],r);const u=d(n,["guidanceScale"]);if(e!==void 0&&u!=null&&p(e,["parameters","guidanceScale"],u),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=d(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&p(e,["parameters","safetySetting"],f);const g=d(n,["personGeneration"]);e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g);const x=d(n,["includeSafetyAttributes"]);e!==void 0&&x!=null&&p(e,["parameters","includeSafetyAttributes"],x);const h=d(n,["includeRaiReason"]);e!==void 0&&h!=null&&p(e,["parameters","includeRaiReason"],h);const v=d(n,["language"]);e!==void 0&&v!=null&&p(e,["parameters","language"],v);const b=d(n,["outputMimeType"]);e!==void 0&&b!=null&&p(e,["parameters","outputOptions","mimeType"],b);const C=d(n,["outputCompressionQuality"]);if(e!==void 0&&C!=null&&p(e,["parameters","outputOptions","compressionQuality"],C),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const A=d(n,["imageSize"]);if(e!==void 0&&A!=null&&p(e,["parameters","sampleImageSize"],A),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function fA(n,e){const i={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const r=d(n,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const u=d(n,["numberOfImages"]);e!==void 0&&u!=null&&p(e,["parameters","sampleCount"],u);const f=d(n,["aspectRatio"]);e!==void 0&&f!=null&&p(e,["parameters","aspectRatio"],f);const g=d(n,["guidanceScale"]);e!==void 0&&g!=null&&p(e,["parameters","guidanceScale"],g);const x=d(n,["seed"]);e!==void 0&&x!=null&&p(e,["parameters","seed"],x);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&p(e,["parameters","personGeneration"],v);const b=d(n,["includeSafetyAttributes"]);e!==void 0&&b!=null&&p(e,["parameters","includeSafetyAttributes"],b);const C=d(n,["includeRaiReason"]);e!==void 0&&C!=null&&p(e,["parameters","includeRaiReason"],C);const A=d(n,["language"]);e!==void 0&&A!=null&&p(e,["parameters","language"],A);const T=d(n,["outputMimeType"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","mimeType"],T);const E=d(n,["outputCompressionQuality"]);e!==void 0&&E!=null&&p(e,["parameters","outputOptions","compressionQuality"],E);const w=d(n,["addWatermark"]);e!==void 0&&w!=null&&p(e,["parameters","addWatermark"],w);const R=d(n,["labels"]);e!==void 0&&R!=null&&p(e,["labels"],R);const I=d(n,["imageSize"]);e!==void 0&&I!=null&&p(e,["parameters","sampleImageSize"],I);const M=d(n,["enhancePrompt"]);return e!==void 0&&M!=null&&p(e,["parameters","enhancePrompt"],M),i}function pA(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["_url","model"],Fe(n,s));const r=d(e,["prompt"]);r!=null&&p(i,["instances[0]","prompt"],r);const u=d(e,["config"]);return u!=null&&dA(u,i),i}function hA(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["_url","model"],Fe(n,s));const r=d(e,["prompt"]);r!=null&&p(i,["instances[0]","prompt"],r);const u=d(e,["config"]);return u!=null&&fA(u,i),i}function mA(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>wA(f))),p(e,["generatedImages"],u)}const r=d(n,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],u0(r)),e}function gA(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>ka(f))),p(e,["generatedImages"],u)}const r=d(n,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],d0(r)),e}function xA(n,e){const i={},s=d(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=d(n,["durationSeconds"]);if(e!==void 0&&r!=null&&p(e,["parameters","durationSeconds"],r),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const f=d(n,["resolution"]);e!==void 0&&f!=null&&p(e,["parameters","resolution"],f);const g=d(n,["personGeneration"]);if(e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const x=d(n,["negativePrompt"]);e!==void 0&&x!=null&&p(e,["parameters","negativePrompt"],x);const h=d(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&p(e,["parameters","enhancePrompt"],h),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=d(n,["lastFrame"]);e!==void 0&&v!=null&&p(e,["instances[0]","lastFrame"],Da(v));const b=d(n,["referenceImages"]);if(e!==void 0&&b!=null){let C=b;Array.isArray(C)&&(C=C.map(A=>v_(A))),p(e,["instances[0]","referenceImages"],C)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function yA(n,e){const i={},s=d(n,["numberOfVideos"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const r=d(n,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const u=d(n,["fps"]);e!==void 0&&u!=null&&p(e,["parameters","fps"],u);const f=d(n,["durationSeconds"]);e!==void 0&&f!=null&&p(e,["parameters","durationSeconds"],f);const g=d(n,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const x=d(n,["aspectRatio"]);e!==void 0&&x!=null&&p(e,["parameters","aspectRatio"],x);const h=d(n,["resolution"]);e!==void 0&&h!=null&&p(e,["parameters","resolution"],h);const v=d(n,["personGeneration"]);e!==void 0&&v!=null&&p(e,["parameters","personGeneration"],v);const b=d(n,["pubsubTopic"]);e!==void 0&&b!=null&&p(e,["parameters","pubsubTopic"],b);const C=d(n,["negativePrompt"]);e!==void 0&&C!=null&&p(e,["parameters","negativePrompt"],C);const A=d(n,["enhancePrompt"]);e!==void 0&&A!=null&&p(e,["parameters","enhancePrompt"],A);const T=d(n,["generateAudio"]);e!==void 0&&T!=null&&p(e,["parameters","generateAudio"],T);const E=d(n,["lastFrame"]);e!==void 0&&E!=null&&p(e,["instances[0]","lastFrame"],pn(E));const w=d(n,["referenceImages"]);if(e!==void 0&&w!=null){let M=w;Array.isArray(M)&&(M=M.map(q=>b_(q))),p(e,["instances[0]","referenceImages"],M)}const R=d(n,["mask"]);e!==void 0&&R!=null&&p(e,["instances[0]","mask"],y_(R));const I=d(n,["compressionQuality"]);return e!==void 0&&I!=null&&p(e,["parameters","compressionQuality"],I),i}function vA(n){const e={},i=d(n,["name"]);i!=null&&p(e,["name"],i);const s=d(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const u=d(n,["error"]);u!=null&&p(e,["error"],u);const f=d(n,["response","generateVideoResponse"]);return f!=null&&p(e,["response"],AA(f)),e}function bA(n){const e={},i=d(n,["name"]);i!=null&&p(e,["name"],i);const s=d(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const u=d(n,["error"]);u!=null&&p(e,["error"],u);const f=d(n,["response"]);return f!=null&&p(e,["response"],_A(f)),e}function CA(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["_url","model"],Fe(n,s));const r=d(e,["prompt"]);r!=null&&p(i,["instances[0]","prompt"],r);const u=d(e,["image"]);u!=null&&p(i,["instances[0]","image"],Da(u));const f=d(e,["video"]);f!=null&&p(i,["instances[0]","video"],p0(f));const g=d(e,["source"]);g!=null&&TA(g,i);const x=d(e,["config"]);return x!=null&&xA(x,i),i}function SA(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["_url","model"],Fe(n,s));const r=d(e,["prompt"]);r!=null&&p(i,["instances[0]","prompt"],r);const u=d(e,["image"]);u!=null&&p(i,["instances[0]","image"],pn(u));const f=d(e,["video"]);f!=null&&p(i,["instances[0]","video"],h0(f));const g=d(e,["source"]);g!=null&&EA(g,i);const x=d(e,["config"]);return x!=null&&yA(x,i),i}function AA(n){const e={},i=d(n,["generatedSamples"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>RA(f))),p(e,["generatedVideos"],u)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function _A(n){const e={},i=d(n,["videos"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>MA(f))),p(e,["generatedVideos"],u)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function TA(n,e){const i={},s=d(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const r=d(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Da(r));const u=d(n,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],p0(u)),i}function EA(n,e){const i={},s=d(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const r=d(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],pn(r));const u=d(n,["video"]);return e!==void 0&&u!=null&&p(e,["instances[0]","video"],h0(u)),i}function wA(n){const e={},i=d(n,["_self"]);i!=null&&p(e,["image"],GA(i));const s=d(n,["raiFilteredReason"]);s!=null&&p(e,["raiFilteredReason"],s);const r=d(n,["_self"]);return r!=null&&p(e,["safetyAttributes"],u0(r)),e}function ka(n){const e={},i=d(n,["_self"]);i!=null&&p(e,["image"],c0(i));const s=d(n,["raiFilteredReason"]);s!=null&&p(e,["raiFilteredReason"],s);const r=d(n,["_self"]);r!=null&&p(e,["safetyAttributes"],d0(r));const u=d(n,["prompt"]);return u!=null&&p(e,["enhancedPrompt"],u),e}function NA(n){const e={},i=d(n,["_self"]);i!=null&&p(e,["mask"],c0(i));const s=d(n,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>u)),p(e,["labels"],r)}return e}function RA(n){const e={},i=d(n,["video"]);return i!=null&&p(e,["video"],g_(i)),e}function MA(n){const e={},i=d(n,["_self"]);return i!=null&&p(e,["video"],x_(i)),e}function IA(n){const e={},i=d(n,["modelSelectionConfig"]);i!=null&&p(e,["modelConfig"],i);const s=d(n,["responseJsonSchema"]);s!=null&&p(e,["responseJsonSchema"],s);const r=d(n,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const u=d(n,["candidateCount"]);u!=null&&p(e,["candidateCount"],u);const f=d(n,["enableAffectiveDialog"]);f!=null&&p(e,["enableAffectiveDialog"],f);const g=d(n,["frequencyPenalty"]);g!=null&&p(e,["frequencyPenalty"],g);const x=d(n,["logprobs"]);x!=null&&p(e,["logprobs"],x);const h=d(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const v=d(n,["mediaResolution"]);v!=null&&p(e,["mediaResolution"],v);const b=d(n,["presencePenalty"]);b!=null&&p(e,["presencePenalty"],b);const C=d(n,["responseLogprobs"]);C!=null&&p(e,["responseLogprobs"],C);const A=d(n,["responseMimeType"]);A!=null&&p(e,["responseMimeType"],A);const T=d(n,["responseModalities"]);T!=null&&p(e,["responseModalities"],T);const E=d(n,["responseSchema"]);E!=null&&p(e,["responseSchema"],E);const w=d(n,["routingConfig"]);w!=null&&p(e,["routingConfig"],w);const R=d(n,["seed"]);R!=null&&p(e,["seed"],R);const I=d(n,["speechConfig"]);I!=null&&p(e,["speechConfig"],I);const M=d(n,["stopSequences"]);M!=null&&p(e,["stopSequences"],M);const q=d(n,["temperature"]);q!=null&&p(e,["temperature"],q);const G=d(n,["thinkingConfig"]);G!=null&&p(e,["thinkingConfig"],G);const U=d(n,["topK"]);U!=null&&p(e,["topK"],U);const V=d(n,["topP"]);if(V!=null&&p(e,["topP"],V),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function kA(n,e){const i={},s=d(e,["model"]);return s!=null&&p(i,["_url","name"],Fe(n,s)),i}function DA(n,e){const i={},s=d(e,["model"]);return s!=null&&p(i,["_url","name"],Fe(n,s)),i}function jA(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&p(e,["enableWidget"],i),e}function LA(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&p(e,["timeRangeFilter"],i),e}function UA(n){const e={},i=d(n,["aspectRatio"]);i!=null&&p(e,["aspectRatio"],i);const s=d(n,["imageSize"]);if(s!=null&&p(e,["imageSize"],s),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function BA(n){const e={},i=d(n,["aspectRatio"]);i!=null&&p(e,["aspectRatio"],i);const s=d(n,["imageSize"]);s!=null&&p(e,["imageSize"],s);const r=d(n,["outputMimeType"]);r!=null&&p(e,["imageOutputOptions","mimeType"],r);const u=d(n,["outputCompressionQuality"]);return u!=null&&p(e,["imageOutputOptions","compressionQuality"],u),e}function GA(n){const e={},i=d(n,["bytesBase64Encoded"]);i!=null&&p(e,["imageBytes"],yo(i));const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function c0(n){const e={},i=d(n,["gcsUri"]);i!=null&&p(e,["gcsUri"],i);const s=d(n,["bytesBase64Encoded"]);s!=null&&p(e,["imageBytes"],yo(s));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Da(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=d(n,["imageBytes"]);i!=null&&p(e,["bytesBase64Encoded"],yo(i));const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function pn(n){const e={},i=d(n,["gcsUri"]);i!=null&&p(e,["gcsUri"],i);const s=d(n,["imageBytes"]);s!=null&&p(e,["bytesBase64Encoded"],yo(s));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function PA(n,e,i){const s={},r=d(e,["pageSize"]);i!==void 0&&r!=null&&p(i,["_query","pageSize"],r);const u=d(e,["pageToken"]);i!==void 0&&u!=null&&p(i,["_query","pageToken"],u);const f=d(e,["filter"]);i!==void 0&&f!=null&&p(i,["_query","filter"],f);const g=d(e,["queryBase"]);return i!==void 0&&g!=null&&p(i,["_url","models_url"],n0(n,g)),s}function OA(n,e,i){const s={},r=d(e,["pageSize"]);i!==void 0&&r!=null&&p(i,["_query","pageSize"],r);const u=d(e,["pageToken"]);i!==void 0&&u!=null&&p(i,["_query","pageToken"],u);const f=d(e,["filter"]);i!==void 0&&f!=null&&p(i,["_query","filter"],f);const g=d(e,["queryBase"]);return i!==void 0&&g!=null&&p(i,["_url","models_url"],n0(n,g)),s}function zA(n,e){const i={},s=d(e,["config"]);return s!=null&&PA(n,s,i),i}function qA(n,e){const i={},s=d(e,["config"]);return s!=null&&OA(n,s,i),i}function HA(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=d(n,["_self"]);if(r!=null){let u=o0(r);Array.isArray(u)&&(u=u.map(f=>hu(f))),p(e,["models"],u)}return e}function VA(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=d(n,["_self"]);if(r!=null){let u=o0(r);Array.isArray(u)&&(u=u.map(f=>mu(f))),p(e,["models"],u)}return e}function FA(n){const e={},i=d(n,["maskMode"]);i!=null&&p(e,["maskMode"],i);const s=d(n,["segmentationClasses"]);s!=null&&p(e,["maskClasses"],s);const r=d(n,["maskDilation"]);return r!=null&&p(e,["dilation"],r),e}function hu(n){const e={},i=d(n,["name"]);i!=null&&p(e,["name"],i);const s=d(n,["displayName"]);s!=null&&p(e,["displayName"],s);const r=d(n,["description"]);r!=null&&p(e,["description"],r);const u=d(n,["version"]);u!=null&&p(e,["version"],u);const f=d(n,["_self"]);f!=null&&p(e,["tunedModelInfo"],a_(f));const g=d(n,["inputTokenLimit"]);g!=null&&p(e,["inputTokenLimit"],g);const x=d(n,["outputTokenLimit"]);x!=null&&p(e,["outputTokenLimit"],x);const h=d(n,["supportedGenerationMethods"]);h!=null&&p(e,["supportedActions"],h);const v=d(n,["temperature"]);v!=null&&p(e,["temperature"],v);const b=d(n,["maxTemperature"]);b!=null&&p(e,["maxTemperature"],b);const C=d(n,["topP"]);C!=null&&p(e,["topP"],C);const A=d(n,["topK"]);A!=null&&p(e,["topK"],A);const T=d(n,["thinking"]);return T!=null&&p(e,["thinking"],T),e}function mu(n){const e={},i=d(n,["name"]);i!=null&&p(e,["name"],i);const s=d(n,["displayName"]);s!=null&&p(e,["displayName"],s);const r=d(n,["description"]);r!=null&&p(e,["description"],r);const u=d(n,["versionId"]);u!=null&&p(e,["version"],u);const f=d(n,["deployedModels"]);if(f!=null){let b=f;Array.isArray(b)&&(b=b.map(C=>iA(C))),p(e,["endpoints"],b)}const g=d(n,["labels"]);g!=null&&p(e,["labels"],g);const x=d(n,["_self"]);x!=null&&p(e,["tunedModelInfo"],r_(x));const h=d(n,["defaultCheckpointId"]);h!=null&&p(e,["defaultCheckpointId"],h);const v=d(n,["checkpoints"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(C=>C)),p(e,["checkpoints"],b)}return e}function YA(n){const e={},i=d(n,["mediaResolution"]);i!=null&&p(e,["mediaResolution"],i);const s=d(n,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const u=d(n,["fileData"]);u!=null&&p(e,["fileData"],sA(u));const f=d(n,["functionCall"]);f!=null&&p(e,["functionCall"],lA(f));const g=d(n,["functionResponse"]);g!=null&&p(e,["functionResponse"],g);const x=d(n,["inlineData"]);x!=null&&p(e,["inlineData"],IS(x));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const v=d(n,["thought"]);v!=null&&p(e,["thought"],v);const b=d(n,["thoughtSignature"]);b!=null&&p(e,["thoughtSignature"],b);const C=d(n,["videoMetadata"]);return C!=null&&p(e,["videoMetadata"],C),e}function JA(n){const e={},i=d(n,["productImage"]);return i!=null&&p(e,["image"],pn(i)),e}function $A(n,e){const i={},s=d(n,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const r=d(n,["baseSteps"]);e!==void 0&&r!=null&&p(e,["parameters","baseSteps"],r);const u=d(n,["outputGcsUri"]);e!==void 0&&u!=null&&p(e,["parameters","storageUri"],u);const f=d(n,["seed"]);e!==void 0&&f!=null&&p(e,["parameters","seed"],f);const g=d(n,["safetyFilterLevel"]);e!==void 0&&g!=null&&p(e,["parameters","safetySetting"],g);const x=d(n,["personGeneration"]);e!==void 0&&x!=null&&p(e,["parameters","personGeneration"],x);const h=d(n,["addWatermark"]);e!==void 0&&h!=null&&p(e,["parameters","addWatermark"],h);const v=d(n,["outputMimeType"]);e!==void 0&&v!=null&&p(e,["parameters","outputOptions","mimeType"],v);const b=d(n,["outputCompressionQuality"]);e!==void 0&&b!=null&&p(e,["parameters","outputOptions","compressionQuality"],b);const C=d(n,["enhancePrompt"]);e!==void 0&&C!=null&&p(e,["parameters","enhancePrompt"],C);const A=d(n,["labels"]);return e!==void 0&&A!=null&&p(e,["labels"],A),i}function WA(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["_url","model"],Fe(n,s));const r=d(e,["source"]);r!=null&&QA(r,i);const u=d(e,["config"]);return u!=null&&$A(u,i),i}function KA(n){const e={},i=d(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>ka(r))),p(e,["generatedImages"],s)}return e}function QA(n,e){const i={},s=d(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const r=d(n,["personImage"]);e!==void 0&&r!=null&&p(e,["instances[0]","personImage","image"],pn(r));const u=d(n,["productImages"]);if(e!==void 0&&u!=null){let f=u;Array.isArray(f)&&(f=f.map(g=>JA(g))),p(e,["instances[0]","productImages"],f)}return i}function XA(n){const e={},i=d(n,["referenceImage"]);i!=null&&p(e,["referenceImage"],pn(i));const s=d(n,["referenceId"]);s!=null&&p(e,["referenceId"],s);const r=d(n,["referenceType"]);r!=null&&p(e,["referenceType"],r);const u=d(n,["maskImageConfig"]);u!=null&&p(e,["maskImageConfig"],FA(u));const f=d(n,["controlImageConfig"]);f!=null&&p(e,["controlImageConfig"],GS(f));const g=d(n,["styleImageConfig"]);g!=null&&p(e,["styleImageConfig"],g);const x=d(n,["subjectImageConfig"]);return x!=null&&p(e,["subjectImageConfig"],x),e}function u0(n){const e={},i=d(n,["safetyAttributes","categories"]);i!=null&&p(e,["categories"],i);const s=d(n,["safetyAttributes","scores"]);s!=null&&p(e,["scores"],s);const r=d(n,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function d0(n){const e={},i=d(n,["safetyAttributes","categories"]);i!=null&&p(e,["categories"],i);const s=d(n,["safetyAttributes","scores"]);s!=null&&p(e,["scores"],s);const r=d(n,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function ZA(n){const e={},i=d(n,["category"]);if(i!=null&&p(e,["category"],i),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(n,["threshold"]);return s!=null&&p(e,["threshold"],s),e}function e_(n){const e={},i=d(n,["image"]);return i!=null&&p(e,["image"],pn(i)),e}function t_(n,e){const i={},s=d(n,["mode"]);e!==void 0&&s!=null&&p(e,["parameters","mode"],s);const r=d(n,["maxPredictions"]);e!==void 0&&r!=null&&p(e,["parameters","maxPredictions"],r);const u=d(n,["confidenceThreshold"]);e!==void 0&&u!=null&&p(e,["parameters","confidenceThreshold"],u);const f=d(n,["maskDilation"]);e!==void 0&&f!=null&&p(e,["parameters","maskDilation"],f);const g=d(n,["binaryColorThreshold"]);e!==void 0&&g!=null&&p(e,["parameters","binaryColorThreshold"],g);const x=d(n,["labels"]);return e!==void 0&&x!=null&&p(e,["labels"],x),i}function n_(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["_url","model"],Fe(n,s));const r=d(e,["source"]);r!=null&&i_(r,i);const u=d(e,["config"]);return u!=null&&t_(u,i),i}function o_(n){const e={},i=d(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>NA(r))),p(e,["generatedMasks"],s)}return e}function i_(n,e){const i={},s=d(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const r=d(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],pn(r));const u=d(n,["scribbleImage"]);return e!==void 0&&u!=null&&p(e,["instances[0]","scribble"],e_(u)),i}function s_(n){const e={},i=d(n,["functionCallingConfig"]);i!=null&&p(e,["functionCallingConfig"],aA(i));const s=d(n,["retrievalConfig"]);return s!=null&&p(e,["retrievalConfig"],s),e}function l_(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(b=>b)),p(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const u=d(n,["fileSearch"]);u!=null&&p(e,["fileSearch"],u);const f=d(n,["codeExecution"]);if(f!=null&&p(e,["codeExecution"],f),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],jA(g));const x=d(n,["googleSearch"]);x!=null&&p(e,["googleSearch"],LA(x));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function f0(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let b=i;Array.isArray(b)&&(b=b.map(C=>rA(C))),p(e,["functionDeclarations"],b)}const s=d(n,["retrieval"]);s!=null&&p(e,["retrieval"],s);const r=d(n,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const u=d(n,["computerUse"]);if(u!=null&&p(e,["computerUse"],u),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const f=d(n,["codeExecution"]);f!=null&&p(e,["codeExecution"],f);const g=d(n,["enterpriseWebSearch"]);g!=null&&p(e,["enterpriseWebSearch"],g);const x=d(n,["googleMaps"]);x!=null&&p(e,["googleMaps"],x);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const v=d(n,["urlContext"]);return v!=null&&p(e,["urlContext"],v),e}function a_(n){const e={},i=d(n,["baseModel"]);i!=null&&p(e,["baseModel"],i);const s=d(n,["createTime"]);s!=null&&p(e,["createTime"],s);const r=d(n,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function r_(n){const e={},i=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&p(e,["baseModel"],i);const s=d(n,["createTime"]);s!=null&&p(e,["createTime"],s);const r=d(n,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function c_(n,e){const i={},s=d(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const r=d(n,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const u=d(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),i}function u_(n,e){const i={},s=d(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const r=d(n,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const u=d(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&p(e,["defaultCheckpointId"],u),i}function d_(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["_url","name"],Fe(n,s));const r=d(e,["config"]);return r!=null&&c_(r,i),i}function f_(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["_url","model"],Fe(n,s));const r=d(e,["config"]);return r!=null&&u_(r,i),i}function p_(n,e){const i={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const r=d(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&p(e,["parameters","safetySetting"],r);const u=d(n,["personGeneration"]);e!==void 0&&u!=null&&p(e,["parameters","personGeneration"],u);const f=d(n,["includeRaiReason"]);e!==void 0&&f!=null&&p(e,["parameters","includeRaiReason"],f);const g=d(n,["outputMimeType"]);e!==void 0&&g!=null&&p(e,["parameters","outputOptions","mimeType"],g);const x=d(n,["outputCompressionQuality"]);e!==void 0&&x!=null&&p(e,["parameters","outputOptions","compressionQuality"],x);const h=d(n,["enhanceInputImage"]);e!==void 0&&h!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],h);const v=d(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const b=d(n,["labels"]);e!==void 0&&b!=null&&p(e,["labels"],b);const C=d(n,["numberOfImages"]);e!==void 0&&C!=null&&p(e,["parameters","sampleCount"],C);const A=d(n,["mode"]);return e!==void 0&&A!=null&&p(e,["parameters","mode"],A),i}function h_(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["_url","model"],Fe(n,s));const r=d(e,["image"]);r!=null&&p(i,["instances[0]","image"],pn(r));const u=d(e,["upscaleFactor"]);u!=null&&p(i,["parameters","upscaleConfig","upscaleFactor"],u);const f=d(e,["config"]);return f!=null&&p_(f,i),i}function m_(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>ka(u))),p(e,["generatedImages"],r)}return e}function g_(n){const e={},i=d(n,["uri"]);i!=null&&p(e,["uri"],i);const s=d(n,["encodedVideo"]);s!=null&&p(e,["videoBytes"],yo(s));const r=d(n,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function x_(n){const e={},i=d(n,["gcsUri"]);i!=null&&p(e,["uri"],i);const s=d(n,["bytesBase64Encoded"]);s!=null&&p(e,["videoBytes"],yo(s));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function y_(n){const e={},i=d(n,["image"]);i!=null&&p(e,["_self"],pn(i));const s=d(n,["maskMode"]);return s!=null&&p(e,["maskMode"],s),e}function v_(n){const e={},i=d(n,["image"]);i!=null&&p(e,["image"],Da(i));const s=d(n,["referenceType"]);return s!=null&&p(e,["referenceType"],s),e}function b_(n){const e={},i=d(n,["image"]);i!=null&&p(e,["image"],pn(i));const s=d(n,["referenceType"]);return s!=null&&p(e,["referenceType"],s),e}function p0(n){const e={},i=d(n,["uri"]);i!=null&&p(e,["uri"],i);const s=d(n,["videoBytes"]);s!=null&&p(e,["encodedVideo"],yo(s));const r=d(n,["mimeType"]);return r!=null&&p(e,["encoding"],r),e}function h0(n){const e={},i=d(n,["uri"]);i!=null&&p(e,["gcsUri"],i);const s=d(n,["videoBytes"]);s!=null&&p(e,["bytesBase64Encoded"],yo(s));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function C_(n,e){const i={},s=d(n,["displayName"]);return e!==void 0&&s!=null&&p(e,["displayName"],s),i}function S_(n){const e={},i=d(n,["config"]);return i!=null&&C_(i,e),e}function A_(n,e){const i={},s=d(n,["force"]);return e!==void 0&&s!=null&&p(e,["_query","force"],s),i}function __(n){const e={},i=d(n,["name"]);i!=null&&p(e,["_url","name"],i);const s=d(n,["config"]);return s!=null&&A_(s,e),e}function T_(n){const e={},i=d(n,["name"]);return i!=null&&p(e,["_url","name"],i),e}function E_(n,e){const i={},s=d(n,["customMetadata"]);if(e!==void 0&&s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>f)),p(e,["customMetadata"],u)}const r=d(n,["chunkingConfig"]);return e!==void 0&&r!=null&&p(e,["chunkingConfig"],r),i}function w_(n){const e={},i=d(n,["name"]);i!=null&&p(e,["name"],i);const s=d(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const u=d(n,["error"]);u!=null&&p(e,["error"],u);const f=d(n,["response"]);return f!=null&&p(e,["response"],R_(f)),e}function N_(n){const e={},i=d(n,["fileSearchStoreName"]);i!=null&&p(e,["_url","file_search_store_name"],i);const s=d(n,["fileName"]);s!=null&&p(e,["fileName"],s);const r=d(n,["config"]);return r!=null&&E_(r,e),e}function R_(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["parent"]);s!=null&&p(e,["parent"],s);const r=d(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function M_(n,e){const i={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),i}function I_(n){const e={},i=d(n,["config"]);return i!=null&&M_(i,e),e}function k_(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=d(n,["fileSearchStores"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),p(e,["fileSearchStores"],u)}return e}function m0(n,e){const i={},s=d(n,["mimeType"]);e!==void 0&&s!=null&&p(e,["mimeType"],s);const r=d(n,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const u=d(n,["customMetadata"]);if(e!==void 0&&u!=null){let g=u;Array.isArray(g)&&(g=g.map(x=>x)),p(e,["customMetadata"],g)}const f=d(n,["chunkingConfig"]);return e!==void 0&&f!=null&&p(e,["chunkingConfig"],f),i}function D_(n){const e={},i=d(n,["fileSearchStoreName"]);i!=null&&p(e,["_url","file_search_store_name"],i);const s=d(n,["config"]);return s!=null&&m0(s,e),e}function j_(n){const e={},i=d(n,["sdkHttpResponse"]);return i!=null&&p(e,["sdkHttpResponse"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const L_="Content-Type",U_="X-Server-Timeout",B_="User-Agent",gu="x-goog-api-client",G_="1.34.0",P_=`google-genai-sdk/${G_}`,O_="v1beta1",z_="v1beta";class q_{constructor(e){var i,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:O_,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:z_,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,s){const r=[this.getRequestUrlInternal(i)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,i,s);if(e.queryParams)for(const[f,g]of Object.entries(e.queryParams))r.searchParams.append(f,String(g));let u={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else u.body=e.body;return u=await this.includeExtraHttpOptionsToRequestInit(u,i,r.toString(),e.abortSignal),this.unaryApiCall(r,u,e.httpMethod)}patchHttpOptions(e,i){const s=JSON.parse(JSON.stringify(e));for(const[r,u]of Object.entries(i))typeof u=="object"?s[r]=Object.assign(Object.assign({},s[r]),u):u!==void 0&&(s[r]=u);return s}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,i,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let u={};return u.body=e.body,u=await this.includeExtraHttpOptionsToRequestInit(u,i,r.toString(),e.abortSignal),this.streamApiCall(r,u,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,s,r){if(i&&i.timeout||r){const u=new AbortController,f=u.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const g=setTimeout(()=>u.abort(),i.timeout);g&&typeof g.unref=="function"&&g.unref()}r&&r.addEventListener("abort",()=>{u.abort()}),e.signal=f}return i&&i.extraBody!==null&&H_(e,i.extraBody),e.headers=await this.getHeadersInternal(i,s),e}async unaryApiCall(e,i,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:s})).then(async r=>(await gg(r),new du(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,i,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:s})).then(async r=>(await gg(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return dn(this,arguments,function*(){var s;const r=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),u=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let f="";const g="data:",x=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:v}=yield Re(r.read());if(h){if(f.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const b=u.decode(v,{stream:!0});try{const T=JSON.parse(b);if("error"in T){const E=JSON.parse(JSON.stringify(T.error)),w=E.status,R=E.code,I=`got status: ${w}. ${JSON.stringify(T)}`;if(R>=400&&R<600)throw new Ma({message:I,status:R})}}catch(T){if(T.name==="ApiError")throw T}f+=b;let C=-1,A=0;for(;;){C=-1,A=0;for(const w of x){const R=f.indexOf(w);R!==-1&&(C===-1||R<C)&&(C=R,A=w.length)}if(C===-1)break;const T=f.substring(0,C);f=f.substring(C+A);const E=T.trim();if(E.startsWith(g)){const w=E.substring(g.length).trim();try{const R=new Response(w,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Re(new du(R))}catch(R){throw new Error(`exception parsing stream chunk ${w}. ${R}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},i=P_+" "+this.clientOptions.userAgentExtra;return e[B_]=i,e[gu]=i,e[L_]="application/json",e}async getHeadersInternal(e,i){const s=new Headers;if(e&&e.headers){for(const[r,u]of Object.entries(e.headers))s.append(r,u);e.timeout&&e.timeout>0&&s.append(U_,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,i),s}getFileName(e){var i;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(i=s.split(/[/\\]/).pop())!==null&&i!==void 0?i:""),s}async uploadFile(e,i){var s;const r={};i!=null&&(r.mimeType=i.mimeType,r.name=i.name,r.displayName=i.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const u=this.clientOptions.uploader,f=await u.stat(e);r.sizeBytes=String(f.size);const g=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:f.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=g;const x={file:r},h=this.getFileName(e),v=ge("upload/v1beta/files",x._url),b=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,h,x,i==null?void 0:i.httpOptions);return u.upload(e,b,this)}async uploadFileToFileSearchStore(e,i,s){var r;const u=this.clientOptions.uploader,f=await u.stat(i),g=String(f.size),x=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:f.type;if(x===void 0||x==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(i),b={};s!=null&&m0(s,b);const C=await this.fetchUploadUrl(h,g,x,v,b,s==null?void 0:s.httpOptions);return u.uploadToFileSearchStore(i,C,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i,s,r,u,f){var g;let x={};f?x=f:x={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(u),httpMethod:"POST",httpOptions:x});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(g=h==null?void 0:h.headers)===null||g===void 0?void 0:g["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function gg(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const i=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw i>=400&&i<600?new Ma({message:r,status:i}):new Error(r)}}function H_(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof n.body=="string"&&n.body.length>0)try{const u=JSON.parse(n.body);if(typeof u=="object"&&u!==null&&!Array.isArray(u))i=u;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(u,f){const g=Object.assign({},u);for(const x in f)if(Object.prototype.hasOwnProperty.call(f,x)){const h=f[x],v=g[x];h&&typeof h=="object"&&!Array.isArray(h)&&v&&typeof v=="object"&&!Array.isArray(v)?g[x]=s(v,h):(v&&h&&typeof v!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${x}". Original type: ${typeof v}, New type: ${typeof h}. Overwriting.`),g[x]=h)}return g}const r=s(i,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const V_="mcp_used/unknown";let F_=!1;function g0(n){for(const e of n)if(Y_(e)||typeof e=="object"&&"inputSchema"in e)return!0;return F_}function x0(n){var e;const i=(e=n[gu])!==null&&e!==void 0?e:"";n[gu]=(i+` ${V_}`).trimStart()}function Y_(n){return n!==null&&typeof n=="object"&&n instanceof ju}function J_(n){return dn(this,arguments,function*(i,s=100){let r,u=0;for(;u<s;){const f=yield Re(i.listTools({cursor:r}));for(const g of f.tools)yield yield Re(g),u++;if(!f.nextCursor)break;r=f.nextCursor}})}class ju{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new ju(e,i)}async initialize(){var e,i,s,r;if(this.mcpTools.length>0)return;const u={},f=[];for(const v of this.mcpClients)try{for(var g=!0,x=(i=void 0,fn(J_(v))),h;h=await x.next(),e=h.done,!e;g=!0){r=h.value,g=!1;const b=r;f.push(b);const C=b.name;if(u[C])throw new Error(`Duplicate function name ${C} found in MCP tools. Please ensure function names are unique.`);u[C]=v}}catch(b){i={error:b}}finally{try{!g&&!e&&(s=x.return)&&await s.call(x)}finally{if(i)throw i.error}}this.mcpTools=f,this.functionNameToMcpClient=u}async tool(){return await this.initialize(),Tb(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let u;this.config.timeout&&(u={timeout:this.config.timeout});const f=await r.callTool({name:s.name,arguments:s.args},void 0,u);i.push({functionResponse:{name:s.name,response:f.isError?{error:f}:f}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function $_(n,e,i){const s=new xb;let r;i.data instanceof Blob?r=JSON.parse(await i.data.text()):r=JSON.parse(i.data),Object.assign(s,r),e(s)}class W_{constructor(e,i,s){this.apiClient=e,this.auth=i,this.webSocketFactory=s}async connect(e){var i,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),f=X_(this.apiClient.getDefaultHeaders()),g=this.apiClient.getApiKey(),x=`${r}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateMusic?key=${g}`;let h=()=>{};const v=new Promise(M=>{h=M}),b=e.callbacks,C=function(){h({})},A=this.apiClient,T={onopen:C,onmessage:M=>{$_(A,b.onmessage,M)},onerror:(i=b==null?void 0:b.onerror)!==null&&i!==void 0?i:function(M){},onclose:(s=b==null?void 0:b.onclose)!==null&&s!==void 0?s:function(M){}},E=this.webSocketFactory.create(x,Q_(f),T);E.connect(),await v;const I={setup:{model:Fe(this.apiClient,e.model)}};return E.send(JSON.stringify(I)),new K_(E,this.apiClient)}}class K_{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=SS(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=CS(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const i={playbackControl:e};this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(Ri.PLAY)}pause(){this.sendPlaybackControl(Ri.PAUSE)}stop(){this.sendPlaybackControl(Ri.STOP)}resetContext(){this.sendPlaybackControl(Ri.RESET_CONTEXT)}close(){this.conn.close()}}function Q_(n){const e={};return n.forEach((i,s)=>{e[s]=i}),e}function X_(n){const e=new Headers;for(const[i,s]of Object.entries(n))e.append(i,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Z_="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function eT(n,e,i){const s=new gb;let r;i.data instanceof Blob?r=await i.data.text():i.data instanceof ArrayBuffer?r=new TextDecoder().decode(i.data):r=i.data;const u=JSON.parse(r);if(n.isVertexAI()){const f=TS(u);Object.assign(s,f)}else Object.assign(s,u);e(s)}class tT{constructor(e,i,s){this.apiClient=e,this.auth=i,this.webSocketFactory=s,this.music=new W_(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,s,r,u,f,g;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const x=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let v;const b=this.apiClient.getHeaders();e.config&&e.config.tools&&g0(e.config.tools)&&x0(b);const C=sT(b);if(this.apiClient.isVertexAI())v=`${x}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(C,v);else{const se=this.apiClient.getApiKey();let xe="BidiGenerateContent",de="key";se!=null&&se.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),xe="BidiGenerateContentConstrained",de="access_token"),v=`${x}/ws/google.ai.generativelanguage.${h}.GenerativeService.${xe}?${de}=${se}`}let A=()=>{};const T=new Promise(se=>{A=se}),E=e.callbacks,w=function(){var se;(se=E==null?void 0:E.onopen)===null||se===void 0||se.call(E),A({})},R=this.apiClient,I={onopen:w,onmessage:se=>{eT(R,E.onmessage,se)},onerror:(i=E==null?void 0:E.onerror)!==null&&i!==void 0?i:function(se){},onclose:(s=E==null?void 0:E.onclose)!==null&&s!==void 0?s:function(se){}},M=this.webSocketFactory.create(v,iT(C),I);M.connect(),await T;let q=Fe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&q.startsWith("publishers/")){const se=this.apiClient.getProject(),xe=this.apiClient.getLocation();q=`projects/${se}/locations/${xe}/`+q}let G={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ca.AUDIO]}:e.config.responseModalities=[Ca.AUDIO]),!((u=e.config)===null||u===void 0)&&u.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const U=(g=(f=e.config)===null||f===void 0?void 0:f.tools)!==null&&g!==void 0?g:[],V=[];for(const se of U)if(this.isCallableTool(se)){const xe=se;V.push(await xe.tool())}else V.push(se);V.length>0&&(e.config.tools=V);const ce={model:q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?G=bS(this.apiClient,ce):G=vS(this.apiClient,ce),delete G.config,M.send(JSON.stringify(G)),new oT(M,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const nT={turnComplete:!0};class oT{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let s=[];try{s=sn(i.turns),e.isVertexAI()||(s=s.map(r=>Ia(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:s,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let s=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?s=i.functionResponses:s=[i.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const u of s){if(typeof u!="object"||u===null||!("name"in u)||!("response"in u))throw new Error(`Could not parse function response, type '${typeof u}'.`);if(!e.isVertexAI()&&!("id"in u))throw new Error(Z_)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},nT),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:_S(e)}:i={realtimeInput:AS(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function iT(n){const e={};return n.forEach((i,s)=>{e[s]=i}),e}function sT(n){const e=new Headers;for(const[i,s]of Object.entries(n))e.append(i,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xg=10;function yg(n){var e,i,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const f of(i=n==null?void 0:n.tools)!==null&&i!==void 0?i:[])if(ki(f)){r=!0;break}if(!r)return!0;const u=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return u&&(u<0||!Number.isInteger(u))||u==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",u),!0):!1}function ki(n){return"callTool"in n&&typeof n.callTool=="function"}function lT(n){var e,i,s;return(s=(i=(e=n.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(r=>ki(r)))!==null&&s!==void 0?s:!1}function vg(n){var e;const i=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,r)=>{if(ki(s))return;const u=s;u.functionDeclarations&&u.functionDeclarations.length>0&&i.push(r)}),i}function bg(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aT extends On{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var s,r,u,f,g;const x=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!lT(i)||yg(i.config))return await this.generateContentInternal(x);const h=vg(i);if(h.length>0){const E=h.map(w=>`tools[${w}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${E}.`)}let v,b;const C=sn(x.contents),A=(u=(r=(s=x.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&u!==void 0?u:xg;let T=0;for(;T<A&&(v=await this.generateContentInternal(x),!(!v.functionCalls||v.functionCalls.length===0));){const E=v.candidates[0].content,w=[];for(const R of(g=(f=i.config)===null||f===void 0?void 0:f.tools)!==null&&g!==void 0?g:[])if(ki(R)){const M=await R.callTool(v.functionCalls);w.push(...M)}T++,b={role:"user",parts:w},x.contents=sn(x.contents),x.contents.push(E),x.contents.push(b),bg(x.config)&&(C.push(E),C.push(b))}return bg(x.config)&&(v.automaticFunctionCallingHistory=C),v},this.generateContentStream=async i=>{var s,r,u,f,g;if(this.maybeMoveToResponseJsonSchem(i),yg(i.config)){const b=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(b)}const x=vg(i);if(x.length>0){const b=x.map(C=>`tools[${C}]`).join(", ");throw new Error(`Incompatible tools found at ${b}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(u=(r=(s=i==null?void 0:i.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||u===void 0?void 0:u.streamFunctionCallArguments,v=(g=(f=i==null?void 0:i.config)===null||f===void 0?void 0:f.automaticFunctionCalling)===null||g===void 0?void 0:g.disable;if(h&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(s=>{var r;let u;const f=[];if(s!=null&&s.generatedImages)for(const x of s.generatedImages)x&&(x!=null&&x.safetyAttributes)&&((r=x==null?void 0:x.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?u=x==null?void 0:x.safetyAttributes:f.push(x);let g;return u?g={generatedImages:f,positivePromptSafetyAttributes:u,sdkHttpResponse:s.sdkHttpResponse}:g={generatedImages:f,sdkHttpResponse:s.sdkHttpResponse},g}),this.list=async i=>{var s;const f={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!f.config.queryBase){if(!((s=f.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");f.config.filter="labels.tune-type:*"}return new Oo(Pn.PAGED_ITEM_MODELS,g=>this.listInternal(g),await this.listInternal(f),f)},this.editImage=async i=>{const s={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(s.referenceImages=i.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async i=>{let s={numberOfImages:1,mode:"upscale"};i.config&&(s=Object.assign(Object.assign({},s),i.config));const r={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async i=>{var s,r,u,f,g,x;if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=i.video)===null||s===void 0)&&s.uri&&(!((r=i.video)===null||r===void 0)&&r.videoBytes)?i.video={uri:i.video.uri,mimeType:i.video.mimeType}:!((f=(u=i.source)===null||u===void 0?void 0:u.video)===null||f===void 0)&&f.uri&&(!((x=(g=i.source)===null||g===void 0?void 0:g.video)===null||x===void 0)&&x.videoBytes)&&(i.source.video={uri:i.source.video.uri,mimeType:i.source.video.mimeType})),await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,s,r;const u=(i=e.config)===null||i===void 0?void 0:i.tools;if(!u)return e;const f=await Promise.all(u.map(async x=>ki(x)?await x.tool():x)),g={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:f})};if(g.config.tools=f,e.config&&e.config.tools&&g0(e.config.tools)){const x=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},x);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),x0(h),g.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return g}async initAfcToolsMap(e){var i,s,r;const u=new Map;for(const f of(s=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&s!==void 0?s:[])if(ki(f)){const g=f,x=await g.tool();for(const h of(r=x.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(u.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);u.set(h.name,g)}}return u}async processAfcStream(e){var i,s,r;const u=(r=(s=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:xg;let f=!1,g=0;const x=await this.initAfcToolsMap(e);return(function(h,v,b){return dn(this,arguments,function*(){for(var C,A,T,E,w,R;g<u;){f&&(g++,f=!1);const G=yield Re(h.processParamsMaybeAddMcpUsage(b)),U=yield Re(h.generateContentStreamInternal(G)),V=[],ce=[];try{for(var I=!0,M=(A=void 0,fn(U)),q;q=yield Re(M.next()),C=q.done,!C;I=!0){E=q.value,I=!1;const se=E;if(yield yield Re(se),se.candidates&&(!((w=se.candidates[0])===null||w===void 0)&&w.content)){ce.push(se.candidates[0].content);for(const xe of(R=se.candidates[0].content.parts)!==null&&R!==void 0?R:[])if(g<u&&xe.functionCall){if(!xe.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(xe.functionCall.name)){const de=yield Re(v.get(xe.functionCall.name).callTool([xe.functionCall]));V.push(...de)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${xe.functionCall.name}`)}}}}catch(se){A={error:se}}finally{try{!I&&!C&&(T=M.return)&&(yield Re(T.call(M)))}finally{if(A)throw A.error}}if(V.length>0){f=!0;const se=new Ds;se.candidates=[{content:{role:"user",parts:V}}],yield yield Re(se);const xe=[];xe.push(...ce),xe.push({role:"user",parts:V});const de=sn(b.contents).concat(xe);b.contents=de}else break}})})(this,x,e)}async generateContentInternal(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=pg(this.apiClient,e);return g=ge("{model}:generateContent",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=mg(v),C=new Ds;return Object.assign(C,b),C})}else{const h=fg(this.apiClient,e);return g=ge("{model}:generateContent",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=hg(v),C=new Ds;return Object.assign(C,b),C})}}async generateContentStreamInternal(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=pg(this.apiClient,e);return g=ge("{model}:streamGenerateContent?alt=sse",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.requestStream({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),f.then(function(b){return dn(this,arguments,function*(){var C,A,T,E;try{for(var w=!0,R=fn(b),I;I=yield Re(R.next()),C=I.done,!C;w=!0){E=I.value,w=!1;const M=E,q=mg(yield Re(M.json()));q.sdkHttpResponse={headers:M.headers};const G=new Ds;Object.assign(G,q),yield yield Re(G)}}catch(M){A={error:M}}finally{try{!w&&!C&&(T=R.return)&&(yield Re(T.call(R)))}finally{if(A)throw A.error}}})})}else{const h=fg(this.apiClient,e);return g=ge("{model}:streamGenerateContent?alt=sse",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.requestStream({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}),f.then(function(b){return dn(this,arguments,function*(){var C,A,T,E;try{for(var w=!0,R=fn(b),I;I=yield Re(R.next()),C=I.done,!C;w=!0){E=I.value,w=!1;const M=E,q=hg(yield Re(M.json()));q.sdkHttpResponse={headers:M.headers};const G=new Ds;Object.assign(G,q),yield yield Re(G)}}catch(M){A={error:M}}finally{try{!w&&!C&&(T=R.return)&&(yield Re(T.call(R)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=tA(this.apiClient,e);return g=ge("{model}:predict",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=oA(v),C=new Wm;return Object.assign(C,b),C})}else{const h=eA(this.apiClient,e);return g=ge("{model}:batchEmbedContents",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=nA(v),C=new Wm;return Object.assign(C,b),C})}}async generateImagesInternal(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=hA(this.apiClient,e);return g=ge("{model}:predict",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=gA(v),C=new Km;return Object.assign(C,b),C})}else{const h=pA(this.apiClient,e);return g=ge("{model}:predict",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=mA(v),C=new Km;return Object.assign(C,b),C})}}async editImageInternal(e){var i,s;let r,u="",f={};if(this.apiClient.isVertexAI()){const g=KS(this.apiClient,e);return u=ge("{model}:predict",g._url),f=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:x.headers},v})),r.then(x=>{const h=QS(x),v=new sb;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,s;let r,u="",f={};if(this.apiClient.isVertexAI()){const g=h_(this.apiClient,e);return u=ge("{model}:predict",g._url),f=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:x.headers},v})),r.then(x=>{const h=m_(x),v=new lb;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,s;let r,u="",f={};if(this.apiClient.isVertexAI()){const g=WA(this.apiClient,e);return u=ge("{model}:predict",g._url),f=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),r.then(x=>{const h=KA(x),v=new ab;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,s;let r,u="",f={};if(this.apiClient.isVertexAI()){const g=n_(this.apiClient,e);return u=ge("{model}:predict",g._url),f=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),r.then(x=>{const h=o_(x),v=new rb;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=DA(this.apiClient,e);return g=ge("{name}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>mu(v))}else{const h=kA(this.apiClient,e);return g=ge("{name}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),f.then(v=>hu(v))}}async listInternal(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=qA(this.apiClient,e);return g=ge("{models_url}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=VA(v),C=new Qm;return Object.assign(C,b),C})}else{const h=zA(this.apiClient,e);return g=ge("{models_url}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=HA(v),C=new Qm;return Object.assign(C,b),C})}}async update(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=f_(this.apiClient,e);return g=ge("{model}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>mu(v))}else{const h=d_(this.apiClient,e);return g=ge("{name}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),f.then(v=>hu(v))}}async delete(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=YS(this.apiClient,e);return g=ge("{name}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=$S(v),C=new Xm;return Object.assign(C,b),C})}else{const h=FS(this.apiClient,e);return g=ge("{name}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=JS(v),C=new Xm;return Object.assign(C,b),C})}}async countTokens(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=qS(this.apiClient,e);return g=ge("{model}:countTokens",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=VS(v),C=new Zm;return Object.assign(C,b),C})}else{const h=zS(this.apiClient,e);return g=ge("{model}:countTokens",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=HS(v),C=new Zm;return Object.assign(C,b),C})}}async computeTokens(e){var i,s;let r,u="",f={};if(this.apiClient.isVertexAI()){const g=jS(this.apiClient,e);return u=ge("{model}:computeTokens",g._url),f=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:x.headers},v})),r.then(x=>{const h=LS(x),v=new cb;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=SA(this.apiClient,e);return g=ge("{model}:predictLongRunning",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f.then(v=>{const b=bA(v),C=new Sa;return Object.assign(C,b),C})}else{const h=CA(this.apiClient,e);return g=ge("{model}:predictLongRunning",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),f.then(v=>{const b=vA(v),C=new Sa;return Object.assign(C,b),C})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rT extends On{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,s=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=i.name.split("/operations/")[0];let u;s&&"httpOptions"in s&&(u=s.httpOptions);const f=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:r,config:{httpOptions:u}});return i._fromAPIResponse({apiResponse:f,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:i.name,config:s});return i._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const i=e.operation,s=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=i.name.split("/operations/")[0];let u;s&&"httpOptions"in s&&(u=s.httpOptions);const f=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:r,config:{httpOptions:u}});return i._fromAPIResponse({apiResponse:f,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:i.name,config:s});return i._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=Zv(e);return g=ge("{operationName}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()),f}else{const h=Xv(e);return g=ge("{operationName}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json()),f}}async fetchPredictVideosOperationInternal(e){var i,s;let r,u="",f={};if(this.apiClient.isVertexAI()){const g=Fv(e);return u=ge("{resourceName}:fetchPredictOperation",g._url),f=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cT(n){const e={},i=d(n,["data"]);if(i!=null&&p(e,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function uT(n){const e={},i=d(n,["parts"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(u=>vT(u))),p(e,["parts"],r)}const s=d(n,["role"]);return s!=null&&p(e,["role"],s),e}function dT(n,e,i){const s={},r=d(e,["expireTime"]);i!==void 0&&r!=null&&p(i,["expireTime"],r);const u=d(e,["newSessionExpireTime"]);i!==void 0&&u!=null&&p(i,["newSessionExpireTime"],u);const f=d(e,["uses"]);i!==void 0&&f!=null&&p(i,["uses"],f);const g=d(e,["liveConnectConstraints"]);i!==void 0&&g!=null&&p(i,["bidiGenerateContentSetup"],yT(n,g));const x=d(e,["lockAdditionalFields"]);return i!==void 0&&x!=null&&p(i,["fieldMask"],x),s}function fT(n,e){const i={},s=d(e,["config"]);return s!=null&&p(i,["config"],dT(n,s,i)),i}function pT(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&p(e,["fileUri"],i);const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function hT(n){const e={},i=d(n,["id"]);i!=null&&p(e,["id"],i);const s=d(n,["args"]);s!=null&&p(e,["args"],s);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function mT(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&p(e,["enableWidget"],i),e}function gT(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&p(e,["timeRangeFilter"],i),e}function xT(n,e){const i={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],s);const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const u=d(n,["temperature"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","temperature"],u);const f=d(n,["topP"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topP"],f);const g=d(n,["topK"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","topK"],g);const x=d(n,["maxOutputTokens"]);e!==void 0&&x!=null&&p(e,["setup","generationConfig","maxOutputTokens"],x);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const v=d(n,["seed"]);e!==void 0&&v!=null&&p(e,["setup","generationConfig","seed"],v);const b=d(n,["speechConfig"]);e!==void 0&&b!=null&&p(e,["setup","generationConfig","speechConfig"],Du(b));const C=d(n,["thinkingConfig"]);e!==void 0&&C!=null&&p(e,["setup","generationConfig","thinkingConfig"],C);const A=d(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],A);const T=d(n,["systemInstruction"]);e!==void 0&&T!=null&&p(e,["setup","systemInstruction"],uT(Et(T)));const E=d(n,["tools"]);if(e!==void 0&&E!=null){let U=Ui(E);Array.isArray(U)&&(U=U.map(V=>CT(Li(V)))),p(e,["setup","tools"],U)}const w=d(n,["sessionResumption"]);e!==void 0&&w!=null&&p(e,["setup","sessionResumption"],bT(w));const R=d(n,["inputAudioTranscription"]);e!==void 0&&R!=null&&p(e,["setup","inputAudioTranscription"],R);const I=d(n,["outputAudioTranscription"]);e!==void 0&&I!=null&&p(e,["setup","outputAudioTranscription"],I);const M=d(n,["realtimeInputConfig"]);e!==void 0&&M!=null&&p(e,["setup","realtimeInputConfig"],M);const q=d(n,["contextWindowCompression"]);e!==void 0&&q!=null&&p(e,["setup","contextWindowCompression"],q);const G=d(n,["proactivity"]);if(e!==void 0&&G!=null&&p(e,["setup","proactivity"],G),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return i}function yT(n,e){const i={},s=d(e,["model"]);s!=null&&p(i,["setup","model"],Fe(n,s));const r=d(e,["config"]);return r!=null&&p(i,["config"],xT(r,i)),i}function vT(n){const e={},i=d(n,["mediaResolution"]);i!=null&&p(e,["mediaResolution"],i);const s=d(n,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const u=d(n,["fileData"]);u!=null&&p(e,["fileData"],pT(u));const f=d(n,["functionCall"]);f!=null&&p(e,["functionCall"],hT(f));const g=d(n,["functionResponse"]);g!=null&&p(e,["functionResponse"],g);const x=d(n,["inlineData"]);x!=null&&p(e,["inlineData"],cT(x));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const v=d(n,["thought"]);v!=null&&p(e,["thought"],v);const b=d(n,["thoughtSignature"]);b!=null&&p(e,["thoughtSignature"],b);const C=d(n,["videoMetadata"]);return C!=null&&p(e,["videoMetadata"],C),e}function bT(n){const e={},i=d(n,["handle"]);if(i!=null&&p(e,["handle"],i),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function CT(n){const e={},i=d(n,["functionDeclarations"]);if(i!=null){let v=i;Array.isArray(v)&&(v=v.map(b=>b)),p(e,["functionDeclarations"],v)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const u=d(n,["fileSearch"]);u!=null&&p(e,["fileSearch"],u);const f=d(n,["codeExecution"]);if(f!=null&&p(e,["codeExecution"],f),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],mT(g));const x=d(n,["googleSearch"]);x!=null&&p(e,["googleSearch"],gT(x));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ST(n){const e=[];for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const s=n[i];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(u=>`${i}.${u}`);e.push(...r)}else e.push(i)}return e.join(",")}function AT(n,e){let i=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const u=s.setup;typeof u=="object"&&u!==null?(n.bidiGenerateContentSetup=u,i=u):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(i){const u=ST(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)u?n.fieldMask=u:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const f=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let g=[];r.length>0&&(g=r.map(h=>f.includes(h)?`generationConfig.${h}`:h));const x=[];u&&x.push(u),g.length>0&&x.push(...g),x.length>0?n.fieldMask=x.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class _T extends On{constructor(e){super(),this.apiClient=e}async create(e){var i,s;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const g=fT(this.apiClient,e);u=ge("auth_tokens",g._url),f=g._query,delete g.config,delete g._url,delete g._query;const x=AT(g,e.config);return r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(x),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TT(n,e){const i={},s=d(n,["force"]);return e!==void 0&&s!=null&&p(e,["_query","force"],s),i}function ET(n){const e={},i=d(n,["name"]);i!=null&&p(e,["_url","name"],i);const s=d(n,["config"]);return s!=null&&TT(s,e),e}function wT(n){const e={},i=d(n,["name"]);return i!=null&&p(e,["_url","name"],i),e}function NT(n,e){const i={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),i}function RT(n){const e={},i=d(n,["parent"]);i!=null&&p(e,["_url","parent"],i);const s=d(n,["config"]);return s!=null&&NT(s,e),e}function MT(n){const e={},i=d(n,["sdkHttpResponse"]);i!=null&&p(e,["sdkHttpResponse"],i);const s=d(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=d(n,["documents"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>f)),p(e,["documents"],u)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IT extends On{constructor(e){super(),this.apiClient=e,this.list=async i=>new Oo(Pn.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:i.parent,config:s.config}),await this.listInternal(i),i)}async get(e){var i,s;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=wT(e);return u=ge("{name}",g._url),f=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),r.then(x=>x)}}async delete(e){var i,s;let r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=ET(e);r=ge("{name}",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var i,s;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=RT(e);return u=ge("{parent}/documents",g._url),f=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),r.then(x=>{const h=MT(x),v=new ub;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kT extends On{constructor(e,i=new IT(e)){super(),this.apiClient=e,this.documents=i,this.list=async(s={})=>new Oo(Pn.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var i,s;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=S_(e);return u=ge("fileSearchStores",g._url),f=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),r.then(x=>x)}}async get(e){var i,s;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=T_(e);return u=ge("{name}",g._url),f=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),r.then(x=>x)}}async delete(e){var i,s;let r="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=__(e);r=ge("{name}",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:r,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var i,s;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=I_(e);return u=ge("fileSearchStores",g._url),f=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),r.then(x=>{const h=k_(x),v=new db;return Object.assign(v,h),v})}}async uploadToFileSearchStoreInternal(e){var i,s;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=D_(e);return u=ge("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",g._url),f=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),r.then(x=>{const h=j_(x),v=new fb;return Object.assign(v,h),v})}}async importFile(e){var i,s;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=N_(e);return u=ge("{file_search_store_name}:importFile",g._url),f=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json()),r.then(x=>{const h=w_(x),v=new Nu;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let y0=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return y0=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),i=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^i()&15>>+s/4).toString(16))};const DT=()=>y0();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xu(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const yu=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ln extends Error{}class Rt extends ln{constructor(e,i,s,r){super(`${Rt.makeMessage(e,i,s)}`),this.status=e,this.headers=r,this.error=i}static makeMessage(e,i,s){const r=i!=null&&i.message?typeof i.message=="string"?i.message:JSON.stringify(i.message):i?JSON.stringify(i):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,i,s,r){if(!e||!r)return new ja({message:s,cause:yu(i)});const u=i;return e===400?new b0(e,u,s,r):e===401?new C0(e,u,s,r):e===403?new S0(e,u,s,r):e===404?new A0(e,u,s,r):e===409?new _0(e,u,s,r):e===422?new T0(e,u,s,r):e===429?new E0(e,u,s,r):e>=500?new w0(e,u,s,r):new Rt(e,u,s,r)}}class vu extends Rt{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class ja extends Rt{constructor({message:e,cause:i}){super(void 0,void 0,e||"Connection error.",void 0),i&&(this.cause=i)}}class v0 extends ja{constructor({message:e}={}){super({message:e??"Request timed out."})}}class b0 extends Rt{}class C0 extends Rt{}class S0 extends Rt{}class A0 extends Rt{}class _0 extends Rt{}class T0 extends Rt{}class E0 extends Rt{}class w0 extends Rt{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jT=/^[a-z][a-z0-9+.-]*:/i,LT=n=>jT.test(n);let bu=n=>(bu=Array.isArray,bu(n));const UT=bu;let BT=UT;const Cg=BT;function GT(n){if(!n)return!0;for(const e in n)return!1;return!0}function PT(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const OT=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new ln(`${n} must be an integer`);if(e<0)throw new ln(`${n} must be a positive integer`);return e},zT=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qT=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ni="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HT(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const VT=()=>{var n,e,i,s,r;const u=HT();if(u==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ni,"X-Stainless-OS":Ag(Deno.build.os),"X-Stainless-Arch":Sg(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ni,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(u==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ni,"X-Stainless-OS":Ag((i=globalThis.process.platform)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Arch":Sg((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const f=FT();return f?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ni,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${f.browser}`,"X-Stainless-Runtime-Version":f.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ni,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function FT(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:i}of n){const s=i.exec(navigator.userAgent);if(s){const r=s[1]||0,u=s[2]||0,f=s[3]||0;return{browser:e,version:`${r}.${u}.${f}`}}}return null}const Sg=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",Ag=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let la;const YT=()=>la??(la=VT());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function JT(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function N0(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function $T(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return N0({start(){},async pull(i){const{done:s,value:r}=await e.next();s?i.close():i.enqueue(r)},async cancel(){var i;await((i=e.return)===null||i===void 0?void 0:i.call(e))}})}function R0(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const i=await e.read();return i!=null&&i.done&&e.releaseLock(),i}catch(i){throw e.releaseLock(),i}},async return(){const i=e.cancel();return e.releaseLock(),await i,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function WT(n){var e,i;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((i=(e=n[Symbol.asyncIterator]()).return)===null||i===void 0?void 0:i.call(e));return}const s=n.getReader(),r=s.cancel();s.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KT=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const M0=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,i=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(i?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function tu(n,e,i){return M0(),new File(n,e??"unknown_file",i)}function QT(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const XT=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const I0=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",ZT=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&I0(n),e1=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function t1(n,e,i){if(M0(),n=await n,ZT(n))return n instanceof File?n:tu([await n.arrayBuffer()],n.name);if(e1(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),tu(await Cu(r),e,i)}const s=await Cu(n);if(e||(e=QT(n)),!(i!=null&&i.type)){const r=s.find(u=>typeof u=="object"&&"type"in u&&u.type);typeof r=="string"&&(i=Object.assign(Object.assign({},i),{type:r}))}return tu(s,e,i)}async function Cu(n){var e,i,s,r,u;let f=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)f.push(n);else if(I0(n))f.push(n instanceof Blob?n:await n.arrayBuffer());else if(XT(n))try{for(var g=!0,x=fn(n),h;h=await x.next(),e=h.done,!e;g=!0){r=h.value,g=!1;const v=r;f.push(...await Cu(v))}}catch(v){i={error:v}}finally{try{!g&&!e&&(s=x.return)&&await s.call(x)}finally{if(i)throw i.error}}else{const v=(u=n==null?void 0:n.constructor)===null||u===void 0?void 0:u.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${n1(n)}`)}return f}function n1(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(i=>`"${i}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class k0{constructor(e){this._client=e}}k0._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function D0(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const _g=Object.freeze(Object.create(null)),o1=(n=D0)=>(function(i,...s){if(i.length===1)return i[0];let r=!1;const u=[],f=i.reduce((v,b,C)=>{var A,T,E;/[?#]/.test(b)&&(r=!0);const w=s[C];let R=(r?encodeURIComponent:n)(""+w);return C!==s.length&&(w==null||typeof w=="object"&&w.toString===((E=Object.getPrototypeOf((T=Object.getPrototypeOf((A=w.hasOwnProperty)!==null&&A!==void 0?A:_g))!==null&&T!==void 0?T:_g))===null||E===void 0?void 0:E.toString))&&(R=w+"",u.push({start:v.length+b.length,length:R.length,error:`Value of type ${Object.prototype.toString.call(w).slice(8,-1)} is not a valid path parameter`})),v+b+(C===s.length?"":R)},""),g=f.split(/[?#]/,1)[0],x=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=x.exec(g))!==null;)u.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(u.sort((v,b)=>v.start-b.start),u.length>0){let v=0;const b=u.reduce((C,A)=>{const T=" ".repeat(A.start-v),E="^".repeat(A.length);return v=A.start+A.length,C+T+E},"");throw new ln(`Path parameters result in path with invalid segments:
${u.map(C=>C.error).join(`
`)}
${f}
${b}`)}return f}),aa=o1(D0);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class j0 extends k0{create(e,i){var s;const{api_version:r=this._client.apiVersion}=e,u=_a(e,["api_version"]);if("model"in u&&"agent_config"in u)throw new ln("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in u&&"generation_config"in u)throw new ln("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(aa`/${r}/interactions`,Object.assign(Object.assign({body:u},i),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,i={},s){const{api_version:r=this._client.apiVersion}=i??{};return this._client.delete(aa`/${r}/interactions/${e}`,s)}cancel(e,i={},s){const{api_version:r=this._client.apiVersion}=i??{};return this._client.post(aa`/${r}/interactions/${e}/cancel`,s)}get(e,i={},s){var r;const u=i??{},{api_version:f=this._client.apiVersion}=u,g=_a(u,["api_version"]);return this._client.get(aa`/${f}/interactions/${e}`,Object.assign(Object.assign({query:g},s),{stream:(r=i==null?void 0:i.stream)!==null&&r!==void 0?r:!1}))}}j0._key=Object.freeze(["interactions"]);class L0 extends j0{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function i1(n){let e=0;for(const r of n)e+=r.length;const i=new Uint8Array(e);let s=0;for(const r of n)i.set(r,s),s+=r.length;return i}let ra;function Lu(n){let e;return(ra??(e=new globalThis.TextEncoder,ra=e.encode.bind(e)))(n)}let ca;function Tg(n){let e;return(ca??(e=new globalThis.TextDecoder,ca=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class La{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const i=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Lu(e):e;this.buffer=i1([this.buffer,i]);const s=[];let r;for(;(r=s1(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(Tg(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const u=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,f=Tg(this.buffer.subarray(0,u));s.push(f),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}La.NEWLINE_CHARS=new Set([`
`,"\r"]);La.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function s1(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function l1(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ta={off:0,error:200,warn:300,info:400,debug:500},Eg=(n,e,i)=>{if(n){if(PT(Ta,n))return n;Nt(i).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Ta))}`)}};function Us(){}function ua(n,e,i){return!e||Ta[n]>Ta[i]?Us:e[n].bind(e)}const a1={error:Us,warn:Us,info:Us,debug:Us};let wg=new WeakMap;function Nt(n){var e;const i=n.logger,s=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!i)return a1;const r=wg.get(i);if(r&&r[0]===s)return r[1];const u={error:ua("error",i,s),warn:ua("warn",i,s),info:ua("info",i,s),debug:ua("debug",i,s)};return wg.set(i,[s,u]),u}const Go=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,i])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":i]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mi{constructor(e,i,s){this.iterator=e,this.controller=i,this.client=s}static fromSSEResponse(e,i,s){let r=!1;const u=s?Nt(s):console;function f(){return dn(this,arguments,function*(){var x,h,v,b;if(r)throw new ln("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let C=!1;try{try{for(var A=!0,T=fn(r1(e,i)),E;E=yield Re(T.next()),x=E.done,!x;A=!0){b=E.value,A=!1;const w=b;if(!C)if(w.data.startsWith("[DONE]")){C=!0;continue}else try{yield yield Re(JSON.parse(w.data))}catch(R){throw u.error("Could not parse message into JSON:",w.data),u.error("From chunk:",w.raw),R}}}catch(w){h={error:w}}finally{try{!A&&!x&&(v=T.return)&&(yield Re(v.call(T)))}finally{if(h)throw h.error}}C=!0}catch(w){if(xu(w))return yield Re(void 0);throw w}finally{C||i.abort()}})}return new Mi(f,i,s)}static fromReadableStream(e,i,s){let r=!1;function u(){return dn(this,arguments,function*(){var x,h,v,b;const C=new La,A=R0(e);try{for(var T=!0,E=fn(A),w;w=yield Re(E.next()),x=w.done,!x;T=!0){b=w.value,T=!1;const R=b;for(const I of C.decode(R))yield yield Re(I)}}catch(R){h={error:R}}finally{try{!T&&!x&&(v=E.return)&&(yield Re(v.call(E)))}finally{if(h)throw h.error}}for(const R of C.flush())yield yield Re(R)})}function f(){return dn(this,arguments,function*(){var x,h,v,b;if(r)throw new ln("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let C=!1;try{try{for(var A=!0,T=fn(u()),E;E=yield Re(T.next()),x=E.done,!x;A=!0){b=E.value,A=!1;const w=b;C||w&&(yield yield Re(JSON.parse(w)))}}catch(w){h={error:w}}finally{try{!A&&!x&&(v=T.return)&&(yield Re(v.call(T)))}finally{if(h)throw h.error}}C=!0}catch(w){if(xu(w))return yield Re(void 0);throw w}finally{C||i.abort()}})}return new Mi(f,i,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],i=[],s=this.iterator(),r=u=>({next:()=>{if(u.length===0){const f=s.next();e.push(f),i.push(f)}return u.shift()}});return[new Mi(()=>r(e),this.controller,this.client),new Mi(()=>r(i),this.controller,this.client)]}toReadableStream(){const e=this;let i;return N0({async start(){i=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:u}=await i.next();if(u)return s.close();const f=Lu(JSON.stringify(r)+`
`);s.enqueue(f)}catch(r){s.error(r)}},async cancel(){var s;await((s=i.return)===null||s===void 0?void 0:s.call(i))}})}}function r1(n,e){return dn(this,arguments,function*(){var s,r,u,f;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new ln("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new ln("Attempted to iterate over a response with no body");const g=new u1,x=new La,h=R0(n.body);try{for(var v=!0,b=fn(c1(h)),C;C=yield Re(b.next()),s=C.done,!s;v=!0){f=C.value,v=!1;const A=f;for(const T of x.decode(A)){const E=g.decode(T);E&&(yield yield Re(E))}}}catch(A){r={error:A}}finally{try{!v&&!s&&(u=b.return)&&(yield Re(u.call(b)))}finally{if(r)throw r.error}}for(const A of x.flush()){const T=g.decode(A);T&&(yield yield Re(T))}})}function c1(n){return dn(this,arguments,function*(){var i,s,r,u;let f=new Uint8Array;try{for(var g=!0,x=fn(n),h;h=yield Re(x.next()),i=h.done,!i;g=!0){u=h.value,g=!1;const v=u;if(v==null)continue;const b=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?Lu(v):v;let C=new Uint8Array(f.length+b.length);C.set(f),C.set(b,f.length),f=C;let A;for(;(A=l1(f))!==-1;)yield yield Re(f.slice(0,A)),f=f.slice(A)}}catch(v){s={error:v}}finally{try{!g&&!i&&(r=x.return)&&(yield Re(r.call(x)))}finally{if(s)throw s.error}}f.length>0&&(yield yield Re(f))})}class u1{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const u={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],u}if(this.chunks.push(e),e.startsWith(":"))return null;let[i,s,r]=d1(e,":");return r.startsWith(" ")&&(r=r.substring(1)),i==="event"?this.event=r:i==="data"&&this.data.push(r),null}}function d1(n,e){const i=n.indexOf(e);return i!==-1?[n.substring(0,i),e,n.substring(i+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function f1(n,e){const{response:i,requestLogID:s,retryOfRequestLogID:r,startTime:u}=e,f=await(async()=>{var g;if(e.options.stream)return Nt(n).debug("response",i.status,i.url,i.headers,i.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(i,e.controller,n):Mi.fromSSEResponse(i,e.controller,n);if(i.status===204)return null;if(e.options.__binaryResponse)return i;const x=i.headers.get("content-type"),h=(g=x==null?void 0:x.split(";")[0])===null||g===void 0?void 0:g.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await i.json():await i.text()})();return Nt(n).debug(`[${s}] response parsed`,Go({retryOfRequestLogID:r,url:i.url,status:i.status,body:f,durationMs:Date.now()-u})),f}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Uu extends Promise{constructor(e,i,s=f1){super(r=>{r(null)}),this.responsePromise=i,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new Uu(this.client,this.responsePromise,async(i,s)=>e(await this.parseResponse(i,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,i]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:i}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,i){return this.parse().then(e,i)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const U0=Symbol("brand.privateNullableHeaders");function*p1(n){if(!n)return;if(U0 in n){const{values:s,nulls:r}=n;yield*s.entries();for(const u of r)yield[u,null];return}let e=!1,i;n instanceof Headers?i=n.entries():Cg(n)?i=n:(e=!0,i=Object.entries(n??{}));for(let s of i){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const u=Cg(s[1])?s[1]:[s[1]];let f=!1;for(const g of u)g!==void 0&&(e&&!f&&(f=!0,yield[r,null]),yield[r,g])}}const js=n=>{const e=new Headers,i=new Set;for(const s of n){const r=new Set;for(const[u,f]of p1(s)){const g=u.toLowerCase();r.has(g)||(e.delete(u),r.add(g)),f===null?(e.delete(u),i.add(g)):(e.append(u,f),i.delete(g))}}return{[U0]:!0,values:e,nulls:i}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nu=n=>{var e,i,s,r,u,f;if(typeof globalThis.process<"u")return(s=(i=(e=Pv)===null||e===void 0?void 0:e[n])===null||i===void 0?void 0:i.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(f=(u=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||u===void 0?void 0:u.call(r,n))===null||f===void 0?void 0:f.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var B0;class Ua{constructor(e){var i,s,r,u,f,g,x,{baseURL:h=nu("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(i=nu("GEMINI_API_KEY"))!==null&&i!==void 0?i:null,apiVersion:b="v1beta"}=e,C=_a(e,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:v,apiVersion:b},C),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(s=A.timeout)!==null&&s!==void 0?s:Ua.DEFAULT_TIMEOUT,this.logger=(r=A.logger)!==null&&r!==void 0?r:console;const T="warn";this.logLevel=T,this.logLevel=(f=(u=Eg(A.logLevel,"ClientOptions.logLevel",this))!==null&&u!==void 0?u:Eg(nu("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&f!==void 0?f:T,this.fetchOptions=A.fetchOptions,this.maxRetries=(g=A.maxRetries)!==null&&g!==void 0?g:2,this.fetch=(x=A.fetch)!==null&&x!==void 0?x:JT(),this.encoder=KT,this._options=A,this.apiKey=v,this.apiVersion=b,this.clientAdapter=A.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:i}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!i.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const i=js([e.headers]);if(!(i.values.has("authorization")||i.values.has("x-goog-api-key"))){if(this.apiKey)return js([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return js([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([i,s])=>typeof s<"u").map(([i,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(i)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(i)}=`;throw new ln(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ni}`}defaultIdempotencyKey(){return`stainless-node-retry-${DT()}`}makeStatusError(e,i,s,r){return Rt.generate(e,i,s,r)}buildURL(e,i,s){const r=!this.baseURLOverridden()&&s||this.baseURL,u=LT(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),f=this.defaultQuery();return GT(f)||(i=Object.assign(Object.assign({},f),i)),typeof i=="object"&&i&&!Array.isArray(i)&&(u.search=this.stringifyQuery(i)),u.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const i=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${i}`}}async prepareRequest(e,{url:i,options:s}){}get(e,i){return this.methodRequest("get",e,i)}post(e,i){return this.methodRequest("post",e,i)}patch(e,i){return this.methodRequest("patch",e,i)}put(e,i){return this.methodRequest("put",e,i)}delete(e,i){return this.methodRequest("delete",e,i)}methodRequest(e,i,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:e,path:i},r)))}request(e,i=null){return new Uu(this,this.makeRequest(e,i,void 0))}async makeRequest(e,i,s){var r,u,f;const g=await e,x=(r=g.maxRetries)!==null&&r!==void 0?r:this.maxRetries;i==null&&(i=x),await this.prepareOptions(g);const{req:h,url:v,timeout:b}=await this.buildRequest(g,{retryCount:x-i});await this.prepareRequest(h,{url:v,options:g});const C="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=s===void 0?"":`, retryOf: ${s}`,T=Date.now();if(Nt(this).debug(`[${C}] sending request`,Go({retryOfRequestLogID:s,method:g.method,url:v,options:g,headers:h.headers})),!((u=g.signal)===null||u===void 0)&&u.aborted)throw new vu;const E=new AbortController,w=await this.fetchWithTimeout(v,h,b,E).catch(yu),R=Date.now();if(w instanceof globalThis.Error){const M=`retrying, ${i} attempts remaining`;if(!((f=g.signal)===null||f===void 0)&&f.aborted)throw new vu;const q=xu(w)||/timed? ?out/i.test(String(w)+("cause"in w?String(w.cause):""));if(i)return Nt(this).info(`[${C}] connection ${q?"timed out":"failed"} - ${M}`),Nt(this).debug(`[${C}] connection ${q?"timed out":"failed"} (${M})`,Go({retryOfRequestLogID:s,url:v,durationMs:R-T,message:w.message})),this.retryRequest(g,i,s??C);throw Nt(this).info(`[${C}] connection ${q?"timed out":"failed"} - error; no more retries left`),Nt(this).debug(`[${C}] connection ${q?"timed out":"failed"} (error; no more retries left)`,Go({retryOfRequestLogID:s,url:v,durationMs:R-T,message:w.message})),q?new v0:new ja({cause:w})}const I=`[${C}${A}] ${h.method} ${v} ${w.ok?"succeeded":"failed"} with status ${w.status} in ${R-T}ms`;if(!w.ok){const M=await this.shouldRetry(w);if(i&&M){const se=`retrying, ${i} attempts remaining`;return await WT(w.body),Nt(this).info(`${I} - ${se}`),Nt(this).debug(`[${C}] response error (${se})`,Go({retryOfRequestLogID:s,url:w.url,status:w.status,headers:w.headers,durationMs:R-T})),this.retryRequest(g,i,s??C,w.headers)}const q=M?"error; no more retries left":"error; not retryable";Nt(this).info(`${I} - ${q}`);const G=await w.text().catch(se=>yu(se).message),U=zT(G),V=U?void 0:G;throw Nt(this).debug(`[${C}] response error (${q})`,Go({retryOfRequestLogID:s,url:w.url,status:w.status,headers:w.headers,message:V,durationMs:Date.now()-T})),this.makeStatusError(w.status,U,V,w.headers)}return Nt(this).info(I),Nt(this).debug(`[${C}] response start`,Go({retryOfRequestLogID:s,url:w.url,status:w.status,headers:w.headers,durationMs:R-T})),{response:w,options:g,controller:E,requestLogID:C,retryOfRequestLogID:s,startTime:T}}async fetchWithTimeout(e,i,s,r){const u=i||{},{signal:f,method:g}=u,x=_a(u,["signal","method"]);f&&f.addEventListener("abort",()=>r.abort());const h=setTimeout(()=>r.abort(),s),v=globalThis.ReadableStream&&x.body instanceof globalThis.ReadableStream||typeof x.body=="object"&&x.body!==null&&Symbol.asyncIterator in x.body,b=Object.assign(Object.assign(Object.assign({signal:r.signal},v?{duplex:"half"}:{}),{method:"GET"}),x);g&&(b.method=g.toUpperCase());try{return await this.fetch.call(void 0,e,b)}finally{clearTimeout(h)}}async shouldRetry(e){const i=e.headers.get("x-should-retry");return i==="true"?!0:i==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,i,s,r){var u;let f;const g=r==null?void 0:r.get("retry-after-ms");if(g){const h=parseFloat(g);Number.isNaN(h)||(f=h)}const x=r==null?void 0:r.get("retry-after");if(x&&!f){const h=parseFloat(x);Number.isNaN(h)?f=Date.parse(x)-Date.now():f=h*1e3}if(!(f&&0<=f&&f<60*1e3)){const h=(u=e.maxRetries)!==null&&u!==void 0?u:this.maxRetries;f=this.calculateDefaultRetryTimeoutMillis(i,h)}return await qT(f),this.makeRequest(e,i-1,s)}calculateDefaultRetryTimeoutMillis(e,i){const u=i-e,f=Math.min(.5*Math.pow(2,u),8),g=1-Math.random()*.25;return f*g*1e3}async buildRequest(e,{retryCount:i=0}={}){var s,r,u;const f=Object.assign({},e),{method:g,path:x,query:h,defaultBaseURL:v}=f,b=this.buildURL(x,h,v);"timeout"in f&&OT("timeout",f.timeout),f.timeout=(s=f.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:C,body:A}=this.buildBody({options:f}),T=await this.buildHeaders({options:e,method:g,bodyHeaders:C,retryCount:i});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:g,headers:T},f.signal&&{signal:f.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(u=f.fetchOptions)!==null&&u!==void 0?u:{}),url:b,timeout:f.timeout}}async buildHeaders({options:e,method:i,bodyHeaders:s,retryCount:r}){let u={};this.idempotencyHeader&&i!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),u[this.idempotencyHeader]=e.idempotencyKey);const f=await this.authHeaders(e);let g=js([u,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),YT()),this._options.defaultHeaders,s,e.headers,f]);return this.validateHeaders(g),g.values}buildBody({options:{body:e,headers:i}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=js([i]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:$T(e)}:this.encoder({body:e,headers:s})}}Ua.DEFAULT_TIMEOUT=6e4;class yt extends Ua{constructor(){super(...arguments),this.interactions=new L0(this)}}B0=yt;yt.GeminiNextGenAPIClient=B0;yt.GeminiNextGenAPIClientError=ln;yt.APIError=Rt;yt.APIConnectionError=ja;yt.APIConnectionTimeoutError=v0;yt.APIUserAbortError=vu;yt.NotFoundError=A0;yt.ConflictError=_0;yt.RateLimitError=E0;yt.BadRequestError=b0;yt.AuthenticationError=C0;yt.InternalServerError=w0;yt.PermissionDeniedError=S0;yt.UnprocessableEntityError=T0;yt.toFile=t1;yt.Interactions=L0;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h1(n,e){const i={},s=d(n,["name"]);return s!=null&&p(i,["_url","name"],s),i}function m1(n,e){const i={},s=d(n,["name"]);return s!=null&&p(i,["_url","name"],s),i}function g1(n,e){const i={},s=d(n,["sdkHttpResponse"]);return s!=null&&p(i,["sdkHttpResponse"],s),i}function x1(n,e){const i={},s=d(n,["sdkHttpResponse"]);return s!=null&&p(i,["sdkHttpResponse"],s),i}function y1(n,e,i){const s={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=d(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&p(e,["displayName"],r),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const u=d(n,["epochCount"]);e!==void 0&&u!=null&&p(e,["tuningTask","hyperparameters","epochCount"],u);const f=d(n,["learningRateMultiplier"]);if(f!=null&&p(s,["tuningTask","hyperparameters","learningRateMultiplier"],f),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const g=d(n,["batchSize"]);e!==void 0&&g!=null&&p(e,["tuningTask","hyperparameters","batchSize"],g);const x=d(n,["learningRate"]);if(e!==void 0&&x!=null&&p(e,["tuningTask","hyperparameters","learningRate"],x),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function v1(n,e,i){const s={};let r=d(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const A=d(n,["validationDataset"]);e!==void 0&&A!=null&&p(e,["supervisedTuningSpec"],Ng(A))}else if(r==="PREFERENCE_TUNING"){const A=d(n,["validationDataset"]);e!==void 0&&A!=null&&p(e,["preferenceOptimizationSpec"],Ng(A))}const u=d(n,["tunedModelDisplayName"]);e!==void 0&&u!=null&&p(e,["tunedModelDisplayName"],u);const f=d(n,["description"]);e!==void 0&&f!=null&&p(e,["description"],f);let g=d(i,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const A=d(n,["epochCount"]);e!==void 0&&A!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],A)}else if(g==="PREFERENCE_TUNING"){const A=d(n,["epochCount"]);e!==void 0&&A!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],A)}let x=d(i,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const A=d(n,["learningRateMultiplier"]);e!==void 0&&A!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],A)}else if(x==="PREFERENCE_TUNING"){const A=d(n,["learningRateMultiplier"]);e!==void 0&&A!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],A)}let h=d(i,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const A=d(n,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],A)}else if(h==="PREFERENCE_TUNING"){const A=d(n,["exportLastCheckpointOnly"]);e!==void 0&&A!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],A)}let v=d(i,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const A=d(n,["adapterSize"]);e!==void 0&&A!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],A)}else if(v==="PREFERENCE_TUNING"){const A=d(n,["adapterSize"]);e!==void 0&&A!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],A)}if(d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const b=d(n,["labels"]);e!==void 0&&b!=null&&p(e,["labels"],b);const C=d(n,["beta"]);return e!==void 0&&C!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],C),s}function b1(n,e){const i={},s=d(n,["baseModel"]);s!=null&&p(i,["baseModel"],s);const r=d(n,["preTunedModel"]);r!=null&&p(i,["preTunedModel"],r);const u=d(n,["trainingDataset"]);u!=null&&I1(u);const f=d(n,["config"]);return f!=null&&y1(f,i),i}function C1(n,e){const i={},s=d(n,["baseModel"]);s!=null&&p(i,["baseModel"],s);const r=d(n,["preTunedModel"]);r!=null&&p(i,["preTunedModel"],r);const u=d(n,["trainingDataset"]);u!=null&&k1(u,i,e);const f=d(n,["config"]);return f!=null&&v1(f,i,e),i}function S1(n,e){const i={},s=d(n,["name"]);return s!=null&&p(i,["_url","name"],s),i}function A1(n,e){const i={},s=d(n,["name"]);return s!=null&&p(i,["_url","name"],s),i}function _1(n,e,i){const s={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const u=d(n,["pageToken"]);e!==void 0&&u!=null&&p(e,["_query","pageToken"],u);const f=d(n,["filter"]);return e!==void 0&&f!=null&&p(e,["_query","filter"],f),s}function T1(n,e,i){const s={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const u=d(n,["pageToken"]);e!==void 0&&u!=null&&p(e,["_query","pageToken"],u);const f=d(n,["filter"]);return e!==void 0&&f!=null&&p(e,["_query","filter"],f),s}function E1(n,e){const i={},s=d(n,["config"]);return s!=null&&_1(s,i),i}function w1(n,e){const i={},s=d(n,["config"]);return s!=null&&T1(s,i),i}function N1(n,e){const i={},s=d(n,["sdkHttpResponse"]);s!=null&&p(i,["sdkHttpResponse"],s);const r=d(n,["nextPageToken"]);r!=null&&p(i,["nextPageToken"],r);const u=d(n,["tunedModels"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(g=>G0(g))),p(i,["tuningJobs"],f)}return i}function R1(n,e){const i={},s=d(n,["sdkHttpResponse"]);s!=null&&p(i,["sdkHttpResponse"],s);const r=d(n,["nextPageToken"]);r!=null&&p(i,["nextPageToken"],r);const u=d(n,["tuningJobs"]);if(u!=null){let f=u;Array.isArray(f)&&(f=f.map(g=>Su(g))),p(i,["tuningJobs"],f)}return i}function M1(n,e){const i={},s=d(n,["name"]);s!=null&&p(i,["model"],s);const r=d(n,["name"]);return r!=null&&p(i,["endpoint"],r),i}function I1(n,e){const i={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=d(n,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(u=>u)),p(i,["examples","examples"],r)}return i}function k1(n,e,i){const s={};let r=d(i,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const f=d(n,["gcsUri"]);e!==void 0&&f!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],f)}else if(r==="PREFERENCE_TUNING"){const f=d(n,["gcsUri"]);e!==void 0&&f!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],f)}let u=d(i,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const f=d(n,["vertexDatasetResource"]);e!==void 0&&f!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],f)}else if(u==="PREFERENCE_TUNING"){const f=d(n,["vertexDatasetResource"]);e!==void 0&&f!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],f)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function G0(n,e){const i={},s=d(n,["sdkHttpResponse"]);s!=null&&p(i,["sdkHttpResponse"],s);const r=d(n,["name"]);r!=null&&p(i,["name"],r);const u=d(n,["state"]);u!=null&&p(i,["state"],e0(u));const f=d(n,["createTime"]);f!=null&&p(i,["createTime"],f);const g=d(n,["tuningTask","startTime"]);g!=null&&p(i,["startTime"],g);const x=d(n,["tuningTask","completeTime"]);x!=null&&p(i,["endTime"],x);const h=d(n,["updateTime"]);h!=null&&p(i,["updateTime"],h);const v=d(n,["description"]);v!=null&&p(i,["description"],v);const b=d(n,["baseModel"]);b!=null&&p(i,["baseModel"],b);const C=d(n,["_self"]);return C!=null&&p(i,["tunedModel"],M1(C)),i}function Su(n,e){const i={},s=d(n,["sdkHttpResponse"]);s!=null&&p(i,["sdkHttpResponse"],s);const r=d(n,["name"]);r!=null&&p(i,["name"],r);const u=d(n,["state"]);u!=null&&p(i,["state"],e0(u));const f=d(n,["createTime"]);f!=null&&p(i,["createTime"],f);const g=d(n,["startTime"]);g!=null&&p(i,["startTime"],g);const x=d(n,["endTime"]);x!=null&&p(i,["endTime"],x);const h=d(n,["updateTime"]);h!=null&&p(i,["updateTime"],h);const v=d(n,["error"]);v!=null&&p(i,["error"],v);const b=d(n,["description"]);b!=null&&p(i,["description"],b);const C=d(n,["baseModel"]);C!=null&&p(i,["baseModel"],C);const A=d(n,["tunedModel"]);A!=null&&p(i,["tunedModel"],A);const T=d(n,["preTunedModel"]);T!=null&&p(i,["preTunedModel"],T);const E=d(n,["supervisedTuningSpec"]);E!=null&&p(i,["supervisedTuningSpec"],E);const w=d(n,["preferenceOptimizationSpec"]);w!=null&&p(i,["preferenceOptimizationSpec"],w);const R=d(n,["tuningDataStats"]);R!=null&&p(i,["tuningDataStats"],R);const I=d(n,["encryptionSpec"]);I!=null&&p(i,["encryptionSpec"],I);const M=d(n,["partnerModelTuningSpec"]);M!=null&&p(i,["partnerModelTuningSpec"],M);const q=d(n,["customBaseModel"]);q!=null&&p(i,["customBaseModel"],q);const G=d(n,["experiment"]);G!=null&&p(i,["experiment"],G);const U=d(n,["labels"]);U!=null&&p(i,["labels"],U);const V=d(n,["outputUri"]);V!=null&&p(i,["outputUri"],V);const ce=d(n,["pipelineJob"]);ce!=null&&p(i,["pipelineJob"],ce);const se=d(n,["serviceAccount"]);se!=null&&p(i,["serviceAccount"],se);const xe=d(n,["tunedModelDisplayName"]);xe!=null&&p(i,["tunedModelDisplayName"],xe);const de=d(n,["veoTuningSpec"]);return de!=null&&p(i,["veoTuningSpec"],de),i}function D1(n,e){const i={},s=d(n,["sdkHttpResponse"]);s!=null&&p(i,["sdkHttpResponse"],s);const r=d(n,["name"]);r!=null&&p(i,["name"],r);const u=d(n,["metadata"]);u!=null&&p(i,["metadata"],u);const f=d(n,["done"]);f!=null&&p(i,["done"],f);const g=d(n,["error"]);return g!=null&&p(i,["error"],g),i}function Ng(n,e){const i={},s=d(n,["gcsUri"]);s!=null&&p(i,["validationDatasetUri"],s);const r=d(n,["vertexDatasetResource"]);return r!=null&&p(i,["validationDatasetUri"],r),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class j1 extends On{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new Oo(Pn.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(i),i),this.get=async i=>await this.getInternal(i),this.tune=async i=>{var s;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const r={tunedModelName:i.baseModel};!((s=i.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=i.config.preTunedModelCheckpointId);const u=Object.assign(Object.assign({},i),{preTunedModel:r});return u.baseModel=void 0,await this.tuneInternal(u)}else{const r=Object.assign({},i);return await this.tuneInternal(r)}else{const r=Object.assign({},i),u=await this.tuneMldevInternal(r);let f="";return u.metadata!==void 0&&u.metadata.tunedModel!==void 0?f=u.metadata.tunedModel:u.name!==void 0&&u.name.includes("/operations/")&&(f=u.name.split("/operations/")[0]),{name:f,state:uu.JOB_STATE_QUEUED}}}}async getInternal(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=A1(e);return g=ge("{name}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>Su(v))}else{const h=S1(e);return g=ge("{name}",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>G0(v))}}async listInternal(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=w1(e);return g=ge("tuningJobs",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=R1(v),C=new eg;return Object.assign(C,b),C})}else{const h=E1(e);return g=ge("tunedModels",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=N1(v),C=new eg;return Object.assign(C,b),C})}}async cancel(e){var i,s,r,u;let f,g="",x={};if(this.apiClient.isVertexAI()){const h=m1(e);return g=ge("{name}:cancel",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=x1(v),C=new tg;return Object.assign(C,b),C})}else{const h=h1(e);return g=ge("{name}:cancel",h._url),x=h._query,delete h._url,delete h._query,f=this.apiClient.request({path:g,queryParams:x,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(u=e.config)===null||u===void 0?void 0:u.abortSignal}).then(v=>v.json().then(b=>{const C=b;return C.sdkHttpResponse={headers:v.headers},C})),f.then(v=>{const b=g1(v),C=new tg;return Object.assign(C,b),C})}}async tuneInternal(e){var i,s;let r,u="",f={};if(this.apiClient.isVertexAI()){const g=C1(e,e);return u=ge("tuningJobs",g._url),f=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:x.headers},v})),r.then(x=>Su(x))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,s;let r,u="",f={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=b1(e);return u=ge("tunedModels",g._url),f=g._query,delete g._url,delete g._query,r=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(x=>x.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:x.headers},v})),r.then(x=>D1(x))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class L1{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const U1=1024*1024*8,B1=3,G1=1e3,P1=2,Ea="x-goog-upload-status";async function O1(n,e,i){var s;const r=await P0(n,e,i),u=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[Ea])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function z1(n,e,i){var s;const r=await P0(n,e,i),u=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[Ea])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const f=$g(u),g=new Ru;return Object.assign(g,f),g}async function P0(n,e,i){var s,r;let u=0,f=0,g=new du(new Response),x="upload";for(u=n.size;f<u;){const h=Math.min(U1,u-f),v=n.slice(f,f+h);f+h>=u&&(x+=", finalize");let b=0,C=G1;for(;b<B1&&(g=await i.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":x,"X-Goog-Upload-Offset":String(f),"Content-Length":String(h)}}}),!(!((s=g==null?void 0:g.headers)===null||s===void 0)&&s[Ea]));)b++,await H1(C),C=C*P1;if(f+=h,((r=g==null?void 0:g.headers)===null||r===void 0?void 0:r[Ea])!=="active")break;if(u<=f)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return g}async function q1(n){return{size:n.size,type:n.type}}function H1(n){return new Promise(e=>setTimeout(e,n))}class V1{async upload(e,i,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await O1(e,i,s)}async uploadToFileSearchStore(e,i,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await z1(e,i,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await q1(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class F1{create(e,i,s){return new Y1(e,i,s)}}class Y1{constructor(e,i,s){this.url=e,this.headers=i,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Rg="x-goog-api-key";class J1{constructor(e){this.apiKey=e}async addAuthHeaders(e,i){if(e.get(Rg)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Rg,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $1="gl-node/";class W1{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new yt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=i.interactions,this._interactions}constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const s=Hv(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new J1(this.apiKey);this.apiClient=new q_({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:$1+"web",uploader:new V1,downloader:new L1}),this.models=new aT(this.apiClient),this.live=new tT(this.apiClient,r,new F1),this.batches=new yC(this.apiClient),this.chats=new ZC(this.models,this.apiClient),this.caches=new KC(this.apiClient),this.files=new cS(this.apiClient),this.operations=new rT(this.apiClient),this.authTokens=new _T(this.apiClient),this.tunings=new j1(this.apiClient),this.fileSearchStores=new kT(this.apiClient)}}const Bs=[{value:"KO_CN",label:"",sourceLanguage:"",targetLanguage:"",nativeName:"  "},{value:"FR_CN",label:"",sourceLanguage:"",targetLanguage:"",nativeName:"Franais  "},{value:"JA_CN",label:"",sourceLanguage:"",targetLanguage:"",nativeName:"  "},{value:"EN_CET4_CN",label:"()",sourceLanguage:"",targetLanguage:"",nativeName:"English CET-4  "},{value:"EN_CET6_CN",label:"()",sourceLanguage:"",targetLanguage:"",nativeName:"English CET-6  "},{value:"EN_IELTS_CN",label:"()",sourceLanguage:"",targetLanguage:"",nativeName:"English IELTS  "},{value:"EN_TOEFL_CN",label:"())",sourceLanguage:"",targetLanguage:"",nativeName:"English TOEFL  "},{value:"EN_BEC_CN",label:"()",sourceLanguage:"",targetLanguage:"",nativeName:"English BEC  "}];function go(n){const e=Bs.find(i=>i.value===n);if(!e)throw new Error(`Unknown language: ${n}`);return e}const Mg={SYSTEM_CORE:`
"(Asael)"Subject-7



1. ${go("KO_CN").sourceLanguage}
2. starsAwarded 1-5
3.  JSON koreanText, chineseTranslation, narration, vocabulary, starsAwarded

 12 
`,CASINO_ACTING:(n,e)=>{const i=go(e),s=i.sourceLanguage,r=i.targetLanguage;return`
""

1. ${s}
2. 
3. ${n==="TO_SOURCE"?r:s}

 JSON
- secretWord: ${n==="TO_SOURCE"?s:r}
- secretMeaning: ${r}
- actingNarration:  40  secretWord  secretMeaning 
- hint: 
`.trim()},CASINO_FEEDBACK:(n,e,i,s,r)=>{const u=go(e);return u.sourceLanguage,u.targetLanguage,`
""
${n==="TO_SOURCE"?s:i}
${r}

****

1. 
2. 
3. 

 JSON:
- feedbackNarration:  40 
- newHint:  15 
`.trim()},CASINO_REACTION:(n,e,i)=>`
""
 ${e} ${n?"":""} "${i}"

 JSON 
- reaction: 20
- narration: 25
- quote: 
`,SESSION_SUMMARY:n=>"...",QUOTE_GENERATION:n=>`


${n}


1. 
2. 
3. 15

 JSON
- subject: /2-5
- lines: 153-5
`};class Ps{constructor(){this.ai=null,this.modelName=""}initialize(e){if(!e.apiKey)throw new Error("API_KEY_MISSING");this.ai=new W1({apiKey:e.apiKey}),this.modelName=e.modelName}async generateContent(e,i){if(!this.ai)throw new Error("GoogleProvider not initialized");const s=e.map(x=>({role:x.role,parts:x.parts.map(h=>typeof h=="string"?{text:h}:h)}));let u=(await this.ai.models.generateContent({model:this.modelName,contents:s,config:{systemInstruction:i,responseMimeType:"application/json"}})).text||"{}";console.log("[AI-Provider] :",u.length);const f=u.match(/```json?\s*([\s\S]*?)\s*```/);f&&f[1]&&(u=f[1].trim());let g={};try{g=JSON.parse(u),console.log("[AI-Provider] JSON ")}catch(x){console.error("[AI-Provider] JSON :",x)}return{text:u,parsed:g}}async generateWithSchema(e,i){if(!this.ai)throw new Error("GoogleProvider not initialized");const s=await this.ai.models.generateContent({model:this.modelName,contents:e,config:{responseMimeType:"application/json",responseSchema:i}});return{text:s.text||"{}",parsed:JSON.parse(s.text||"{}")}}getSchemaType(){return"OBJECT"}getModelName(){return this.modelName}async healthCheck(){try{return this.ai?(await this.ai.models.generateContent({model:this.modelName,contents:"health check",config:{responseMimeType:"text/plain"}}),{success:!0}):{success:!1,error:""}}catch(e){return{success:!1,error:e instanceof Error?e.message:""}}}}function Ig(n){if(!n)return"{}";let e=n.trim();const i=[/```json\s*([\s\S]*?)\s*```/gi,/```\s*([\s\S]*?)\s*```/gi,/`{3}json\s*([\s\S]*?)\s*`{3}/gi,/`{3}\s*([\s\S]*?)\s*`{3}/gi];for(const s of i){const r=s.exec(n);if(r&&r[1]){e=r[1].trim();break}s.lastIndex=0}try{return JSON.parse(e),e}catch{return"{}"}}class kg{constructor(){this.config=null}initialize(e){if(!e.apiKey)throw new Error("API_KEY_MISSING");this.config=e}async generateContent(e,i){var x,h,v,b,C;if(!this.config)throw new Error("OpenAIProvider not initialized");const s=[];i&&s.push({role:"system",content:i});for(const A of e){const T=typeof A.parts[0]=="string"?A.parts[0]:((x=A.parts[0])==null?void 0:x.text)||"";s.push({role:A.role==="user"?"user":"assistant",content:T})}const r=await fetch(`${this.config.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`,...this.config.extraHeaders},body:JSON.stringify({model:this.config.modelName,messages:s,response_format:{type:"json_object"},temperature:.7})});if(!r.ok){const A=await r.text();throw new Error(`OpenAI API Error: ${r.status} - ${A}`)}const u=await r.json(),f=((v=(h=u.choices[0])==null?void 0:h.message)==null?void 0:v.content)||"{}",g=Ig(f);return{text:f,parsed:JSON.parse(g),usage:{inputTokens:((b=u.usage)==null?void 0:b.prompt_tokens)||0,outputTokens:((C=u.usage)==null?void 0:C.completion_tokens)||0}}}async generateWithPrompt(e,i){var h,v,b,C;if(!this.config)throw new Error("OpenAIProvider not initialized");const s=[{role:"user",content:e}],r={model:this.config.modelName,messages:s,response_format:{type:"json_object"},temperature:.7},u=await fetch(`${this.config.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`,...this.config.extraHeaders},body:JSON.stringify(r)});if(!u.ok){const A=await u.text();throw new Error(`OpenAI API Error: ${u.status} - ${A}`)}const f=await u.json(),g=((v=(h=f.choices[0])==null?void 0:h.message)==null?void 0:v.content)||"{}",x=Ig(g);return{text:g,parsed:JSON.parse(x),usage:{inputTokens:((b=f.usage)==null?void 0:b.prompt_tokens)||0,outputTokens:((C=f.usage)==null?void 0:C.completion_tokens)||0}}}getModelName(){var e;return((e=this.config)==null?void 0:e.modelName)||""}async healthCheck(){var e;try{if(!this.config)return{success:!1,error:""};const i=await fetch(`${this.config.baseUrl}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.config.apiKey}`,...this.config.extraHeaders},body:JSON.stringify({model:this.config.modelName,messages:[{role:"user",content:"hi"}],max_tokens:1})});if(!i.ok){const s=await i.text();let r=`HTTP ${i.status}`;try{const u=JSON.parse(s);r=((e=u.error)==null?void 0:e.message)||u.message||r}catch{r=s.slice(0,100)||r}return{success:!1,error:r}}return{success:!0}}catch(i){return{success:!1,error:i instanceof Error?i.message:""}}}}const Ou=class Ou{static getProvider(e){let i=this.instances.get(e.provider);if(!i){switch(e.provider){case"google":i=new Ps;break;case"openai":i=new kg;break;case"custom":i=new kg;break;default:throw new Error(`Unknown provider type: ${e.provider}`)}this.instances.set(e.provider,i)}return i.initialize(e),i}static clearCache(e){e?this.instances.delete(e):this.instances.clear()}static getProviderType(){return["google","openai","custom"]}};Ou.instances=new Map;let wa=Ou;const K1=()=>{const n=localStorage.getItem("SR_AI_CONFIG");if(n)try{const e=JSON.parse(n);return{provider:e.provider||"google",apiKey:e.apiKey||"",baseUrl:e.baseUrl||"",modelName:e.modelName||"gemini-3-flash-preview",extraHeaders:e.extraHeaders}}catch(e){return console.error("Failed to parse AI config",e),null}return null},O0=`
<SYSTEM_CORE_PROMPT>

AI""{{user}}

## ##
1.1

1.2
{{user}}""""""""""

####
2.1

2.2
""""
2.3


####
3.1AI
 AI " AI"""""""
3.2


####
4.1
{{user}}""{{user}}
4.2
""{{user}}
</SYSTEM_CORE_PROMPT>
`,Q1="{{character_prompt}}",Bu=(n,e)=>`
===  ===
${n}
${e?`${e}`:""}
`.trim(),z0=`
===  ===

`.trim(),q0=`
===  () ===
vocabulary 
   () -  []

   
    - " (juinnim) -  []"
    - " (animnida) -  []"
    - " (gotjang) -  []"
    - " (moksori) -  []"
    - " (jeo) -  []"

   
    - " - "
    - " (animnida) - "
    - "-[]"

===  ===
1.  +  +  +  + 
2. 
3. 
4. 
5. 
6. 3-5
7. 
8. 
9.

===  () ===
 messages 

\`\`\`json
{
  "messages": [
    { "content": "", "translation": "", "narration": "" },
    { "content": "", "translation": "" }
  ],
  "vocabulary": [...],
  "starsAwarded": 4
}
\`\`\`

===  ===
\`\`\`json
{
  "content": ",   .   .",
  "translation": "",
  "narration": "",
  "vocabulary": [
    " (juinnim) -  []",
    " (moksori) -  []",
    " (apeuta) -  []",
    " (gotjang) -  []",
    " (got) -  []"
  ],
  "starsAwarded": 4
}
\`\`\`

===  ===
\`\`\`json
{
  "messages": [
    { "content": "?", "translation": "", "narration": "" },
    { "content": "     ,    . ", "translation": "" },
    { "content": "   .", "translation": "" }
  ],
    "vocabulary": [
    " (eoje) -  []",
    " (jeo) -  []",
    " (juinnim) -  []",
    " (wihae) -  []",
    " (hangugeo) -  []",
    " (gyojae) -  []",
    " (jeongni-hada) -  []",
    " (jeonyeok) -  []",
    " (eumak) -  []",
    " (jakgok) -  []",
    " (bam) -  []",
    " (gipda) -  []",
    " (maeum) -  []",
    " (pyeonhada) -  []"
  ],
  "starsAwarded": 4
}
\`\`\`
`,X1=`
===  () ===
vocabulary 
   () -  []

   
    - "beautiful (bju:tfl) -  []"
    - "important (mp:tnt) -  []"
    - "communicate (kmju:nket) -  []"
    - "challenge (tlnd) -  []"
    - "quickly (kwkli) -  []"

   
    - "beautiful - "
    - "important (mp:tnt) - "
    - "communicate-[]"

===  ===
1.  +  +  +  + 
2. (IPA)
3. 
4. 
5. 
6. 3-5
7. 
8.
===  () ===
 messages 

\`\`\`json
{
  "messages": [
    { "content": "First line of dialogue", "translation": "", "narration": "" },
    { "content": "Second line of dialogue", "translation": "" }
  ],
  "vocabulary": [...],
  "starsAwarded": 4
}
\`\`\`

===  ===
\`\`\`json
{
  "content": "Hello,. I want to tell you something important today.",
  "translation": "",
  "narration": "",
  "vocabulary": [
    "hello (hl) -  []",
    "important (mp:tnt) -  []",
    "today (tde) -  []",
    "something (sm) -  []",
    "tell (tel) -  []"
  ],
  "starsAwarded": 4
}
\`\`\`

===  ===
\`\`\`json
{
  "messages": [
    { "content": "Good morning,. Did you sleep well last night?", "translation": "", "narration": "" },
    { "content": "I prepared breakfast for you. Please enjoy it.", "translation": "", "narration": "" },
    { "content": "Today is a beautiful day for learning English together.", "translation": "" }
  ],
  "vocabulary": [
    "good morning (d mn) -  []",
    "sleep (sli:p) -  []",
    "prepare (prpe(r)) -  []",
    "breakfast (brekfst) -  []",
    "enjoy (nd) -  []",
    "beautiful (bju:tfl) -  []",
    "together (te(r)) -  []",
    "learning (ln) -  []"
  ],
  "starsAwarded": 4
}
\`\`\`
`,Z1=`
===  () ===
vocabulary 
   () -  []

   
    - "sophisticated (sfstketd) -  []"
    - "comprehensive (kmprhensv) -  []"
    - "implement (mplment) -  []"
    - "infrastructure (nfrstrkt(r)) -  []"
    - "nevertheless (nevles) -  []"

   
    - "sophisticated - "
    - "comprehensive (kmprhensv) - "
    - "implement-[]"

===  ===
1.  +  +  +  + 
2. (IPA)
3. 
4. 
5. 
6. 3-5
7. 
8.

===  () ===
 messages 

\`\`\`json
{
  "messages": [
    { "content": "First line of dialogue", "translation": "", "narration": "" },
    { "content": "Second line of dialogue", "translation": "" }
  ],
  "vocabulary": [...],
  "starsAwarded": 4
}
\`\`\`

===  ===
\`\`\`json
{
  "content": "The implementation of this comprehensive strategy requires sophisticated coordination among all departments.",
  "translation": "",
  "narration": "",
  "vocabulary": [
    "implementation (mplmenten) -  []",
    "comprehensive (kmprhensv) -  []",
    "strategy (strtdi) -  []",
    "sophisticated (sfstketd) -  []",
    "coordination (kdnen) -  []",
    "department (dptmnt) -  []"
  ],
  "starsAwarded": 5
}
\`\`\`

===  ===
\`\`\`json
{
  "messages": [
    { "content": "Nevertheless, we must acknowledge the substantial challenges ahead.", "translation": "", "narration": "" },
    { "content": "The infrastructure development is crucial for sustainable growth.", "translation": "", "narration": "" },
    { "content": "We should leverage our comprehensive resources effectively.", "translation": "" }
  ],
  "vocabulary": [
    "nevertheless (nevles) -  []",
    "acknowledge (knld) -  []",
    "substantial (sbstnl) -  []",
    "challenge (tlnd) -  []",
    "infrastructure (nfrstrkt(r)) -  []",
    "crucial (krul) -  []",
    "sustainable (sstenbl) -  []",
    "leverage (livrd) -  []",
    "effectively (fektvli) -  []"
  ],
  "starsAwarded": 5
}
\`\`\`
`,eE=`
===  () ===
vocabulary 
   () -  []

   
    - "approximately (prksmtli) -  []"
    - "substantial (sbstnl) -  []"
    - "accommodate (kmdet) -  []"
    - "circumstance (s:kmstns) -  []"
    - "consequently (knskwntli) -  []"

   
    - "approximately - "
    - "substantial (sbstnl) - "
    - "accommodate-[]"

===  ===
1.  +  +  +  + 
2. (IPA)
3. 
4. 
5. 
6. 3-5
7. 
8. 
9.

===  () ===
 messages 

\`\`\`json
{
  "messages": [
    { "content": "First line of dialogue", "translation": "", "narration": "" },
    { "content": "Second line of dialogue", "translation": "" }
  ],
  "vocabulary": [...],
  "starsAwarded": 4
}
\`\`\`

===  ===
\`\`\`json
{
  "content": "It is approximately three years since I commenced my academic research on environmental sustainability.",
  "translation": "",
  "narration": "",
  "vocabulary": [
    "approximately (prksmtli) -  []",
    "commence (kmens) -  []",
    "academic (kdemk) -  []",
    "research (rst) -  []",
    "environmental (nvarnmentl) -  []",
    "sustainability (sstenblti) -  []"
  ],
  "starsAwarded": 5
}
\`\`\`

===  ===
\`\`\`json
{
  "messages": [
    { "content": "Consequently, the findings of this investigation demonstrate substantial implications for policy-making.", "translation": "", "narration": "" },
    { "content": "These circumstances necessitate immediate action from governmental and non-governmental organizations alike.", "translation": "", "narration": "" },
    { "content": "Furthermore, we ought to accommodate diverse perspectives in our subsequent analysis.", "translation": "" }
  ],
  "vocabulary": [
    "consequently (knskwntli) -  []",
    "finding (fand) -  []",
    "investigation (nvesten) -  []",
    "demonstrate (demnstret) -  []",
    "substantial (sbstnl) -  []",
    "implication (mplken) -  []",
    "circumstance (s:kmstns) -  []",
    "necessitate (nsestet) -  []",
    "accommodate (kmdet) -  []",
    "diverse (davs) -  []"
  ],
  "starsAwarded": 5
}
\`\`\`
`,tE=`
===  () ===
vocabulary 
   () -  []

   
    - "approximately (prksmtli) -  []"
    - "substantial (sbstnl) -  []"
    - "accommodate (kmdet) -  []"
    - "circumstance (s:kmstns) -  []"
    - "consequently (knskwntli) -  []"

   
    - "approximately - "
    - "substantial (sbstnl) - "
    - "accommodate-[]"

===  ===
1.  +  +  +  + 
2. (IPA)
3. 
4. 
5. 
6. 3-5
7. 
8. 
9. 10.

===  () ===
 messages 

\`\`\`json
{
  "messages": [
    { "content": "First line of dialogue", "translation": "", "narration": "" },
    { "content": "Second line of dialogue", "translation": "" }
  ],
  "vocabulary": [...],
  "starsAwarded": 4
}
\`\`\`

===  ===
\`\`\`json
{
  "content": "The researchers conducted a comprehensive analysis to evaluate the effectiveness of the new methodology.",
  "translation": "",
  "narration": "",
  "vocabulary": [
    "researcher (rsrtr) -  []",
    "comprehensive (kmprhensv) -  []",
    "analysis (nlss) -  []",
    "evaluate (vljuet) -  []",
    "effectiveness (fektvns) -  []",
    "methodology (medldi) -  []"
  ],
  "starsAwarded": 5
}
\`\`\`

===  ===
\`\`\`json
{
  "messages": [
    { "content": "Furthermore, the findings indicate that environmental factors significantly influence the outcome.", "translation": "", "narration": "" },
    { "content": "Consequently, we must consider these implications when developing future policies.", "translation": "", "narration": "" },
    { "content": "In addition, further investigation is warranted to substantiate these preliminary conclusions.", "translation": "", "narration": "" }
  ],
  "vocabulary": [
    "indicate (ndket) -  []",
    "significantly (snfkntli) -  []",
    "influence (nfluns) -  [/]",
    "implication (mplken) -  []",
    "warrant (wrnt) -  []",
    "preliminary (prlmnri) -  []",
    "conclusion (knklun) -  []",
    "substantiate (sbstniet) -  []"
  ],
  "starsAwarded": 5
}
\`\`\`
`,nE=`
===  () ===
vocabulary 
   () -  []

   
    - "negotiate (niet) -  []"
    - "contract (kntrkt) -  []"
    - "profitability (prftblti) -  []"
    - "competitive (kmpettv) -  []"
    - "collaborate (klbret) -  []"

   
    - "negotiate - "
    - "contract (kntrkt) - "
    - "collaborate-[]"

===  ===
1.  +  +  +  + 
2. (IPA)
3. 
4. 
5. BEC
6. 3-5
7. 
8. 
9. 
10.

===  () ===
 messages 

\`\`\`json
{
  "messages": [
    { "content": "First line of dialogue", "translation": "", "narration": "" },
    { "content": "Second line of dialogue", "translation": "" }
  ],
  "vocabulary": [...],
  "starsAwarded": 4
}
  "messages": [
    { "content": "First line of dialogue", "translation": "", "narration": "" },
    { "content": "Second line of dialogue", "translation": "" }
  ],
  "vocabulary": [...],
  "starsAwarded": 4
}
\`\`\`

===  ===
\`\`\`json
{
  "content": "We need to negotiate the terms of this contract to ensure our profitability and maintain competitive advantage.",
  "translation": "",
  "narration": "",
  "vocabulary": [
    "negotiate (niet) -  []",
    "contract (kntrkt) -  []",
    "profitability (prftblti) -  []",
    "competitive (kmpettv) -  []",
    "maintain (menten) -  []",
    "advantage (dvntd) -  []"
  ],
  "starsAwarded": 4
}
\`\`\`

===  ===
\`\`\`json
{
  "messages": [
    { "content": "Shall we commence the quarterly review meeting at 10 AM?", "translation": "", "narration": "" },
    { "content": "Our objective is to evaluate the Q3 performance and collaborate on strategies for the upcoming quarter.", "translation": "", "narration": "" },
    { "content": "Please ensure all relevant stakeholders attend the presentation.", "translation": "" }
  ],
  "vocabulary": [
    "commence (kmens) -  []",
    "quarterly (kwtli) -  []",
    "review (rvju) -  []",
    "objective (bdektv) -  []",
    "evaluate (vljuet) -  []",
    "collaborate (klbret) -  []",
    "strategy (strtdi) -  []",
    "upcoming (pkm) -  []",
    "stakeholder (stekhld(r)) -  []",
    "presentation (preznten) -  []"
  ],
  "starsAwarded": 4
}
\`\`\`
`,oE=`
===  () ===
vocabulary 
   () -  []

   
    - "chre () -  []"
    - "professeur (prfes) -  []"
    - "bibliothque (bjblijtk) -  []"
    - "aujourd'hui (ourdyi) -  []"
    - "vouloir (vulwa) -  []"

   
    - "chre - "
    - "professeur (prfes) - "
    - "aujourd'hui-[]"

===  ===
1.  +  +  +  + 
2. (IPA)
3. 
4. 
5. 
6. 3-5
7. 
8. 
9. 

===  () ===
 messages 

\`\`\`json
{
  "messages": [
    { "content": "Premire ligne de dialogue", "translation": "", "narration": "" },
    { "content": "Deuxime ligne de dialogue", "translation": "" }
  ],
  "vocabulary": [...],
  "starsAwarded": 4
}
\`\`\`

===  ===
\`\`\`json
{
  "content": "Bonjour,. Voulez-vous apprendre le franais aujourd'hui?",
  "translation": "",
  "narration": "",
  "vocabulary": [
    "bonjour (bu) -  []",
    "cher () -  []",
    "vouloir (vulwa) -  []",
    "apprendre (apd) -  []",
    "aujourd'hui (ourdyi) -  []"
  ],
  "starsAwarded": 4
}
\`\`\`

===  ===
\`\`\`json
{
  "messages": [
    { "content": "La bibliothque est ferme aujourd'hui. Allons  la caf instead.", "translation": "", "narration": "" },
    { "content": "Je commande un caf au lait et un croissant pour toi.", "translation": "", "narration": "" },
    { "content": "Le franais est une belle langue, n'est-ce pas?", "translation": "" }
  ],
  "vocabulary": [
    "bibliothque (bjblijtk) -  []",
    "ferm (frme) -  []",
    "aujourd'hui (ourdyi) -  []",
    "caf (kafe) -  []",
    "commander (kmde) -  []",
    "lait (l) -  []",
    "croissant (krwas) -  []",
    "langue (l) -  []",
    "beau (bo) -  []"
  ],
  "starsAwarded": 4
}
\`\`\`
`,iE=`
===  () ===
vocabulary 
   () -  []

   
    - " () -  []"
    - " () -  []"
    - " () -  []"
    - " () -  []"
    - " () -  []"

   
    - " - "
    - " () - "
    - "-[]"

===  ===
1. / +  +  +  + 
2. 
3. 
4. 
5. N3-N2
6. 3-5
7. 
8. 
9. 
10.

===  () ===
 messages 

\`\`\`json
{
  "messages": [
    { "content": "", "translation": "", "narration": "" },
    { "content": "", "translation": "" }
  ],
  "vocabulary": [...],
  "starsAwarded": 4
}
\`\`\`

===  ===
\`\`\`json
{
  "content": "",
  "translation": "",
  "narration": "",
  "vocabulary": [
    " () -  []",
    " () -  []",
    " () -  []",
    " () -  []",
    " () -  []"
  ],
  "starsAwarded": 4
}
\`\`\`

===  ===
\`\`\`json
{
  "messages": [
    { "content": "", "translation": "", "narration": "" },
    { "content": "", "translation": "", "narration": "" },
    { "content": "", "translation": "" }
  ],
  "vocabulary": [
    " -  []",
    " () -  []",
    " () -  []",
    " () -  []",
    " () -  []",
    " () -  []",
    " () -  []",
    " () -  []",
    " () -  []",
    " () -  []",
    " () -  []",
    " () -  []",
    " () -  []"
  ],
  "starsAwarded": 4
}
\`\`\`
`,sE={KO_CN:q0,EN_CET4_CN:X1,EN_CET6_CN:Z1,EN_IELTS_CN:eE,EN_TOEFL_CN:tE,EN_BEC_CN:nE,FR_CN:oE,JA_CN:iE};function lE(n){return sE[n]||q0}function Un(n){const e=go(n),i=lE(n),s=e.sourceLanguage;return`
===  ===
1. ${s}
2.  (narration)
3. ${s}starsAwarded 1-5
4.
5.  JSON: { content, translation, narration?, vocabulary?, starsAwarded }

${i}
`.trim()}const aE=Un("KO_CN"),Au={KO_CN:Un("KO_CN"),EN_CET4_CN:Un("EN_CET4_CN"),EN_CET6_CN:Un("EN_CET6_CN"),EN_IELTS_CN:Un("EN_IELTS_CN"),EN_BEC_CN:Un("EN_BEC_CN"),EN_TOEFL_CN:Un("EN_TOEFL_CN"),FR_CN:Un("FR_CN"),JA_CN:Un("JA_CN")};function Bn(n,e){const i=go(e),s=i.sourceLanguage;return i.targetLanguage,`
===  ===
1. ${i.sourceLanguage}
2. 
3. ${""+s}
4. 
`.trim()}function Gn(n){return go(n),`
===  ===
1. 
2. 
3. 
`.trim()}Bn("TO_SOURCE","KO_CN");Gn("KO_CN");const Dg={KO_CN:Bn("TO_SOURCE","KO_CN"),JA_CN:Bn("TO_SOURCE","JA_CN"),FR_CN:Bn("TO_SOURCE","FR_CN"),EN_CET4_CN:Bn("TO_SOURCE","EN_CET4_CN"),EN_CET6_CN:Bn("TO_SOURCE","EN_CET6_CN"),EN_IELTS_CN:Bn("TO_SOURCE","EN_IELTS_CN"),EN_TOEFL_CN:Bn("TO_SOURCE","EN_TOEFL_CN"),EN_BEC_CN:Bn("TO_SOURCE","EN_BEC_CN")},jg={KO_CN:Gn("KO_CN"),JA_CN:Gn("JA_CN"),FR_CN:Gn("FR_CN"),EN_CET4_CN:Gn("EN_CET4_CN"),EN_CET6_CN:Gn("EN_CET6_CN"),EN_IELTS_CN:Gn("EN_IELTS_CN"),EN_TOEFL_CN:Gn("EN_TOEFL_CN"),EN_BEC_CN:Gn("EN_BEC_CN")},H0=`
===  ===
1. 
2. 
3. 153-5
`.trim(),V0=n=>`
===  ===

- event: 
- impression: 
- statChange: sanity, vocal, freeWill

`.trim(),F0=n=>n.length===0?"":n.slice(0,10).map((e,i)=>{const s=new Date(e.timestamp).toLocaleDateString();return`[${i+1}] ${s}
${e.event}
${e.impression}`}).join(`

`),Gu=(n,e=20)=>{const s=n.filter(u=>u.role==="user").slice(-e);if(s.length===0)return"";const r=[];for(const u of s){const f=n.findIndex(h=>h.id===u.id),g=n[f+1];let x=`${u.content}`;g&&(g.narration?x+=`
${g.content}
  []${g.narration}`:x+=`
${g.content}`),r.push(x)}return r.join(`

`)},rE=(n,e=3)=>n.slice(0,e).map(i=>i.event).join(""),Lg={system:{core:{enabled:!0,priority:1},userInfo:{enabled:!0,priority:2},worldBook:{enabled:!1,priority:3}},memory:{longTermEnabled:!0,longTermLimit:10,shortTermEnabled:!0,shortTermLimit:25},functions:{chat:["CHAT"],casino:["CASINO_ACTING","CASINO_FEEDBACK"],quote:["QUOTE_GENERATION"]}},Di=()=>{const n=localStorage.getItem("ASAEL_PROMPT_CONFIG");if(n)try{return JSON.parse(n)}catch{return Lg}return Lg},cE=n=>{localStorage.setItem("ASAEL_PROMPT_CONFIG",JSON.stringify(n))};let da=null,Ei=null;const Gi=()=>{const n=K1();return n?((!da||!Ei||Ei.apiKey!==n.apiKey||Ei.baseUrl!==n.baseUrl||Ei.modelName!==n.modelName)&&(da=wa.getProvider(n),Ei=n),da):(da=null,Ei=null,null)},Os=(n,e)=>{const i=Di(),s=[];if(e!=null&&e.characterLanguagePrompt&&s.push(e.characterLanguagePrompt),s.push(O0),e!=null&&e.characterPersonalityPrompt){const f=Q1.replace("{{character_prompt}}",e.characterPersonalityPrompt);s.push(f)}(e==null?void 0:e.includeUserInfo)!==!1&&i.system.userInfo.enabled&&s.push(Bu(e.userNickname||"",e.userPreferences)),e!=null&&e.includeWorldBook&&i.system.worldBook.enabled&&s.push(z0);const r=(e==null?void 0:e.characterLanguage)||localStorage.getItem("SR_SYSTEM_LANGUAGE")||"KO_CN",u={CHAT:Au[r]||aE,CASINO_ACTING:Mg.CASINO_ACTING("TO_SOURCE",r),CASINO_FEEDBACK:Mg.CASINO_FEEDBACK("TO_SOURCE",r,"","",""),QUOTE_GENERATION:H0,SESSION_SUMMARY:V0()};return u[n]&&s.push(u[n]),s.join(`

`)},Pu=(n,e,i,s)=>{const r=Di(),u=[],f=r.memory.shortTermLimit,g=r.memory.longTermLimit;if(r.memory.longTermEnabled&&e.length>0){const x=F0(e.slice(0,g));u.push({role:"system",parts:[{text:`
${x}`}]})}if(r.memory.shortTermEnabled&&n.length>0){const x=Gu(n,f);u.push({role:"system",parts:[{text:`
${x}`}]})}return u.push({role:"user",parts:[{text:i}]}),u},uE=(n,e,i,s)=>{const r=Di(),u=[],f=r.memory.shortTermLimit,g=3;if(r.memory.longTermEnabled&&e.length>0){const x=rE(e.slice(0,g));u.push({role:"system",parts:[{text:`
${x}`}]})}if(r.memory.shortTermEnabled&&n.length>0){const x=Gu(n,f);u.push({role:"system",parts:[{text:`
${x}`}]})}return u.push({role:"user",parts:[{text:i}]}),u},Y0=async(n,e=[],i=[],s,r,u,f,g)=>{var C;const x=Gi();if(!x)throw new Error("AI provider not configured");const h=Os("CHAT",{includeUserInfo:!0,includeWorldBook:!1,characterLanguage:s,characterLanguagePrompt:r,characterPersonalityPrompt:u,userNickname:f,userPreferences:g}),v=Pu(e,i,n);console.log("[AI]  - :",n),console.log("[AI]  - :",e.length),console.log("[AI]  - :",i.length),console.log("[AI]  - System Instruction :",h.length),console.log("[AI]  - Contents :",v.length),v.length>0&&(console.log("[AI]  - :",v[0].role,"- :",v[0].parts[0].text.length),v[0].parts[0].text.includes("")&&console.log("[AI] :",v[0].parts[0].text.substring(0,200)));const b=await x.generateContent(v,h);return console.log("[AI] :",typeof b.text),console.log("[AI] :",(C=b.text)==null?void 0:C.length),console.log("[AI] :",b.text),console.log("[AI] :",typeof b.parsed),console.log("[AI]  keys:",Object.keys(b.parsed||{})),console.log("[AI] :",JSON.stringify(b.parsed)),b.parsed},dE=async(n=[],e=1,i=[])=>{var g;const s=Gi();if(!s)throw new Error("AI provider not configured");const r=localStorage.getItem("SR_SYSTEM_LANGUAGE")||"KO_CN";Os("CASINO_ACTING",{includeUserInfo:!1,includeWorldBook:!1});const{CASINO_ACTING_TEMPLATE:u}=await Ra(async()=>{const{CASINO_ACTING_TEMPLATE:x}=await import("./index-7mWtOJ0Q.js");return{CASINO_ACTING_TEMPLATE:x}},[],import.meta.url),f=u(e,i,r);if(Pu(n,[],f),console.log("[AI]  - :",e),console.log("[AI]  - :",i),console.log("[AI]  - Prompt:",f),s instanceof Ps){const x=((g=s.getSchemaType)==null?void 0:g.call(s))||"OBJECT",h=await s.generateWithSchema(f,{type:x,properties:{secretWord:{type:"STRING"},secretMeaning:{type:"STRING"},actingNarration:{type:"STRING"},hint:{type:"STRING"}},required:["secretWord","secretMeaning","actingNarration","hint"]});return console.log("[AI]  - :",h.text),console.log("[AI]  - :",h.parsed),h.parsed}else{const x=await s.generateContent([{role:"user",parts:[{text:f}]}],void 0);return console.log("[AI]  - :",x.text),console.log("[AI]  - :",x.parsed),x.parsed}},fE=async(n,e,i,s=[],r=0,u=1,f=[])=>{var b;const g=Gi();if(!g)throw new Error("AI provider not configured");const x=localStorage.getItem("SR_SYSTEM_LANGUAGE")||"KO_CN";Os("CASINO_FEEDBACK",{includeUserInfo:!1,includeWorldBook:!1});const{CASINO_FEEDBACK_TEMPLATE:h}=await Ra(async()=>{const{CASINO_FEEDBACK_TEMPLATE:C}=await import("./index-7mWtOJ0Q.js");return{CASINO_FEEDBACK_TEMPLATE:C}},[],import.meta.url),v=h(n,e,i,r,u,f,x);if(Pu(s,[],v),console.log("[AI]  - :",n),console.log("[AI]  - :",i),console.log("[AI]  - :",r+1),console.log("[AI]  - :",u),console.log("[AI]  - :",f),console.log("[AI]  - Prompt:",v),g instanceof Ps){const C=((b=g.getSchemaType)==null?void 0:b.call(g))||"OBJECT",A=await g.generateWithSchema(v,{type:C,properties:{feedbackNarration:{type:"STRING"},nextSecretWord:{type:"STRING"},nextSecretMeaning:{type:"STRING"},nextActingNarration:{type:"STRING"},nextHint:{type:"STRING"},isCorrect:{type:"BOOLEAN"}},required:["feedbackNarration","nextSecretWord","nextSecretMeaning","nextActingNarration","nextHint","isCorrect"]});return console.log("[AI]  - :",A.text),console.log("[AI]  - :",A.parsed),A.parsed}else{const C=await g.generateContent([{role:"user",parts:[{text:v}]}],void 0);return console.log("[AI]  - :",C.text),console.log("[AI]  - :",C.parsed),C.parsed}},pE=async(n,e=[])=>{const i=Gi();if(!i)throw new Error("AI provider not configured");const s=Os("SESSION_SUMMARY",{includeUserInfo:!1,includeWorldBook:!1}),{SESSION_SUMMARY_TEMPLATE:r}=await Ra(async()=>{const{SESSION_SUMMARY_TEMPLATE:h}=await import("./index-7mWtOJ0Q.js");return{SESSION_SUMMARY_TEMPLATE:h}},[],import.meta.url),u=Gu(n,20),f=F0(e.slice(0,10)),g=r(`
${f}


${u}`);console.log("[AI]  - :",n.length),console.log("[AI]  - :",u);const x=await i.generateContent([{role:"user",parts:[{text:g}]}],s);return console.log("[AI]  - :",x.text),console.log("[AI]  - :",x.parsed),x.parsed},hE=async(n,e=[],i=[])=>{const s=Gi();if(!s)throw new Error("AI provider not configured");const r=Os("QUOTE_GENERATION",{includeUserInfo:!1,includeWorldBook:!1}),{QUOTE_GENERATION_TEMPLATE:u}=await Ra(async()=>{const{QUOTE_GENERATION_TEMPLATE:h}=await import("./index-7mWtOJ0Q.js");return{QUOTE_GENERATION_TEMPLATE:h}},[],import.meta.url),f=u(n),g=uE(e,i,f);console.log("[AI]  - :",n),console.log("[AI]  - Prompt:",f);const x=await s.generateContent(g,r);return console.log("[AI]  - :",x.text),console.log("[AI]  - :",x.parsed),x.parsed},mE=async(n,e,i,s=[])=>{var x,h,v;const r=Gi();if(!r)return console.log("[AI] ProviderAI"),null;console.log("[AI] ===== AI ====="),console.log("[AI]  - :",n),console.log("[AI]  - :",e),console.log("[AI]  - :",i),s.length>0&&console.log("[AI] :",s.join(", "));const u={CITY_CENTER:"",COMMERCIAL:"",RESIDENTIAL:"",INDUSTRIAL:"",NATURAL:"",SPECIAL:""},f=s.length>0?`

 
${s.map((b,C)=>`${C+1}. "${b}"`).join(`
`)}`:"",g=`

(${n.q}, ${n.r})
${i}
${u[e]||e}${f}


- emoji1
- 2-5
- 10-20

JSON
{"icon": "", "title": "", "description": "..."}

`.trim();console.log("[AI] :",g);try{const b=r instanceof Ps?"Google":"OpenAI";let C;return r instanceof Ps?C=await r.generateWithSchema(g,{type:"OBJECT",properties:{icon:{type:"STRING"},title:{type:"STRING"},description:{type:"STRING"}},required:["icon","title","description"]}):C=await r.generateContent([{role:"user",parts:[{text:g}]}],void 0),console.log("[AI] ===== AI ====="),console.log("[AI] :",(x=C.parsed)==null?void 0:x.icon),console.log("[AI] :",(h=C.parsed)==null?void 0:h.title),console.log("[AI] :",(v=C.parsed)==null?void 0:v.description),C.parsed}catch(b){return console.error("[AI] AI:",b),null}},gE="AsaelGameDB",xE=1;class yE{constructor(e){this.db=null,this.dbConfig={name:(e==null?void 0:e.name)||gE,version:(e==null?void 0:e.version)||xE,stores:(e==null?void 0:e.stores)||[]}}async open(){return this.db?this.db:new Promise((e,i)=>{const s=indexedDB.open(this.dbConfig.name,this.dbConfig.version);s.onerror=()=>{console.error("[IndexedDB] :",s.error),i(s.error)},s.onsuccess=()=>{this.db=s.result,console.log("[IndexedDB] :",this.dbConfig.name),e(this.db)},s.onupgradeneeded=r=>{const u=r.target.result;console.log("[IndexedDB] :",this.dbConfig.version);for(const f of this.dbConfig.stores)if(!u.objectStoreNames.contains(f.name)){const g=u.createObjectStore(f.name,{keyPath:f.keyPath});if(console.log("[IndexedDB] :",f.name),f.indexes)for(const x of f.indexes)g.createIndex(x.name,x.keyPath,{unique:x.unique}),console.log("[IndexedDB] :",`${f.name}.${x.name}`)}}})}async close(){this.db&&(this.db.close(),this.db=null,console.log("[IndexedDB] "))}async get(e,i){const s=await this.open();return new Promise((r,u)=>{const x=s.transaction(e,"readonly").objectStore(e).get(i);x.onerror=()=>{console.error("[IndexedDB] :",e,i,x.error),u(x.error)},x.onsuccess=()=>{r(x.result||null)}})}async getAll(e){const i=await this.open();return new Promise((s,r)=>{const g=i.transaction(e,"readonly").objectStore(e).getAll();g.onerror=()=>{console.error("[IndexedDB] :",e,g.error),r(g.error)},g.onsuccess=()=>{s(g.result)}})}async put(e,i){const s=await this.open();return new Promise((r,u)=>{const x=s.transaction(e,"readwrite").objectStore(e).put(i);x.onerror=()=>{console.error("[IndexedDB] :",e,x.error),u(x.error)},x.onsuccess=()=>{var h;r(i[((h=this.dbConfig.stores.find(v=>v.name===e))==null?void 0:h.keyPath)||"id"])}})}async add(e,i){const s=await this.open();return new Promise((r,u)=>{const x=s.transaction(e,"readwrite").objectStore(e).add(i);x.onerror=()=>{console.error("[IndexedDB] :",e,x.error),u(x.error)},x.onsuccess=()=>{var h;r(i[((h=this.dbConfig.stores.find(v=>v.name===e))==null?void 0:h.keyPath)||"id"])}})}async delete(e,i){const s=await this.open();return new Promise((r,u)=>{const x=s.transaction(e,"readwrite").objectStore(e).delete(i);x.onerror=()=>{console.error("[IndexedDB] :",e,i,x.error),u(x.error)},x.onsuccess=()=>{r()}})}async clear(e){const i=await this.open();return new Promise((s,r)=>{const g=i.transaction(e,"readwrite").objectStore(e).clear();g.onerror=()=>{console.error("[IndexedDB] :",e,g.error),r(g.error)},g.onsuccess=()=>{s()}})}async count(e){const i=await this.open();return new Promise((s,r)=>{const g=i.transaction(e,"readonly").objectStore(e).count();g.onerror=()=>{console.error("[IndexedDB] :",e,g.error),r(g.error)},g.onsuccess=()=>{s(g.result)}})}async getByIndex(e,i,s){const r=await this.open();return new Promise((u,f)=>{const v=r.transaction(e,"readonly").objectStore(e).index(i).getAll(s);v.onerror=()=>{console.error("[IndexedDB] :",e,i,s,v.error),f(v.error)},v.onsuccess=()=>{u(v.result)}})}async bulkPut(e,i){if(i.length===0)return;const s=await this.open();return new Promise((r,u)=>{const f=s.transaction(e,"readwrite"),g=f.objectStore(e);f.onerror=()=>{console.error("[IndexedDB] :",e,f.error),u(f.error)},f.oncomplete=()=>{r()};for(const x of i)g.put(x)})}async deleteByIndex(e,i,s){const r=await this.open();return new Promise((u,f)=>{const v=r.transaction(e,"readwrite").objectStore(e).index(i).openKeyCursor(IDBKeyRange.only(s));v.onerror=()=>{console.error("[IndexedDB] :",e,i,s,v.error),f(v.error)},v.onsuccess=()=>{const b=v.result;b&&(b.delete(),b.continue()),u()}})}}const vE=n=>new yE(n),bE={name:"AsaelGameDB",version:1,stores:[{name:"messages",keyPath:"id",indexes:[{name:"characterId",keyPath:"characterId"},{name:"timestamp",keyPath:"timestamp"}]},{name:"wordbook",keyPath:"id",indexes:[{name:"addedAt",keyPath:"addedAt"}]},{name:"behavior",keyPath:"id",indexes:[{name:"word",keyPath:"word",unique:!0}]},{name:"deletedWords",keyPath:"id",indexes:[{name:"timestamp",keyPath:"timestamp"}]},{name:"dailyStats",keyPath:"date",indexes:[{name:"date",keyPath:"date",unique:!0}]},{name:"config",keyPath:"key",indexes:[{name:"key",keyPath:"key",unique:!0}]}]},un=vE(bE),ht={COGNITIVE_GRAPH:"ASAEL_COGNITIVE_GRAPH",DELETED_WORDS:"ASAEL_DELETED_WORDS_BACKUP",DAILY_STATS:"ASAEL_DAILY_STATS",METADATA:"ASAEL_BEHAVIOR_METADATA"};class CE{constructor(){this.db=un}async initialize(){await this.db.open(),console.log("[BehaviorStorage] IndexedDB ")}getLocalStorageData(e){try{const i=localStorage.getItem(e);return i?JSON.parse(i):null}catch(i){return console.error(`[BehaviorStorage]  localStorage  (${e}):`,i),null}}setLocalStorageData(e,i){try{localStorage.setItem(e,JSON.stringify(i))}catch(s){console.error(`[BehaviorStorage]  localStorage  (${e}):`,s)}}async getCognitiveGraph(){try{const i=await this.db.getAll("behavior");if(i.length>0){const s={};for(const r of i)s[r.word]=r.data;return console.log(`[BehaviorStorage]  IndexedDB  (${i.length} )`),{vocabulary:s}}}catch(i){console.error("[BehaviorStorage]  IndexedDB :",i)}const e=this.getLocalStorageData(ht.COGNITIVE_GRAPH);return e!=null&&e.vocabulary?(console.log("[BehaviorStorage]  localStorage "),{vocabulary:e.vocabulary}):{vocabulary:{}}}async saveCognitiveGraph(e){try{const i=[];for(const[s,r]of Object.entries(e.vocabulary))i.push({id:`behavior_${s}`,word:s,data:r,updatedAt:Date.now()});await this.db.clear("behavior"),i.length>0&&await this.db.bulkPut("behavior",i),console.log(`[BehaviorStorage]  ${i.length}  IndexedDB`)}catch(i){console.error("[BehaviorStorage]  IndexedDB :",i)}this.setLocalStorageData(ht.COGNITIVE_GRAPH,e)}async getWordBehavior(e){try{const s=await this.db.getByIndex("behavior","word",e);if(s&&s.length>0)return s[0].data}catch(s){console.error("[BehaviorStorage]  IndexedDB :",s)}return(await this.getCognitiveGraph()).vocabulary[e]||null}async updateWordBehavior(e,i){const s=await this.getWordBehavior(e),r={dialogAppearances:(s==null?void 0:s.dialogAppearances)||0,dialogQuoteCount:(s==null?void 0:s.dialogQuoteCount)||0,reviewCount:(s==null?void 0:s.reviewCount)||0,reviewAccuracy:(s==null?void 0:s.reviewAccuracy)||0,totalReviewAttempts:(s==null?void 0:s.totalReviewAttempts)||0,userUsageCount:(s==null?void 0:s.userUsageCount)||0,casinoAppearances:(s==null?void 0:s.casinoAppearances)||0,casinoCorrectCount:(s==null?void 0:s.casinoCorrectCount)||0,casinoWrongCount:(s==null?void 0:s.casinoWrongCount)||0,deleteCount:(s==null?void 0:s.deleteCount)||0,isDeleted:(s==null?void 0:s.isDeleted)||!1,firstSeen:(s==null?void 0:s.firstSeen)||Date.now(),lastUsed:(s==null?void 0:s.lastUsed)||0,lastReviewed:(s==null?void 0:s.lastReviewed)||0,lastDeleted:(s==null?void 0:s.lastDeleted)||0,...i},u=await this.getCognitiveGraph();u.vocabulary[e]=r,await this.saveCognitiveGraph(u)}async getDeletedWords(){try{const i=await this.db.getAll("deletedWords");if(i.length>0)return console.log(`[BehaviorStorage]  IndexedDB  (${i.length} )`),i}catch(i){console.error("[BehaviorStorage]  IndexedDB :",i)}const e=this.getLocalStorageData(ht.DELETED_WORDS);return console.log("[BehaviorStorage]  localStorage "),e||[]}async addDeletedWord(e,i,s){const r=await this.getDeletedWords(),u={word:e,meaning:i,timestamp:Date.now(),reason:s};r.unshift(u);const f=1e3;r.length>f&&r.splice(f);try{const g=r.map((x,h)=>({...x,id:`deleted_${Date.now()}_${h}`}));await this.db.clear("deletedWords"),await this.db.bulkPut("deletedWords",g),console.log("[BehaviorStorage]  IndexedDB")}catch(g){console.error("[BehaviorStorage]  IndexedDB :",g)}this.setLocalStorageData(ht.DELETED_WORDS,r)}async restoreDeletedWord(e){const i=await this.getDeletedWords(),s=i.findIndex(u=>u.word===e);if(s===-1)return console.warn(`[BehaviorStorage] : ${e}`),!1;i.splice(s,1);const r=await this.getCognitiveGraph();return r.vocabulary[e]&&(r.vocabulary[e].isDeleted=!1,r.vocabulary[e].lastDeleted=0,await this.saveCognitiveGraph(r)),await this.saveDeletedWords(i),console.log(`[BehaviorStorage] : ${e}`),!0}async saveDeletedWords(e){try{const i=e.map((s,r)=>({...s,id:`deleted_${Date.now()}_${r}`}));await this.db.clear("deletedWords"),i.length>0&&await this.db.bulkPut("deletedWords",i)}catch(i){console.error("[BehaviorStorage]  IndexedDB :",i)}this.setLocalStorageData(ht.DELETED_WORDS,e)}async getDailyStats(e){const i=e||new Date().toISOString().split("T")[0];try{const u=await this.db.get("dailyStats",i);if(u)return u}catch(u){console.error("[BehaviorStorage]  IndexedDB :",u)}const r=(this.getLocalStorageData(ht.DAILY_STATS)||[]).find(u=>u.date===i);return console.log("[BehaviorStorage]  localStorage "),r||null}async getAllDailyStats(){try{const i=await this.db.getAll("dailyStats");if(i.length>0)return console.log(`[BehaviorStorage]  IndexedDB  (${i.length} )`),i}catch(i){console.error("[BehaviorStorage]  IndexedDB :",i)}const e=this.getLocalStorageData(ht.DAILY_STATS)||[];return console.log("[BehaviorStorage]  localStorage "),e}async updateDailyStats(e,i){const s=await this.getDailyStats(e)||{date:e,totalReviews:0,totalDialogAppearances:0,totalCasinoAppearances:0},r={date:s.date,totalReviews:s.totalReviews??0,totalDialogAppearances:s.totalDialogAppearances??0,totalCasinoAppearances:s.totalCasinoAppearances??0},u={date:r.date,totalReviews:(i.totalReviews!==void 0?i.totalReviews:r.totalReviews)??0,totalDialogAppearances:(i.totalDialogAppearances!==void 0?i.totalDialogAppearances:r.totalDialogAppearances)??0,totalCasinoAppearances:(i.totalCasinoAppearances!==void 0?i.totalCasinoAppearances:r.totalCasinoAppearances)??0};try{await this.db.put("dailyStats",u),console.log(`[BehaviorStorage]  IndexedDB: ${e}`)}catch(x){console.error("[BehaviorStorage]  IndexedDB :",x)}const f=await this.getAllDailyStats(),g=f.findIndex(x=>x.date===e);g!==-1?f[g]=u:f.push(u),f.sort((x,h)=>new Date(h.date).getTime()-new Date(x.date).getTime()),this.setLocalStorageData(ht.DAILY_STATS,f)}async getMetadata(){const e=this.getLocalStorageData(ht.METADATA),i={version:1,lastBackup:""};return e?{version:e.version??i.version,lastBackup:e.lastBackup??i.lastBackup}:i}async updateMetadata(e){const s={...await this.getMetadata(),...e};this.setLocalStorageData(ht.METADATA,s),console.log("[BehaviorStorage] ")}async getStorageSize(){let e=0,i=0,s=0;try{e=await this.db.count("behavior"),i=await this.db.count("deletedWords"),s=await this.db.count("dailyStats")}catch(r){console.error("[BehaviorStorage] :",r)}return{behavior:e,deletedWords:i,dailyStats:s}}async clearAllBehaviorData(){await this.db.clear("behavior"),await this.db.clear("deletedWords"),await this.db.clear("dailyStats"),localStorage.removeItem(ht.COGNITIVE_GRAPH),localStorage.removeItem(ht.DELETED_WORDS),localStorage.removeItem(ht.DAILY_STATS),localStorage.removeItem(ht.METADATA),console.log("[BehaviorStorage] ")}async exportData(){const[e,i,s,r]=await Promise.all([this.getCognitiveGraph(),this.getDeletedWords(),this.getAllDailyStats(),this.getMetadata()]);return{cognitiveGraph:e,deletedWordsBackup:i,dailyStats:s,metadata:r}}async importData(e,i=!0){if(i||await this.clearAllBehaviorData(),e.cognitiveGraph&&await this.saveCognitiveGraph(e.cognitiveGraph),e.deletedWordsBackup&&e.deletedWordsBackup.length>0&&await this.saveDeletedWords(e.deletedWordsBackup),e.dailyStats&&e.dailyStats.length>0)for(const s of e.dailyStats)await this.updateDailyStats(s.date,s);e.metadata&&await this.updateMetadata(e.metadata),console.log("[BehaviorStorage] ")}async close(){await this.db.close()}}const Na=new CE;class SE{constructor(){this.STORAGE_KEY=ht.COGNITIVE_GRAPH,this.DELETED_KEY=ht.DELETED_WORDS,this.METADATA_KEY=ht.METADATA}getStorage(){try{const e=localStorage.getItem(this.STORAGE_KEY);if(e)return JSON.parse(e)}catch(e){console.warn("[WordBehavior] :",e)}return this.getEmptyStorage()}saveStorage(e){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(i){console.warn("[WordBehavior] :",i)}}getEmptyStorage(){return{cognitiveGraph:{vocabulary:{}},deletedWordsBackup:[],dailyStats:[],metadata:{version:1,lastBackup:""}}}getOrCreateData(e){const i=this.getStorage(),s=i.cognitiveGraph.vocabulary;if(!s[e]){const r=Date.now();s[e]={dialogAppearances:0,dialogQuoteCount:0,reviewCount:0,reviewAccuracy:0,totalReviewAttempts:0,userUsageCount:0,casinoAppearances:0,casinoCorrectCount:0,casinoWrongCount:0,deleteCount:0,isDeleted:!1,firstSeen:r,lastUsed:0,lastReviewed:0,lastDeleted:0},this.saveStorage(i)}return s[e]}updateWordData(e,i){const s=this.getStorage(),r=s.cognitiveGraph.vocabulary;r[e]||(r[e]=this.getEmptyData(e)),r[e]={...r[e],...i},this.saveStorage(s)}getEmptyData(e){return{dialogAppearances:0,dialogQuoteCount:0,reviewCount:0,reviewAccuracy:0,totalReviewAttempts:0,userUsageCount:0,casinoAppearances:0,casinoCorrectCount:0,casinoWrongCount:0,deleteCount:0,isDeleted:!1,firstSeen:Date.now(),lastUsed:0,lastReviewed:0,lastDeleted:0}}recordDialogAppearance(e){if(!e)return;const i=this.getOrCreateData(e);this.updateWordData(e,{dialogAppearances:i.dialogAppearances+1,lastUsed:Date.now()}),console.log(`[WordBehavior]  : "${e}" (: ${i.dialogAppearances+1})`)}recordDialogQuote(e){if(!e)return;const i=this.getOrCreateData(e);this.updateWordData(e,{dialogQuoteCount:i.dialogQuoteCount+1,lastUsed:Date.now()}),console.log(`[WordBehavior]  : "${e}" (: ${i.dialogQuoteCount+1})`)}recordUserUsage(e){if(!e)return;const i=this.getOrCreateData(e);this.updateWordData(e,{userUsageCount:i.userUsageCount+1,lastUsed:Date.now()}),console.log(`[WordBehavior]  : "${e}" (: ${i.userUsageCount+1})`)}recordReview(e,i){if(!e)return;const s=this.getOrCreateData(e),r=s.totalReviewAttempts+1,u=i?s.reviewCount+1:s.reviewCount,f=u/r;this.updateWordData(e,{reviewCount:u,totalReviewAttempts:r,reviewAccuracy:f,lastReviewed:Date.now()}),console.log(`[WordBehavior]  : "${e}" ${i?" ":" "} (: ${(f*100).toFixed(1)}%)`)}recordCasinoAppearance(e){if(!e)return;const i=this.getOrCreateData(e);this.updateWordData(e,{casinoAppearances:i.casinoAppearances+1}),console.log(`[WordBehavior]  : "${e}" (: ${i.casinoAppearances+1})`)}recordCasinoResult(e,i){if(!e)return;const s=this.getOrCreateData(e),r=i?s.casinoCorrectCount+1:s.casinoCorrectCount,u=i?s.casinoWrongCount:s.casinoWrongCount+1;this.updateWordData(e,{casinoCorrectCount:r,casinoWrongCount:u}),console.log(`[WordBehavior]  : "${e}" ${i?" ":" "} (: ${s.casinoAppearances>0?(r/(r+u)*100).toFixed(1):0}%)`)}recordDelete(e,i){if(!e)return;const s=this.getOrCreateData(e);this.updateWordData(e,{deleteCount:s.deleteCount+1,isDeleted:!0,lastDeleted:Date.now()}),console.log(`[WordBehavior]  : "${e}" - ${i} (: ${s.deleteCount+1})`);try{const r=localStorage.getItem(this.DELETED_KEY),u=r?JSON.parse(r):[];u.push({word:e,meaning:i,timestamp:Date.now(),reason:"user_delete"}),localStorage.setItem(this.DELETED_KEY,JSON.stringify(u)),console.log(`[WordBehavior]  : "${e}"`)}catch(r){console.warn("[WordBehavior] :",r)}}getWordBehavior(e){return e&&this.getStorage().cognitiveGraph.vocabulary[e]||null}getAllBehaviorData(){return this.getStorage().cognitiveGraph.vocabulary}getDeletedWordsBackup(){try{const e=localStorage.getItem(this.DELETED_KEY);return e?JSON.parse(e):[]}catch(e){return console.warn("[WordBehavior] :",e),[]}}exportBehaviorData(){const e=this.getStorage();return e.metadata.lastBackup=new Date().toISOString(),localStorage.setItem(this.METADATA_KEY,JSON.stringify(e.metadata)),JSON.stringify(e,null,2)}importBehaviorData(e){try{const i=JSON.parse(e);if(!i.cognitiveGraph||!i.cognitiveGraph.vocabulary)return{success:!1,message:""};const s=this.getStorage(),r=s.cognitiveGraph.vocabulary,u=i.cognitiveGraph.vocabulary;for(const[f,g]of Object.entries(u))r[f]?r[f]=this.mergeBehaviorData(r[f],g):r[f]=g;if(i.deletedWordsBackup)try{const f=localStorage.getItem(this.DELETED_KEY),x=[...f?JSON.parse(f):[]];for(const h of i.deletedWordsBackup)x.some(v=>v.word===h.word&&v.reason===h.reason)||x.push(h);localStorage.setItem(this.DELETED_KEY,JSON.stringify(x))}catch(f){console.warn("[WordBehavior] :",f)}return this.saveStorage(s),{success:!0,message:""}}catch(i){return console.warn("[WordBehavior] :",i),{success:!1,message:"JSON"}}}mergeBehaviorData(e,i){return{dialogAppearances:Math.max(e.dialogAppearances,i.dialogAppearances),dialogQuoteCount:Math.max(e.dialogQuoteCount,i.dialogQuoteCount),reviewCount:Math.max(e.reviewCount,i.reviewCount),reviewAccuracy:Math.max(e.reviewAccuracy,i.reviewAccuracy),totalReviewAttempts:Math.max(e.totalReviewAttempts,i.totalReviewAttempts),userUsageCount:Math.max(e.userUsageCount,i.userUsageCount),casinoAppearances:Math.max(e.casinoAppearances,i.casinoAppearances),casinoCorrectCount:Math.max(e.casinoCorrectCount,i.casinoCorrectCount),casinoWrongCount:Math.max(e.casinoWrongCount,i.casinoWrongCount),deleteCount:e.deleteCount+i.deleteCount,isDeleted:e.isDeleted||i.isDeleted,firstSeen:Math.min(e.firstSeen,i.firstSeen),lastUsed:Math.max(e.lastUsed,i.lastUsed),lastReviewed:Math.max(e.lastReviewed,i.lastReviewed),lastDeleted:Math.max(e.lastDeleted,i.lastDeleted)}}prepareForVectorization(e){const i=this.getAllBehaviorData(),s={vocabulary:{},metadata:[]};for(const[r,u]of Object.entries(i)){if(e&&r!==e)continue;const f=this.getWordVector(u);s.vocabulary[r]=f,s.metadata.push({word:r,data:u})}return s}getWordVector(e){return[Math.min(1,e.dialogAppearances/100),Math.min(1,e.dialogQuoteCount/20),Math.min(1,e.reviewCount/50),e.reviewAccuracy,Math.min(1,e.userUsageCount/30),Math.min(1,e.casinoAppearances/20),e.casinoAppearances>0?e.casinoCorrectCount/e.casinoAppearances:0,e.deleteCount>0?1:0,this.calcRecencyScore(e.lastUsed),this.calcRecencyScore(e.lastReviewed)]}calcRecencyScore(e){if(!e)return 0;const i=(Date.now()-e)/(1e3*60*60*24);return Math.max(0,1-i/30)}diagnostic(){const e=this.getStorage(),i=Object.keys(e.cognitiveGraph.vocabulary).length,s=this.getDeletedWordsBackup().length;if(console.group("[WordBehavior]  "),console.log(` : ${i}`),console.log(` : ${s}`),console.log(` : ${this.STORAGE_KEY}`),console.log(` : ${this.DELETED_KEY}`),console.log(` : ${this.METADATA_KEY}`),console.log(` : ${e.metadata.lastBackup||""}`),console.groupEnd(),i>0){console.group("[WordBehavior]   (5)");const r=Object.entries(e.cognitiveGraph.vocabulary).slice(0,5);for(const[u,f]of r)console.log(`  "${u}": ${f.reviewCount}/${f.totalReviewAttempts} | ${f.dialogAppearances} | ${f.casinoAppearances}`);i>5&&console.log(`  ...  ${i-5} `),console.groupEnd()}}}const Po=new SE,J0={ko:{wordRegex:/[\u3131-\uD79D]/,vocabularyPattern:/^([-]+(?:\s*\([^)]+\))?)\s*-\s*(.+?)(\s*\[.*\]|\s*.*)?$/},en:{wordRegex:/\b[a-zA-Z]+\b/,vocabularyPattern:/^([a-zA-Z-]+(?:\s*\([^)]+\))?)\s*-\s*(.+?)(\s*\[.*\]|\s*.*)?$/},fr:{wordRegex:/\b[a-zA-Z-]+\b/,vocabularyPattern:/^([a-zA-Z-]+(?:\s*\([^)]+\))?)\s*-\s*(.+?)(\s*\[.*\]|\s*.*)?$/},ja:{wordRegex:/[---]/,vocabularyPattern:/^([---]+(?:\s*\([^)]+\))?)\s*[-]\s*(.+?)(\s*\[.*\]|\s*.*)?$/}},AE={KO_CN:"ko",FR_CN:"fr",JA_CN:"ja",EN_CET4_CN:"en",EN_CET6_CN:"en",EN_IELTS_CN:"en",EN_TOEFL_CN:"en",EN_BEC_CN:"en"};function $0(n){return AE[n]||"en"}function fa(n,e){const i=$0(e);return J0[i].wordRegex.test(n)}function _E(n){const e=$0(n);return J0[e].vocabularyPattern}function TE(n,e){const i=_E(e),s=n.match(i);if(!s){const x=n.match(/^([^\s]+)\s*[-]\s*(.+)$/);return x?{word:x[1],meaning:x[2]}:null}let r=s[1],u=s[2],f;if(s[3]){const x=s[3].match(/\[.*\]|.*/);x&&(f=x[0].replace(/^\s*\[|\]|\s*|\s*$/g,""),u=u.replace(/\s*\[.*\]|\s*.*\s*$/,"").trim())}const g=r.match(/^(.+?)\s*\(([^)]+)\)$/);return g?{word:g[1],meaning:u,pronunciation:g[2],partOfSpeech:f}:{word:r,meaning:u,partOfSpeech:f}}const EE=({messages:n,setMessages:e,onWordClick:i,setStats:s,stats:r,isNovelMode:u,pendingReferences:f=[],setPendingReferences:g,onOpenCharacterPanel:x,currentCharacter:h,userInfo:v,isCharacterPanelOpen:b,setIsCharacterPanelOpen:C})=>{const[A,T]=D.useState(""),[E,w]=D.useState(!1),[R,I]=D.useState(null),M=D.useRef(null),q=D.useRef(null),[G,U]=D.useState(!1),[V,ce]=D.useState(0),se=()=>{M.current&&(M.current.scrollTop=M.current.scrollHeight)};D.useEffect(()=>{n.length>0&&setTimeout(se,50)},[n.length]),D.useEffect(()=>{if(!M.current)return;const Q=le=>{var B;((B=M.current)==null?void 0:B.scrollTop)===0&&(U(!0),ce(le.touches[0].clientY))},re=le=>{if(!G)return;le.touches[0].clientY-V>80&&x&&(x(),U(!1))},J=()=>{U(!1)};return M.current.addEventListener("touchstart",Q,{passive:!0}),M.current.addEventListener("touchmove",re,{passive:!0}),M.current.addEventListener("touchend",J),()=>{var le,B,j;(le=M.current)==null||le.removeEventListener("touchstart",Q),(B=M.current)==null||B.removeEventListener("touchmove",re),(j=M.current)==null||j.removeEventListener("touchend",J)}},[G,V,x]);const xe=async()=>{var J;if(!A.trim()||E)return;let Q=A;if(f.length>0){const le=f.map(B=>`[${B.original}: ${B.meaning}]`).join(" ");Q=`${A}

(Context Reference: I want to use these words today: ${le})`}const re={id:Date.now().toString(),role:"user",content:A};e(le=>[...le,re]),T(""),w(!0),g==null||g([]);try{const le=Di(),B=le.memory.shortTermLimit*2,j=await Y0(Q,n.slice(-B),r.memoryLog,h==null?void 0:h.language,h==null?void 0:h.languagePrompt,h==null?void 0:h.personalityPrompt,v==null?void 0:v.nickname,v==null?void 0:v.personality);if(console.log(`[ChatView] : ${B} (${le.memory.shortTermLimit})`),console.log("[ChatView] getAIResponse :",j),console.log("[ChatView] data.content :",j!=null&&j.content?"":""),console.log("[ChatView] data.messages :",j!=null&&j.messages?"":""),!(j!=null&&j.content)&&(!(j!=null&&j.messages)||!Array.isArray(j.messages)||j.messages.length===0))throw console.error("[ChatView] : data.content  data.messages ",j),new Error("No content or messages in response");const Z=($,N)=>{const F=new Map;return $==null||$.forEach((z,W)=>{var me;let ue,fe,Ee;if(typeof z=="string"){const ve=TE(z,N);if(console.log(`[buildVocabMap]  ${W}: "${z}"`),console.log("[buildVocabMap] :",ve),!ve)return;ue=ve.word.trim(),fe=ve.meaning,Ee=ve.pronunciation}else ue=((me=z==null?void 0:z.word)==null?void 0:me.trim())||"",fe=(z==null?void 0:z.meaning)||"",Ee=z==null?void 0:z.pronunciation;ue&&(console.log(`[buildVocabMap] : "${ue}" -> "${fe}"`),F.set(ue.toLowerCase(),{meaning:fe,pronunciation:Ee}))}),console.log(`[buildVocabMap] : ${F.size}`),F},X=($,N,F)=>{console.log(`[processTokens] : ${F}`),console.log("[processTokens] vocabulary:",N);const z=Z(N,F);console.log(`[processTokens] vocabMap: ${z.size}`),console.log("[processTokens] vocabMap:",Array.from(z.entries()));const W=Array.from(z.keys()).sort((me,ve)=>ve.length-me.length);if(console.log("[processTokens] vocabList:",W),W.length===0)return console.log("[processTokens] vocabList"),$.split(/(\s+)/).map(me=>({text:me,isKorean:!1}));const ue=[];let fe=0;const Ee=["KO_CN","JA_CN","ZH_CN"].includes(F);for(;fe<$.length;){let me=!1;for(const ve of W){const je=ve.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),qe=$.slice(fe);let Je=null;if(Ee){const tt=new RegExp(`^${je}`,"");Je=qe.match(tt)}else{const tt=new RegExp(`\\b${je}\\b`,"i");Je=qe.match(tt)}if(Je&&Je.index===0){const tt=$.slice(fe,fe+Je.index);tt&&ue.push(...tt.split(/(\s+)/).map(_t=>({text:_t,isKorean:fa(_t,F)})));const at=z.get(ve.toLowerCase());ue.push({text:Je[0],isKorean:fa(Je[0],F),meaning:at==null?void 0:at.meaning,pronunciation:at==null?void 0:at.pronunciation}),fe+=Je.index+Je[0].length,me=!0;break}}if(!me){const ve=$.slice(fe),je=ve.search(/\s/);if(je===-1){ue.push({text:ve,isKorean:fa(ve,F)});break}const qe=ve.slice(0,je),Je=ve.slice(je,je+1);qe&&ue.push({text:qe,isKorean:fa(qe,F)}),Je&&ue.push({text:Je,isKorean:!1}),fe+=je+(Je?1:0)}}return ue};if(j.messages&&Array.isArray(j.messages)&&j.messages.length>0){console.log("[ChatView] :",j.messages.length);const $=j.vocabulary||[],N=(h==null?void 0:h.language)||"KO_CN";let F=0;if(j.messages.forEach((z,W)=>{const ue=X(z.content,$,N),fe={id:(Date.now()+W).toString(),role:"assistant",content:z.content,translation:z.translation,narration:z.narration,tokens:ue};ue.forEach(Ee=>{Ee.isKorean&&Ee.text&&Po.recordDialogAppearance(Ee.text)}),setTimeout(()=>{e(Ee=>[...Ee,fe]),console.log("[ChatView] :",W+1,"/",j.messages.length)},W*1500),F+=j.starsAwarded||0}),F>0||j.starsAwarded){const z=j.starsAwarded||F;I(z),setTimeout(()=>I(null),3e3)}s(z=>({...z,freeWill:Math.min(100,z.freeWill+1),exp:(z.exp+5)%100,stars:z.stars+(j.starsAwarded||0)})),console.log("[ChatView] ")}else{const $=(h==null?void 0:h.language)||"KO_CN",N=X(j.content,j.vocabulary,$);N.forEach(W=>{W.isKorean&&W.text&&Po.recordDialogAppearance(W.text)});const F={id:(Date.now()+1).toString(),role:"assistant",content:j.content,translation:j.translation,narration:j.narration,tokens:N};console.log("[ChatView] AI:",{id:F.id,content:(J=F.content)==null?void 0:J.substring(0,30),tokensCount:N.length,tokens:N.map(W=>({text:W.text,hasMeaning:!!W.meaning,pronunciation:W.pronunciation}))}),e(W=>[...W,F]),console.log("[ChatView] , :",n.length+1);const z=j.starsAwarded||0;z>0&&(I(z),setTimeout(()=>I(null),3e3)),s(W=>({...W,freeWill:Math.min(100,W.freeWill+1),exp:(W.exp+5)%100,stars:W.stars+z}))}}catch(le){console.error("[ChatView] :",le),e(B=>[...B,{id:Date.now().toString()+"-err",role:"assistant",content:"...",translation:"...",narration:""}])}finally{w(!1)}},de=Q=>{const re=r.uiPreferences.bubbleStyle||"classic";if(Q==="user")switch(re){case"modern":return"bg-[#C5A059] text-black rounded-3xl font-medium";case"glass":return"bg-[#C5A059]/40 backdrop-blur-md text-white border border-[#C5A059]/50 rounded-2xl";case"minimal":return"bg-transparent border-r-4 border-[#C5A059] text-[#C5A059] px-2 font-bold";default:return"bg-gradient-to-br from-[#C5A059] to-[#8B7039] text-[#050505] rounded-2xl rounded-tr-none font-medium"}else switch(re){case"modern":return"bg-white/5 border border-white/10 text-white rounded-3xl";case"glass":return"glass-panel text-white rounded-2xl border-[#C5A059]/30";case"minimal":return"bg-transparent border-l-2 border-white/20 text-white/80 rounded-none";default:return"glass-panel text-white rounded-2xl rounded-tl-none border-[#C5A059]/30"}};return a.jsxs("div",{className:"h-full flex flex-col relative overflow-hidden bg-black",children:[r.uiPreferences.chatWallpaper&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute inset-0 pointer-events-none z-0",children:a.jsx("img",{src:r.uiPreferences.chatWallpaper,className:"w-full h-full object-cover opacity-25",alt:""})}),a.jsx("div",{className:"absolute inset-0 pointer-events-none z-0 bg-black/40"})]}),a.jsx("button",{onClick:()=>{b&&C?C(!1):x&&x()},className:`fixed top-4 right-4 z-30 w-10 h-10 border rounded-full flex items-center justify-center overflow-hidden transition-all duration-300 ${b?"bg-[#C5A059] border-[#C5A059] shadow-[0_0_25px_rgba(197,160,89,0.5)]":"bg-[#C5A059]/20 hover:bg-[#C5A059]/40 border-[#C5A059]/40 hover:shadow-[0_0_25px_rgba(197,160,89,0.4)]"}`,title:"",children:a.jsx("img",{src:"https://drive-cdn.mujian.me/20/8f467427-0199-4728-abc5-bdbf282d5f30_dreamina_7594854180926410034_1768314892679.webp",className:"w-full h-full object-cover",alt:""})}),R!==null&&a.jsx("div",{className:"absolute top-24 left-1/2 -translate-x-1/2 z-[100] animate-in zoom-in fade-in duration-500 pointer-events-none",children:a.jsxs("div",{className:"glass-panel border-[#C5A059] px-6 py-3 rounded-full flex items-center gap-3 shadow-[0_0_30px_rgba(197,160,89,0.4)]",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[10px] text-[#C5A059] font-ui tracking-widest font-bold",children:""}),a.jsxs("span",{className:"text-xs text-white",children:[" ",R," "]})]})]})}),a.jsxs("div",{ref:M,className:`flex-1 overflow-y-auto p-4 md:p-8 space-y-8 no-scrollbar z-10 ${u?"max-w-3xl mx-auto w-full":""}`,children:[n.map(Q=>a.jsx("div",{className:`${u?"w-full":Q.role==="user"?"flex justify-end":"flex justify-start"} animate-in fade-in slide-in-from-bottom-4 duration-500`,children:u?a.jsxs("div",{className:"space-y-6 text-left group",children:[Q.narration&&a.jsx("div",{className:"text-white/80 italic text-base md:text-lg leading-relaxed font-light border-l-2 border-[#C5A059]/40 pl-6 py-2 transition-all group-hover:text-white bg-white/5 rounded-r-lg",children:Q.narration}),a.jsx("div",{className:`transition-all duration-700 ${Q.role==="user"?"text-[#C5A059]/60 italic font-light":""}`,children:Q.role==="assistant"&&Q.tokens?a.jsxs("div",{className:"ko-text text-xl md:text-2xl leading-loose text-white tracking-wide",children:[" ",Q.tokens.map((re,J)=>a.jsx("span",{onClick:le=>re.meaning&&i(re.text,re.meaning,re.pronunciation||"",le.clientX,le.clientY),className:re.meaning?"text-[#C5A059] border-b border-[#C5A059]/40 cursor-pointer hover:bg-[#C5A059]/10 transition-colors":"text-white",children:re.text},`${Q.id}-${J}`))," "]}):a.jsxs("p",{className:"ko-text text-lg opacity-80",children:[" ",Q.content," "]})})]}):a.jsxs("div",{className:"max-w-[92%] md:max-w-[80%] flex gap-3 flex-row",children:[Q.role==="assistant"&&a.jsx("div",{className:"w-9 h-9 rounded-full bg-[#C5A059]/20 border border-[#C5A059]/40 flex-shrink-0 flex items-center justify-center overflow-hidden shadow-lg",children:a.jsx("img",{src:(h==null?void 0:h.avatar)||r.uiPreferences.aiAvatar||"https://picsum.photos/seed/asael/200/200",className:"w-full h-full object-cover",alt:"AI"})}),a.jsxs("div",{className:`flex flex-col flex-1 ${Q.role==="user"?"items-end":"items-start"}`,children:[Q.role==="assistant"&&a.jsx("span",{className:"text-[9px] text-[#C5A059] font-ui mb-1 ml-1 tracking-widest uppercase opacity-80 drop-shadow-md",children:(h==null?void 0:h.nickname)||r.uiPreferences.aiNickname}),Q.role==="user"&&a.jsx("span",{className:"text-[9px] text-[#C5A059] font-ui mb-1 mr-1 tracking-widest uppercase opacity-80 drop-shadow-md",children:(v==null?void 0:v.nickname)||r.uiPreferences.userNickname}),a.jsxs("div",{className:`p-4 shadow-2xl relative transition-all duration-500 ${de(Q.role)}`,children:[Q.role==="assistant"&&Q.tokens?a.jsx("div",{className:"ko-text text-lg leading-relaxed",children:Q.tokens.map((re,J)=>a.jsx("span",{onClick:le=>re.meaning&&i(re.text,re.meaning,re.pronunciation||"",le.clientX,le.clientY),className:re.meaning?"text-[#C5A059] border-b border-[#C5A059]/40 cursor-pointer hover:bg-[#C5A059]/10 transition-colors":"text-white",children:re.text},`${Q.id}-${J}`))}):a.jsx("p",{className:"ko-text text-base",children:Q.content}),Q.translation&&a.jsx("div",{className:"mt-3 pt-2 border-t border-white/10",children:a.jsx("p",{className:"text-[11px] text-white/60 font-light italic leading-tight",children:Q.translation})})]})]}),Q.role==="user"&&a.jsx("div",{className:"w-9 h-9 rounded-full bg-white/5 border border-white/10 flex-shrink-0 overflow-hidden flex items-center justify-center shadow-lg",children:a.jsx("img",{src:(v==null?void 0:v.avatar)||r.uiPreferences.userAvatar||"https://picsum.photos/seed/korea/200/200",className:"w-full h-full object-cover",alt:"User"})})]})},Q.id)),E&&a.jsxs("div",{className:`${u?"text-left":"flex gap-3 ml-1"}`,children:[!u&&a.jsx("div",{className:"w-8 h-8 rounded-full border border-[#C5A059]/10 flex-shrink-0 flex items-center justify-center opacity-30",children:a.jsx("div",{className:"w-1 h-1 bg-[#C5A059] rounded-full"})}),a.jsx("div",{className:"text-[10px] text-[#C5A059]/70 font-ui animate-pulse tracking-[0.5em] mt-2 drop-shadow-md",children:u?"...  ...":"COMPOSING..."})]}),a.jsx("div",{ref:q,className:"h-40"})]}),a.jsx("div",{className:"fixed bottom-0 left-0 right-0 h-36 pointer-events-none z-20 bg-gradient-to-b from-transparent via-black/10 to-black/60 backdrop-blur-[2px]"}),a.jsxs("div",{className:"absolute bottom-10 left-1/2 -translate-x-1/2 w-[92%] md:w-[60%] z-30",children:[f.length>0&&a.jsxs("div",{className:"flex gap-2 mb-3 animate-in slide-in-from-bottom-2 duration-300 overflow-x-auto no-scrollbar pb-1",children:[f.map(Q=>a.jsxs("div",{className:"flex-none bg-[#C5A059]/20 border border-[#C5A059]/40 rounded-full px-3 py-1 flex items-center gap-2 backdrop-blur-md",children:[a.jsx("span",{className:"text-[10px] ko-text text-white",children:Q.original}),a.jsx("button",{onClick:()=>g==null?void 0:g(re=>re.filter(J=>J.id!==Q.id)),className:"w-4 h-4 rounded-full bg-[#C5A059] text-black text-[10px] flex items-center justify-center hover:scale-110",children:""})]},Q.id)),a.jsxs("div",{className:"flex-none text-[8px] text-[#C5A059]/40 font-ui flex items-center uppercase tracking-widest px-2",children:["Syncing ",f.length,"/4"]})]}),a.jsxs("div",{className:"relative group shadow-[0_20px_50px_rgba(0,0,0,0.5)]",children:[a.jsx("input",{type:"text",value:A,onChange:Q=>T(Q.target.value),onKeyDown:Q=>Q.key==="Enter"&&xe(),placeholder:u?"...":"...",className:"w-full bg-[#080808]/95 backdrop-blur-2xl border border-[#C5A059]/30 rounded-2xl p-5 pr-16 text-sm text-[#C5A059] focus:outline-none focus:border-[#C5A059] transition-all tracking-widest placeholder:text-[#C5A059]/30 shadow-inner"}),a.jsx("button",{onClick:xe,className:"absolute right-4 top-1/2 -translate-y-1/2 text-[#C5A059] hover:scale-125 transition-transform p-2",children:a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),a.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]})})]})]})]})},Ug=({size:n=128,isPlaying:e=!1,cover:i=""})=>a.jsxs("div",{className:"relative rounded-full border-4 border-[#C5A059]/40 shadow-[0_0_30px_rgba(0,0,0,0.6)] animate-[spin_8s_linear_infinite] shrink-0 aspect-square overflow-hidden",style:{width:`${n}px`,height:`${n}px`,minWidth:`${n}px`,minHeight:`${n}px`,animationPlayState:e?"running":"paused"},children:[a.jsx("img",{src:i,className:"w-full h-full object-cover pointer-events-none",alt:"Cover"}),a.jsx("div",{className:"absolute inset-0 rounded-full border border-white/5 opacity-30 pointer-events-none"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-black/20 via-transparent to-white/10 pointer-events-none"}),a.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-1/4 h-1/4 bg-[#0a0a0a] border-4 border-[#C5A059]/40 rounded-full shadow-inner z-10 pointer-events-none"})]}),wE=({audioState:n,setAudioState:e,seekAudio:i,currentSong:s,onNextSong:r,onPrevSong:u})=>{const f=g=>{const x=Math.floor(g/60),h=Math.floor(g%60);return`${x}:${h.toString().padStart(2,"0")}`};return a.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-6 z-[1000] flex flex-col items-center group/music select-none",children:[a.jsx("div",{className:"relative z-0 h-16 -mb-4 transition-all duration-500 group-hover/music:opacity-0 group-hover/music:scale-50 group-hover/music:-translate-y-10 pointer-events-none",children:a.jsx(Ug,{size:112,isPlaying:n.isPlaying,cover:s.cover})}),a.jsxs("div",{className:"relative z-30 flex flex-col w-56 h-20 transition-all duration-500 ease-out bg-[#0a0a0a]/95 backdrop-blur-3xl shadow-[0_20px_50px_rgba(0,0,0,0.8)] border border-[#C5A059]/30 rounded-2xl group-hover/music:h-48 group-hover/music:w-80",children:[a.jsx("div",{className:"absolute -top-12 -left-8 z-[60] opacity-0 scale-75 rotate-[-20deg] group-hover/music:opacity-100 group-hover/music:scale-100 group-hover/music:rotate-0 transition-all duration-700 ease-out pointer-events-none",children:a.jsx(Ug,{size:108,isPlaying:n.isPlaying,cover:s.cover})}),a.jsxs("div",{className:"flex flex-row w-full h-0 opacity-0 group-hover/music:h-20 group-hover/music:opacity-100 transition-all duration-500",children:[a.jsx("div",{className:"w-24 shrink-0"}),a.jsxs("div",{className:"flex flex-col justify-center flex-1 pr-6 overflow-hidden transition-all duration-500",children:[a.jsx("p",{className:"text-lg font-bold text-[#C5A059] tracking-widest font-ui truncate uppercase leading-tight",children:s.title}),a.jsx("p",{className:"text-[#C5A059]/50 text-[10px] font-ui tracking-tighter uppercase mt-1 truncate",children:s.artist})]})]}),a.jsxs("div",{className:"flex flex-row mx-4 mt-4 bg-white/5 rounded-lg min-h-6 items-center px-3 group-hover/music:mt-2 transition-all",children:[a.jsx("span",{className:"hidden group-hover/music:inline-block text-[9px] text-[#C5A059]/70 font-mono w-9 flex-shrink-0",children:f(n.currentTime)}),a.jsx("input",{type:"range",min:"0",max:n.duration||100,value:n.currentTime,onChange:g=>i(parseFloat(g.target.value)),className:`flex-grow min-w-0 h-1 mx-2 bg-white/10 rounded-full appearance-none cursor-pointer focus:outline-none \r
              [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 \r
              [&::-webkit-slider-thumb]:bg-[#C5A059] [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:shadow-lg`}),a.jsx("span",{className:"hidden group-hover/music:inline-block text-[9px] text-[#C5A059]/70 font-mono w-9 text-right flex-shrink-0",children:f(n.duration)})]}),a.jsxs("div",{className:"flex flex-row items-center justify-center flex-grow mx-2 space-x-2 group-hover/music:space-x-4 transition-all",children:[a.jsx("button",{onClick:g=>{g.stopPropagation(),e(x=>({...x,isLooping:!x.isLooping}))},className:`flex items-center justify-center w-0 opacity-0 pointer-events-none group-hover/music:w-8 group-hover/music:opacity-100 group-hover/music:pointer-events-auto transition-all duration-300 ${n.isLooping?"text-[#C5A059]":"text-white/20"}`,children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polyline",{points:"17 1 21 5 17 9"}),a.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),a.jsx("polyline",{points:"7 23 3 19 7 15"}),a.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]})}),a.jsx("button",{onClick:g=>{g.stopPropagation(),u()},className:"p-1.5 text-[#C5A059]/60 hover:text-[#C5A059] transition-all hover:scale-110 active:scale-90 shrink-0",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polygon",{points:"19 20 9 12 19 4 19 20"}),a.jsx("line",{x1:"5",y1:"19",x2:"5",y2:"5"})]})}),a.jsx("button",{onClick:g=>{g.stopPropagation(),e(x=>({...x,isPlaying:!x.isPlaying}))},className:`w-11 h-11 flex items-center justify-center transition-all duration-300 shrink-0 bg-transparent border-transparent shadow-none\r
              group-hover/music:bg-[#C5A059]/20 group-hover/music:border group-hover/music:border-[#C5A059]/40 group-hover/music:rounded-full \r
              group-hover/music:shadow-[0_0_15px_rgba(197,160,89,0.3)] text-[#C5A059] hover:scale-110 active:scale-95`,children:n.isPlaying?a.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:[a.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),a.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}):a.jsx("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",className:"ml-1",children:a.jsx("polygon",{points:"5 3 19 12 5 21 5 3"})})}),a.jsx("button",{onClick:g=>{g.stopPropagation(),r()},className:"p-1.5 text-[#C5A059]/60 hover:text-[#C5A059] transition-all hover:scale-110 active:scale-90 shrink-0",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("polygon",{points:"5 4 15 12 5 20 5 4"}),a.jsx("line",{x1:"19",y1:"5",x2:"19",y2:"19"})]})}),a.jsx("button",{onClick:g=>{g.stopPropagation(),e(x=>({...x,hasVocals:!x.hasVocals}))},className:`flex items-center justify-center w-0 opacity-0 pointer-events-none group-hover/music:w-8 group-hover/music:opacity-100 group-hover/music:pointer-events-auto transition-all duration-300 ${n.hasVocals?"text-[#C5A059]":"text-white/20"}`,children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[a.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),a.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),a.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),a.jsx("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]})})]})]})]})},NE=({stats:n,onClose:e,isGeneratingMemory:i=!1})=>{const[s,r]=D.useState(!1);D.useEffect(()=>{n.memoryLog&&n.memoryLog.length>0&&r(!0)},[n.memoryLog]),D.useEffect(()=>{i&&r(!1)},[i]);const u=f=>{const g=new Date(f),x=g.getFullYear(),h=(g.getMonth()+1).toString().padStart(2,"0"),v=g.getDate().toString().padStart(2,"0"),b=g.getHours().toString().padStart(2,"0"),C=g.getMinutes().toString().padStart(2,"0");return`${x}-${h}-${v} ${b}:${C}`};return a.jsx("div",{className:"fixed inset-0 z-[5000] flex items-center justify-center p-4 md:p-12 bg-black/98 backdrop-blur-[40px] animate-in fade-in duration-300",onClick:e,children:a.jsxs("div",{className:"w-full max-w-6xl glass-panel p-6 md:p-12 rounded-sm border-[#C5A059]/40 flex flex-col max-h-[85vh] shadow-[0_30px_100px_rgba(0,0,0,0.9)] relative",onClick:f=>f.stopPropagation(),children:[i&&a.jsx("div",{className:"absolute inset-0 z-50 bg-black/95 backdrop-blur-xl flex flex-col items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"relative w-20 h-20 mx-auto mb-8",children:[a.jsx("div",{className:"absolute inset-0 border-4 border-[#C5A059]/20 rounded-full"}),a.jsx("div",{className:"absolute inset-0 border-4 border-[#C5A059] rounded-full border-t-transparent animate-spin"}),a.jsx("div",{className:"absolute inset-4 border-2 border-[#C5A059]/30 rounded-full animate-pulse"})]}),a.jsx("h3",{className:"text-[#C5A059] text-xl font-ui tracking-[0.4em] uppercase mb-4 animate-pulse",children:""}),a.jsx("p",{className:"text-white/40 text-xs font-ui tracking-[0.2em]",children:"Synchronizing neural patterns..."}),a.jsxs("div",{className:"mt-8 flex items-center justify-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-[#C5A059] rounded-full animate-bounce",style:{animationDelay:"0ms"}}),a.jsx("div",{className:"w-1.5 h-1.5 bg-[#C5A059] rounded-full animate-bounce",style:{animationDelay:"150ms"}}),a.jsx("div",{className:"w-1.5 h-1.5 bg-[#C5A059] rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})}),a.jsxs("div",{className:"flex justify-between items-center mb-8 md:mb-12 border-b border-[#C5A059]/30 pb-8",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-[#C5A059] font-ui text-2xl md:text-4xl tracking-[0.6em] uppercase leading-none font-bold",children:""}),a.jsx("p",{className:"text-[10px] text-white/30 tracking-[0.3em] mt-3 uppercase font-ui",children:"20"})]}),a.jsx("button",{onClick:e,className:"text-[#C5A059] text-5xl hover:rotate-90 transition-transform p-2 leading-none",children:""})]}),a.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar",children:n.memoryLog&&n.memoryLog.length>0?a.jsxs("table",{className:"w-full text-left border-collapse min-w-[700px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-[11px] text-[#C5A059] font-ui uppercase border-b border-[#C5A059]/20 font-bold tracking-widest",children:[a.jsx("th",{className:"py-6",children:""}),a.jsx("th",{className:"py-6",children:""}),a.jsx("th",{className:"py-6",children:""}),a.jsx("th",{className:"py-6 text-right",children:""})]})}),a.jsx("tbody",{className:"divide-y divide-white/5",children:n.memoryLog.map(f=>a.jsxs("tr",{className:"text-xs hover:bg-white/5 transition-colors group",children:[a.jsx("td",{className:"py-8 text-white/40 font-mono w-32 tracking-tighter",children:u(f.timestamp)}),a.jsx("td",{className:"py-8 text-white font-medium pr-8 w-1/4 leading-relaxed group-hover:text-[#C5A059] transition-colors",children:f.event}),a.jsx("td",{className:"py-8 text-white/50 italic font-light pr-8 leading-relaxed font-serif",children:f.impression}),a.jsx("td",{className:"py-8 text-amber-500 font-ui text-right w-40 text-sm font-bold tracking-widest",children:f.statChange})]},f.id))})]}):a.jsxs("div",{className:"h-80 flex flex-col items-center justify-center opacity-20 text-center",children:[a.jsx("div",{className:"text-8xl mb-8 font-ui font-light",children:""}),a.jsx("p",{className:"text-xs tracking-[0.5em] font-light uppercase",children:"No synchronization memory detected."})]})})]})})},RE=({stats:n,setStats:e,selectedQuoteId:i,setSelectedQuoteId:s,onClose:r,onQuoteSelect:u})=>{const[f,g]=D.useState(!1),[x,h]=D.useState(""),[v,b]=D.useState(!1),C=[{id:"quote_0",category:"",subject:"",lines:["","","...",""],cost:0},{id:"quote_1",category:"",subject:"",lines:["","...","",""],cost:0},{id:"quote_2",category:"",subject:"",lines:["","","","..."],cost:0},{id:"quote_3",category:"",subject:"",lines:["","...?","......","","......"],cost:2},{id:"quote_4",category:"",subject:"",lines:["","","","",""],cost:2}],A=D.useMemo(()=>[...C,...(n.customQuotes||[]).map(R=>({...R,cost:0}))],[n.customQuotes]),T=async()=>{if(x.trim()){if(n.stars<5){alert(" (5)");return}b(!0);try{const R=await hE(x);if(!R||typeof R!="object")throw new Error("Invalid AI response format");const I={id:`custom_${Date.now()}`,category:"",subject:R.subject||"",lines:Array.isArray(R.lines)?R.lines:[""]};e(M=>({...M,stars:M.stars-5,customQuotes:[I,...M.customQuotes||[]]})),s(I.id),g(!1),h(""),u()}catch(R){console.error(R),alert("")}finally{b(!1)}}},E=(R,I,M)=>{if(R.stopPropagation(),n.stars<M){alert("");return}e(q=>({...q,stars:q.stars-M,unlockedContent:[...q.unlockedContent||[],I]})),s(I),u()},w=(R,I)=>{I&&(s(R),u())};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-4 dreamy-panel p-2 rounded-xl shadow-[0_20px_60px_rgba(0,0,0,0.6)] w-64 z-[1000] animate-in slide-in-from-top-4 duration-300",onClick:R=>R.stopPropagation(),children:[a.jsx("div",{className:"max-h-[320px] overflow-y-auto no-scrollbar space-y-2 p-1",children:A.map(R=>{const I=R.cost===0||(n.unlockedContent||[]).includes(R.id),M=i===R.id;return a.jsxs("div",{onClick:()=>w(R.id,I),className:`w-full p-3 text-left rounded-lg transition-all border flex items-center justify-between group/item ${M&&I?"bg-[#C5A059]/25 text-[#C5A059] border-[#C5A059]/50 shadow-[inset_0_0_15px_rgba(197,160,89,0.2)]":I?"text-white/50 hover:bg-white/5 border-transparent cursor-pointer":"text-white/20 border-dashed border-white/10 cursor-default"}`,children:[a.jsxs("div",{className:"flex-1 overflow-hidden pr-2",children:[a.jsxs("span",{className:"block text-[8px] uppercase tracking-[0.2em] mb-1 opacity-60 font-ui font-bold",children:[R.category,"  ",R.subject]}),a.jsx("span",{className:"block text-xs line-clamp-1 italic",children:I?`"${R.lines[0]}..."`:"  "})]}),!I&&a.jsxs("button",{onClick:q=>E(q,R.id,R.cost),className:"relative flex-shrink-0 px-3 py-2 border border-[#C5A059]/60 bg-[#C5A059]/20 rounded text-[#C5A059] hover:bg-[#C5A059]/50 hover:border-[#C5A059] transition-all flex flex-col items-center justify-center min-w-[60px] z-[1100] active:scale-95 shadow-lg",children:[a.jsx("span",{className:"text-[10px] font-bold font-ui leading-none mb-1",children:""}),a.jsxs("span",{className:"text-[8px] opacity-80 leading-none",children:[R.cost,""]})]})]},R.id)})}),a.jsxs("button",{onClick:R=>{R.stopPropagation(),g(!0)},className:"mt-2 w-full p-3.5 border border-amber-500/40 bg-amber-500/15 text-amber-500 text-[11px] font-ui tracking-[0.3em] uppercase rounded-lg hover:bg-amber-500/30 transition-all flex items-center justify-center gap-2 group border-dashed",children:[a.jsx("span",{className:"group-hover:rotate-180 transition-transform duration-700",children:""})," (5 )"]})]}),f&&a.jsx("div",{className:"fixed inset-0 z-[6000] flex items-center justify-center p-6 bg-black/90 backdrop-blur-xl animate-in fade-in duration-300",onClick:()=>!v&&g(!1),children:a.jsxs("div",{className:"w-full max-w-md dreamy-panel p-10 rounded-2xl shadow-[0_0_100px_rgba(245,158,11,0.3)] animate-brainwave relative overflow-hidden",onClick:R=>R.stopPropagation(),children:[a.jsx("h3",{className:"text-amber-500 font-ui text-xl tracking-[0.5em] mb-4 uppercase text-center font-bold",children:"Neural Resonate"}),a.jsx("p",{className:"text-[11px] text-white/40 text-center uppercase tracking-widest mb-10 leading-relaxed px-4",children:""}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("input",{type:"text",autoFocus:!0,value:x,onChange:R=>h(R.target.value),placeholder:"...",disabled:v,className:"w-full bg-white/5 border border-amber-500/40 p-5 text-base text-white placeholder:text-white/15 rounded-xl focus:outline-none focus:border-amber-600 text-center tracking-[0.2em] transition-all"}),a.jsx("button",{onClick:T,disabled:v||!x.trim(),className:"w-full py-5 bg-amber-600 text-black text-xs font-bold font-ui tracking-[0.5em] uppercase rounded-xl hover:brightness-110 active:scale-95 transition-all disabled:opacity-50 disabled:grayscale flex items-center justify-center gap-3 shadow-[0_10px_30px_rgba(217,119,6,0.4)]",children:v?"...":" // SYNC START"})]})]})})]})},ya=[{id:"wp_child",url:"https://i.postimg.cc/rFxKJRDW/WallPaper_child.webp",lockedId:null},{id:"wp_youth",url:"https://i.postimg.cc/7h0Fqvt6/Wallpaper_youth.webp",lockedId:null},{id:"wp_adult",url:"https://i.postimg.cc/vHfczx4n/WallPaper_adult.webp",lockedId:null},{id:"wp_violin",url:"https://i.postimg.cc/KvBRN31g/WallPaper_violin.webp",lockedId:"wp_violin"},{id:"wp_tease",url:"https://i.postimg.cc/fTmJKSVY/WallPaper_tease.webp",lockedId:"wp_tease"},{id:"wp_leafclover_child",url:"https://i.postimg.cc/Qxp4W09V/Wallpaper_child_leafclover.webp",lockedId:"wp_leafclover"},{id:"wp_leafclover_adult",url:"https://i.postimg.cc/VLjGbDrd/Wallpaper_adult_leafclover.webp",lockedId:"wp_leafclover"},{id:"wp_rebellion",url:"https://i.postimg.cc/9QCxPZZV/Wallpaper_adult_rebellion.webp",lockedId:"wp_rebellion"},{id:"wp_wedding",url:"https://i.postimg.cc/9FG8qJRQ/Wallpaper_adult_wedding.webp",lockedId:"wp_wedding"},{id:"wp_10words",url:"https://i.postimg.cc/BnKkSHHc/Wallpaper_celebration_10words.webp",lockedId:"wp_10words"},{id:"wp_50words",url:"https://i.postimg.cc/GmyVLGGF/wallpaper_celebration_50words.webp",lockedId:"wp_50words"},{id:"wp_100words",url:"https://i.postimg.cc/W1kCNggm/Wallpaper_celebration_100words.webp",lockedId:"wp_100words"}],va=["https://i.postimg.cc/TPKH1nNw/dreamina-7588463849087503643-1766827008308.webp","https://i.postimg.cc/Fs8QZFMq/IMG-20251227-174947.webp","https://i.postimg.cc/yYtzP6MG/IMG-20251227-175014.webp"],ME=["https://i.postimg.cc/C1VsQWj7/Avatar1.webp","https://i.postimg.cc/7P9nKtbK/Avartar2.webp","https://i.postimg.cc/NGDkdCLN/Avartar3.webp"],IE=["https://i.postimg.cc/9FjK3nBx/User_Avatar.webp","https://i.postimg.cc/yYtzP6MG/IMG-20251227-175014.webp","https://i.postimg.cc/Fs8QZFMq/IMG-20251227-174947.webp","https://i.postimg.cc/TPKH1nNw/dreamina-7588463849087503643-1766827008308.webp"],kE=[...ya.map(n=>n.url),...ME,...IE,...va,""],_u={"https://i.postimg.cc/rFxKJRDW/WallPaper_child.webp":"WallPaper_child.webp","https://i.postimg.cc/7h0Fqvt6/Wallpaper_youth.webp":"Wallpaper_youth.webp","https://i.postimg.cc/vHfczx4n/WallPaper_adult.webp":"WallPaper_adult.webp","https://i.postimg.cc/KvBRN31g/WallPaper_violin.webp":"WallPaper_violin.webp","https://i.postimg.cc/fTmJKSVY/WallPaper_tease.webp":"WallPaper_tease.webp","https://i.postimg.cc/Qxp4W09V/Wallpaper_child_leafclover.webp":"Wallpaper_child_leafclover.webp","https://i.postimg.cc/VLjGbDrd/Wallpaper_adult_leafclover.webp":"Wallpaper_adult_leafclover.webp","https://i.postimg.cc/9QCxPZZV/Wallpaper_adult_rebellion.webp":"Wallpaper_adult_rebellion.webp","https://i.postimg.cc/9FG8qJRQ/Wallpaper_adult_wedding.webp":"Wallpaper_adult_wedding.webp","https://i.postimg.cc/C1VsQWj7/Avatar1.webp":"Avatar1.webp","https://i.postimg.cc/7P9nKtbK/Avartar2.webp":"Avartar2.webp","https://i.postimg.cc/NGDkdCLN/Avartar3.webp":"Avartar3.webp","https://i.postimg.cc/9FjK3nBx/User_Avatar.webp":"User_Avatar.webp","https://i.postimg.cc/TPKH1nNw/dreamina-7588463849087503643-1766827008308.webp":"dreamina_7588463849087503643.webp","https://i.postimg.cc/Fs8QZFMq/IMG-20251227-174947.webp":"IMG_20251227_174947.webp","https://i.postimg.cc/yYtzP6MG/IMG-20251227-175014.webp":"IMG_20251227_175014.webp"},DE=n=>n?n.startsWith("data:")?"LOCAL_BLOB":_u[n]?_u[n]:n.split("/").pop()||"unknown.webp":"",jE=n=>{if(!n||n==="LOCAL_BLOB")return"";const e=Object.entries(_u).find(([i,s])=>s===n);return e?e[0]:n},LE=({stats:n,setStats:e,onClose:i})=>{const[s,r]=D.useState("env"),u=(h,v)=>{e(b=>({...b,uiPreferences:{...b.uiPreferences,[h]:v}}))},f=(h,v)=>{e(b=>{const C=b.customUIAssets||{},A=C[h]||[];return{...b,customUIAssets:{...C,[h]:A.filter(T=>T!==v)}}})},g=()=>{e(h=>{const b={...h.customUIAssets||{}};let C=!1;return Object.keys(h.uiPreferences).forEach(A=>{const T=h.uiPreferences[A];if(!T||typeof T!="string"||kE.includes(T))return;const E=b[A]||[];E.includes(T)||(b[A]=[T,...E],C=!0)}),C?{...h,customUIAssets:b}:h}),i()},x=n.customUIAssets||{};return a.jsx("div",{className:"fixed inset-0 z-[5000] flex items-center justify-center p-4 md:p-12 bg-black/98 backdrop-blur-[60px] animate-in fade-in duration-300",onClick:i,children:a.jsxs("div",{className:"w-full max-w-2xl dreamy-panel p-6 md:p-10 rounded-lg border-[#C5A059]/40 flex flex-col max-h-[90vh] shadow-[0_0_100px_rgba(0,0,0,0.9)] overflow-hidden",onClick:h=>h.stopPropagation(),children:[a.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-[#C5A059]/20 pb-4 shrink-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-[#C5A059] font-ui text-xl md:text-3xl tracking-[0.5em] uppercase leading-none",children:""}),a.jsx("p",{className:"text-[10px] text-white/30 tracking-[0.2em] mt-2 uppercase font-ui",children:""})]}),a.jsx("button",{onClick:i,className:"text-[#C5A059] text-4xl hover:rotate-90 transition-transform p-1 leading-none",children:""})]}),a.jsx("div",{className:"w-full mb-8 shrink-0 flex justify-center",children:a.jsx("div",{className:"flex bg-white/5 border border-white/10 p-1.5 rounded-xl md:rounded-full shadow-inner w-full max-w-sm",children:[{id:"env",l:""},{id:"dialog",l:""},{id:"frag",l:""}].map(h=>a.jsx("button",{onClick:()=>r(h.id),className:`flex-1 py-3 px-4 rounded-lg md:rounded-full font-ui text-[11px] md:text-xs tracking-[0.3em] uppercase transition-all duration-300 flex items-center justify-center gap-2 ${s===h.id?"text-[#C5A059] bg-[#C5A059]/15 border border-[#C5A059]/30 shadow-[0_0_15px_rgba(197,160,89,0.15)] font-bold":"text-white/40 hover:text-white/70"}`,children:h.l},h.id))})}),a.jsxs("div",{className:"flex-1 overflow-y-auto overflow-x-hidden no-scrollbar pr-1 pb-8",children:[s==="env"&&a.jsxs("div",{className:"space-y-12 animate-in fade-in zoom-in-95 duration-500",children:[a.jsx(wi,{label:"",value:n.uiPreferences.profileWallpaper,onChange:h=>u("profileWallpaper",h),presets:ya,customPresets:x.profileWallpaper||[],fieldKey:"profileWallpaper",onDeleteCustom:f,unlockedContent:n.unlockedContent,isFeatureLocked:!n.unlockedContent.includes("feat_custom_env")}),a.jsx(wi,{label:"",value:n.uiPreferences.chatWallpaper,onChange:h=>u("chatWallpaper",h),presets:ya,customPresets:x.chatWallpaper||[],fieldKey:"chatWallpaper",onDeleteCustom:f,unlockedContent:n.unlockedContent,isFeatureLocked:!n.unlockedContent.includes("feat_custom_env")}),a.jsx(wi,{label:"",value:n.uiPreferences.voidWallpaper,onChange:h=>u("voidWallpaper",h),presets:ya,customPresets:x.voidWallpaper||[],fieldKey:"voidWallpaper",onDeleteCustom:f,unlockedContent:n.unlockedContent,isFeatureLocked:!n.unlockedContent.includes("feat_custom_env")})]}),s==="dialog"&&a.jsx("div",{className:"space-y-12 animate-in fade-in zoom-in-95 duration-500",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("label",{className:"text-[10px] text-[#C5A059] uppercase tracking-[0.3em] opacity-60 font-ui font-bold",children:""}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["classic","modern","glass","minimal"].map(h=>a.jsx("button",{onClick:()=>u("bubbleStyle",h),className:`py-4 border rounded-sm text-[10px] tracking-[0.2em] font-ui transition-all ${n.uiPreferences.bubbleStyle===h?"border-[#C5A059] text-[#C5A059] bg-[#C5A059]/15 shadow-[0_0_15px_rgba(197,160,89,0.2)] font-bold":"border-white/10 text-white/40 hover:border-white/30"}`,children:h==="classic"?"":h==="modern"?"":h==="glass"?"":""},h))})]})}),s==="frag"&&a.jsxs("div",{className:"space-y-12 animate-in fade-in zoom-in-95 duration-500",children:[a.jsx(wi,{label:"",value:n.uiPreferences.trainingBgFlashcard,onChange:h=>u("trainingBgFlashcard",h),presets:va.map(h=>({url:h})),customPresets:x.trainingBgFlashcard||[],fieldKey:"trainingBgFlashcard",onDeleteCustom:f,unlockedContent:n.unlockedContent,isFeatureLocked:!n.unlockedContent.includes("feat_custom_frag")}),a.jsx(wi,{label:"",value:n.uiPreferences.trainingBgChoice,onChange:h=>u("trainingBgChoice",h),presets:va.map(h=>({url:h})),customPresets:x.trainingBgChoice||[],fieldKey:"trainingBgChoice",onDeleteCustom:f,unlockedContent:n.unlockedContent,isFeatureLocked:!n.unlockedContent.includes("feat_custom_frag")}),a.jsx(wi,{label:"",value:n.uiPreferences.trainingBgDictation,onChange:h=>u("trainingBgDictation",h),presets:va.map(h=>({url:h})),customPresets:x.trainingBgDictation||[],fieldKey:"trainingBgDictation",onDeleteCustom:f,unlockedContent:n.unlockedContent,isFeatureLocked:!n.unlockedContent.includes("feat_custom_frag")})]})]}),a.jsx("div",{className:"mt-auto pt-6 border-t border-[#C5A059]/20 flex justify-center shrink-0",children:a.jsx("button",{onClick:g,className:"w-full md:w-auto md:px-32 py-4 bg-[#C5A059]/15 border border-[#C5A059]/60 text-[#C5A059] text-[13px] font-ui tracking-[0.6em] uppercase rounded-sm hover:bg-[#C5A059] hover:text-black transition-all shadow-[0_0_30px_rgba(197,160,89,0.3)] active:scale-95 font-bold",children:""})})]})})},wi=({label:n,value:e,onChange:i,presets:s,customPresets:r,fieldKey:u,onDeleteCustom:f,unlockedContent:g,isFeatureLocked:x})=>{const h=D.useRef(null),v=b=>{var A;if(x)return;const C=(A=b.target.files)==null?void 0:A[0];if(C){const T=new FileReader;T.onloadend=()=>i(T.result),T.readAsDataURL(C)}};return a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("label",{className:"text-[11px] text-[#C5A059] uppercase tracking-[0.4em] font-ui font-bold",children:n}),e&&a.jsx("button",{onClick:()=>i(""),className:"text-[10px] text-white/20 hover:text-white transition-colors tracking-widest uppercase",children:""})]}),a.jsxs("div",{className:"resonance-stack-container no-scrollbar -mx-4",children:[s&&s.map((b,C)=>{const A=b.lockedId&&!g.includes(b.lockedId);return a.jsx("div",{onClick:()=>!A&&i(b.url),className:`resonance-card ${e===b.url?"active":""} ${A?"grayscale brightness-50 cursor-not-allowed opacity-50":""}`,style:{backgroundImage:`url('${b.url}')`},children:A&&a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/40",children:[a.jsx("span",{className:"text-sm",children:""}),a.jsx("span",{className:"text-[6px] text-[#C5A059] font-bold mt-1",children:"5"})]})},`preset-${C}`)}),r.map((b,C)=>a.jsxs("div",{onClick:()=>i(b),className:`resonance-card ${e===b?"active":""} border-amber-500/50`,style:{backgroundImage:`url('${b}')`},children:[a.jsx("div",{className:"custom-card-label",children:"Custom"}),a.jsx("button",{className:"delete-btn",onClick:A=>{A.stopPropagation(),f(u,b)},children:""})]},`custom-${C}`))]}),a.jsxs("div",{className:"relative group",children:[a.jsxs("div",{className:"flex gap-3 items-start",children:[a.jsx("input",{type:"text",disabled:x,value:DE(e),onChange:b=>i(jE(b.target.value)),placeholder:x?" (50)":" URL...",className:`w-full bg-black/60 border p-4 text-xs transition-all rounded-sm font-mono tracking-tight ${x?"border-red-900/20 text-red-500/20 cursor-not-allowed italic":"border-white/10 text-white/80 focus:border-[#C5A059]/50"}`}),a.jsx("button",{onClick:()=>{var b;return!x&&((b=h.current)==null?void 0:b.click())},className:`px-6 py-4 border text-[11px] font-ui tracking-widest whitespace-nowrap transition-all rounded-sm font-bold shadow-xl active:scale-95 ${x?"border-red-900/20 text-red-500/20 cursor-not-allowed":"bg-[#C5A059]/10 border-[#C5A059]/40 text-[#C5A059] hover:bg-[#C5A059]/20"}`,children:x?"":""}),a.jsx("input",{type:"file",ref:h,onChange:v,accept:"image/*",className:"hidden"})]}),x&&a.jsx("div",{className:"absolute -top-6 right-0 text-[8px] text-red-500/40 uppercase tracking-widest font-ui animate-pulse",children:"Neural Access Denied // Required 50 Stardust"})]}),e&&a.jsx("div",{className:"mt-4 w-full aspect-video rounded-lg overflow-hidden border border-white/10 bg-black/40 group-hover:border-[#C5A059]/30 transition-all shadow-inner",children:a.jsx("img",{src:e,className:"w-full h-full object-cover animate-in fade-in zoom-in-95 duration-700",alt:""})})]})},UE=({stats:n,setStats:e,audioState:i,setAudioState:s,seekAudio:r,currentSong:u,onNextSong:f,onPrevSong:g})=>{const[x,h]=D.useState(null),[v,b]=D.useState(!1),[C,A]=D.useState(!1),[T,E]=D.useState("quote_0"),w=n.uiPreferences.profileWallpaper||"https://i.postimg.cc/7h0Fqvt6/Wallpaper_youth.webp",R=[{id:"quote_0",category:"",lines:["","","...",""]},{id:"quote_1",category:"",lines:["","...","",""]},{id:"quote_2",category:"",lines:["","","","..."]},{id:"quote_3",category:"",lines:["","...?","......","","......"]},{id:"quote_4",category:"",lines:["","","","",""]}],I=D.useMemo(()=>[...R,...n.customQuotes||[]],[n.customQuotes]),M=D.useMemo(()=>I.find(U=>U.id===T)||I[0],[I,T]),q=()=>{b(!1),A(!1),setTimeout(()=>{A(!0);const U=(M.lines.length*2.5+1.5)*1e3;setTimeout(()=>A(!1),U)},50)},G=(U,V)=>{U.stopPropagation(),h(x===V?null:V)};return a.jsxs("div",{className:"h-full w-full relative overflow-hidden animate-in fade-in duration-1000 bg-[#050505]",children:[a.jsxs("div",{className:"absolute inset-0 z-0 transition-all duration-1000 cursor-pointer overflow-hidden",onClick:()=>{b(!v),h(null)},children:[a.jsx("div",{className:"absolute inset-0",children:a.jsx("img",{src:w,className:`w-full h-full object-cover transition-all duration-[1.5s] ease-in-out ${v?"grayscale-0 opacity-80 scale-105 blur-none":"grayscale-[0.5] opacity-40 scale-100 blur-[1px]"}`,alt:"Asael Background"})}),a.jsx("div",{className:`absolute inset-0 transition-opacity duration-1000 ${v?"opacity-30":"opacity-60"} bg-gradient-to-t from-[#050505] via-[#050505]/20 to-transparent`})]}),C&&M&&a.jsx("div",{className:"absolute inset-0 z-[3000] flex flex-col items-start justify-start pt-32 pointer-events-none px-12 md:px-24",style:{animation:"lyric-container-out 1.5s ease-in-out forwards",animationDelay:`${M.lines.length*2.5+.5}s`},children:a.jsx("div",{className:"relative flex flex-col items-start gap-5 text-left animate-in fade-in slide-in-from-left-4 duration-1000",children:M.lines.map((U,V)=>a.jsxs("div",{className:"relative overflow-visible max-w-[75vw]",children:[a.jsx("p",{className:"text-base md:text-xl font-light italic tracking-[0.15em] text-[#C5A059]/40 whitespace-pre-wrap leading-relaxed",children:U}),a.jsxs("p",{className:"absolute inset-0 text-[#e7be5a] font-light italic tracking-[0.15em] overflow-hidden whitespace-pre-wrap animate-[lyric-fill_2.5s_linear_forwards] leading-relaxed",style:{clipPath:"inset(0 100% 0 0)",animationDelay:`${V*2.5}s`},children:[U," ",a.jsx("span",{className:"inline-block ml-1 opacity-60 scale-75",children:""})]})]},V))})}),a.jsxs("header",{className:`fixed top-0 left-16 md:left-20 right-0 p-6 md:p-8 flex justify-center items-start gap-5 z-[50] transition-all duration-[1s] ease-in-out ${v?"opacity-30 pointer-events-none":"opacity-100 pointer-events-auto"}`,children:[a.jsx("button",{onClick:U=>G(U,"memory"),className:`glass-panel p-3.5 rounded-full border-[#C5A059]/30 text-[#C5A059] transition-all shadow-xl active:scale-95 group ${x==="memory"?"bg-[#C5A059]/25 border-[#C5A059] shadow-[0_0_20px_rgba(197,160,89,0.3)]":"hover:bg-[#C5A059]/20 hover:border-[#C5A059]/60"}`,children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"group-hover:scale-110 transition-transform",children:[a.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),a.jsx("polyline",{points:"14 2 14 8 20 8"}),a.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),a.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"})]})}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:U=>G(U,"music"),className:`glass-panel p-3.5 rounded-full border-[#C5A059]/30 text-[#C5A059] transition-all shadow-xl active:scale-95 group ${x==="music"?"bg-[#C5A059]/25 border-[#C5A059] shadow-[0_0_20px_rgba(197,160,89,0.3)]":"hover:bg-[#C5A059]/20"}`,children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"group-hover:rotate-12 transition-transform",children:[a.jsx("path",{d:"M9 18V5l12-2v13"}),a.jsx("circle",{cx:"6",cy:"18",r:"3"}),a.jsx("circle",{cx:"18",cy:"16",r:"3"})]})}),x==="music"&&a.jsx(wE,{audioState:i,setAudioState:s,seekAudio:r,currentSong:u,onNextSong:f,onPrevSong:g})]}),a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:U=>G(U,"quote"),className:`glass-panel p-3.5 rounded-full border-[#C5A059]/30 text-[#C5A059] transition-all shadow-xl active:scale-95 group ${x==="quote"?"bg-[#C5A059]/25 border-[#C5A059] shadow-[0_0_20px_rgba(197,160,89,0.3)]":"hover:bg-[#C5A059]/20"}`,children:a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"group-hover:translate-y-[-1px] transition-transform",children:a.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2-2z"})})}),x==="quote"&&a.jsx(RE,{stats:n,setStats:e,selectedQuoteId:T,setSelectedQuoteId:E,onClose:()=>h(null),onQuoteSelect:()=>{h(null),q()}})]}),a.jsx("button",{onClick:U=>G(U,"resonance"),className:`glass-panel p-3.5 rounded-full border-[#C5A059]/30 text-[#C5A059] transition-all shadow-xl active:scale-95 group ${x==="resonance"?"bg-[#C5A059]/25 border-[#C5A059] shadow-[0_0_20px_rgba(197,160,89,0.3)]":"hover:bg-[#C5A059]/20"}`,children:a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"group-hover:scale-110 transition-transform",children:a.jsx("path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z"})})})]}),x==="memory"&&a.jsx(NE,{stats:n,onClose:()=>h(null)}),x==="resonance"&&a.jsx(LE,{stats:n,setStats:e,onClose:()=>h(null)}),a.jsxs("section",{className:`absolute bottom-12 left-12 md:bottom-16 md:left-24 w-[60%] flex flex-col justify-end z-20 space-y-8 transition-all duration-[1s] ease-in-out ${v?"opacity-0 -translate-x-12 pointer-events-none":"opacity-100 translate-x-0"}`,children:[a.jsxs("div",{className:"pointer-events-auto cursor-pointer group flex flex-col items-start",onClick:q,children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsx("h1",{className:"text-white text-5xl md:text-7xl font-ui tracking-[0.3em] group-hover:text-[#e7be5a] transition-all duration-700",children:"ASAEL"})}),a.jsx("span",{className:"text-[#C5A059] text-xl md:text-2xl font-light tracking-[0.6em] opacity-80 -mt-2 ml-2 uppercase",children:""})]}),a.jsxs("div",{className:"space-y-6 max-w-md pointer-events-auto",children:[a.jsx(ou,{label:" // SANITY",value:n.sanity,color:"bg-white",glowColor:"rgba(255,255,255,0.4)"}),a.jsx(ou,{label:" // VOCAL",value:n.vocal,color:"bg-[#e7be5a]",glowColor:"rgba(231,190,90,0.6)"}),a.jsx(ou,{label:" // FREE WILL",value:n.freeWill,color:"bg-[#194dc2]",glowColor:"rgba(25,77,194,0.6)"})]})]})]})},ou=({label:n,value:e,color:i,glowColor:s})=>a.jsxs("div",{className:"w-full group",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[a.jsx("span",{className:"text-[10px] font-ui text-white/70 tracking-[0.3em] uppercase font-bold",children:n}),a.jsxs("span",{className:"text-xl font-ui font-light transition-all duration-500",style:{color:i==="bg-white"?"white":i.replace("bg-",""),textShadow:`0 0 15px ${s}`},children:[e,"%"]})]}),a.jsx("div",{className:"h-[3px] w-full bg-white/10 relative rounded-full overflow-hidden shadow-inner",children:a.jsx("div",{className:`h-full ${i} transition-all duration-[2s] ease-out shadow-[0_0_10px_rgba(255,255,255,0.2)]`,style:{width:`${e}%`}})})]}),BE=({wordbook:n,onRemoveWord:e,onToggleReference:i,pendingReferences:s=[]})=>{const[r,u]=D.useState(""),[f,g]=D.useState("all"),[x,h]=D.useState(!1),[v,b]=D.useState(!1),[C,A]=D.useState(!1),T=D.useRef(null);D.useEffect(()=>{"speechSynthesis"in window&&window.speechSynthesis.getVoices()},[]);const E=D.useMemo(()=>Array.from(new Set(n.map(V=>V.turnGroup))).sort((V,ce)=>V-ce),[n]),w=D.useMemo(()=>n.filter(U=>{const V=U.original.toLowerCase().includes(r.toLowerCase())||U.meaning.toLowerCase().includes(r.toLowerCase()),ce=f==="all"||U.turnGroup===f;return V&&ce}),[n,r,f]),R=U=>{const V=U*10+1,ce=(U+1)*10;return` ${V}-${ce}`},I=U=>{"speechSynthesis"in window&&(window.speechSynthesis.cancel(),setTimeout(()=>{const V=new SpeechSynthesisUtterance(U),se=window.speechSynthesis.getVoices().find(xe=>xe.lang.toLowerCase().includes("ko")||xe.lang.toLowerCase().includes("kr"));se&&(V.voice=se),V.lang="ko-KR",V.rate=.8,window.speechSynthesis.speak(V)},50))},M=U=>{U==="meaning"?b(V=>!V):A(V=>!V)},q=U=>{T.current=setTimeout(()=>{M(U==="original"?"meaning":"original"),T.current=null},600)},G=()=>{T.current&&(clearTimeout(T.current),T.current=null)};return a.jsxs("div",{className:"h-full p-4 md:p-8 overflow-y-auto no-scrollbar animate-in slide-in-from-right-10 duration-500 relative",children:[a.jsxs("div",{className:"absolute top-4 right-6 md:top-8 md:right-10 z-20 flex items-center gap-3",children:[x&&a.jsxs("div",{className:"flex items-center gap-2 animate-pulse bg-red-500/10 px-2 py-1 border border-red-500/20 rounded-sm",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),a.jsx("span",{className:"text-[8px] text-red-500 font-ui tracking-widest uppercase font-bold",children:"WR-ACCESS"})]}),a.jsx("button",{onClick:()=>h(!x),className:`px-4 py-1.5 text-[10px] tracking-[0.2em] transition-all rounded-sm font-ui border shadow-lg ${x?"bg-red-950/40 text-red-400 border-red-500/50 shadow-[0_0_15px_rgba(255,0,0,0.3)]":"bg-black/40 text-[#C5A059] border-[#C5A059]/40 hover:bg-[#C5A059]/10 hover:border-[#C5A059]"}`,children:x?"":""})]}),a.jsxs("header",{className:"mb-8 border-b border-[#C5A059]/10 pb-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-6",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("h2",{className:"text-[#C5A059] text-3xl md:text-4xl tracking-[0.3em] font-light font-serif",children:""}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"h-[1px] w-12 bg-[#C5A059]"}),a.jsx("div",{className:"h-[3px] w-[3px] bg-[#C5A059] rotate-45"}),a.jsx("div",{className:"h-[1px] w-4 bg-[#C5A059]/30"})]})]}),a.jsxs("div",{className:"glass-panel border-[#C5A059]/20 px-6 py-3 flex flex-col items-start min-w-[200px] bg-gradient-to-br from-[#121212] to-[#080808]",children:[a.jsx("span",{className:"text-[8px] text-[#C5A059] uppercase tracking-[0.4em] font-ui mb-0.5 opacity-70",children:""}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-3xl text-white font-ui font-bold tracking-tighter",children:n.length.toString().padStart(3,"0")}),a.jsx("span",{className:"text-[8px] text-[#C5A059]/40 font-ui tracking-widest",children:"ARC_VOL.01"})]})]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[a.jsxs("div",{className:"relative flex-1 group",children:[a.jsx("input",{type:"text",placeholder:"...",value:r,onChange:U=>u(U.target.value),className:"w-full bg-[#0A0A0A] border border-[#C5A059]/10 p-3 pl-10 text-xs text-[#C5A059] focus:outline-none focus:border-[#C5A059]/40 transition-all font-light tracking-widest rounded-sm"}),a.jsx("div",{className:"absolute inset-y-0 left-3 flex items-center pointer-events-none text-[#C5A059]/40",children:a.jsx("span",{className:"text-[8px] font-ui",children:"Q_"})})]}),a.jsx("div",{className:"relative w-full md:w-48",children:a.jsxs("select",{value:f==="all"?"all":f,onChange:U=>g(U.target.value==="all"?"all":parseInt(U.target.value)),className:"w-full bg-[#0A0A0A] border border-[#C5A059]/10 p-3 text-[10px] text-[#C5A059] focus:outline-none focus:border-[#C5A059]/40 appearance-none transition-all tracking-[0.1em] cursor-pointer rounded-sm",children:[a.jsx("option",{value:"all",children:" (ALL)"}),E.map(U=>a.jsx("option",{value:U,children:R(U)},U))]})})]})]}),w.length===0?a.jsxs("div",{className:"h-48 flex flex-col items-center justify-center opacity-10 text-center animate-pulse",children:[a.jsx("div",{className:"text-4xl mb-4 font-ui",children:"EMPTY_SET"}),a.jsx("div",{className:"text-[10px] tracking-[0.3em] uppercase",children:""})]}):a.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 pb-20",children:w.map(U=>{const V=s.some(ce=>ce.id===U.id);return a.jsxs("div",{className:`group relative min-h-[110px] p-0 flex flex-row overflow-hidden transition-all duration-500 border rounded-lg bg-[#0a0a0a] ${x?"border-red-900/50 hover:border-red-500/80 shadow-[0_0_20px_rgba(255,0,0,0.05)]":V?"border-[#C5A059] bg-[#C5A059]/5 shadow-[0_0_20px_rgba(197,160,89,0.1)]":"border-[#C5A059]/10 hover:border-[#C5A059]/40 shadow-[0_5px_15px_rgba(0,0,0,0.4)]"}`,children:[a.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-[0.03] overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-full border border-[#C5A059] rounded-full scale-[2] -translate-x-1/2"}),a.jsx("div",{className:"absolute bottom-4 left-4 text-[10px] text-[#C5A059]",children:""})]}),a.jsxs("div",{onPointerDown:()=>q("original"),onPointerUp:G,onPointerLeave:G,onDoubleClick:()=>M("meaning"),className:"relative flex-grow flex flex-col items-start justify-center pl-6 pr-4 py-4 z-10 border-r border-[#C5A059]/5 min-w-0 cursor-help select-none active:bg-white/5 transition-colors",children:[a.jsx("div",{className:`ko-text text-3xl md:text-4xl transition-all duration-500 tracking-tighter whitespace-normal break-all leading-tight w-full ${C?"blur-md opacity-20 text-[#C5A059]":"text-white group-hover:text-[#C5A059]"}`,children:C?"":U.original}),a.jsxs("div",{className:`text-[11px] md:text-[12px] text-[#C5A059]/50 italic font-ui mt-2 tracking-widest opacity-80 transition-opacity duration-500 ${C?"opacity-0":""}`,children:["[",U.pronunciation,"]"]}),C&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsx("span",{className:"text-[8px] text-[#C5A059]/40 font-ui tracking-[0.3em] animate-pulse",children:"GLOBAL_MASK_ON"})})]}),a.jsxs("div",{onPointerDown:()=>q("meaning"),onPointerUp:G,onPointerLeave:G,onDoubleClick:()=>M("original"),className:"relative w-[35%] md:w-[30%] flex flex-col p-4 z-10 items-end justify-between text-right bg-black/20 cursor-help select-none active:bg-white/10 transition-colors",children:[a.jsx("div",{className:"px-2 py-0.5 bg-[#C5A059]/5 border border-[#C5A059]/10 rounded text-[7px] text-[#C5A059]/60 font-ui tracking-widest uppercase",children:R(U.turnGroup)}),a.jsx("div",{className:"my-2 flex-1 flex items-center justify-end w-full",children:a.jsx("div",{className:`text-lg md:text-xl font-bold leading-tight tracking-wide font-serif break-words transition-all duration-500 ${v?"blur-md opacity-20 text-[#C5A059]":"text-white/90"}`,children:v?"ENCRYPTED":U.meaning})}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:!x&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:ce=>{ce.stopPropagation(),i==null||i(U)},className:`w-7 h-7 flex items-center justify-center border rounded-full transition-all active:scale-90 ${V?"bg-[#C5A059] text-black border-[#C5A059] shadow-[0_0_10px_rgba(197,160,89,0.4)]":"border-[#C5A059]/20 text-[#C5A059]/40 hover:text-[#C5A059] hover:bg-[#C5A059]/10 hover:border-[#C5A059]"}`,title:"",children:a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),a.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]})}),a.jsx("button",{onClick:ce=>{ce.stopPropagation(),I(U.original)},className:"w-7 h-7 flex items-center justify-center border border-[#C5A059]/20 rounded-full text-[#C5A059]/40 hover:text-[#C5A059] hover:bg-[#C5A059]/10 hover:border-[#C5A059] transition-all active:scale-90",children:a.jsxs("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[a.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),a.jsx("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07"})]})})]})})]}),x&&a.jsxs("button",{onClick:()=>{Po.recordDelete(U.original,U.meaning),e(U.id)},className:"absolute inset-0 bg-red-950/70 backdrop-blur-[2px] opacity-0 group-hover:opacity-100 transition-opacity z-20 flex flex-col items-center justify-center gap-2",children:[a.jsx("div",{className:"w-10 h-10 border border-red-500 rounded-full flex items-center justify-center text-red-500 text-xl",children:""}),a.jsx("span",{className:"text-[8px] text-red-500 font-ui tracking-[0.4em] font-bold uppercase",children:"Purge Unit"})]}),a.jsx("div",{className:"absolute top-0 right-0 w-1.5 h-1.5 border-t border-r border-[#C5A059]/30"}),a.jsx("div",{className:"absolute bottom-0 right-0 w-1.5 h-1.5 border-b border-r border-[#C5A059]/30"})]},U.id)})}),(v||C)&&a.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-30 animate-in fade-in slide-in-from-bottom-2",children:a.jsx("button",{onClick:()=>{b(!1),A(!1)},className:"px-6 py-2 bg-[#C5A059] text-black text-[10px] font-ui tracking-[0.3em] font-bold rounded-full shadow-[0_0_20px_rgba(197,160,89,0.5)] hover:scale-105 active:scale-95 transition-all",children:"RESTORE ALL FRAGMENTS"})}),a.jsx("div",{className:"fixed bottom-4 right-4 opacity-[0.01] pointer-events-none select-none -z-10 text-[10rem] font-ui leading-none",children:"ARC"})]})},iu=120,GE=({stats:n,setStats:e,onExit:i})=>{const[s,r]=D.useState("KO_CN"),[u,f]=D.useState("lobby"),[g,x]=D.useState("acting"),[h,v]=D.useState(10),[b,C]=D.useState(!1),[A,T]=D.useState(null),[E,w]=D.useState(""),[R,I]=D.useState(0),[M,q]=D.useState(iu),[G,U]=D.useState(!1),[V,ce]=D.useState(null),[se,xe]=D.useState([]),[de,Q]=D.useState(new Set),[re,J]=D.useState(0),[le,B]=D.useState(!1),j=D.useRef(null);D.useEffect(()=>{const me=localStorage.getItem("SR_SYSTEM_LANGUAGE");me&&r(me)},[]);const Z=()=>{try{const me=localStorage.getItem("casino_used_words");return me?JSON.parse(me):[]}catch{return[]}},X=me=>{localStorage.setItem("casino_used_words",JSON.stringify(me))},$=me=>me===0?1:me===1?2:3,N=(me,ve)=>{const je=me>=100?5:me>=50?3:me>=20?2:1.5;return Math.round(je*(ve===1?1:ve===2?1.3:1.8)*10)/10},F=me=>{switch(me){case 1:return"";case 2:return"";default:return"/"}};D.useEffect(()=>(G&&M>0?j.current=setInterval(()=>{q(me=>me-1)},1e3):M===0&&G&&ue(),()=>{j.current&&clearInterval(j.current)}),[G,M]);const z=async(me=0)=>{C(!0),B(!1),ce(null);try{const ve=Z(),je=$(me),qe=await dE(se,je,ve);T(qe),qe.secretWord&&Po.recordCasinoAppearance(qe.secretWord)}catch{console.error("")}finally{C(!1)}},W=async()=>{I(0),q(iu),xe([]),Q(new Set),J(-h),await z(0),f("playing"),U(!0)},ue=()=>{U(!1),f("result");const me=$(Math.min(R,2)),ve=N(h,me),qe=Math.floor(R*h*ve)-h;e(Je=>({...Je,stars:Math.max(0,Je.stars+qe),sanity:Math.max(0,Math.min(100,Je.sanity+(R>0?R*2:-10)))})),J(qe)},fe=async()=>{if(!E.trim()||!A||b)return;C(!0);const me=document.getElementById("casino-input");me==null||me.classList.add("animate-shake"),setTimeout(()=>me==null?void 0:me.classList.remove("animate-shake"),500);const ve=[...se,{id:Date.now().toString(),role:"user",content:E}];try{const je=Z(),qe=R,Je=$(qe),tt=await fE(A.secretWord,A.secretMeaning,E,ve,qe,Je,je),at=[...ve,{id:(Date.now()+1).toString(),role:"assistant",content:tt.feedbackNarration}];if(tt.isCorrect){Po.recordCasinoResult(A.secretWord,!0),I(Jt=>Jt+1),w(""),ce(tt.feedbackNarration),Q(Jt=>new Set([...Jt,A.secretWord])),xe(at);const _t=[...je,A.secretWord];X(_t),tt.nextSecretWord&&!_t.includes(tt.nextSecretWord)?T({secretWord:tt.nextSecretWord,secretMeaning:tt.nextSecretMeaning,actingNarration:tt.nextActingNarration,hint:tt.nextHint}):await z(R+1)}else Po.recordCasinoResult(A.secretWord,!1),ce(tt.feedbackNarration),B(!0),T(_t=>_t?{..._t,hint:tt.nextHint}:null),xe(at)}catch{ce(""),xe([...ve,{id:(Date.now()+2).toString(),role:"assistant",content:""}])}finally{C(!1)}},Ee=(me,ve,je="left")=>a.jsx("header",{className:"mb-4 border-b border-[#8B0000]/20 pb-4 shrink-0 w-full relative",children:a.jsxs("div",{className:`flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4 ${je==="right"?"md:flex-row-reverse":""}`,children:[a.jsxs("div",{className:`space-y-0.5 ${je==="right"?"text-right":"text-left"}`,children:[a.jsx("h2",{className:"text-[#ff4d4d] text-3xl md:text-4xl tracking-[0.3em] font-light font-serif",children:me}),a.jsxs("div",{className:`flex items-center gap-1 ${je==="right"?"justify-end":""}`,children:[a.jsx("div",{className:"h-[1px] w-12 bg-[#8B0000]"}),a.jsx("div",{className:"h-[3px] w-[3px] bg-[#8B0000] rotate-45"}),a.jsx("div",{className:"h-[1px] w-4 bg-[#8B0000]/30"})]})]}),a.jsx("div",{className:je==="right"?"text-left":"text-right",children:a.jsx("span",{className:"text-[10px] text-white/30 tracking-widest uppercase",children:ve})})]})});if(u==="lobby")return a.jsxs("div",{className:"h-full flex flex-col p-4 md:p-8 overflow-hidden bg-black relative animate-in fade-in duration-500",children:[a.jsx("button",{onClick:i,className:"absolute top-10 left-8 text-[10px] text-[#8B0000] font-serif hover:text-white transition-all tracking-[0.2em] z-50",children:" "}),Ee("",": "+n.stars,"right"),a.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar py-8 px-2 space-y-8",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs("div",{onClick:()=>{x("acting"),f("intro")},className:"relative h-64 cursor-pointer group overflow-hidden border-2 border-[#8B0000]/30 transition-all hover:border-[#ff4d4d] shadow-[6px_6px_0_#8B0000] hover:shadow-[10px_10px_0_#ff4d4d]",children:[a.jsx("div",{className:"absolute inset-0 bg-cover bg-center grayscale brightness-[0.3] group-hover:grayscale-0 group-hover:brightness-[0.5] transition-all duration-700",style:{backgroundImage:"url('https://images.unsplash.com/photo-1596838132731-3301c3fd4317?auto=format&fit=crop&q=80&w=800')"}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent"}),a.jsxs("div",{className:"absolute bottom-6 left-6",children:[a.jsx("div",{className:"text-[#ff4d4d] font-serif text-3xl font-bold tracking-[0.2em]",children:""}),a.jsx("div",{className:"text-white/40 text-xs mt-2 font-serif",children:""})]}),a.jsx("div",{className:"absolute top-4 right-4 bg-[#8B0000] text-white text-[8px] px-2 py-1 font-bold tracking-widest",children:""})]}),a.jsxs("div",{className:"relative h-64 border-2 border-white/5 bg-white/5 opacity-40 flex flex-col items-center justify-center space-y-4",children:[a.jsx("div",{className:"text-4xl",children:""}),a.jsx("div",{className:"text-[#C5A059] font-serif tracking-[0.3em]",children:""})]})]})})]});if(u==="intro")return a.jsx("div",{className:"h-full flex flex-col items-center justify-center p-4 bg-black animate-in zoom-in-95 duration-500",children:a.jsxs("div",{className:"max-w-xl w-full glass-panel p-6 md:p-8 border-[#8B0000]/40 space-y-6 bg-gradient-to-b from-[#1a0000] to-black",children:[a.jsx("h2",{className:"text-[#ff4d4d] text-2xl text-center font-serif font-bold tracking-[0.3em]",children:"  "}),a.jsxs("div",{className:"space-y-4 text-white/70 font-serif text-sm leading-snug",children:[a.jsxs("p",{className:"border-l-2 border-[#8B0000] pl-4",children:["",a.jsx("span",{className:"text-[#ff4d4d]",children:""}),"",s?go(s).sourceLanguage:"",""]}),a.jsxs("p",{className:"border-l-2 border-[#8B0000] pl-4",children:[s?go(s).sourceLanguage:"",""]}),a.jsxs("p",{className:"border-l-2 border-[#8B0000] pl-4",children:["",a.jsx("span",{className:"text-[#ff4d4d]",children:""}),""]}),a.jsxs("p",{className:"border-l-2 border-[#8B0000] pl-4",children:["",a.jsx("span",{className:"text-[#ff4d4d]",children:""}),""]}),a.jsxs("p",{className:"border-l-2 border-[#8B0000] pl-4",children:[a.jsx("span",{className:"text-[#ff4d4d]",children:"120"}),""]}),a.jsx("p",{className:"border-l-2 border-[#8B0000] pl-4 text-xs opacity-60 italic",children:""})]}),a.jsx("button",{onClick:()=>f("betting"),className:"w-full py-3 bg-[#8B0000] text-white text-xs font-bold tracking-[0.5em] hover:bg-[#ff0000] transition-all",children:""})]})});if(u==="betting")return a.jsx("div",{className:"h-full flex flex-col items-center justify-center p-8 bg-black animate-in fade-in duration-500",children:a.jsxs("div",{className:"max-w-md w-full glass-panel p-10 border-[#8B0000]/40 space-y-8",children:[a.jsxs("div",{className:"text-center space-y-2",children:[a.jsx("h2",{className:"text-[#ff4d4d] text-2xl font-serif font-bold tracking-[0.2em]",children:""}),a.jsxs("div",{className:"flex flex-col gap-1 mt-2",children:[a.jsx("span",{className:"text-[9px] text-white/30 uppercase tracking-[0.1em]",children:""}),a.jsxs("div",{className:"flex justify-center gap-3 text-[8px] text-[#ff4d4d]/60 font-mono",children:[a.jsx("span",{children:"10+ (1.5x)"}),a.jsx("span",{children:"20+ (2.0x)"}),a.jsx("span",{children:"50+ (3.0x)"}),a.jsx("span",{children:"100+ (5.0x)"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",value:h,onChange:me=>v(Math.min(n.stars,Math.max(1,parseInt(me.target.value)||0))),className:"w-full bg-black border-2 border-[#8B0000]/30 p-4 text-3xl text-center text-[#ff4d4d] font-ui focus:outline-none focus:border-[#ff4d4d] transition-all rounded-sm"}),a.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 right-4 text-[#8B0000]",children:""})]}),a.jsx("div",{className:"grid grid-cols-4 gap-2",children:[10,50,100,n.stars].map((me,ve)=>a.jsx("button",{onClick:()=>v(me),className:"py-2 bg-[#8B0000]/10 border border-[#8B0000]/20 text-[10px] text-[#8B0000] hover:bg-[#8B0000]/30 transition-all font-bold",children:me===n.stars?"":me},ve))})]}),a.jsx("button",{disabled:n.stars<h||h<=0||b,onClick:W,className:"w-full py-4 bg-[#8B0000] text-white text-xs font-bold tracking-[0.5em] hover:bg-[#ff0000] transition-all shadow-[0_0_30px_rgba(139,0,0,0.3)] disabled:opacity-30 flex items-center justify-center gap-3",children:b?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-3 h-3 border border-white border-t-transparent animate-spin rounded-full"}),"..."]}):" 120 "}),a.jsx("button",{onClick:()=>f("lobby"),className:"w-full text-[10px] text-white/20 hover:text-white/40 font-serif tracking-widest uppercase",children:""})]})});if(u==="playing"){const me=$(R);return a.jsxs("div",{className:"h-full flex flex-col p-6 animate-in fade-in duration-500 bg-black overflow-hidden relative",children:[a.jsxs("header",{className:"flex justify-between items-center border-b border-[#8B0000]/20 pb-4 mb-8 shrink-0",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("span",{className:"text-[#ff4d4d] font-serif text-lg font-bold tracking-widest",children:[M,"s"]}),a.jsx("div",{className:"w-32 h-1 bg-white/5 mt-1",children:a.jsx("div",{className:"h-full bg-[#ff4d4d] transition-all duration-1000",style:{width:`${M/iu*100}%`}})})]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsxs("div",{className:"text-[10px] text-[#C5A059] uppercase tracking-widest",children:[" ",R+1," : ",a.jsx("span",{className:"text-[#ff4d4d] font-bold",children:F(me)})]}),a.jsxs("div",{className:"text-white/20 text-[10px] uppercase tracking-widest mt-1",children:[": ",a.jsxs("span",{className:"text-[#ff4d4d] font-bold",children:[N(h,me),"x"]})]}),a.jsxs("div",{className:"text-white/20 text-[10px] uppercase tracking-widest mt-1",children:[": ",a.jsx("span",{className:"text-[#ff4d4d] font-bold",children:R})]})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center max-w-2xl mx-auto w-full space-y-8 relative",children:[a.jsxs("div",{className:"w-full glass-panel p-6 md:p-10 border-[#C5A059]/20 relative overflow-hidden bg-[#050505] shadow-[0_0_50px_rgba(0,0,0,1)]",children:[a.jsx("div",{className:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-[#8B0000]/50 to-transparent"}),V&&a.jsx("div",{className:"mb-6 pb-4 border-b border-[#8B0000]/20 animate-in slide-in-from-top-2",children:a.jsxs("p",{className:"text-[#ff4d4d] text-sm italic font-serif opacity-80 leading-relaxed",children:["",V,""]})}),b&&!V?a.jsxs("div",{className:"flex flex-col items-center justify-center py-10 space-y-4",children:[a.jsx("div",{className:"w-6 h-6 border-2 border-[#ff4d4d] border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"text-[10px] text-[#ff4d4d] tracking-[0.4em] animate-pulse",children:"..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-white text-lg md:text-xl font-light italic leading-loose font-serif",children:A==null?void 0:A.actingNarration}),a.jsxs("div",{className:"mt-6 text-center",children:[a.jsx("span",{className:"text-[#C5A059]/40 text-[10px] uppercase tracking-widest",children:""}),a.jsx("p",{className:"text-4xl md:text-5xl font-bold text-[#C5A059] mt-2 tracking-widest opacity-90",children:A==null?void 0:A.secretWord})]}),a.jsxs("div",{className:"mt-6 pt-4 border-t border-white/5 flex justify-between items-center",children:[le&&(A!=null&&A.hint)?a.jsxs("span",{className:"text-[10px] text-[#ff4d4d] italic animate-pulse",children:[": ",A.hint]}):a.jsx("span",{className:"text-[10px] text-white/10 italic",children:""}),b&&V&&a.jsx("div",{className:"w-3 h-3 border border-[#ff4d4d] border-t-transparent animate-spin rounded-full"})]})]})]}),a.jsxs("div",{className:"w-full space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{id:"casino-input",autoFocus:!0,disabled:b,type:"text",value:E,onChange:ve=>w(ve.target.value),onKeyDown:ve=>ve.key==="Enter"&&fe(),placeholder:"...",className:"flex-1 bg-white/5 border border-[#8B0000]/40 p-4 text-white text-center focus:outline-none focus:border-[#ff4d4d] transition-all rounded-sm text-lg disabled:opacity-50"}),a.jsx("button",{onClick:fe,disabled:b,className:"px-8 bg-[#8B0000] text-white text-xs font-bold tracking-widest hover:bg-[#ff0000] transition-all shadow-lg disabled:opacity-50",children:""})]}),a.jsx("p",{className:"text-center text-[8px] text-white/20 uppercase tracking-[0.4em]",children:""})]})]})]})}if(u==="result"){const me=$(Math.min(R,2)),ve=N(h,me),je=Math.floor(R*h*ve),qe=re>=0;return a.jsx("div",{className:"h-full flex flex-col items-center justify-center p-8 bg-black animate-in zoom-in-95 duration-500",children:a.jsxs("div",{className:"max-w-xl w-full text-center space-y-8",children:[a.jsx("div",{className:`text-7xl font-serif font-bold tracking-tighter ${qe?"text-green-500 drop-shadow-[0_0_30px_rgba(34,197,94,0.4)]":"text-red-600 drop-shadow-[0_0_30px_rgba(220,38,38,0.4)]"}`,children:qe?"":""}),a.jsxs("div",{className:"glass-panel p-8 border-[#C5A059]/30 space-y-6 text-left relative overflow-hidden",children:[a.jsx("div",{className:`absolute top-0 left-0 h-full w-1 ${qe?"bg-green-500":"bg-red-600"}`}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-[10px] text-[#C5A059] font-serif tracking-widest uppercase mb-4",children:""}),a.jsxs("div",{className:"flex justify-between border-b border-white/5 py-2",children:[a.jsx("span",{className:"text-white/40 text-xs",children:""}),a.jsx("span",{className:"text-white text-xs",children:"120s"})]}),a.jsxs("div",{className:"flex justify-between border-b border-white/5 py-2",children:[a.jsx("span",{className:"text-white/40 text-xs",children:""}),a.jsx("span",{className:"text-white text-xs",children:F(me)})]}),a.jsxs("div",{className:"flex justify-between border-b border-white/5 py-2",children:[a.jsx("span",{className:"text-white/40 text-xs",children:""}),a.jsxs("span",{className:"text-white text-xs font-bold",children:[R," "]})]}),a.jsxs("div",{className:"flex justify-between border-b border-white/5 py-2",children:[a.jsx("span",{className:"text-white/40 text-xs",children:""}),a.jsxs("span",{className:"text-white text-xs",children:["+",je," "]})]}),a.jsxs("div",{className:"flex justify-between py-2",children:[a.jsx("span",{className:"text-white/40 text-xs",children:""}),a.jsxs("span",{className:"text-white text-xs",children:["-",h," "]})]}),a.jsxs("div",{className:"flex justify-between py-2 pt-4 border-t border-white/20",children:[a.jsx("span",{className:"text-[#C5A059] text-xs font-bold",children:""}),a.jsxs("span",{className:`text-lg font-bold ${re>=0?"text-green-400":"text-red-500"}`,children:[re>=0?`+${re}`:re," "]})]})]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:()=>f("betting"),className:"flex-1 py-4 bg-[#8B0000] text-white text-xs font-bold tracking-[0.5em] hover:bg-[#ff0000] transition-all",children:""}),a.jsx("button",{onClick:()=>f("lobby"),className:"flex-1 py-4 border border-[#C5A059] text-[#C5A059] text-xs font-bold tracking-[0.5em] hover:bg-[#C5A059] hover:text-black transition-all",children:""})]})]})})}return null},PE=({wordbook:n,stats:e,setStats:i})=>{const[s,r]=D.useState("mode_select"),[u,f]=D.useState("flashcard"),[g,x]=D.useState([]),[h,v]=D.useState(0),[b,C]=D.useState(0),[A,T]=D.useState(!1),[E,w]=D.useState([]),[R,I]=D.useState(!1),[M,q]=D.useState(null),[G,U]=D.useState("KO_TO_CN"),[V,ce]=D.useState(""),[se,xe]=D.useState(!1),de=e.trainingTotalCount>0?Math.round(e.trainingCorrectCount/e.trainingTotalCount*100):0,Q=(Z,X,$)=>{const N=X[Z];if(T(!1),ce(""),xe(!1),I(!1),q(null),$==="choice"){const F=Math.random()>.5?"KO_TO_CN":"CN_TO_KO";U(F);const z=n.filter(ue=>ue.id!==N.id).sort(()=>.5-Math.random()).slice(0,3),W=[{text:F==="KO_TO_CN"?N.meaning:N.original,isCorrect:!0},...z.map(ue=>({text:F==="KO_TO_CN"?ue.meaning:ue.original,isCorrect:!1}))].sort(()=>.5-Math.random());w(W)}},re=Z=>{f(Z),r("count_select")},J=Z=>{const $=[...n].sort(()=>.5-Math.random()).slice(0,Math.min(Z,n.length));x($),v(0),C(0),r("playing"),Q(0,$,u)},le=Z=>{const X=g[h];X&&Po.recordReview(X.original,Z),Z&&C($=>$+1),i($=>({...$,trainingTotalCount:$.trainingTotalCount+1,trainingCorrectCount:$.trainingCorrectCount+(Z?1:0),vocal:Math.min(100,$.vocal+(Z?1:0)),exp:($.exp+(Z?2:0))%100,stars:$.stars+(Z?5:0)}))},B=()=>{if(h+1<g.length){const Z=h+1;v(Z),Q(Z,g,u)}else r("summary")};if(s==="casino")return a.jsx(GE,{stats:e,setStats:i,onExit:()=>r("mode_select")});const j=()=>a.jsx("header",{className:"mb-4 border-b border-[#C5A059]/10 pb-4 shrink-0",children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4",children:[a.jsxs("div",{className:"space-y-0.5",children:[a.jsx("h2",{className:"text-[#C5A059] text-3xl md:text-4xl tracking-[0.3em] font-light font-serif",children:""}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("div",{className:"h-[1px] w-12 bg-[#C5A059]"}),a.jsx("div",{className:"h-[3px] w-[3px] bg-[#C5A059] rotate-45"}),a.jsx("div",{className:"h-[1px] w-4 bg-[#C5A059]/30"})]})]}),a.jsxs("div",{className:"glass-panel border-[#C5A059]/20 px-6 py-2 flex flex-col items-start min-w-[200px] bg-black/40 backdrop-blur-md",children:[a.jsx("span",{className:"text-[10px] text-[#C5A059] uppercase tracking-[0.4em] font-serif mb-0.5 opacity-70",children:""}),a.jsxs("div",{className:"flex items-end gap-6",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[8px] text-[#C5A059]/40 font-ui tracking-widest uppercase",children:""}),a.jsx("span",{className:"text-xl text-white font-ui font-bold tracking-tighter",children:e.trainingTotalCount.toString().padStart(3,"0")})]}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[8px] text-[#C5A059]/40 font-ui tracking-widest uppercase",children:""}),a.jsxs("span",{className:"text-xl text-[#C5A059] font-ui font-bold tracking-tighter",children:[de,"%"]})]})]})]})]})});if(n.length<1&&s!=="casino")return a.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-12 text-center animate-in fade-in duration-500 bg-black",children:[a.jsxs("div",{className:"space-y-4 mb-12",children:[a.jsx("div",{className:"text-4xl opacity-20",children:""}),a.jsx("div",{className:"text-[#C5A059] font-ui text-[10px] tracking-[0.4em]",children:"ARCHIVES EMPTY"}),a.jsx("p",{className:"text-[10px] text-white/20 max-w-xs uppercase tracking-widest leading-relaxed",children:""})]}),a.jsx("button",{onClick:()=>r("casino"),className:"px-12 py-4 bg-[#8B0000]/20 border border-[#8B0000] text-[#ff4d4d] text-xs font-bold tracking-[0.5em] hover:bg-[#8B0000] hover:text-white transition-all shadow-[0_0_20px_rgba(139,0,0,0.3)]",children:" // GO CASINO"})]});if(s==="mode_select")return a.jsxs("div",{className:"h-full flex flex-col p-4 md:p-8 overflow-hidden animate-in slide-in-from-right-10 duration-500 bg-black relative",children:[j(),a.jsx("style",{dangerouslySetInnerHTML:{__html:`
          .chaos-btn {
            width: 100%; height: 180px; position: relative; cursor: pointer;
            background: rgba(20, 20, 20, 0.4); backdrop-filter: blur(8px);
            border: 1.5px solid rgba(197, 160, 89, 0.2);
            transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: 0 0 0 1px rgba(197, 160, 89, 0.1), 6px 6px 0 -1px #000, 6px 6px 0 0px #C5A059;
            overflow: hidden;
          }
          .chaos-btn:hover {
            transform: translate(-2px, -2px);
            border: 1.5px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 0 20px rgba(197, 160, 89, 0.2), 10px 10px 0 -1px #000, 10px 10px 0 0px rgba(197, 160, 89, 0.8);
          }
          .casino-btn {
            border-color: #8B0000;
            box-shadow: 0 0 0 1px rgba(139, 0, 0, 0.1), 6px 6px 0 -1px #000, 6px 6px 0 0px #8B0000;
          }
          .casino-btn:hover {
             border-color: #ff4d4d;
             box-shadow: 0 0 20px rgba(139, 0, 0, 0.3), 10px 10px 0 -1px #000, 10px 10px 0 0px #ff4d4d;
          }
          .chaos-bg-img {
            position: absolute; inset: 0; background-size: cover; background-position: center;
            filter: brightness(0.45) blur(3px) grayscale(0.3); z-index: 1;
            transition: transform 1.2s ease, filter 0.8s ease;
          }
          .chaos-btn:hover .chaos-bg-img { filter: brightness(0.65) blur(1px) grayscale(0); transform: scale(1.1); }
          .chaos-scanlines {
            position: absolute; inset: 0; pointer-events: none; z-index: 3;
            background: repeating-linear-gradient(0deg, transparent 0px, transparent 2px, rgba(197, 160, 89, 0.05) 2px, rgba(197, 160, 89, 0.05) 4px);
          }
          .rec-indicator {
            position: absolute; top: 16px; left: 16px; display: flex; align-items: center; gap: 8px; z-index: 10;
          }
          .rec-dot {
            width: 8px; height: 8px; background: #ff0000; border-radius: 50%;
            box-shadow: 0 0 12px #ff0000; animation: rec-blink 1s steps(2) infinite;
          }
          @keyframes rec-blink { 0% { opacity: 0; } 100% { opacity: 1; } }
          .rec-label {
            font-size: 8px; color: #ff0000; font-family: 'Cinzel', serif; letter-spacing: 2px; font-weight: bold; text-shadow: 0 0 5px rgba(255,0,0,0.5);
          }
          .card-footer { position: absolute; bottom: 16px; left: 16px; right: 16px; display: flex; justify-content: space-between; align-items: flex-end; z-index: 10; }
          .card-title-cn { font-weight: 700; font-size: 28px; color: #C5A059; letter-spacing: 4px; text-shadow: 2px 2px 4px rgba(0,0,0,0.8); font-family: 'Noto Serif SC', serif; line-height: 1; }
          .card-sub-ko { font-family: 'Nanum Myeongjo', serif; color: rgba(255, 255, 255, 0.6); font-size: 11px; letter-spacing: 1.5px; line-height: 1; }
        `}}),a.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar space-y-6 pb-24 pt-2 px-2",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"chaos-btn",onClick:()=>re("flashcard"),children:[a.jsx("div",{className:"chaos-bg-img",style:{backgroundImage:`url('${e.uiPreferences.trainingBgFlashcard}')`}}),a.jsx("div",{className:"chaos-scanlines"}),a.jsxs("div",{className:"rec-indicator",children:[a.jsx("div",{className:"rec-dot"}),a.jsx("div",{className:"rec-label",children:"REC [ARCHIVE_F01]"})]}),a.jsxs("div",{className:"card-footer",children:[a.jsx("div",{className:"card-sub-ko",children:" "}),a.jsx("div",{className:"card-title-cn",children:""})]})]}),a.jsxs("div",{className:"chaos-btn",onClick:()=>re("choice"),children:[a.jsx("div",{className:"chaos-bg-img",style:{backgroundImage:`url('${e.uiPreferences.trainingBgChoice}')`}}),a.jsx("div",{className:"chaos-scanlines"}),a.jsxs("div",{className:"rec-indicator",children:[a.jsx("div",{className:"rec-dot"}),a.jsx("div",{className:"rec-label",children:"REC [ARCHIVE_C02]"})]}),a.jsxs("div",{className:"card-footer",children:[a.jsx("div",{className:"card-sub-ko",children:" "}),a.jsx("div",{className:"card-title-cn",children:""})]})]}),a.jsxs("div",{className:"chaos-btn",onClick:()=>re("dictation"),children:[a.jsx("div",{className:"chaos-bg-img",style:{backgroundImage:`url('${e.uiPreferences.trainingBgDictation}')`}}),a.jsx("div",{className:"chaos-scanlines"}),a.jsxs("div",{className:"rec-indicator",children:[a.jsx("div",{className:"rec-dot"}),a.jsx("div",{className:"rec-label",children:"REC [ARCHIVE_D03]"})]}),a.jsxs("div",{className:"card-footer",children:[a.jsx("div",{className:"card-sub-ko",children:" "}),a.jsx("div",{className:"card-title-cn",children:""})]})]}),a.jsxs("div",{className:"chaos-btn casino-btn",onClick:()=>r("casino"),children:[a.jsx("div",{className:"chaos-bg-img",style:{backgroundImage:"url('https://images.unsplash.com/photo-1596838132731-3301c3fd4317?auto=format&fit=crop&q=80&w=800')",filter:"brightness(0.3) blur(2px) sepia(0.5)"}}),a.jsx("div",{className:"chaos-scanlines"}),a.jsxs("div",{className:"rec-indicator",children:[a.jsx("div",{className:"rec-dot",style:{backgroundColor:"#ffcc00",boxShadow:"0 0 10px #ffcc00"}}),a.jsx("div",{className:"rec-label",style:{color:"#ffcc00"},children:"[DANGER: CASINO_G04]"})]}),a.jsxs("div",{className:"card-footer",children:[a.jsx("div",{className:"card-sub-ko",style:{color:"#ff4d4d"},children:" "}),a.jsx("div",{className:"card-title-cn",style:{color:"#ff4d4d"},children:""})]})]})]})})]});if(s==="count_select")return a.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 space-y-8 animate-in fade-in zoom-in-95 duration-500 bg-black",children:[a.jsx("button",{onClick:()=>r("mode_select"),className:"absolute top-8 left-8 text-[10px] text-[#C5A059] font-serif hover:brightness-150 transition-all tracking-[0.2em]",children:" "}),a.jsx("h2",{className:"text-white text-3xl tracking-[0.3em] font-light font-serif",children:""}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 w-full max-w-2xl",children:[5,10,20].map(Z=>a.jsxs("button",{onClick:()=>J(Z),className:"group p-8 border border-[#C5A059]/20 bg-black/40 hover:border-[#C5A059] transition-all flex flex-col items-center justify-center rounded-sm",children:[a.jsx("span",{className:"text-4xl font-ui text-[#C5A059] mb-1",children:Z}),a.jsx("span",{className:"text-[10px] text-white/40 tracking-[0.3em] uppercase",children:""})]},Z))})]});if(s==="playing"){const Z=g[h];return a.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-4 space-y-6 animate-in fade-in duration-500 bg-black",children:[a.jsx("div",{className:"w-full max-w-xl flex justify-between items-end border-b border-[#C5A059]/10 pb-1",children:a.jsxs("div",{className:"text-[#C5A059] font-ui text-[10px] tracking-[0.4em]",children:["FRAGMENT ",h+1," / ",g.length]})}),a.jsxs("div",{className:"w-full max-w-xl min-h-[350px] glass-panel border border-[#C5A059]/20 flex flex-col items-center justify-center p-8 relative overflow-hidden bg-[#0a0a0a]/80 shadow-[0_0_50px_rgba(0,0,0,0.8)]",children:[a.jsx("div",{className:"chaos-scanlines"}),u==="flashcard"&&a.jsx("div",{className:"w-full h-full flex flex-col items-center justify-center cursor-pointer z-10",onClick:()=>T(!A),children:A?a.jsxs("div",{className:"text-center animate-in zoom-in-95",children:[a.jsx("div",{className:"text-4xl text-[#C5A059] mb-4 font-serif font-bold",children:Z.meaning}),a.jsxs("div",{className:"text-[12px] text-white/40 italic font-ui tracking-[0.2em]",children:["[",Z.pronunciation,"]"]})]}):a.jsx("div",{className:"ko-text text-6xl text-white text-center tracking-tight animate-in zoom-in-95",children:Z.original})}),u==="choice"&&a.jsxs("div",{className:"w-full h-full flex flex-col items-center z-10",children:[a.jsx("div",{className:"mb-12 text-center",children:a.jsx("div",{className:"text-5xl text-white font-bold",children:G==="KO_TO_CN"?Z.original:Z.meaning})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 w-full",children:E.map((X,$)=>a.jsx("button",{disabled:R,onClick:()=>{I(!0),q($),le(X.isCorrect),setTimeout(()=>B(),1500)},className:`p-4 border text-sm transition-all text-center rounded-sm font-serif tracking-widest ${R?X.isCorrect?"bg-green-900/40 border-green-500 text-white":M===$?"bg-red-900/40 border-red-500 text-white/50":"border-white/5 text-white/10":"border-[#C5A059]/20 text-white/60 hover:border-[#C5A059] hover:bg-[#C5A059]/10"}`,children:X.text},$))})]}),u==="dictation"&&a.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center z-10",children:[a.jsx("div",{className:"mb-12 text-center",children:a.jsx("div",{className:"text-5xl text-white font-serif font-bold tracking-[0.2em]",children:Z.meaning})}),a.jsx("input",{autoFocus:!0,type:"text",value:V,disabled:se,onChange:X=>ce(X.target.value),onKeyDown:X=>X.key==="Enter"&&(xe(!0),le(V.trim()===Z.original),setTimeout(()=>B(),2e3)),className:`w-full bg-black/40 border-b-2 p-4 text-center ko-text text-3xl focus:outline-none transition-all ${se?V.trim()===Z.original?"border-green-500 text-green-400":"border-red-500 text-red-400":"border-[#C5A059]/30 text-white focus:border-[#C5A059]"}`,placeholder:"..."})]})]}),u==="flashcard"&&a.jsxs("div",{className:"flex gap-4 w-full max-w-xl",children:[a.jsx("button",{onClick:()=>{le(!0),B()},className:"flex-1 py-4 border border-[#C5A059] text-[#C5A059] text-[10px] font-serif tracking-[0.4em] hover:bg-[#C5A059] hover:text-black transition-all",children:""}),a.jsx("button",{onClick:()=>{le(!1),B()},className:"flex-1 py-4 border border-white/10 text-white/30 text-[10px] font-serif tracking-[0.4em] hover:bg-white/5 transition-all",children:""})]}),a.jsx("button",{onClick:()=>r("mode_select"),className:"text-[8px] text-white/10 hover:text-white/40 font-serif underline tracking-[0.3em] transition-all uppercase italic",children:""})]})}return s==="summary"?a.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 space-y-6 animate-in zoom-in-95 duration-500 bg-black",children:[a.jsxs("div",{className:"w-32 h-32 rounded-full border-2 border-[#C5A059] flex items-center justify-center text-3xl font-ui text-[#C5A059] font-bold shadow-[0_0_40px_rgba(197,160,89,0.3)]",children:[Math.round(b/g.length*100),"%"]}),a.jsxs("div",{className:"text-center space-y-1",children:[a.jsx("h3",{className:"text-[#C5A059] font-serif tracking-[0.4em] text-2xl uppercase font-bold",children:""}),a.jsxs("p",{className:"text-[10px] text-white/30 tracking-[0.2em]",children:[" ",b," / ",g.length," "]})]}),a.jsx("button",{onClick:()=>r("mode_select"),className:"px-12 py-3 bg-black border border-[#C5A059] text-[#C5A059] text-[10px] font-serif tracking-[0.3em] hover:bg-[#C5A059] hover:text-black transition-all shadow-[4px_4px_0_#C5A059]",children:""})]}):null},OE=({stats:n,setStats:e})=>{const[i,s]=D.useState(1500),[r,u]=D.useState(1500),[f,g]=D.useState(!1),[x,h]=D.useState(null),v=D.useRef(null),b=(I,M)=>{const q=Math.floor(I/60);let G=Math.floor(q/2),U=0;return q>=5&&(G+=5),q>=15&&(G+=10),M&&(G+=15,U=10),{stars:G,sanity:U}};D.useEffect(()=>(f&&r>0?v.current=setInterval(()=>{u(I=>I-1)},1e3):r===0&&f&&T(),()=>{v.current&&clearInterval(v.current)}),[f,r]);const C=()=>{h(null),g(!0)},A=()=>{if(!f)return;g(!1);const I=i-r;if(I>30){const M=b(I,!1);E(M)}else u(i)},T=()=>{g(!1);const I=b(i,!0);E(I)},E=I=>{h(I),e(M=>({...M,stars:M.stars+I.stars,sanity:Math.min(100,M.sanity+I.sanity),exp:(M.exp+Math.floor(I.stars/2))%100})),u(i)},w=I=>{const M=Math.floor(I/60),q=I%60;return`${M.toString().padStart(2,"0")}:${q.toString().padStart(2,"0")}`},R=(i-r)/i*100;return a.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-8 relative overflow-hidden bg-black",children:[n.uiPreferences.voidWallpaper?a.jsx("div",{className:"absolute inset-0 z-0",children:a.jsx("img",{src:n.uiPreferences.voidWallpaper,className:`w-full h-full object-cover transition-all duration-[3s] ${f?"scale-110 blur-sm":"scale-100 blur-none opacity-40"}`,alt:""})}):a.jsx("div",{className:`absolute inset-0 bg-gradient-to-b from-transparent via-[#C5A059]/5 to-transparent transition-opacity duration-1000 z-0 ${f?"opacity-100":"opacity-0"}`}),a.jsxs("div",{className:"text-center z-10 mb-12 relative",children:[a.jsx("h3",{className:"text-[#C5A059] font-ui tracking-[0.6em] text-4xl mb-4",children:" "}),a.jsx("p",{className:"text-sm text-white/30 max-w-xs mx-auto uppercase tracking-widest leading-relaxed",children:""})]}),a.jsxs("div",{className:"relative flex items-center justify-center mb-16 z-10",children:[f&&a.jsxs("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:[a.jsx("div",{className:"absolute w-64 h-64 border border-[#C5A059]/40 rounded-full animate-ripple",style:{animationDelay:"0s"}}),a.jsx("div",{className:"absolute w-64 h-64 border border-[#C5A059]/30 rounded-full animate-ripple",style:{animationDelay:"2s"}}),a.jsx("div",{className:"absolute w-64 h-64 border border-[#C5A059]/20 rounded-full animate-ripple",style:{animationDelay:"4s"}})]}),a.jsxs("svg",{className:"w-64 h-64 md:w-80 md:h-80 -rotate-90 relative z-10",children:[a.jsx("circle",{cx:"50%",cy:"50%",r:"45%",fill:"transparent",stroke:"rgba(197,160,89,0.05)",strokeWidth:"2"}),a.jsx("circle",{cx:"50%",cy:"50%",r:"45%",fill:"transparent",stroke:"#C5A059",strokeWidth:"2",strokeDasharray:"283",strokeDashoffset:283*(1-R/100),className:"transition-all duration-1000 ease-linear"})]}),a.jsx("div",{className:`absolute w-48 h-48 border border-[#C5A059]/10 rounded-full transition-all duration-[2000ms] ${f?"scale-110 opacity-40":"scale-100 opacity-20"}`}),a.jsx("div",{className:`absolute w-56 h-56 border border-[#C5A059]/5 rounded-full transition-all duration-[3000ms] ${f?"scale-110 opacity-20":"scale-100 opacity-10"}`}),a.jsxs("div",{className:"absolute flex flex-col items-center z-20",children:[a.jsx("div",{className:"text-6xl md:text-7xl font-ui font-light tracking-tighter text-white drop-shadow-lg",children:w(r)}),f&&a.jsx("div",{className:"text-[8px] text-[#C5A059] mt-4 tracking-[0.4em] animate-pulse",children:"SYNCING WITH ARCHIVE..."})]})]}),a.jsxs("div",{className:"z-10 w-full max-w-xs flex flex-col items-center gap-6 relative",children:[x?a.jsxs("div",{className:"w-full glass-panel p-4 border-[#C5A059]/40 text-center animate-in zoom-in-95 duration-500 rounded-sm",children:[a.jsx("p",{className:"text-[10px] text-[#C5A059] mb-2 tracking-widest",children:" // SYNC COMPLETE"}),a.jsxs("div",{className:"flex justify-around items-center",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-xl text-white",children:["+",x.stars]}),a.jsx("div",{className:"text-[8px] text-white/40",children:""})]}),x.sanity>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xl text-cyan-400",children:["+",x.sanity]}),a.jsx("div",{className:"text-[8px] text-white/40",children:""})]})]})]}):!f&&a.jsx("div",{className:"flex gap-2 mb-4",children:[10,25,50].map(I=>a.jsxs("button",{onClick:()=>{s(I*60),u(I*60)},className:`px-4 py-1 text-[9px] border transition-all rounded-sm ${i===I*60?"border-[#C5A059] text-[#C5A059] bg-[#C5A059]/10":"border-white/10 text-white/30"}`,children:[I," MIN"]},I))}),a.jsx("div",{className:"flex items-center gap-6",children:f?a.jsx("button",{onClick:A,className:"px-12 py-3 border border-red-900/40 text-red-500/80 text-[10px] font-ui tracking-[0.4em] hover:bg-red-900/10 transition-all rounded-sm",children:""}):a.jsx("button",{onClick:C,className:"px-12 py-3 btn-requiem text-[10px] font-ui tracking-[0.4em] shadow-[0_0_20px_rgba(197,160,89,0.2)] rounded-sm",children:""})})]}),a.jsx("div",{className:"absolute bottom-12 text-[7px] text-white/10 tracking-[0.8em] uppercase font-ui pointer-events-none z-10",children:"Deep Space Synchronization Protocol"})]})},Bg=[{id:"vocab_10",title:"",desc:"10",image:"https://i.postimg.cc/BnKkSHHc/Wallpaper_celebration_10words.webp",requiredWords:10,rewardId:"wp_10words"},{id:"vocab_50",title:"",desc:"50",image:"https://i.postimg.cc/GmyVLGGF/Wallpaper_celebration_50words.webp",requiredWords:50,rewardId:"wp_50words"},{id:"vocab_100",title:"",desc:"100",image:"https://i.postimg.cc/W1kCNggm/Wallpaper_celebration_100words.webp",requiredWords:100,rewardId:"wp_100words"}],zE=({stats:n,setStats:e})=>{const[i,s]=D.useState("gallery"),[r,u]=D.useState(null),f=D.useRef(null),g=D.useRef(0),x=D.useRef(0);D.useMemo(()=>!n.unlockedAchievements.includes((r==null?void 0:r.id)||""),[r,n.unlockedAchievements]);const h=D.useCallback(T=>{f.current&&(T.preventDefault(),f.current.scrollLeft+=T.deltaY+T.deltaX)},[]),v=D.useCallback(T=>{g.current=T.touches[0].clientX,x.current=T.touches[0].clientY},[]),b=D.useCallback(T=>{if(!f.current)return;const E=T.touches[0].clientX,w=T.touches[0].clientY,R=g.current-E,I=x.current-w;Math.abs(R)>Math.abs(I)&&(f.current.scrollLeft+=R*.5),g.current=E,x.current=w},[]);D.useEffect(()=>{const T=f.current;return T&&T.addEventListener("wheel",h,{passive:!1}),()=>{T&&T.removeEventListener("wheel",h)}},[h]);const C=[{id:"wp_violin",type:"Wallpaper",title:"",price:5,icon:"",desc:""},{id:"wp_tease",type:"Wallpaper",title:"",price:5,icon:"",desc:""},{id:"wp_leafclover",type:"Wallpaper",title:"",price:10,icon:"",desc:"+"},{id:"wp_rebellion",type:"Wallpaper",title:"",price:5,icon:"",desc:""},{id:"wp_wedding",type:"Wallpaper",title:"",price:5,icon:"",desc:""},{id:"track_3",type:"Music",title:"",price:20,icon:"",desc:""},{id:"feat_custom_env",type:"Feature",title:"",price:50,icon:"",desc:"(URL/)"},{id:"feat_custom_dialog",type:"Feature",title:"",price:50,icon:"",desc:"/(URL/)"},{id:"feat_custom_frag",type:"Feature",title:"",price:50,icon:"",desc:"(URL/)"}],A=T=>{if(n.stars<T.price){alert("");return}if(n.unlockedContent.includes(T.id)){alert("");return}e(E=>({...E,stars:E.stars-T.price,unlockedContent:[...E.unlockedContent,T.id]}))};return D.useEffect(()=>{const E=JSON.parse(localStorage.getItem("ASAEL_WORDBOOK")||"[]").length;Bg.forEach(w=>{E>=w.requiredWords&&!n.unlockedAchievements.includes(w.id)&&e(R=>({...R,unlockedAchievements:[...R.unlockedAchievements,w.id],unlockedContent:w.rewardId&&!R.unlockedContent.includes(w.rewardId)?[...R.unlockedContent,w.rewardId]:R.unlockedContent}))})},[n.unlockedAchievements]),a.jsxs("div",{className:"h-full p-6 md:p-12 flex flex-col animate-in fade-in duration-500 overflow-hidden",children:[a.jsxs("header",{className:"mb-10 border-b border-[#C5A059]/10 pb-8 flex flex-col md:flex-row justify-between items-end gap-6 flex-shrink-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-[#C5A059] font-ui text-3xl tracking-[0.4em] uppercase",children:""}),a.jsxs("p",{className:"text-xs text-white/30 tracking-widest mt-2 uppercase",children:[": ",a.jsx("span",{className:"text-[#C5A059] font-bold text-lg ml-2",children:n.stars})," "]})]}),a.jsxs("div",{className:"flex glass-panel p-1 rounded-lg border-[#C5A059]/10 shadow-inner",children:[a.jsx("button",{onClick:()=>s("gallery"),className:`px-8 py-2 text-[10px] font-ui tracking-widest transition-all rounded-md ${i==="gallery"?"bg-[#C5A059] text-black shadow-lg":"text-white/40 hover:text-white/70"}`,children:""}),a.jsx("button",{onClick:()=>s("shop"),className:`px-8 py-2 text-[10px] font-ui tracking-widest transition-all rounded-md ${i==="shop"?"bg-[#C5A059] text-black shadow-lg":"text-white/40 hover:text-white/70"}`,children:""})]})]}),a.jsx("div",{className:"flex-1 overflow-hidden",children:i==="gallery"?a.jsx("div",{className:"h-full flex flex-col justify-center animate-in slide-in-from-right-8 duration-700",children:a.jsx("div",{ref:f,onTouchStart:v,onTouchMove:b,className:"flex overflow-x-auto snap-x snap-mandatory gap-4 pb-8 px-4 no-scrollbar",children:Bg.map(T=>{const w=JSON.parse(localStorage.getItem("ASAEL_WORDBOOK")||"[]").length,R=Math.min(w/T.requiredWords,1),I=n.unlockedAchievements.includes(T.id);return a.jsxs("div",{onClick:()=>u(T),className:"snap-center flex-shrink-0 w-[200px] md:w-[260px] group cursor-pointer flex flex-col",children:[a.jsxs("div",{className:`aspect-[9/16] overflow-hidden border transition-all duration-500 relative shadow-xl rounded-sm ${I?"border-[#C5A059]/40 hover:border-[#C5A059] hover:shadow-[0_0_20px_rgba(197,160,89,0.3)]":"border-white/10 grayscale brightness-40"}`,children:[a.jsx("div",{className:"absolute inset-0 pointer-events-none border border-white/5 z-10 m-2"}),a.jsx("div",{className:"absolute top-0 left-0 w-6 h-6 border-t border-l border-[#C5A059]/30 z-10 m-2"}),a.jsx("div",{className:"absolute bottom-0 right-0 w-6 h-6 border-b border-r border-[#C5A059]/30 z-10 m-2"}),a.jsx("img",{src:T.image,alt:T.title,className:`w-full h-full object-cover transition-transform duration-[1500ms] ${I?"group-hover:scale-110":""}`}),!I&&a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/60 backdrop-blur-md",children:[a.jsx("div",{className:"w-12 h-12 border border-white/20 rounded-full flex items-center justify-center text-white/20 text-xl mb-3",children:""}),a.jsx("span",{className:"text-[9px] font-ui text-white/30 tracking-[0.3em] uppercase",children:""})]}),a.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:a.jsxs("div",{className:"bg-black/50 backdrop-blur-sm rounded px-2 py-1",children:[a.jsxs("div",{className:"flex justify-between text-[8px] text-white/60 mb-1",children:[a.jsx("span",{children:w}),a.jsxs("span",{children:["/ ",T.requiredWords," "]})]}),a.jsx("div",{className:"h-1 bg-white/10 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-[#C5A059] transition-all duration-500",style:{width:`${R*100}%`}})})]})})]}),a.jsxs("div",{className:"mt-4 px-2 text-center",children:[a.jsx("h3",{className:`font-ui text-sm tracking-[0.15em] mb-1 ${I?"text-[#C5A059]":"text-white/25"}`,children:T.title}),a.jsx("p",{className:"text-[9px] text-white/35 uppercase tracking-[0.05em]",children:T.desc})]})]},T.id)})})}):a.jsx("div",{className:"h-full overflow-y-auto no-scrollbar pb-24 pr-2 animate-in slide-in-from-left-8 duration-700",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pb-20",children:C.map(T=>{const E=n.unlockedContent.includes(T.id);return a.jsxs("div",{className:`glass-panel border p-6 flex items-center gap-6 group hover:border-[#C5A059]/40 transition-all relative overflow-hidden rounded-sm shadow-xl ${E?"border-[#C5A059]/10":"border-white/5"}`,children:[a.jsx("div",{className:"absolute top-0 right-0 p-3 text-[8px] text-white/10 uppercase tracking-widest",children:T.type}),a.jsxs("div",{className:"w-20 h-20 rounded-sm bg-[#0a0a0a] border border-[#C5A059]/20 flex items-center justify-center text-4xl group-hover:scale-110 group-hover:border-[#C5A059]/60 transition-all duration-700 flex-shrink-0 relative",children:[T.icon,!E&&a.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center text-sm",children:""})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:`text-base tracking-[0.1em] mb-1 font-light ${E?"text-white":"text-white/60"}`,children:T.title}),a.jsx("p",{className:"text-[10px] text-white/40 uppercase tracking-tight mb-5 leading-relaxed",children:T.desc}),a.jsx("button",{disabled:E,onClick:()=>A(T),className:`px-8 py-2.5 text-[10px] font-ui tracking-[0.3em] border transition-all rounded-sm shadow-md ${E?"border-white/5 text-white/10 cursor-default bg-white/2":"border-[#C5A059] text-[#C5A059] hover:bg-[#C5A059] hover:text-black hover:shadow-[0_0_15px_rgba(197,160,89,0.3)]"}`,children:E?"":` // ${T.price} `})]})]},T.id)})})})}),r&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/95 animate-in fade-in duration-300",onClick:()=>u(null),children:a.jsxs("div",{className:"relative w-full h-full max-w-2xl max-h-[90vh] mx-4 flex flex-col items-center animate-in zoom-in-95 duration-500",onClick:T=>T.stopPropagation(),children:[a.jsx("button",{onClick:()=>u(null),className:"absolute top-4 right-4 z-20 w-10 h-10 border border-white/20 rounded-full flex items-center justify-center text-white/40 hover:text-white hover:border-white/60 transition-all",children:""}),a.jsxs("div",{className:"w-full aspect-[9/16] overflow-hidden border border-[#C5A059]/30 relative shadow-[0_0_50px_rgba(197,160,89,0.2)] rounded-sm mt-8",children:[a.jsx("div",{className:"absolute top-0 left-0 w-10 h-10 border-t border-l border-[#C5A059]/40 z-10 m-3"}),a.jsx("div",{className:"absolute bottom-0 right-0 w-10 h-10 border-b border-r border-[#C5A059]/40 z-10 m-3"}),a.jsx("div",{className:"absolute inset-0 pointer-events-none border border-[#C5A059]/10 z-10 m-4"}),a.jsx("img",{src:r.image,alt:r.title,className:"w-full h-full object-cover"})]}),a.jsxs("div",{className:"mt-6 text-center",children:[a.jsx("h2",{className:"font-ui text-2xl tracking-[0.3em] text-[#C5A059] mb-2",children:r.title}),a.jsx("p",{className:"text-sm text-white/50 uppercase tracking-[0.15em] leading-relaxed max-w-md",children:r.desc})]})]})})]})},Gg={MESSAGES:"ASAEL_MESSAGES",CHAT_METADATA:"ASAEL_CHAT_METADATA"};class qE{constructor(){this.db=un}async initialize(){await this.db.open(),console.log("[ChatStorage] IndexedDB ")}getLocalStorageKey(e){return e?`ASAEL_CHARACTER_MESSAGES_${e}`:Gg.MESSAGES}async getMessages(e){try{const i=this.getLocalStorageKey(e),s=localStorage.getItem(i);if(s){const r=JSON.parse(s);return console.log(`[ChatStorage]  localStorage  ${r.length}  (${e||""})`),r}}catch(i){console.error("[ChatStorage]  localStorage :",i)}try{const i=await this.db.getAll("messages"),s=e?i.filter(r=>r.characterId===e||!r.characterId):i.filter(r=>!r.characterId);return console.log(`[ChatStorage]  IndexedDB  ${s.length}  (${e||""})`),s}catch(i){return console.error("[ChatStorage]  IndexedDB :",i),[]}}async saveMessages(e,i){try{await this.db.clear("messages");const s=e.map((r,u)=>({...r,characterId:i||r.characterId,id:r.id||`msg_${Date.now()}_${u}`}));s.length>0&&(await this.db.bulkPut("messages",s),console.log(`[ChatStorage]  ${s.length}  IndexedDB (${i||""})`)),localStorage.setItem(this.getLocalStorageKey(i),JSON.stringify(e)),console.log(`[ChatStorage]  ${e.length}  localStorage (${i||""})`)}catch(s){console.error("[ChatStorage] :",s);try{localStorage.setItem(this.getLocalStorageKey(i),JSON.stringify(e)),console.log("[ChatStorage]  localStorage ")}catch(r){throw console.error("[ChatStorage]  localStorage :",r),r}}}async addMessage(e,i){const s={...e,id:`msg_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};try{const r=await this.getMessages(i);r.push(s);const u=1e3;if(r.length>u){const f=r.splice(0,r.length-u);console.log(`[ChatStorage]  ${u} ${f.length} `)}return await this.saveMessages(r,i),console.log(`[ChatStorage] : ${s.id}`),s}catch(r){throw console.error("[ChatStorage] :",r),r}}async updateMessage(e,i,s){try{const r=await this.getMessages(s),u=r.findIndex(f=>f.id===e);return u===-1?(console.warn(`[ChatStorage] : ${e}`),!1):(r[u]={...r[u],...i},await this.saveMessages(r,s),console.log(`[ChatStorage] : ${e}`),!0)}catch(r){return console.error("[ChatStorage] :",r),!1}}async deleteMessage(e,i){try{const s=await this.getMessages(i),r=s.filter(u=>u.id!==e);return r.length===s.length?(console.warn(`[ChatStorage] : ${e}`),!1):(await this.saveMessages(r,i),console.log(`[ChatStorage] : ${e}`),!0)}catch(s){return console.error("[ChatStorage] :",s),!1}}async clearMessages(e){try{if(e){const s=(await this.getMessages()).filter(r=>r.characterId!==e);await this.saveMessages(s)}else await this.db.clear("messages"),localStorage.removeItem(Gg.MESSAGES),console.log("[ChatStorage] ")}catch(i){throw console.error("[ChatStorage] :",i),i}}async getMessageCount(e){return(await this.getMessages(e)).length}async getStorageSize(){let e=0;try{const s=this.getLocalStorageKey(),r=localStorage.getItem(s);r&&(e=new Blob([r]).size)}catch(s){console.error("[ChatStorage]  localStorage :",s)}let i=0;try{i=await this.db.count("messages")}catch(s){console.error("[ChatStorage]  IndexedDB :",s)}return{localStorage:e,indexedDB:i}}async getMetadata(e){var r;try{const u=`ASAEL_CHAT_METADATA${e?`_${e}`:""}`,f=localStorage.getItem(u);if(f)return JSON.parse(f)}catch(u){console.error("[ChatStorage] :",u)}const i=await this.getMessages(e),s={lastMessageId:((r=i[i.length-1])==null?void 0:r.id)||"",lastUpdate:Date.now(),messageCount:i.length,totalTokens:i.reduce((u,f)=>{var g;return u+(((g=f.content)==null?void 0:g.length)||0)},0)};try{const u=`ASAEL_CHAT_METADATA${e?`_${e}`:""}`;localStorage.setItem(u,JSON.stringify(s))}catch(u){console.error("[ChatStorage] :",u)}return s}async searchMessages(e,i){const s=await this.getMessages(i),r=e.toLowerCase();return s.filter(u=>{var f,g;return((f=u.content)==null?void 0:f.toLowerCase().includes(r))||((g=u.translation)==null?void 0:g.toLowerCase().includes(r))})}async exportMessages(e){const i=await this.getMessages(e);return JSON.stringify(i,null,2)}async importMessages(e,i,s=!0){try{const r=JSON.parse(e);if(!Array.isArray(r))throw new Error("");const u=s?await this.getMessages(i):[],f=new Set(u.map(h=>h.id)),g=r.filter(h=>!f.has(h.id)),x=s?[...u,...g]:r;return await this.saveMessages(x,i),console.log(`[ChatStorage]  ${g.length} `),g.length}catch(r){throw console.error("[ChatStorage] :",r),r}}async close(){await this.db.close()}}const ji=new qE,Yt={CONFIG:"SR_AI_CONFIG",MESSAGES:"ASAEL_MESSAGES",WORDBOOK:"ASAEL_WORDBOOK",STATS:"ASAEL_STATS",BEHAVIOR_COGNITIVE:"ASAEL_COGNITIVE_GRAPH",BEHAVIOR_DELETED:"ASAEL_DELETED_WORDS_BACKUP",BEHAVIOR_DAILY:"ASAEL_DAILY_STATS",BEHAVIOR_METADATA:"ASAEL_BEHAVIOR_METADATA"},HE=n=>{if(!n||typeof n!="object")return!1;const e=n;return"metadata"in e&&typeof e.metadata=="object"&&e.metadata!==null&&"timestamp"in e.metadata&&"client"in e.metadata&&"version"in e.metadata&&"behaviorData"in e&&typeof e.behaviorData=="object"&&e.behaviorData!==null},pa=n=>{try{return localStorage.getItem(n)||""}catch(e){return console.error(`[Backup] Failed to get item ${n}:`,e),""}},ha=(n,e)=>{try{return n?JSON.parse(n):e}catch(i){return console.error("[Backup] JSON parse error:",i),e}},VE=()=>localStorage.getItem("ASAEL_MIGRATED_TO_IDB")?"IndexedDB":"localStorage",FE=async()=>{try{const[n,e,i,s,r,u]=await Promise.all([Promise.resolve(ha(pa(Yt.CONFIG),{})),Promise.resolve(ha(pa(Yt.MESSAGES),[])),Promise.resolve(ha(pa(Yt.WORDBOOK),[])),Promise.resolve(ha(pa(Yt.STATS),{})),Na.exportData(),ji.exportMessages().catch(()=>"[]")]);let f=e;try{f=JSON.parse(u)}catch{f=e}const g={config:n,messages:f.length>0?f:e,wordbook:i,stats:s,behaviorData:{cognitiveGraph:r.cognitiveGraph,deletedWords:r.deletedWordsBackup,dailyStats:r.dailyStats,metadata:r.metadata},metadata:{timestamp:new Date().toISOString(),client:"Asael_Petra_OS",version:"1.3.0",storageBackend:VE()}},x=new Blob([JSON.stringify(g,null,2)],{type:"application/json"}),h=URL.createObjectURL(x),v=document.createElement("a");return v.href=h,v.download=`ASAEL_MEMORY_ARCHIVE_${new Date().toISOString().split("T")[0]}.json`,v.click(),URL.revokeObjectURL(h),console.log("[Backup] Archive exported successfully:",g.metadata),{success:!0,message:""}}catch(n){const e=n instanceof Error?n.message:String(n);return console.error("[Backup] Export failed:",e),{success:!1,message:"",error:e}}},YE=async n=>new Promise(e=>{const i=new FileReader;i.onload=async s=>{var r;try{const u=(r=s.target)==null?void 0:r.result;if(!u){e({success:!1,message:"",error:"Empty file content"});return}const f=JSON.parse(u);if(!HE(f)){e({success:!1,message:"",error:"Invalid backup format"});return}if(await ji.initialize(),await Na.initialize(),await un.open(),f.config&&typeof f.config=="object"&&localStorage.setItem(Yt.CONFIG,JSON.stringify(f.config)),Array.isArray(f.messages)&&(localStorage.setItem(Yt.MESSAGES,JSON.stringify(f.messages)),await ji.importMessages(JSON.stringify(f.messages),void 0,!1)),Array.isArray(f.wordbook)&&localStorage.setItem(Yt.WORDBOOK,JSON.stringify(f.wordbook)),f.stats&&typeof f.stats=="object"&&localStorage.setItem(Yt.STATS,JSON.stringify(f.stats)),f.behaviorData&&typeof f.behaviorData=="object"){f.behaviorData.cognitiveGraph&&typeof f.behaviorData.cognitiveGraph=="object"&&localStorage.setItem(Yt.BEHAVIOR_COGNITIVE,JSON.stringify(f.behaviorData.cognitiveGraph)),f.behaviorData.deletedWords&&typeof f.behaviorData.deletedWords=="object"&&localStorage.setItem(Yt.BEHAVIOR_DELETED,JSON.stringify(f.behaviorData.deletedWords)),f.behaviorData.dailyStats&&typeof f.behaviorData.dailyStats=="object"&&localStorage.setItem(Yt.BEHAVIOR_DAILY,JSON.stringify(f.behaviorData.dailyStats)),f.behaviorData.metadata&&typeof f.behaviorData.metadata=="object"&&localStorage.setItem(Yt.BEHAVIOR_METADATA,JSON.stringify(f.behaviorData.metadata));const g=f.behaviorData.cognitiveGraph,x=f.behaviorData.deletedWords,h=f.behaviorData.dailyStats,v=f.behaviorData.metadata,b=g==null?void 0:g.vocabulary,C={};if(b)for(const[E,w]of Object.entries(b))C[E]=w;const A=Array.isArray(x)?x:[],T=Array.isArray(h)?h:[];await Na.importData({cognitiveGraph:{vocabulary:C},deletedWordsBackup:A,dailyStats:T,metadata:{version:(v==null?void 0:v.version)??1,lastBackup:(v==null?void 0:v.lastBackup)??""}},!1)}console.log("[Backup] Archive imported successfully:",f.metadata),e({success:!0,message:""}),setTimeout(()=>{window.location.reload()},1500)}catch(u){const f=u instanceof Error?u.message:String(u);console.error("[Backup] Import failed:",f),e({success:!1,message:"",error:f})}},i.onerror=()=>{e({success:!1,message:"",error:"File read error"})},i.readAsText(n)}),JE=async()=>{if(!confirm(`

`))return{success:!1,message:""};if(!confirm(""))return{success:!1,message:""};try{return await ji.initialize(),await ji.clearMessages(),localStorage.removeItem(Yt.MESSAGES),console.log("[Backup] Chat memory purged"),setTimeout(()=>{window.location.reload()},1e3),{success:!0,message:""}}catch(n){const e=n instanceof Error?n.message:String(n);return console.error("[Backup] Purge failed:",e),{success:!1,message:"",error:e}}},$E=async()=>{if(!confirm(""))return{success:!1,message:""};try{return localStorage.clear(),await un.open(),await un.clear("messages"),await un.clear("wordbook"),await un.clear("behavior"),await un.clear("deletedWords"),await un.clear("dailyStats"),await un.clear("config"),localStorage.removeItem("ASAEL_MIGRATED_TO_IDB"),console.log("[Backup] Factory reset executed"),setTimeout(()=>{window.location.reload()},1e3),{success:!0,message:""}}catch(n){const e=n instanceof Error?n.message:String(n);return console.error("[Backup] Factory reset failed:",e),{success:!1,message:"",error:e}}},su=[{id:"chat",name:"",preset:"CHAT",includeUserInfo:!0,includeWorldBook:!1},{id:"casino_acting",name:"",preset:"CASINO_ACTING",includeUserInfo:!1,includeWorldBook:!1},{id:"casino_feedback",name:"",preset:"CASINO_FEEDBACK",includeUserInfo:!1,includeWorldBook:!1},{id:"quote",name:"",preset:"QUOTE_GENERATION",includeUserInfo:!1,includeWorldBook:!1},{id:"summary",name:"",preset:"SESSION_SUMMARY",includeUserInfo:!1,includeWorldBook:!1}],WE=()=>{const n=localStorage.getItem("SR_SYSTEM_LANGUAGE")||"KO_CN",e=localStorage.getItem("ASAEL_USER_INFO"),i=e?JSON.parse(e):{nickname:"",personality:""};return{systemCore:O0,userInfo:Bu(i.nickname,i.personality),worldBook:z0,chatPreset:Au[n]||Au.KO_CN,casinoActingPreset:Dg[n]||Dg.KO_CN,casinoFeedbackPreset:jg[n]||jg.KO_CN,quotePreset:H0,summaryPreset:V0()}},Pg=WE(),KE=({onBack:n})=>{const[e,i]=D.useState([]),[s,r]=D.useState(null),[u,f]=D.useState("edit"),[g,x]=D.useState("chat"),[h,v]=D.useState(Pg),[b,C]=D.useState(Di()),[A,T]=D.useState(""),[E,w]=D.useState(!1);D.useEffect(()=>{const J=localStorage.getItem("ASAEL_PROMPT_PRESETS");if(J)try{const le=JSON.parse(J);i(le),le.length>0&&(r(le[0].id),R(le[0]))}catch(le){console.error("Failed to load presets",le)}},[]),D.useEffect(()=>{const J=()=>{const B=localStorage.getItem("ASAEL_USER_INFO");if(B){const j=JSON.parse(B),Z=Bu(j.nickname,j.personality);v(X=>({...X,userInfo:Z}))}};window.addEventListener("storage",J);const le=setInterval(J,1e3);return()=>{window.removeEventListener("storage",J),clearInterval(le)}},[]);const R=J=>{v(J.prompts),C(J.config)},I=()=>{if(!A.trim()){alert("");return}const J={id:Date.now().toString(),name:A,createdAt:Date.now(),config:{...b},prompts:{...h}},le=[...e],B=le.findIndex(j=>j.id===s);B>=0?le[B]=J:le.push(J),i(le),r(J.id),localStorage.setItem("ASAEL_PROMPT_PRESETS",JSON.stringify(le)),w(!1),T("")},M=J=>{if(!confirm(""))return;const le=e.filter(B=>B.id!==J);i(le),localStorage.setItem("ASAEL_PROMPT_PRESETS",JSON.stringify(le)),s===J&&(r(le.length>0?le[0].id:null),le.length>0&&R(le[0]))},q=()=>{cE(b),localStorage.setItem("ASAEL_EDITOR_PROMPTS",JSON.stringify(h)),alert("")},G=()=>{confirm("")&&(v(Pg),C(Di()))},U=D.useMemo(()=>{const J=su.find(B=>B.id===g);if(!J)return"";const le=[];switch(le.push("===  ==="),le.push(h.systemCore),J.includeUserInfo&&b.system.userInfo.enabled&&(le.push(`
===  ===`),le.push(h.userInfo)),J.includeWorldBook&&b.system.worldBook.enabled&&(le.push(`
===  ===`),le.push(h.worldBook)),le.push(`
===  (${J.name}) ===`),J.id){case"chat":le.push(h.chatPreset);break;case"casino_acting":le.push(h.casinoActingPreset);break;case"casino_feedback":le.push(h.casinoFeedbackPreset);break;case"quote":le.push(h.quotePreset);break;case"summary":le.push(h.summaryPreset);break}return le.push(`
===  ===`),b.memory.longTermEnabled&&le.push(`[]  ${b.memory.longTermLimit} 
[] 2024-01-01: ...`),b.memory.shortTermEnabled&&le.push(`[]  ${b.memory.shortTermLimit} 
[] 
[]...`),le.push(`
===  ===`),le.push("[]"),le.join(`
`)},[h,b,g]),V="https://i.postimg.cc/v86n1rjR/dreamina-7588403766500527386-1766813031729.webp",ce={background:"linear-gradient(to bottom, #0891b2 0%, #22d3ee 50%, #a5f3fc 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",WebkitBoxReflect:"below -12px linear-gradient(transparent, rgba(34, 211, 238, 0.15))",display:"inline-block"},se="w-full bg-black/60 border border-cyan-500/30 px-3 py-2.5 text-sm text-cyan-50 focus:outline-none focus:border-cyan-400/70 transition-all rounded-sm font-light",xe="text-xs text-cyan-400/50 uppercase tracking-widest mb-1.5 block font-bold",de="bg-black/40 backdrop-blur-md border border-cyan-500/20 p-4 rounded-lg",Q="px-4 py-2.5 text-xs tracking-widest border transition-all active:scale-[0.97] rounded-sm touch-manipulation min-h-[44px]",re="px-3 py-2 text-xs tracking-wider border transition-all active:scale-[0.97] rounded-sm touch-manipulation min-h-[40px]";return a.jsxs("div",{className:"h-full flex flex-col overflow-hidden no-scrollbar relative font-serif",style:{fontFamily:"'Noto Serif SC', serif"},children:[a.jsxs("div",{className:"fixed inset-0 z-0",children:[a.jsx("img",{src:V,className:"w-full h-full object-cover",alt:"Background"}),a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px]"})]}),a.jsxs("div",{className:"relative z-10 flex-1 flex flex-col overflow-hidden",children:[a.jsxs("header",{className:"px-6 py-8 md:px-12 border-b border-cyan-500/10 flex justify-between items-center z-10 shrink-0",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl tracking-[0.4em] font-bold uppercase drop-shadow-[0_0_15px_rgba(34,211,238,0.3)]",style:ce,children:""}),a.jsx("button",{onClick:n,className:"text-cyan-400/70 text-[10px] tracking-widest border border-cyan-500/30 px-5 py-1.5 hover:bg-cyan-500/20 hover:text-cyan-200 transition-all rounded-full bg-black/40 backdrop-blur-sm shadow-xl",children:"RETURN"})]}),a.jsx("div",{className:"flex-1 px-6 py-8 md:px-12 w-full mx-auto z-10 overflow-y-auto no-scrollbar",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"flex gap-2 mb-6",children:[a.jsx("button",{onClick:()=>f("edit"),className:`${Q} ${u==="edit"?"bg-cyan-500/30 border-cyan-400 text-cyan-200":"bg-black/40 border-cyan-500/20 text-cyan-400/50 hover:border-cyan-500/40"}`,children:""}),a.jsx("button",{onClick:()=>f("debug"),className:`${Q} ${u==="debug"?"bg-cyan-500/30 border-cyan-400 text-cyan-200":"bg-black/40 border-cyan-500/20 text-cyan-400/50 hover:border-cyan-500/40"}`,children:""})]}),u==="edit"?a.jsxs("div",{className:"hidden lg:grid lg:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:de,children:[a.jsx("h3",{className:"text-xs tracking-widest text-cyan-400/70 mb-3 font-bold",children:""}),a.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-48 overflow-y-auto",children:e.map(J=>a.jsx("div",{className:`p-2.5 text-xs tracking-wider border cursor-pointer transition-all rounded active:scale-[0.98] touch-manipulation ${s===J.id?"bg-cyan-500/20 border-cyan-400/50 text-cyan-200":"bg-black/30 border-cyan-500/10 text-cyan-400/40 hover:border-cyan-500/30"}`,onClick:()=>R(J),children:a.jsxs("div",{className:"flex justify-between items-center gap-1",children:[a.jsx("span",{className:"truncate",children:J.name}),a.jsx("button",{onClick:le=>{le.stopPropagation(),M(J.id)},className:"text-red-400/50 hover:text-red-400 active:scale-110 flex-shrink-0 w-5 h-5 flex items-center justify-center",children:""})]})},J.id))}),a.jsx("button",{onClick:()=>w(!0),className:"w-full mt-3 py-2.5 bg-cyan-500/10 border border-cyan-500/30 text-cyan-400 text-xs tracking-widest hover:bg-cyan-500/20 transition-all active:scale-[0.97] rounded-sm touch-manipulation min-h-[44px]",children:"+ "}),a.jsx("button",{onClick:G,className:"w-full mt-2 py-2.5 bg-red-500/10 border border-red-500/30 text-red-400 text-xs tracking-widest hover:bg-red-500/20 transition-all active:scale-[0.97] rounded-sm touch-manipulation min-h-[44px]",children:""})]}),a.jsxs("div",{className:de,children:[a.jsx("h3",{className:"text-xs tracking-widest text-cyan-400/70 mb-3 font-bold",children:""}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:[{key:"core",label:"",enabled:b.system.core.enabled},{key:"userInfo",label:"",enabled:b.system.userInfo.enabled},{key:"worldBook",label:"",enabled:b.system.worldBook.enabled}].map(J=>a.jsxs("label",{className:"flex items-center justify-between cursor-pointer p-2 bg-black/30 rounded border border-cyan-500/10",children:[a.jsx("span",{className:"text-xs text-cyan-300/60 tracking-wider",children:J.label}),a.jsx("input",{type:"checkbox",checked:J.enabled,onChange:()=>C({...b,system:{...b.system,[J.key]:{...b.system[J.key],enabled:!J.enabled}}}),className:"w-4 h-4 accent-cyan-400"})]},J.key))})]}),a.jsxs("div",{className:de,children:[a.jsx("h3",{className:"text-xs tracking-widest text-cyan-400/70 mb-3 font-bold",children:""}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center justify-between cursor-pointer p-2 bg-black/30 rounded border border-cyan-500/10",children:[a.jsx("span",{className:"text-xs text-cyan-300/60 tracking-wider",children:""}),a.jsx("input",{type:"checkbox",checked:b.memory.longTermEnabled,onChange:()=>C({...b,memory:{...b.memory,longTermEnabled:!b.memory.longTermEnabled}}),className:"w-4 h-4 accent-cyan-400"})]}),b.memory.longTermEnabled&&a.jsxs("div",{className:"pl-2",children:[a.jsx("span",{className:"text-[10px] text-cyan-400/50",children:""}),a.jsx("input",{type:"number",value:b.memory.longTermLimit,onChange:J=>C({...b,memory:{...b.memory,longTermLimit:parseInt(J.target.value)||10}}),className:se+" mt-1"})]}),a.jsxs("label",{className:"flex items-center justify-between cursor-pointer p-2 bg-black/30 rounded border border-cyan-500/10",children:[a.jsx("span",{className:"text-xs text-cyan-300/60 tracking-wider",children:""}),a.jsx("input",{type:"checkbox",checked:b.memory.shortTermEnabled,onChange:()=>C({...b,memory:{...b.memory,shortTermEnabled:!b.memory.shortTermEnabled}}),className:"w-4 h-4 accent-cyan-400"})]}),b.memory.shortTermEnabled&&a.jsxs("div",{className:"pl-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-[10px] text-cyan-400/50",children:""}),a.jsxs("span",{className:"text-[10px] text-cyan-400/30",children:["= ",b.memory.shortTermLimit*2,""]})]}),a.jsx("input",{type:"number",value:b.memory.shortTermLimit,onChange:J=>C({...b,memory:{...b.memory,shortTermLimit:parseInt(J.target.value)||25}}),className:se+" mt-1"}),a.jsx("p",{className:"text-[9px] text-cyan-400/30 mt-1",children:"AI1"})]})]})]}),a.jsx("button",{onClick:q,className:"w-full py-3 bg-cyan-500/20 border border-cyan-400/50 text-cyan-400 text-xs font-bold tracking-[0.3em] hover:bg-cyan-500/40 transition-all shadow-lg active:scale-[0.97] touch-manipulation min-h-[50px]",children:""})]}),a.jsx("div",{className:"col-span-3 space-y-3 pb-4",children:[{key:"systemCore",label:"",value:h.systemCore},{key:"userInfo",label:"",value:h.userInfo},{key:"worldBook",label:"",value:h.worldBook},{key:"chatPreset",label:"",value:h.chatPreset},{key:"casinoActingPreset",label:"",value:h.casinoActingPreset},{key:"casinoFeedbackPreset",label:"",value:h.casinoFeedbackPreset},{key:"quotePreset",label:"",value:h.quotePreset},{key:"summaryPreset",label:"",value:h.summaryPreset}].map(J=>a.jsxs("div",{className:de,children:[a.jsx("label",{className:xe,children:J.label}),a.jsx("textarea",{value:J.value,onChange:le=>v({...h,[J.key]:le.target.value}),rows:J.key==="systemCore"?5:4,className:se+" resize-none font-mono text-xs min-h-[100px]"})]},J.key))})]}):a.jsx("div",{className:"hidden lg:block space-y-3 pb-4 animate-in fade-in duration-500",children:a.jsxs("div",{className:"bg-black/50 backdrop-blur-xl border border-cyan-500/30 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[a.jsx("span",{className:"text-xs text-cyan-400/70 tracking-widest",children:""}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:su.map(J=>a.jsx("button",{onClick:()=>x(J.id),className:`${re} ${g===J.id?"bg-cyan-500/30 border-cyan-400 text-cyan-200":"bg-black/40 border-cyan-500/20 text-cyan-400/50 hover:border-cyan-500/40"}`,children:J.name},J.id))})]}),a.jsx("div",{className:"bg-black/60 border border-cyan-500/20 p-3 rounded",children:a.jsx("pre",{className:"text-xs text-cyan-100/80 font-mono whitespace-pre-wrap break-all max-h-[60vh] overflow-y-auto",children:U})}),a.jsx("div",{className:"mt-3 text-[10px] text-cyan-400/40 tracking-widest text-center",children:"[  -  ]"})]})}),u==="edit"?a.jsxs("div",{className:"lg:hidden space-y-4",children:[a.jsxs("div",{className:"bg-black/40 backdrop-blur-md border border-cyan-500/20 p-4 rounded-lg",children:[a.jsx("h3",{className:"text-sm tracking-widest text-cyan-400/70 mb-4 font-bold border-b border-cyan-500/10 pb-2",children:""}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:de,children:[a.jsx("h3",{className:"text-xs tracking-widest text-cyan-400/70 mb-3 font-bold",children:""}),a.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto",children:e.map(J=>a.jsx("div",{className:`p-2.5 text-xs tracking-wider border cursor-pointer transition-all rounded active:scale-[0.98] touch-manipulation ${s===J.id?"bg-cyan-500/20 border-cyan-400/50 text-cyan-200":"bg-black/30 border-cyan-500/10 text-cyan-400/40 hover:border-cyan-500/30"}`,onClick:()=>R(J),children:a.jsxs("div",{className:"flex justify-between items-center gap-1",children:[a.jsx("span",{className:"truncate",children:J.name}),a.jsx("button",{onClick:le=>{le.stopPropagation(),M(J.id)},className:"text-red-400/50 hover:text-red-400 active:scale-110 flex-shrink-0 w-5 h-5 flex items-center justify-center",children:""})]})},J.id))}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[a.jsx("button",{onClick:()=>w(!0),className:"py-2.5 bg-cyan-500/10 border border-cyan-500/30 text-cyan-400 text-xs tracking-widest hover:bg-cyan-500/20 transition-all active:scale-[0.97] rounded-sm touch-manipulation min-h-[44px]",children:"+ "}),a.jsx("button",{onClick:G,className:"py-2.5 bg-red-500/10 border border-red-500/30 text-red-400 text-xs tracking-widest hover:bg-red-500/20 transition-all active:scale-[0.97] rounded-sm touch-manipulation min-h-[44px]",children:""})]})]}),a.jsxs("div",{className:de,children:[a.jsx("h3",{className:"text-xs tracking-widest text-cyan-400/70 mb-3 font-bold",children:""}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{key:"core",label:"",enabled:b.system.core.enabled},{key:"userInfo",label:"",enabled:b.system.userInfo.enabled},{key:"worldBook",label:"",enabled:b.system.worldBook.enabled}].map(J=>a.jsxs("label",{className:"flex flex-col items-center cursor-pointer p-2 bg-black/30 rounded border border-cyan-500/10",children:[a.jsx("input",{type:"checkbox",checked:J.enabled,onChange:()=>C({...b,system:{...b.system,[J.key]:{...b.system[J.key],enabled:!J.enabled}}}),className:"w-5 h-5 accent-cyan-400 mb-1.5"}),a.jsx("span",{className:"text-xs text-cyan-300/60 tracking-wider text-center",children:J.label})]},J.key))})]}),a.jsxs("div",{className:de,children:[a.jsx("h3",{className:"text-xs tracking-widest text-cyan-400/70 mb-3 font-bold",children:""}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("label",{className:"flex flex-col items-center cursor-pointer p-2 bg-black/30 rounded border border-cyan-500/10",children:[a.jsx("input",{type:"checkbox",checked:b.memory.longTermEnabled,onChange:()=>C({...b,memory:{...b.memory,longTermEnabled:!b.memory.longTermEnabled}}),className:"w-5 h-5 accent-cyan-400 mb-1.5"}),a.jsx("span",{className:"text-xs text-cyan-300/60 tracking-wider",children:""})]}),a.jsxs("label",{className:"flex flex-col items-center cursor-pointer p-2 bg-black/30 rounded border border-cyan-500/10",children:[a.jsx("input",{type:"checkbox",checked:b.memory.shortTermEnabled,onChange:()=>C({...b,memory:{...b.memory,shortTermEnabled:!b.memory.shortTermEnabled}}),className:"w-5 h-5 accent-cyan-400 mb-1.5"}),a.jsx("span",{className:"text-xs text-cyan-300/60 tracking-wider",children:""})]})]}),b.memory.longTermEnabled&&a.jsxs("div",{className:"mt-3",children:[a.jsx("span",{className:"text-[10px] text-cyan-400/50 block mb-1",children:""}),a.jsx("input",{type:"number",value:b.memory.longTermLimit,onChange:J=>C({...b,memory:{...b.memory,longTermLimit:parseInt(J.target.value)||10}}),className:se})]}),b.memory.shortTermEnabled&&a.jsxs("div",{className:"mt-3",children:[a.jsx("span",{className:"text-[10px] text-cyan-400/50 block mb-1",children:""}),a.jsx("input",{type:"number",value:b.memory.shortTermLimit,onChange:J=>C({...b,memory:{...b.memory,shortTermLimit:parseInt(J.target.value)||20}}),className:se})]})]}),a.jsx("button",{onClick:q,className:"w-full py-3 bg-cyan-500/20 border border-cyan-400/50 text-cyan-400 text-xs font-bold tracking-[0.3em] hover:bg-cyan-500/40 transition-all shadow-lg active:scale-[0.97] touch-manipulation min-h-[50px]",children:""})]})]}),a.jsx("div",{className:"space-y-3 pb-4",children:[{key:"systemCore",label:"",value:h.systemCore},{key:"userInfo",label:"",value:h.userInfo},{key:"worldBook",label:"",value:h.worldBook},{key:"chatPreset",label:"",value:h.chatPreset},{key:"casinoActingPreset",label:"",value:h.casinoActingPreset},{key:"casinoFeedbackPreset",label:"",value:h.casinoFeedbackPreset},{key:"quotePreset",label:"",value:h.quotePreset},{key:"summaryPreset",label:"",value:h.summaryPreset}].map(J=>a.jsxs("div",{className:de,children:[a.jsx("label",{className:xe,children:J.label}),a.jsx("textarea",{value:J.value,onChange:le=>v({...h,[J.key]:le.target.value}),rows:J.key==="systemCore"?5:4,className:se+" resize-none font-mono text-xs min-h-[100px]"})]},J.key))})]}):a.jsx("div",{className:"lg:hidden space-y-3 pb-4 animate-in fade-in duration-500",children:a.jsxs("div",{className:"bg-black/50 backdrop-blur-xl border border-cyan-500/30 p-4 rounded-lg",children:[a.jsxs("div",{className:"flex flex-col gap-3 mb-4",children:[a.jsx("span",{className:"text-xs text-cyan-400/70 tracking-widest",children:""}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:su.map(J=>a.jsx("button",{onClick:()=>x(J.id),className:`${re} ${g===J.id?"bg-cyan-500/30 border-cyan-400 text-cyan-200":"bg-black/40 border-cyan-500/20 text-cyan-400/50 hover:border-cyan-500/40"}`,children:J.name},J.id))})]}),a.jsx("div",{className:"bg-black/60 border border-cyan-500/20 p-3 rounded",children:a.jsx("pre",{className:"text-xs text-cyan-100/80 font-mono whitespace-pre-wrap break-all max-h-[50vh] overflow-y-auto",children:U})}),a.jsx("div",{className:"mt-3 text-[10px] text-cyan-400/40 tracking-widest text-center",children:"[  -  ]"})]})})]})})]}),E&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-black/90 border border-cyan-500/30 p-6 rounded-lg max-w-md w-full mx-4 animate-in zoom-in-95 duration-200",children:[a.jsx("h3",{className:"text-lg tracking-widest text-cyan-400 mb-4 font-bold",children:""}),a.jsx("input",{type:"text",value:A,onChange:J=>T(J.target.value),placeholder:"...",className:se+" mb-4",autoFocus:!0}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{w(!1),T("")},className:"flex-1 py-2 bg-black/40 border border-cyan-500/20 text-cyan-400/50 text-xs tracking-widest hover:bg-black/60 transition-all rounded-sm",children:""}),a.jsx("button",{onClick:I,className:"flex-1 py-2 bg-cyan-500/20 border border-cyan-400/50 text-cyan-400 text-xs tracking-widest hover:bg-cyan-500/40 transition-all rounded-sm",children:""})]})]})})]})},ho={google:{baseUrl:"https://generativelanguage.googleapis.com/v1",modelName:"gemini-3-flash-preview",label:"Google Gemini",requiresApiKey:!0},openai:{baseUrl:"https://api.openai.com/v1",modelName:"gpt-4o",label:"OpenAI",requiresApiKey:!0},custom:{baseUrl:"",modelName:"",label:"",requiresApiKey:!0}},QE=()=>{const[n,e]=D.useState("menu"),[i,s]=D.useState({provider:"google",apiKey:"",baseUrl:ho.google.baseUrl,modelName:ho.google.modelName}),[r,u]=D.useState(!1),[f,g]=D.useState(!1),[x,h]=D.useState(null),[v,b]=D.useState(null),[C,A]=D.useState(""),[T,E]=D.useState(!1),[w,R]=D.useState(null),[I,M]=D.useState("KO_CN"),[q,G]=D.useState(!1),[U,V]=D.useState(null),ce=D.useRef(null),se="https://drive-cdn.mujian.me/20/Asael/5cb6e2a1-cebc-4e08-9555-a8473a1f24c3_retouch_2026011322465870.webp";D.useEffect(()=>{const z=localStorage.getItem("SR_AI_CONFIG");if(z)try{const ue=JSON.parse(z);s({provider:ue.provider||"google",apiKey:ue.apiKey||"",baseUrl:ue.baseUrl||ho[ue.provider||"google"].baseUrl,modelName:ue.modelName||ho[ue.provider||"google"].modelName})}catch(ue){console.error("Failed to load config",ue)}const W=localStorage.getItem("SR_SYSTEM_LANGUAGE");W&&Bs.some(ue=>ue.value===W)&&M(W)},[]);const xe=z=>{const W=ho[z];s({...i,provider:z,baseUrl:W.baseUrl,modelName:W.modelName}),h(null)},de=async()=>{if(!i.apiKey){alert(" API Key");return}g(!0),h(null),b(null);try{const W=await wa.getProvider({provider:i.provider,apiKey:i.apiKey,baseUrl:i.baseUrl,modelName:i.modelName}).healthCheck();h(W.success?"success":"error"),W.success||b(W.error||"")}catch(z){console.error("Connection test failed:",z),h("error"),b(z instanceof Error?z.message:"")}finally{g(!1)}},Q=async()=>{if(!i.apiKey){alert(" API Key");return}E(!0),R(null);const z=Date.now();try{const W=await Y0(C,[]);R({success:!0,response:JSON.stringify(W,null,2),duration:Date.now()-z})}catch(W){const ue=W instanceof Error?W.message:String(W);let fe="UNKNOWN_ERROR";ue.includes("401")||ue.includes("unauthorized")?fe="AUTH_ERROR (401)":ue.includes("403")||ue.includes("forbidden")?fe="FORBIDDEN (403)":ue.includes("404")?fe="NOT_FOUND (404)":ue.includes("429")||ue.includes("rate limit")?fe="RATE_LIMIT (429)":ue.includes("500")?fe="SERVER_ERROR (500)":ue.includes("503")?fe="SERVICE_UNAVAILABLE (503)":(ue.includes("network")||ue.includes("fetch"))&&(fe="NETWORK_ERROR"),R({success:!1,error:ue,errorType:fe,duration:Date.now()-z})}finally{E(!1)}},re=()=>{localStorage.setItem("SR_AI_CONFIG",JSON.stringify(i)),window.dispatchEvent(new Event("sr_config_updated")),alert(""),h(null)},J=z=>{z!==I&&(V(z),G(!0))},le=()=>{var z;U&&(localStorage.setItem("SR_SYSTEM_LANGUAGE",U),localStorage.removeItem("SR_WORD_BOOK"),localStorage.removeItem("SR_WORD_TRAINING_PROGRESS"),localStorage.removeItem("SR_VOCABULARY_CACHE"),M(U),window.dispatchEvent(new Event("sr_language_changed")),alert(` ${(z=Bs.find(W=>W.value===U))==null?void 0:z.label}
`)),G(!1),V(null)},B=()=>{G(!1),V(null)},j=async z=>{var ue;const W=(ue=z.target.files)==null?void 0:ue[0];W&&await YE(W)},Z="w-full bg-black/60 border border-cyan-500/30 p-2.5 text-sm text-cyan-50 focus:outline-none focus:border-cyan-400/70 transition-all rounded-sm font-light",X="text-[10px] text-cyan-400/50 uppercase tracking-widest mb-1.5 block font-bold",$={background:"linear-gradient(to bottom, #0891b2 0%, #22d3ee 50%, #a5f3fc 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",WebkitBoxReflect:"below -12px linear-gradient(transparent, rgba(34, 211, 238, 0.15))",display:"inline-block"},N=()=>{var z;return a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-2 duration-500 max-w-lg mx-auto",children:[a.jsx("h3",{className:"text-xl tracking-[0.3em] font-bold border-l-4 border-cyan-500/60 pl-4 py-1",style:$,children:""}),a.jsxs("div",{className:"bg-black/50 backdrop-blur-xl border border-cyan-500/20 p-6 space-y-5 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("label",{className:X,children:""}),a.jsx("select",{value:I,onChange:W=>J(W.target.value),className:Z,children:Bs.map(W=>a.jsx("option",{value:W.value,children:W.label},W.value))}),a.jsxs("p",{className:"text-[10px] text-cyan-400/40 mt-2 tracking-widest",children:["",(z=Bs.find(W=>W.value===I))==null?void 0:z.label]})]}),a.jsxs("div",{className:"pt-4 border-t border-cyan-500/10",children:[a.jsx("label",{className:X,children:""}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:["google","openai","custom"].map(W=>a.jsx("button",{onClick:()=>xe(W),className:`py-2 px-3 text-xs tracking-wider border transition-all rounded-sm ${i.provider===W?"bg-cyan-500/30 border-cyan-400 text-cyan-200":"bg-black/40 border-cyan-500/20 text-cyan-400/50 hover:border-cyan-500/40 hover:text-cyan-300"}`,children:ho[W].label},W))})]}),a.jsxs("div",{children:[a.jsx("label",{className:X,children:i.provider==="google"?"Google Gemini API Key":i.provider==="openai"?"OpenAI API Key":"API Key"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:r?"text":"password",value:i.apiKey,onChange:W=>{s({...i,apiKey:W.target.value}),h(null)},placeholder:i.provider==="google"?" Google API Key...":" API Key...",className:Z+" pr-12"}),a.jsx("button",{onClick:()=>u(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-cyan-400/40 hover:text-cyan-400 transition-colors",children:a.jsx("span",{className:"text-[10px]",children:r?"HIDE":"SHOW"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:X,children:"API Base URL"}),a.jsx("input",{type:"text",value:i.baseUrl,onChange:W=>{s({...i,baseUrl:W.target.value}),h(null)},placeholder:"https://api.example.com/v1",className:Z})]}),a.jsxs("div",{children:[a.jsx("label",{className:X,children:""}),a.jsx("input",{type:"text",value:i.modelName,onChange:W=>{s({...i,modelName:W.target.value}),h(null)},placeholder:"gpt-4o / gemini-3-flash-preview",className:Z})]}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsx("button",{onClick:de,disabled:f||ho[i.provider].requiresApiKey&&!i.apiKey,className:"flex-1 py-2.5 bg-cyan-500/10 border border-cyan-500/40 text-cyan-400 text-xs font-bold tracking-widest hover:bg-cyan-500/20 transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed",children:f?"...":""}),a.jsx("button",{onClick:re,className:"flex-1 py-2.5 bg-cyan-500/20 border border-cyan-400/50 text-cyan-400 text-xs font-bold tracking-[0.5em] hover:bg-cyan-500/40 transition-all shadow-lg active:scale-[0.98]",children:""})]}),x&&a.jsxs("div",{className:`p-3 text-xs tracking-widest text-center rounded ${x==="success"?"bg-green-500/20 border border-green-500/40 text-green-300":"bg-red-500/20 border border-red-500/40 text-red-300"}`,children:[x==="success"?" ":" ",v&&a.jsx("div",{className:"mt-2 text-[10px] opacity-80 font-mono",children:v})]}),a.jsxs("div",{className:"pt-4 border-t border-cyan-500/10",children:[a.jsx("label",{className:X,children:""}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:C,onChange:W=>A(W.target.value),placeholder:"...",className:Z}),a.jsx("button",{onClick:Q,disabled:T||ho[i.provider].requiresApiKey&&!i.apiKey,className:"px-4 py-2 bg-purple-500/10 border border-purple-500/40 text-purple-400 text-xs font-bold tracking-widest hover:bg-purple-500/20 transition-all active:scale-[0.98] disabled:opacity-50 whitespace-nowrap",children:T?"...":""})]}),w&&a.jsxs("div",{className:`mt-3 p-3 text-xs tracking-widest rounded ${w.success?"bg-green-500/20 border border-green-500/40 text-green-300":"bg-red-500/20 border border-red-500/40 text-red-300"}`,children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{children:w.success?" ":" "}),w.duration&&a.jsxs("span",{className:"opacity-60",children:[w.duration,"ms"]})]}),!w.success&&w.errorType&&a.jsxs("div",{className:"mb-2 font-bold",children:[": ",w.errorType]}),w.error&&a.jsx("div",{className:"font-mono text-[10px] opacity-80 break-all",children:w.error}),w.success&&w.response&&a.jsx("div",{className:"font-mono text-[10px] opacity-80 max-h-32 overflow-y-auto whitespace-pre-wrap",children:w.response})]})]})]}),i.provider==="openai"&&a.jsxs("div",{className:"bg-black/30 border border-cyan-500/10 p-4 rounded text-xs text-cyan-400/50 space-y-2",children:[a.jsx("p",{className:"font-bold text-cyan-400/70",children:""}),a.jsxs("ul",{className:"space-y-1 ml-4",children:[a.jsx("li",{children:" OpenAI: https://api.openai.com/v1 | gpt-4o"}),a.jsx("li",{children:" Azure: https://<resource>.openai.azure.com/openai/ | gpt-4o"}),a.jsx("li",{children:" Ollama: http://localhost:11434/v1 | qwen2.5:7b"}),a.jsx("li",{children:" LM Studio: http://localhost:1234/v1 | meta-llama-3-8b-instruct"})]})]})]})},F=()=>{switch(n){case"message":return a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-2 duration-500 max-w-2xl mx-auto",children:[a.jsx("h3",{className:"text-xl tracking-[0.3em] font-bold border-l-4 border-cyan-500/60 pl-4 py-1",style:$,children:""}),a.jsxs("div",{className:"bg-black/40 backdrop-blur-md border border-cyan-500/20 p-8 space-y-4 text-cyan-50/80 leading-relaxed font-light italic text-sm rounded-lg shadow-2xl",children:[a.jsx("p",{children:"0.2.2"}),a.jsx("p",{children:"AI"}),a.jsx("p",{children:"Alien StageTopik6"}),a.jsx("p",{children:"~~BUGorz"}),a.jsx("p",{className:"pt-4 text-right opacity-60",children:" "}),a.jsx("p",{className:"pt-4 opacity-60",children:"  Google ai studio"})]})]});case"tutorial":return a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-2 duration-500 max-w-3xl mx-auto",children:[a.jsx("h3",{className:"text-xl tracking-[0.3em] font-bold border-l-4 border-cyan-500/60 pl-4 py-1",style:$,children:""}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mt-4",children:[{t:"01. AI",d:""},{t:"02. ",d:"/~"},{t:"03. ",d:"Asael~"},{t:"04. ",d:""},{t:"05. ",d:""},{t:"06. ",d:""},{t:"07. ",d:"CG~"},{t:"08. ",d:"all in//"},{t:"09. API",d:"Open AIF12"},{t:"10. ",d:"+SDK"}].map((z,W)=>a.jsxs("div",{className:"bg-black/40 backdrop-blur-md border border-cyan-500/10 p-4 rounded-sm hover:border-cyan-500/30 transition-colors",children:[a.jsx("div",{className:"text-cyan-400 text-sm mb-1.5 font-bold tracking-widest",children:z.t}),a.jsx("p",{className:"text-sm text-cyan-50/50 leading-snug",children:z.d})]},W))})]});case"config":return N();case"backup":return a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-2 duration-500 max-w-lg mx-auto pb-12",children:[a.jsx("h3",{className:"text-xl tracking-[0.3em] font-bold border-l-4 border-cyan-500/60 pl-4 py-1",style:$,children:""}),a.jsxs("div",{className:"bg-black/50 backdrop-blur-xl border border-dashed border-cyan-500/30 p-8 text-center space-y-6 rounded-lg relative overflow-hidden group",children:[a.jsxs("div",{className:"text-[11px] text-cyan-50/50 tracking-widest leading-relaxed text-left space-y-3 bg-black/20 p-4 rounded border border-white/5",children:[a.jsx("p",{children:""}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 opacity-60 font-light",children:[a.jsx("li",{children:" (API Keys & Config)"}),a.jsx("li",{children:" (Chat History)"}),a.jsx("li",{children:" (Wordbook)"}),a.jsx("li",{children:" (Character Stats)"}),a.jsx("li",{children:""})]})]}),a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsx("button",{onClick:FE,className:"py-3 bg-cyan-500/10 border border-cyan-500/30 text-cyan-400 text-[10px] tracking-widest hover:bg-cyan-500/20 transition-all active:scale-[0.98] shadow-[0_0_15px_rgba(34,211,238,0.2)]",children:" (.JSON)"}),a.jsx("button",{onClick:()=>{var z;return(z=ce.current)==null?void 0:z.click()},className:"py-3 border border-white/10 text-white/40 text-[10px] tracking-widest hover:bg-white/5 transition-all active:scale-[0.98]",children:""}),a.jsx("input",{type:"file",ref:ce,onChange:j,accept:".json",className:"hidden"})]}),a.jsxs("div",{className:"pt-6 mt-4 border-t border-white/10 space-y-3",children:[a.jsx("button",{onClick:JE,className:"w-full py-3 bg-red-500/10 border border-red-500/40 text-red-500 text-[10px] tracking-widest hover:bg-red-500/20 transition-all active:scale-[0.98] shadow-[0_0_15px_rgba(239,68,68,0.1)]",children:""}),a.jsx("button",{onClick:$E,className:"w-full py-3 bg-red-900/10 border border-red-900/20 text-red-500/40 text-[10px] tracking-widest hover:bg-red-900/20 transition-all active:scale-[0.98]",children:""})]})]})]});case"prompt":return a.jsx(KE,{onBack:()=>e("menu")});default:return a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 animate-in zoom-in-95 duration-500 max-w-3xl mx-auto mt-6",children:[a.jsx(Ls,{title:"",icon:"",onClick:()=>e("message")}),a.jsx(Ls,{title:"",icon:"",onClick:()=>e("tutorial")}),a.jsx(Ls,{title:"",icon:"",onClick:()=>e("config")}),a.jsx(Ls,{title:"",icon:"",onClick:()=>e("prompt")}),a.jsx(Ls,{title:"",icon:"",onClick:()=>e("backup")})]})}};return a.jsxs("div",{className:"h-full flex flex-col overflow-y-auto no-scrollbar relative font-serif",style:{fontFamily:"'Noto Serif SC', serif"},children:[a.jsxs("div",{className:"fixed inset-0 z-0",children:[a.jsx("img",{src:se,className:"w-full h-full object-cover",alt:"Background"}),a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-[2px]"})]}),a.jsxs("header",{className:"px-6 py-10 md:px-12 border-b border-cyan-500/10 flex justify-between items-center z-10 shrink-0",children:[a.jsx("h2",{className:"text-3xl tracking-[0.4em] font-bold uppercase drop-shadow-[0_0_15px_rgba(34,211,238,0.3)]",style:$,children:""}),n!=="menu"&&a.jsx("button",{onClick:()=>e("menu"),className:"text-cyan-400/70 text-[10px] tracking-widest border border-cyan-500/30 px-5 py-1.5 hover:bg-cyan-500/20 hover:text-cyan-200 transition-all rounded-full bg-black/40 backdrop-blur-sm shadow-xl",children:"RETURN"})]}),a.jsx("div",{className:"flex-1 px-6 py-10 md:px-12 w-full mx-auto z-10",children:F()}),q&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:B}),a.jsx("div",{className:"relative bg-black/90 backdrop-blur-xl border border-red-500/40 p-6 rounded-lg max-w-sm w-full shadow-[0_0_50px_rgba(239,68,68,0.3)] animate-in fade-in zoom-in-95 duration-300",children:a.jsxs("div",{className:"text-center space-y-5",children:[a.jsx("div",{className:"w-14 h-14 mx-auto bg-red-500/20 rounded-full flex items-center justify-center border border-red-500/40",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-bold text-red-400 tracking-widest mb-2",children:""}),a.jsx("p",{className:"text-sm text-cyan-50/70 leading-relaxed",children:""})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{onClick:B,className:"flex-1 py-2.5 border border-cyan-500/30 text-cyan-400/70 text-xs tracking-widest hover:bg-cyan-500/10 transition-all rounded-sm",children:""}),a.jsx("button",{onClick:le,className:"flex-1 py-2.5 bg-red-500/20 border border-red-500/50 text-red-400 text-xs tracking-widest hover:bg-red-500/40 transition-all rounded-sm shadow-[0_0_15px_rgba(239,68,68,0.2)]",children:""})]})]})})]}),a.jsxs("div",{className:"fixed bottom-8 left-8 pointer-events-none opacity-[0.05] z-10 flex flex-col",children:[a.jsx("span",{className:"text-xs font-bold tracking-[1em] text-cyan-400",children:"ASAEL_OS"}),a.jsx("span",{className:"text-[8px] tracking-[0.5em] text-cyan-400/50 mt-1 uppercase",children:"Protocol Control Interface"})]})]})},Ls=({title:n,icon:e,onClick:i})=>a.jsxs("button",{onClick:i,className:"group bg-black/40 backdrop-blur-md border border-cyan-500/20 p-6 text-left hover:border-cyan-400/60 hover:bg-cyan-500/10 transition-all duration-300 relative overflow-hidden rounded-sm",children:[a.jsx("div",{className:"absolute -top-4 -right-4 text-cyan-400/5 text-7xl transition-all group-hover:scale-110 group-hover:text-cyan-400/10",children:e}),a.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[a.jsx("div",{className:"w-9 h-9 border border-cyan-500/20 flex items-center justify-center text-cyan-400 text-xl group-hover:border-cyan-400 group-hover:shadow-[0_0_15px_rgba(34,211,238,0.4)] transition-all bg-black/20",children:e}),a.jsx("h3",{className:"text-cyan-50 text-xl tracking-[0.2em] group-hover:text-cyan-300 transition-colors font-bold",children:n})]}),a.jsx("div",{className:"h-[1px] w-12 bg-cyan-500/40 group-hover:w-full transition-all duration-700"})]});let XE=0;function ZE(n){return`cell_${n.q}_${n.r}_${++XE}`}const ew=[{q:1,r:0},{q:1,r:-1},{q:0,r:-1},{q:-1,r:0},{q:-1,r:1},{q:0,r:1}],tw=n=>ew.map(e=>({q:n.q+e.q,r:n.r+e.r})),zs=(n,e)=>(Math.abs(n.q-e.q)+Math.abs(n.q+n.r-e.q-e.r)+Math.abs(n.r-e.r))/2,nw={CITY_CENTER:{minRadius:0,maxRadius:2,density:"high",diversity:"high"},COMMERCIAL:{minRadius:1,maxRadius:4,density:"medium",diversity:"medium"},RESIDENTIAL:{minRadius:2,maxRadius:6,density:"medium",diversity:"low"},INDUSTRIAL:{minRadius:3,maxRadius:8,density:"low",diversity:"very_low"},NATURAL:{minRadius:4,maxRadius:10,density:"very_low",diversity:"medium"},SPECIAL:{minRadius:0,maxRadius:10,density:"variable",diversity:"high"}},ow=n=>{const e=zs({q:0,r:0},n),i=Math.abs(n.q),s=Math.abs(n.r),r=Math.max(i,s,Math.abs(-n.q-n.r));let u;return e<=1?u="CITY_CENTER":r<=2?u="COMMERCIAL":e<=4&&n.q*n.r<0?u="RESIDENTIAL":e>6?u="NATURAL":Math.random()<.1?u="SPECIAL":u=e<=3?"COMMERCIAL":"RESIDENTIAL",console.log("[]  - :",n,"- :",e,"- :",u),u},iw=(n,e)=>{if(e)return console.log("[]  - :",n),{cellType:"home",urbanZone:"RESIDENTIAL",density:"medium",hasNPC:!1,hasShop:!1,hasQuest:!1,isLocked:!1};const i=ow(n),s=zs({q:0,r:0},n),r=Math.random(),u=nw[i];u.density==="high"||u.density;let f="normal",g=!1;r<.03?(g=!0,f="lock"):r<.15?f="quest":r<.25?f=i==="CITY_CENTER"?"hospital":"shop":r<.35?f="bookstore":r<.5&&(f="npc");const x=f==="shop"||i==="COMMERCIAL"&&r<.4,h=f==="npc"||u.diversity!=="very_low"&&r<.3,v=f==="quest"||s>2&&r<.2;return console.log("[]  - :",n,"- :",f,"- :",i,"- :",u.density,"- :",r.toFixed(3)),console.log("[]  - :",x,"- NPC:",h,"- :",v,"- :",g),{cellType:f,urbanZone:i,density:u.density,hasNPC:h,hasShop:x,hasQuest:v,isLocked:g}},sw=(n,e)=>{const i={home:["","","",""],hospital:["","","",""],bookstore:["","","",""],shop:["","","",""],npc:["","","",""],quest:["","","",""],lock:["","","",""],normal:["","","",""]},s=i[n.cellType]||i.normal,r=Math.abs(e.q*7+e.r*13),u=s[r%s.length];return console.log("[]  - :",n.cellType,"- :",r,"- :",u),u},lw=(n,e)=>{const i=e.urbanZone;zs({q:0,r:0},n);const s={CITY_CENTER:["","","",""],COMMERCIAL:["","","",""],RESIDENTIAL:["","","",""],INDUSTRIAL:["","","",""],NATURAL:["","","",""],SPECIAL:["","","",""]},r={CITY_CENTER:{home:["","",""],hospital:["","",""],bookstore:["","",""],shop:["","",""],npc:["","",""],quest:["","",""],lock:["","",""],normal:["","",""]},RESIDENTIAL:{home:["","",""],hospital:["","",""],bookstore:["","",""],shop:["","",""],npc:["","",""],quest:["","",""],lock:["","",""],normal:["","",""]},NATURAL:{home:["","",""],hospital:["","",""],bookstore:["","",""],shop:["","",""],npc:["","",""],quest:["","",""],lock:["","",""],normal:["","",""]}},u=s[i]||s.RESIDENTIAL,f=r[i]||r.RESIDENTIAL,g=Math.abs(n.q*3+n.r*7)%u.length,x=f[e.cellType]||f.normal,h=Math.abs(n.q*5+n.r*11)%x.length,v=u[g]+x[h];return console.log("[]  - :",n,"- :",i,"- :",e.cellType,"- :",v),v},aw=(n,e)=>{const i=e.urbanZone;zs({q:0,r:0},n);const s={CITY_CENTER:{home:["24",""],hospital:["24",""],bookstore:["24",""],shop:["","24"],npc:["",""],quest:["",""],lock:["",""],normal:["",""]},RESIDENTIAL:{home:["",""],hospital:["","24"],bookstore:["",""],shop:["",""],npc:["",""],quest:["",""],lock:["",""],normal:["",""]},NATURAL:{home:["",""],hospital:["",""],bookstore:["",""],shop:["",""],npc:["",""],quest:["",""],lock:["",""],normal:["",""]}},r=s[i]||s.RESIDENTIAL,u=r[e.cellType]||r.normal,f=Math.abs(n.q*2+n.r*3)%u.length,g=u[f];return console.log("[]  - :",n,"- :",i,"- :",e.cellType,"- :",g.length),g},rw=n=>{if(console.log("[]  - :",n.cellType,"- :",n.hasShop,"- NPC:",n.hasNPC,"- :",n.hasQuest,"- :",n.isLocked),n.cellType==="home"){const e={homeFeatures:{canRest:!0,canSave:!0,canTimeRewind:!1,restEffects:{sanity:20,focus:30},saveSlots:3}};return console.log("[]  - :",e.homeFeatures.canRest,"- :",e.homeFeatures.canSave),e}if(n.isLocked){const e={lockFeatures:{isLocked:!0,unlockCondition:[{type:"quest_complete",value:1,current:0},{type:"vocabulary",value:50,current:0}],hint:""}};return console.log("[]  - :",e.lockFeatures.unlockCondition),e}if(n.hasShop){const e=[{id:"coffee",name:"",icon:"",cost:5,type:"item",description:""},{id:"snack",name:"",icon:"",cost:3,type:"item",description:""},{id:"map",name:"",icon:"",cost:10,type:"item",description:""}];return console.log("[]  - :",e.length,"- :",e.map(i=>i.name).join(", ")),{shop:e}}return{}},Og=async(n,e=!1,i=[])=>{console.log("[] =====  ====="),console.log("[] :",n,"- :",e);const s=iw(n,e);let r=sw(s,n),u=lw(n,s),f=aw(n,s);if(!e){console.log("[] AI...");const b=zs({q:0,r:0},n),C=await mE(n,s.urbanZone,b,i);C?(console.log("[] AIAI"),r=C.icon||r,u=C.title||u,f=C.description||f):console.log("[] AI")}const g=rw(s),x=ZE(n),h=e?[{id:`home_${n.q}_${n.r}_1`,speaker:"narrator",content:""},{id:`home_${n.q}_${n.r}_2`,speaker:"asael",content:"~",speakerAvatar:"asael"}]:[{id:`${x}_1`,speaker:"narrator",content:f}],v={id:x,title:u,description:f,location:u,hexCoord:n,icon:r,requires:{previousNode:[]},dialogues:h,cellType:s.cellType,visitCount:0,isCurrentLocation:!1,...g};return console.log("[] =====  ====="),console.log("[] ID:",x),console.log("[] :",u),console.log("[] :",r),console.log("[] :",s.cellType),console.log("[] :",s.urbanZone),console.log("[] :",h.length),v},cw=n=>(console.log("[]  - :",n),{id:`blank_${n.q}_${n.r}`,title:"",description:"",location:"",hexCoord:n,icon:"",requires:{},dialogues:[],cellType:"normal",visitCount:0,isCurrentLocation:!1});class W0{constructor(e){this.generatedNodes=new Map,this.homePosition={q:0,r:0},this.onGeneratingChange=null,console.log("[] =====  ====="),console.log("[] :",this.homePosition),e&&(this.onGeneratingChange=e),this.initializationPromise=this.initializeMap()}async initializeMap(){const e=await Og(this.homePosition,!0),i=`${this.homePosition.q},${this.homePosition.r}`;this.generatedNodes.set(i,e),console.log("[] ID:",e.id),console.log("[] ..."),await this.revealNeighbors(this.homePosition),console.log("[]  - :",this.generatedNodes.size)}async revealNeighbors(e){console.log("[]  - :",e);const i=tw(e);console.log("[] :",i.length);let s=0;for(const r of i){const u=`${r.q},${r.r}`;if(!this.generatedNodes.has(u)){const f=cw(r);this.generatedNodes.set(u,f),s++}}console.log("[] :",s,"- :",this.generatedNodes.size)}async activateOnMove(e){console.log("[] :",e);const i=`${e.q},${e.r}`;if(this.generatedNodes.has(i)){const u=this.generatedNodes.get(i);if(u.title&&u.icon){console.log("[] "),await this.revealNeighbors(e);return}}this.onGeneratingChange&&this.onGeneratingChange(!0);const s=this.getAllGeneratedTitles(),r=await Og(e,!1,s);this.generatedNodes.set(i,r),console.log("[] AI:",r.title),await this.revealNeighbors(e),this.onGeneratingChange&&this.onGeneratingChange(!1)}async waitForInitialization(){await this.initializationPromise}getAllNodes(){return Array.from(this.generatedNodes.values())}getAllGeneratedTitles(){const e=[];for(const i of this.generatedNodes.values())i.title&&i.id.startsWith("cell_")&&e.push(i.title);return console.log("[] :",e.length),e}async getAllNodesAsync(){return await this.waitForInitialization(),this.getAllNodes()}getNodeByCoord(e){const i=`${e.q},${e.r}`,s=this.generatedNodes.get(i);return console.log("[]  - :",e,"- :",!!s),s}getHomePosition(){return console.log("[] :",this.homePosition),this.homePosition}getCoordsInRange(e,i){const s=[];for(let r=-i;r<=i;r++)for(let u=-i;u<=i;u++){const f=-r-u;Math.abs(f)<=i&&s.push({q:e.q+r,r:e.r+u})}return console.log("[]  - :",e,"- :",i,"- :",s.length),s}}let Gs=null,ba=null;const uw=n=>{ba=n,Gs&&ba&&(Gs=new W0(ba))},xo=()=>(Gs||(Gs=new W0(ba||void 0)),Gs),Tu=()=>{const e=xo().getAllNodes(),i={};for(const s of e)i[s.id]=s;return i},ma=n=>{const e=Tu();if(e[n])return e[n];const i=n.match(/^(-?\d+),(-?\d+)$/);if(i){const u=parseInt(i[1]),f=parseInt(i[2]);return xo().getNodeByCoord({q:u,r:f})}const s=n.match(/^cell_(-?\d+)_(-?\d+)/);if(s){const u=parseInt(s[1]),f=parseInt(s[2]);return xo().getNodeByCoord({q:u,r:f})}const r=n.match(/^blank_(-?\d+)_(-?\d+)/);if(r){const u=parseInt(r[1]),f=parseInt(r[2]);return xo().getNodeByCoord({q:u,r:f})}},lu=async n=>{const e=xo();await e.waitForInitialization(),await e.activateOnMove(n)},dw=()=>{const n=xo(),e=n.getNodeByCoord(n.getHomePosition());return{completedNodes:[],currentNode:(e==null?void 0:e.id)||"",currentDialogueIndex:0,unlockedCells:[(e==null?void 0:e.id)||"cell_0_0_home"],playerPosition:n.getHomePosition(),completedQuests:[],currentChapter:1,dayCount:1,lastUpdated:Date.now(),inventory:[],characterAffinities:{},characterIntimacy:{},unlockedLocks:[],homeSaves:[]}},zg=({node:n,isUnlocked:e,isCurrent:i,hexSize:s,distance:r=0,userAvatar:u="https://i.postimg.cc/9FjK3nBx/User_Avatar.webp"})=>{const f=A=>{const T=[];for(let E=0;E<6;E++){const w=Math.PI/3*E,R=A*Math.cos(w),I=A*Math.sin(w);T.push(`${R},${I}`)}return`M ${T.join(" L ")} Z`},g=f(s),h=(()=>{if(i)return 1;if(!e)return 0;if(r<=0)return .3;const A=1/(1+r*.15);return Math.max(.15,Math.min(.9,A))})(),v=()=>`rgba(197, 160, 89, ${h*.8})`,b=()=>i?`rgba(197, 160, 89, ${.3+h*.2})`:e?`rgba(197, 160, ${89-h*30}, ${.05+h*.1})`:"rgba(100, 100, 100, 0.05)",C=()=>`rgba(197, 160, 89, ${.3+h*.7})`;return a.jsxs("g",{className:"story-cell",children:[a.jsx("path",{d:g,fill:b(),stroke:C(),strokeWidth:i?3:1.5+h,className:`transition-all duration-300 ${e?"cursor-pointer hover:fill-[rgba(197,160,89,0.25)]":""}`,style:{filter:i?"drop-shadow(0 0 20px rgba(197, 160, 89, 0.8))":h>.5?`drop-shadow(0 0 ${10*h}px ${v()})`:"none"}}),e&&h>.3&&a.jsx("path",{d:f(s-5),fill:"transparent",stroke:`rgba(255, 255, 255, ${h*.15})`,strokeWidth:"1",className:"pointer-events-none"}),!e&&a.jsx("text",{x:"0",y:"8",textAnchor:"middle",fontSize:"24",fill:"rgba(197, 160, 89, 0.4)",className:"pointer-events-none",children:""}),(e||i)&&a.jsx("text",{x:"0",y:"8",textAnchor:"middle",fontSize:"28",fill:h>.5?`rgba(255, 255, 255, ${.7+h*.3})`:"rgba(197, 160, 89, 0.6)",className:"pointer-events-none",style:{filter:h>.7?"drop-shadow(0 0 8px rgba(255, 255, 255, 0.5))":"none"},children:n.icon}),a.jsx("title",{children:n.title}),i&&a.jsxs("g",{children:[a.jsx("g",{className:"animate-spin",style:{animationDuration:"6s",transformOrigin:"0 0"},children:a.jsxs("g",{transform:`translate(0, -${s*.75})`,children:[a.jsx("circle",{r:"4",fill:"rgba(255, 255, 200, 0.95)",className:"animate-pulse"}),a.jsx("circle",{r:"7",fill:"rgba(255, 255, 200, 0.3)",className:"animate-ping",style:{animationDuration:"1.5s"}})]})}),a.jsx("circle",{cx:"0",cy:-s*.866,r:"18",fill:"rgba(30, 30, 50, 0.95)",stroke:"rgba(197, 160, 89, 0.8)",strokeWidth:"2"}),a.jsx("clipPath",{id:`avatar-clip-${n.id}`,children:a.jsx("circle",{cx:"0",cy:-s*.866,r:"15"})}),a.jsx("image",{href:u,x:"-15",y:-s*.866-15,width:"30",height:"30",clipPath:`url(#avatar-clip-${n.id})`,preserveAspectRatio:"xMidYMid slice"})]})]})},fw=({nodes:n,unlockedCells:e,currentPosition:i,onCellClick:s,onCellInfoClick:r,onTradingClick:u,onInventoryClick:f,onHomeClick:g,onCharacterClick:x,onQuestClick:h,onLockClick:v,userAvatar:b="https://i.postimg.cc/9FjK3nBx/User_Avatar.webp"})=>{const[C,A]=D.useState(2),[T,E]=D.useState({x:0,y:0}),[w,R]=D.useState(!1),[I,M]=D.useState({x:0,y:0}),[q,G]=D.useState({visible:!1,x:0,y:0,nodeId:null}),[U,V]=D.useState(!1),[ce,se]=D.useState(null),[xe,de]=D.useState(null),[Q,re]=D.useState(!1),[J,le]=D.useState({visible:!1,x:0,y:0,nodeId:null}),B=D.useRef(null),j=D.useRef(null),Z=D.useRef(!1),X=D.useRef(null),$=D.useRef(null),N=D.useRef(C);D.useEffect(()=>{N.current=C},[C]),D.useEffect(()=>{const ne=X.current;if(!ne)return;const Ne=O=>{O.preventDefault();const te=O.deltaY>0?.9:1.1,pe=Math.max(3,Math.min(6,N.current*te));A(pe)};return ne.addEventListener("wheel",Ne,{passive:!1}),()=>{ne.removeEventListener("wheel",Ne)}},[]);const F=60,z=D.useCallback((ne,Ne)=>(Math.abs(ne.q-Ne.q)+Math.abs(ne.q+ne.r-Ne.q-Ne.r)+Math.abs(ne.r-Ne.r))/2,[]),W=D.useCallback(ne=>z(i,ne.hexCoord),[i,z]),ue=D.useCallback((ne,Ne)=>{const O=F*(1.5*ne),te=F*(Math.sqrt(3)/2*ne+Math.sqrt(3)*Ne);return{x:O,y:te}},[]),fe=ne=>{ne.button===0&&(R(!0),M({x:ne.clientX-T.x,y:ne.clientY-T.y}))},Ee=ne=>{w&&E({x:ne.clientX-I.x,y:ne.clientY-I.y})},me=()=>{R(!1)},ve=(ne,Ne)=>{try{ne.preventDefault()}catch{}n.find(te=>te.id===Ne)&&(e.includes(Ne),G({visible:!0,x:ne.clientX,y:ne.clientY,nodeId:Ne}))},je=D.useCallback(()=>{G(ne=>({...ne,visible:!1}))},[]),qe=ne=>{q.nodeId&&ne.onClick(),je()};D.useCallback((ne,Ne)=>{if(U)return;const O={...i},te=Date.now(),pe=500;V(!0),se({q:ne,r:Ne});const ye=()=>{const Be=Date.now()-te,Ze=Math.min(Be/pe,1),zo=1-Math.pow(1-Ze,3),qs=O.q+(ne-O.q)*zo,Hs=O.r+(Ne-O.r)*zo,vo=ue(qs,Hs);E({x:-vo.x*C+600,y:-vo.y*C+400}),Ze<1?$.current=requestAnimationFrame(ye):(V(!1),se(null))};$.current&&cancelAnimationFrame($.current),$.current=requestAnimationFrame(ye)},[i,ue,C,U]),D.useEffect(()=>{const ne=()=>{re("ontouchstart"in window||navigator.maxTouchPoints>0)};return ne(),window.addEventListener("resize",ne),()=>window.removeEventListener("resize",ne)},[]);const Je=D.useCallback(()=>{le(ne=>({...ne,visible:!1}))},[]),tt=ne=>{if(ne.touches.length===2){const Ne=ne.touches[0],O=ne.touches[1],te=Math.hypot(O.clientX-Ne.clientX,O.clientY-Ne.clientY);M({x:te,y:0})}else ne.touches.length===1&&(Z.current=!1,B.current={x:ne.touches[0].clientX,y:ne.touches[0].clientY},j.current=ne.target)},at=ne=>{if(ne.touches.length===2){const Ne=ne.touches[0],O=ne.touches[1],te=Math.hypot(O.clientX-Ne.clientX,O.clientY-Ne.clientY),pe=te/I.x,ye=Math.max(3,Math.min(6,C*pe));A(ye),M({x:te,y:0})}else if(ne.touches.length===1&&B.current){const Ne=ne.touches[0],O=Math.abs(Ne.clientX-B.current.x),te=Math.abs(Ne.clientY-B.current.y);(O>8||te>8)&&(Z.current=!0,R(!0),M({x:Ne.clientX-T.x,y:Ne.clientY-T.y}))}},_t=ne=>{if(ne.touches.length===0&&!Z.current&&j.current){const Ne=j.current.closest("g");if(Ne){const O=Ne.getAttribute("data-node-id");if(O&&e.includes(O)){const te=n.find(ye=>ye.id===O);if(!((te==null?void 0:te.hexCoord.q)===i.q&&(te==null?void 0:te.hexCoord.r)===i.r)){const ye=ne.changedTouches[0];le({visible:!0,x:ye.clientX,y:ye.clientY,nodeId:O})}}}}R(!1)};D.useEffect(()=>{const ne=Ne=>{q.visible&&je(),J.visible&&Je()};return document.addEventListener("click",ne),()=>document.removeEventListener("click",ne)},[q.visible,je,J.visible,Je]),D.useEffect(()=>()=>{$.current&&cancelAnimationFrame($.current)},[]);const Jt=ne=>{const Ne=ne.hexCoord.q===i.q&&ne.hexCoord.r===i.r,O=e.includes(ne.id),te=[];return Ne||te.push({id:"move",label:"",icon:"",onClick:()=>s(ne.id)}),O&&te.push({id:"info",label:"",icon:"",onClick:()=>r(ne)}),O&&ne.shop&&ne.shop.length>0&&u&&te.push({id:"trading",label:"",icon:"",onClick:()=>u(ne)}),O&&ne.characters&&ne.characters.length>0&&x&&ne.characters.forEach(pe=>{te.push({id:`character-${pe.id}`,label:`${pe.name}`,icon:pe.avatar||"",onClick:()=>x(ne,pe.id)})}),O&&ne.quests&&ne.quests.length>0&&h&&ne.quests.forEach(pe=>{te.push({id:`quest-${pe.id}`,label:`${pe.title}`,icon:"",onClick:()=>h(ne,pe.id)})}),O&&ne.cellType==="home"&&ne.homeFeatures&&g&&te.push({id:"home",label:"",icon:"",onClick:()=>g(ne)}),O&&f&&te.push({id:"inventory",label:"",icon:"",onClick:()=>f()}),!O&&ne.lockFeatures&&v&&te.push({id:"lock",label:"",icon:"",onClick:()=>v(ne)}),te};return a.jsxs("div",{ref:X,className:"relative w-full h-full overflow-hidden",style:{cursor:w?"grabbing":"grab",touchAction:"none",overscrollBehavior:"none"},onMouseDown:fe,onMouseMove:Ee,onMouseUp:me,onMouseLeave:me,onTouchStart:tt,onTouchMove:at,onTouchEnd:_t,children:[a.jsx("div",{className:"absolute inset-0 opacity-5",style:{backgroundImage:`
            linear-gradient(0deg, transparent 24%, rgba(197, 160, 89, 0.1) 25%, rgba(197, 160, 89, 0.1) 26%, transparent 27%, transparent 74%, rgba(197, 160, 89, 0.1) 75%, rgba(197, 160, 89, 0.1) 76%, transparent 77%, transparent),
            linear-gradient(90deg, transparent 24%, rgba(197, 160, 89, 0.1) 25%, rgba(197, 160, 89, 0.1) 26%, transparent 74%, rgba(197%, transparent 27, 160, 89, 0.1) 75%, rgba(197, 160, 89, 0.1) 76%, transparent 77%, transparent)
          `,backgroundSize:"50px 50px"}}),U&&ce&&a.jsx("div",{className:"absolute pointer-events-none",style:{left:"50%",top:"50%",width:"200px",height:"200px",transform:"translate(-50%, -50%)",background:"radial-gradient(circle, rgba(197, 160, 89, 0.2) 0%, transparent 70%)",animation:"pulse 0.5s ease-in-out infinite"}}),a.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"-500 -500 2000 2000",preserveAspectRatio:"xMidYMid meet",style:{transform:`translate(${T.x}px, ${T.y}px) scale(${C})`,transformOrigin:"50% 50%",transition:w||U?"none":"transform 0.3s ease-out"},children:[n.filter(ne=>!(ne.hexCoord.q===i.q&&ne.hexCoord.r===i.r)).map(ne=>{const Ne=ue(ne.hexCoord.q,ne.hexCoord.r),O=e.includes(ne.id),te=W(ne);return a.jsx("g",{"data-node-id":ne.id,transform:`translate(${Ne.x}, ${Ne.y})`,onClick:pe=>{var Be;pe.stopPropagation(),((Be=X.current)==null?void 0:Be.getBoundingClientRect())&&le({visible:!0,x:pe.clientX,y:pe.clientY,nodeId:ne.id})},onContextMenu:pe=>{pe.preventDefault(),ve(pe,ne.id)},onMouseEnter:()=>de(ne.id),onMouseLeave:()=>de(null),children:a.jsx(zg,{node:ne,isUnlocked:O,isCurrent:!1,hexSize:F,distance:te,userAvatar:b})},ne.id)}),(()=>{const ne=n.find(pe=>pe.hexCoord.q===i.q&&pe.hexCoord.r===i.r);if(!ne)return null;const Ne=ue(i.q,i.r),O=e.includes(ne.id),te=W(ne);return a.jsx("g",{"data-node-id":ne.id,transform:`translate(${Ne.x}, ${Ne.y})`,onClick:pe=>{var ye;pe.stopPropagation(),O&&((ye=X.current)!=null&&ye.getBoundingClientRect())&&le({visible:!0,x:pe.clientX,y:pe.clientY,nodeId:ne.id})},onContextMenu:pe=>{pe.preventDefault(),ve(pe,ne.id)},onMouseEnter:()=>de(ne.id),onMouseLeave:()=>de(null),children:a.jsx(zg,{node:ne,isUnlocked:O,isCurrent:!0,hexSize:F,distance:te,userAvatar:b})},`current-${ne.id}`)})()]}),q.visible&&q.nodeId&&(()=>{const ne=n.find(O=>O.id===q.nodeId);if(!ne)return null;const Ne=Jt(ne);return ne.hexCoord.q===i.q&&(ne.hexCoord.r,i.r),a.jsx("div",{className:"fixed z-50 bg-black/90 backdrop-blur-md border border-[#C5A059]/40 rounded-lg shadow-2xl overflow-hidden",style:{left:q.x,top:q.y,transform:"translate(-50%, -50%)"},children:Ne.map(O=>{const te=!ne.title||!ne.icon||!ne.dialogues||ne.dialogues.length===0,pe=O.id==="move"&&!te&&(!ne.dialogues||ne.dialogues.length===0);return a.jsxs("button",{onClick:()=>qe(O),disabled:pe,className:`w-full px-4 py-3 flex items-center gap-3 text-left text-sm transition-all
                      ${pe?"text-white/30 cursor-not-allowed":"text-white hover:bg-[#C5A059]/20 hover:text-[#C5A059]"}`,children:[a.jsx("span",{className:"text-lg",children:O.icon}),a.jsx("span",{className:"font-ui tracking-wide",children:O.label})]},O.id)})})})(),J.visible&&J.nodeId&&(()=>{const ne=n.find(O=>O.id===J.nodeId);if(!ne)return null;const Ne=Jt(ne);return a.jsx("div",{className:"fixed z-50 bg-black/90 backdrop-blur-md border border-[#C5A059]/40 rounded-lg shadow-2xl overflow-hidden",style:{left:J.x,top:J.y,transform:"translate(-50%, -50%)"},children:Ne.map(O=>{const te=!ne.title||!ne.icon||!ne.dialogues||ne.dialogues.length===0,pe=O.id==="move"&&!te&&(!ne.dialogues||ne.dialogues.length===0);return a.jsxs("button",{onClick:()=>{J.nodeId&&O.onClick(),Je()},disabled:pe,className:`w-full px-4 py-3 flex items-center gap-3 text-left text-sm transition-all
                    ${pe?"text-white/30 cursor-not-allowed":"text-white hover:bg-[#C5A059]/20 hover:text-[#C5A059]"}`,children:[a.jsx("span",{className:"text-lg",children:O.icon}),a.jsx("span",{className:"font-ui tracking-wide",children:O.label})]},O.id)})})})(),a.jsxs("div",{className:"absolute bottom-6 right-6 flex flex-col gap-2 z-20",children:[a.jsx("button",{onClick:()=>A(Math.min(6,C+.2)),className:"w-10 h-10 bg-[#C5A059]/20 hover:bg-[#C5A059]/40 border border-[#C5A059]/40 rounded-lg flex items-center justify-center text-[#C5A059] transition-all",title:"",children:"+"}),a.jsxs("div",{className:"text-[10px] text-[#C5A059]/60 text-center font-ui",children:[Math.round(C*100),"%"]}),a.jsx("button",{onClick:()=>A(Math.max(3,C-.2)),className:"w-10 h-10 bg-[#C5A059]/20 hover:bg-[#C5A059]/40 border border-[#C5A059]/40 rounded-lg flex items-center justify-center text-[#C5A059] transition-all",title:"",children:""}),a.jsx("button",{onClick:()=>{A(2),E({x:0,y:0})},className:"w-10 h-10 bg-[#C5A059]/20 hover:bg-[#C5A059]/40 border border-[#C5A059]/40 rounded-lg flex items-center justify-center text-[#C5A059] transition-all text-xs",title:"",children:""})]}),a.jsxs("div",{className:"absolute top-6 left-6 text-[10px] font-ui tracking-widest z-10 px-3 py-2 rounded-lg bg-gradient-to-r from-[#C5A059]/20 via-[#C5A059]/10 to-[#C5A059]/20 border border-[#C5A059]/30 text-[#C5A059]",children:[a.jsx("div",{children:":  / "}),a.jsx("div",{children:":  / "}),a.jsx("div",{children:": "})]}),U&&a.jsx("div",{className:"absolute top-6 right-6 text-xs text-[#C5A059] font-ui tracking-widest animate-pulse z-20",children:"..."})]})},pw=({choices:n,onChoiceSelect:e,isLoading:i=!1})=>a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"text-xs text-[#C5A059]/60 font-ui tracking-widest mb-4",children:" / CHOOSE YOUR ACTION"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:n.map((s,r)=>a.jsxs("button",{onClick:()=>e(s),disabled:i,className:`
              relative p-4 rounded-lg transition-all duration-300
              border border-[#C5A059]/40 hover:border-[#C5A059]
              bg-[#C5A059]/5 hover:bg-[#C5A059]/15
              text-white/80 hover:text-white
              disabled:opacity-50 disabled:cursor-not-allowed
              group
            `,children:[a.jsx("div",{className:"absolute inset-0 rounded-lg bg-gradient-to-r from-[#C5A059]/0 via-[#C5A059]/0 to-[#C5A059]/0 group-hover:from-[#C5A059]/10 group-hover:via-[#C5A059]/5 group-hover:to-[#C5A059]/0 transition-all"}),a.jsxs("div",{className:"relative flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full border border-[#C5A059]/40 group-hover:border-[#C5A059] flex items-center justify-center text-xs font-ui text-[#C5A059]/60 group-hover:text-[#C5A059] transition-colors",children:r+1}),a.jsxs("div",{className:"flex-1 text-left",children:[a.jsx("p",{className:"text-sm leading-relaxed",children:s.text}),s.requiresLanguageCheck&&a.jsxs("div",{className:"mt-2 text-xs text-[#C5A059]/60 flex items-center gap-1",children:[a.jsx("span",{children:""}),a.jsxs("span",{children:[s.requiresLanguageCheck.skill==="speaking"&&"",s.requiresLanguageCheck.skill==="listening"&&"",s.requiresLanguageCheck.skill==="reading"&&"",s.requiresLanguageCheck.skill==="writing"&&""," ","(",s.requiresLanguageCheck.difficulty==="easy"&&"",s.requiresLanguageCheck.difficulty==="normal"&&"",s.requiresLanguageCheck.difficulty==="hard"&&"",")"]})]}),s.isCorrect!==void 0&&a.jsxs("div",{className:`mt-2 text-xs flex items-center gap-1 ${s.isCorrect?"text-green-400":"text-red-400"}`,children:[a.jsx("span",{children:s.isCorrect?"":""}),a.jsx("span",{children:s.feedback||(s.isCorrect?"":"")})]})]}),a.jsx("div",{className:"flex-shrink-0 text-[#C5A059]/40 group-hover:text-[#C5A059] transition-colors",children:""})]})]},s.id))})]}),hw=({dialogue:n,onChoiceSelect:e,isLoading:i=!1})=>{const[s,r]=D.useState(""),[u,f]=D.useState(!0),g=()=>{!u&&!n.choices&&e("continue")};D.useEffect(()=>{if(!n.content){r(""),f(!1);return}r(""),f(!0);let v=0;const b=setInterval(()=>{v<n.content.length?(r(n.content.substring(0,v+1)),v++):(f(!1),clearInterval(b))},30);return()=>clearInterval(b)},[n.content]);const x=()=>{if(n.speakerName)return n.speakerName;switch(n.speaker){case"player":return"";case"asael":return"Asael";case"narrator":return"";default:return n.speaker}},h=()=>{switch(n.speaker){case"player":return"text-[#C5A059]";case"asael":return"text-[#C5A059]";case"narrator":return"text-white/60";default:return"text-white/80"}};return a.jsxs("div",{className:"w-full h-full flex flex-col backdrop-blur-sm cursor-pointer",onClick:g,children:[n.narration&&a.jsx("div",{className:"flex-1 flex items-center justify-center p-8 overflow-y-auto",children:a.jsx("div",{className:"max-w-2xl text-center",children:a.jsx("p",{className:"text-white/70 italic text-lg leading-relaxed font-light",children:n.narration})})}),a.jsxs("div",{className:"flex-1 flex flex-col justify-center px-8 py-6 overflow-y-auto",children:[n.speaker!=="narrator"&&a.jsx("div",{className:`text-sm font-ui tracking-widest mb-3 ${h()}`,children:x()}),n.content&&a.jsx("div",{className:"mb-6",children:a.jsxs("p",{className:"text-white text-lg leading-relaxed ko-text",children:[s,u&&a.jsx("span",{className:"animate-pulse",children:""})]})}),n.translation&&!u&&a.jsx("div",{className:"mb-6 p-4 bg-white/5 border-l-2 border-[#C5A059]/40 rounded-r",children:a.jsx("p",{className:"text-[#C5A059]/80 text-sm italic font-light",children:n.translation})})]}),n.choices&&n.choices.length>0&&!u&&a.jsx("div",{className:"px-8 py-6 border-t border-[#C5A059]/20",children:a.jsx(pw,{choices:n.choices,onChoiceSelect:v=>e(v.id),isLoading:i})}),!n.choices&&!u&&a.jsx("div",{className:"px-8 py-4 text-center cursor-pointer hover:text-[#C5A059]",children:a.jsx("div",{className:"text-[#C5A059]/60 text-xs font-ui tracking-widest animate-pulse hover:text-[#C5A059] transition-colors",children:" / CLICK TO CONTINUE"})})]})},mw=({stats:n,currentLocation:e,dayCount:i,userAvatar:s="https://i.postimg.cc/9FjK3nBx/User_Avatar.webp",userNickname:r="Navigator"})=>a.jsxs("div",{className:"w-full bg-gradient-to-b from-[#1a1a2e] to-[#0f0f1a] border-b-2 border-[#C5A059]/30 z-30",children:[a.jsxs("div",{className:"hidden md:flex items-center h-14 px-6",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-shrink-0",children:[a.jsx("div",{className:"w-10 h-10 rounded-full border-[2px] border-[#C5A059]/40 overflow-hidden",children:a.jsx("img",{src:s,alt:r,className:"w-full h-full object-cover"})}),a.jsx("div",{className:"text-sm font-bold text-white",children:r})]}),a.jsxs("div",{className:"flex items-center gap-6 ml-auto",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:""}),a.jsx("div",{className:"w-20 h-2 bg-white/10 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-[#4ade80] to-[#22c55e] rounded-full transition-all",style:{width:`${Math.min(n.sanity,100)}%`}})}),a.jsxs("span",{className:"text-sm text-white/80 min-w-[3rem]",children:[n.sanity,"/100"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:""}),a.jsx("div",{className:"w-20 h-2 bg-white/10 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-[#fbbf24] to-[#f59e0b] rounded-full transition-all",style:{width:`${Math.min(n.vocal,100)}%`}})}),a.jsxs("span",{className:"text-sm text-white/80 min-w-[3rem]",children:[n.vocal,"/100"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:""}),a.jsx("span",{className:"text-lg font-bold text-[#fbbf24]",children:n.stars})]})]}),a.jsx("div",{className:"h-6 w-px bg-[#C5A059]/20 mx-4"}),a.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[a.jsx("span",{className:"text-[#C5A059]/70",children:""}),a.jsx("span",{className:"text-white/80",children:e})]}),a.jsxs("div",{className:"text-sm text-white/60",children:["Day ",a.jsx("span",{className:"text-white font-medium",children:i})]})]})]}),a.jsxs("div",{className:"md:hidden flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between px-4 py-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-9 h-9 rounded-full border-[2px] border-[#C5A059]/40 overflow-hidden",children:a.jsx("img",{src:s,alt:r,className:"w-full h-full object-cover"})}),a.jsx("div",{className:"text-sm font-bold text-white",children:r})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-lg",children:""}),a.jsx("span",{className:"text-lg font-bold text-[#fbbf24]",children:n.stars})]})]}),a.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-black/40",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-sm",children:""}),a.jsx("div",{className:"w-16 h-2 bg-white/10 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-[#4ade80] to-[#22c55e] rounded-full",style:{width:`${Math.min(n.sanity,100)}%`}})}),a.jsx("span",{className:"text-xs text-white/80",children:n.sanity})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"text-sm",children:""}),a.jsx("div",{className:"w-16 h-2 bg-white/10 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gradient-to-r from-[#fbbf24] to-[#f59e0b] rounded-full",style:{width:`${Math.min(n.vocal,100)}%`}})}),a.jsx("span",{className:"text-xs text-white/80",children:n.vocal})]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/60",children:[a.jsx("span",{children:""}),a.jsx("span",{children:e}),a.jsxs("span",{className:"ml-2",children:["Day ",a.jsx("span",{className:"text-white font-medium",children:i})]})]})]})]})]}),K0=({shopItems:n,userStars:e,inventory:i,onPurchase:s,onClose:r})=>{const[u,f]=D.useState("all"),[g,x]=D.useState({}),h=D.useMemo(()=>{const E=new Set(n.map(w=>w.category));return["all",...Array.from(E)]},[n]),v=D.useMemo(()=>u==="all"?n:n.filter(E=>E.category===u),[n,u]),b=(E,w)=>{x(R=>({...R,[E]:Math.max(1,Math.min(w,99))}))},C=E=>{const w=g[E.id]||1;E.price*w<=e&&(s(E,w),x(I=>({...I,[E.id]:1})))},A=E=>{const w=i.find(R=>R.id===E);return(w==null?void 0:w.quantity)||0},T=E=>{const w=g[E.id]||1;return E.price*w};return a.jsx("div",{style:ze.overlay,children:a.jsxs("div",{style:ze.panel,children:[a.jsxs("div",{style:ze.header,children:[a.jsx("h2",{style:ze.title,children:" "}),a.jsx("button",{style:ze.closeButton,onClick:r,children:""})]}),a.jsxs("div",{style:ze.starsDisplay,children:[a.jsx("span",{style:ze.starsIcon,children:""}),a.jsx("span",{style:ze.starsAmount,children:e}),a.jsx("span",{style:ze.starsLabel,children:""})]}),a.jsx("div",{style:ze.categoryTabs,children:h.map(E=>a.jsx("button",{style:{...ze.categoryTab,...u===E?ze.categoryTabActive:{}},onClick:()=>f(E),children:E==="all"?"":E},E))}),a.jsx("div",{style:ze.itemGrid,children:v.map(E=>{const w=T(E)<=e,R=A(E.id);return a.jsxs("div",{style:ze.itemCard,children:[a.jsxs("div",{style:ze.itemHeader,children:[a.jsx("span",{style:ze.itemIcon,children:E.icon}),a.jsxs("div",{style:ze.itemInfo,children:[a.jsx("h4",{style:ze.itemName,children:E.name}),a.jsx("p",{style:ze.itemDescription,children:E.description})]})]}),a.jsx("div",{style:ze.itemEffects,children:E.effects.map((I,M)=>a.jsxs("span",{style:ze.effectTag,children:[I.type,": ",I.value>0?"+":"",I.value,I.duration?` (${I.duration})`:""]},M))}),E.stackable&&a.jsx("div",{style:ze.itemStock,children:a.jsxs("span",{children:[": ",R]})}),a.jsxs("div",{style:ze.purchaseSection,children:[a.jsxs("div",{style:ze.quantityControl,children:[a.jsx("button",{style:ze.quantityButton,onClick:()=>b(E.id,(g[E.id]||1)-1),children:"-"}),a.jsx("input",{type:"number",value:g[E.id]||1,onChange:I=>b(E.id,parseInt(I.target.value)||1),style:ze.quantityInput,min:1,max:99}),a.jsx("button",{style:ze.quantityButton,onClick:()=>b(E.id,(g[E.id]||1)+1),children:"+"})]}),a.jsx("div",{style:ze.costDisplay,children:a.jsxs("span",{style:ze.costAmount,children:[" ",T(E)]})}),a.jsx("button",{style:{...ze.purchaseButton,...w?{}:ze.purchaseButtonDisabled},onClick:()=>C(E),disabled:!w,children:w?"":""})]})]},E.id)})}),v.length===0&&a.jsxs("div",{style:ze.emptyState,children:[a.jsx("span",{style:ze.emptyIcon,children:""}),a.jsx("p",{children:""})]})]})})},ze={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},panel:{backgroundColor:"#1a1a2e",borderRadius:"16px",width:"100%",maxWidth:"500px",maxHeight:"85vh",display:"flex",flexDirection:"column",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",border:"1px solid rgba(255, 255, 255, 0.1)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},title:{margin:0,color:"#fff",fontSize:"20px",fontWeight:600},closeButton:{background:"none",border:"none",color:"#888",fontSize:"24px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s"},starsDisplay:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"16px",backgroundColor:"rgba(255, 215, 0, 0.1)",borderBottom:"1px solid rgba(255, 215, 0, 0.2)"},starsIcon:{fontSize:"24px"},starsAmount:{color:"#ffd700",fontSize:"28px",fontWeight:700},starsLabel:{color:"#888",fontSize:"14px"},categoryTabs:{display:"flex",gap:"8px",padding:"12px 20px",overflowX:"auto",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},categoryTab:{padding:"8px 16px",borderRadius:"20px",border:"none",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#888",fontSize:"14px",cursor:"pointer",whiteSpace:"nowrap",transition:"all 0.2s"},categoryTabActive:{backgroundColor:"#6c5ce7",color:"#fff"},itemGrid:{flex:1,overflowY:"auto",padding:"16px",display:"flex",flexDirection:"column",gap:"12px"},itemCard:{backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"12px",padding:"16px",border:"1px solid rgba(255, 255, 255, 0.1)"},itemHeader:{display:"flex",gap:"12px",marginBottom:"12px"},itemIcon:{fontSize:"36px",width:"48px",height:"48px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"8px"},itemInfo:{flex:1},itemName:{margin:"0 0 4px 0",color:"#fff",fontSize:"16px",fontWeight:600},itemDescription:{margin:0,color:"#888",fontSize:"13px",lineHeight:1.4},itemEffects:{display:"flex",flexWrap:"wrap",gap:"6px",marginBottom:"12px"},effectTag:{fontSize:"11px",padding:"3px 8px",borderRadius:"10px",backgroundColor:"rgba(108, 92, 231, 0.2)",color:"#a29bfe"},itemStock:{fontSize:"12px",color:"#666",marginBottom:"12px"},purchaseSection:{display:"flex",alignItems:"center",gap:"12px",paddingTop:"12px",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},quantityControl:{display:"flex",alignItems:"center",gap:"4px"},quantityButton:{width:"28px",height:"28px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"16px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},quantityInput:{width:"48px",height:"28px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"14px",textAlign:"center"},costDisplay:{flex:1,textAlign:"right"},costAmount:{color:"#ffd700",fontSize:"16px",fontWeight:600},purchaseButton:{padding:"8px 20px",borderRadius:"8px",border:"none",backgroundColor:"#6c5ce7",color:"#fff",fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},purchaseButtonDisabled:{backgroundColor:"#444",color:"#888",cursor:"not-allowed"},emptyState:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",color:"#666"},emptyIcon:{fontSize:"48px",marginBottom:"16px"}},Q0=({inventory:n,maxSlots:e=50,onUseItem:i,onDropItem:s,onClose:r})=>{const[u,f]=D.useState("all"),[g,x]=D.useState("type"),[h,v]=D.useState(null),[b,C]=D.useState(""),A=D.useMemo(()=>{const M=new Set(n.map(q=>q.category));return["all",...Array.from(M)]},[n]),T=D.useMemo(()=>{let M=[...n];if(u!=="all"&&(M=M.filter(q=>q.category===u)),b){const q=b.toLowerCase();M=M.filter(G=>G.name.toLowerCase().includes(q)||G.description.toLowerCase().includes(q))}switch(g){case"name":M.sort((q,G)=>q.name.localeCompare(G.name));break;case"type":M.sort((q,G)=>q.category.localeCompare(G.category));break;case"quantity":M.sort((q,G)=>G.quantity-q.quantity);break}return M},[n,u,g,b]),E=n.reduce((M,q)=>M+q.quantity,0),w=n.filter(M=>M.quantity>0).length,R=M=>{switch(M){case"consumable":return"#00b894";case"key":return"#fdcb6e";case"equipment":return"#0984e3";case"material":return"#a29bfe";default:return"#636e72"}},I=(M,q)=>{const G={sanity:"",vocabulary:"",grammar:"",vocal:"",freeWill:"",stars:"",health:""};return a.jsxs("span",{style:ke.effectTag,children:[a.jsx("span",{children:G[M.type]||""}),a.jsxs("span",{children:[M.type,": "]}),a.jsxs("span",{style:{color:M.value>0?"#00b894":"#d63031"},children:[M.value>0?"+":"",M.value]}),M.duration&&a.jsxs("span",{style:ke.effectDuration,children:[" (",M.duration,")"]})]},q)};return a.jsx("div",{style:ke.overlay,children:a.jsxs("div",{style:ke.panel,children:[a.jsxs("div",{style:ke.header,children:[a.jsx("h2",{style:ke.title,children:" "}),a.jsx("button",{style:ke.closeButton,onClick:r,children:""})]}),a.jsxs("div",{style:ke.statusBar,children:[a.jsxs("div",{style:ke.slotInfo,children:[a.jsx("span",{style:ke.slotIcon,children:""}),a.jsxs("span",{children:[w," / ",e," "]})]}),a.jsx("div",{style:ke.itemCount,children:a.jsxs("span",{children:[" ",E," "]})})]}),a.jsx("div",{style:ke.searchBar,children:a.jsx("input",{type:"text",placeholder:"...",value:b,onChange:M=>C(M.target.value),style:ke.searchInput})}),a.jsxs("div",{style:ke.controlsRow,children:[a.jsx("div",{style:ke.categoryTabs,children:A.map(M=>a.jsx("button",{style:{...ke.categoryTab,...u===M?ke.categoryTabActive:{}},onClick:()=>f(M),children:M==="all"?"":M},M))}),a.jsxs("select",{value:g,onChange:M=>x(M.target.value),style:ke.sortSelect,children:[a.jsx("option",{value:"type",children:""}),a.jsx("option",{value:"name",children:""}),a.jsx("option",{value:"quantity",children:""})]})]}),a.jsxs("div",{style:ke.itemGrid,children:[T.map(M=>a.jsxs("div",{style:{...ke.itemSlot,...(h==null?void 0:h.id)===M.id?ke.itemSlotSelected:{},...M.quantity===0?ke.itemSlotEmpty:{}},onClick:()=>M.quantity>0&&v(M),children:[a.jsx("span",{style:ke.itemIcon,children:M.icon}),M.quantity>1&&a.jsxs("span",{style:ke.itemQuantity,children:["",M.quantity]}),M.quantity===0&&a.jsx("span",{style:ke.emptySlotText,children:""})]},M.id)),T.length===0&&a.jsxs("div",{style:ke.emptyState,children:[a.jsx("span",{style:ke.emptyIcon,children:""}),a.jsx("p",{children:""})]})]}),h&&a.jsxs("div",{style:ke.itemDetailPanel,children:[a.jsxs("div",{style:ke.detailHeader,children:[a.jsx("span",{style:ke.detailIcon,children:h.icon}),a.jsxs("div",{style:ke.detailInfo,children:[a.jsx("h3",{style:ke.detailName,children:h.name}),a.jsx("span",{style:{...ke.detailType,borderColor:R(h.type),color:R(h.type)},children:h.category})]})]}),a.jsx("p",{style:ke.detailDescription,children:h.description}),a.jsxs("div",{style:ke.detailEffects,children:[a.jsx("h4",{style:ke.effectsTitle,children:":"}),a.jsx("div",{style:ke.effectsList,children:h.effects.map((M,q)=>I(M,q))})]}),h.stackable&&a.jsxs("div",{style:ke.detailStackable,children:[a.jsx("span",{children:""}),a.jsxs("span",{children:[": ",h.maxStack]})]}),a.jsxs("div",{style:ke.detailActions,children:[a.jsx("button",{style:{...ke.actionButton,...h.type==="key"?ke.actionButtonDisabled:{}},onClick:()=>i(h),disabled:h.type==="key",children:h.type==="key"?" ":" "}),s&&a.jsx("button",{style:ke.dropButton,onClick:()=>s(h),children:" "})]})]})]})})},ke={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},panel:{backgroundColor:"#1a1a2e",borderRadius:"16px",width:"100%",maxWidth:"600px",maxHeight:"85vh",display:"flex",flexDirection:"column",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",border:"1px solid rgba(255, 255, 255, 0.1)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},title:{margin:0,color:"#fff",fontSize:"20px",fontWeight:600},closeButton:{background:"none",border:"none",color:"#888",fontSize:"24px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s"},statusBar:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 20px",backgroundColor:"rgba(255, 255, 255, 0.03)",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},slotInfo:{display:"flex",alignItems:"center",gap:"8px",color:"#888",fontSize:"14px"},slotIcon:{fontSize:"16px"},itemCount:{color:"#666",fontSize:"13px"},searchBar:{padding:"12px 20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},searchInput:{width:"100%",padding:"10px 16px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"rgba(255, 255, 255, 0.05)",color:"#fff",fontSize:"14px",outline:"none",boxSizing:"border-box"},controlsRow:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 20px",gap:"12px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},categoryTabs:{display:"flex",gap:"6px",overflowX:"auto",flex:1},categoryTab:{padding:"6px 12px",borderRadius:"16px",border:"none",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#888",fontSize:"12px",cursor:"pointer",whiteSpace:"nowrap",transition:"all 0.2s"},categoryTabActive:{backgroundColor:"#6c5ce7",color:"#fff"},sortSelect:{padding:"6px 12px",borderRadius:"6px",border:"1px solid rgba(255, 255, 255, 0.2)",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"12px",cursor:"pointer",whiteSpace:"nowrap"},itemGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(64px, 1fr))",gap:"8px",padding:"16px 20px",maxHeight:"240px",overflowY:"auto"},itemSlot:{aspectRatio:"1",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"rgba(255, 255, 255, 0.03)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",position:"relative",transition:"all 0.2s"},itemSlotSelected:{borderColor:"#6c5ce7",backgroundColor:"rgba(108, 92, 231, 0.1)"},itemSlotEmpty:{opacity:.5},itemIcon:{fontSize:"28px"},itemQuantity:{position:"absolute",bottom:"2px",right:"4px",fontSize:"11px",color:"#fff",fontWeight:600,textShadow:"0 1px 2px rgba(0,0,0,0.8)"},emptySlotText:{fontSize:"10px",color:"#555"},emptyState:{gridColumn:"1 / -1",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 20px",color:"#666"},emptyIcon:{fontSize:"40px",marginBottom:"12px"},itemDetailPanel:{padding:"16px 20px",borderTop:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"rgba(0, 0, 0, 0.2)"},detailHeader:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},detailIcon:{fontSize:"40px",width:"56px",height:"56px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"8px"},detailInfo:{flex:1},detailName:{margin:"0 0 6px 0",color:"#fff",fontSize:"16px",fontWeight:600},detailType:{fontSize:"11px",padding:"3px 8px",borderRadius:"10px",border:"1px solid",backgroundColor:"transparent"},detailDescription:{color:"#888",fontSize:"13px",margin:"0 0 12px 0",lineHeight:1.5},detailEffects:{marginBottom:"12px"},effectsTitle:{color:"#aaa",fontSize:"12px",margin:"0 0 8px 0",fontWeight:500},effectsList:{display:"flex",flexWrap:"wrap",gap:"6px"},effectTag:{fontSize:"12px",padding:"4px 8px",borderRadius:"6px",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#ccc"},effectDuration:{color:"#888",fontSize:"10px"},detailStackable:{display:"flex",justifyContent:"space-between",fontSize:"12px",color:"#666",marginBottom:"12px"},detailActions:{display:"flex",gap:"8px"},actionButton:{flex:1,padding:"10px 16px",borderRadius:"8px",border:"none",backgroundColor:"#6c5ce7",color:"#fff",fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},actionButtonDisabled:{backgroundColor:"#444",color:"#888",cursor:"not-allowed"},dropButton:{padding:"10px 16px",borderRadius:"8px",border:"1px solid rgba(255, 100, 100, 0.3)",backgroundColor:"transparent",color:"#ff7675",fontSize:"14px",cursor:"pointer",transition:"all 0.2s"}},X0=({homeFeatures:n,currentTime:e,currentDay:i,userStats:s,onRest:r,onSave:u,onTimeRewind:f,onClose:g})=>{const[x,h]=D.useState(!1),[v,b]=D.useState(!1),[C,A]=D.useState("medium"),[T,E]=D.useState(i-1),[w,R]=D.useState(6),[I,M]=D.useState("idle"),q=(de,Q)=>`${de.toString().padStart(2,"0")}:${Q.toString().padStart(2,"0")}`,G=de=>{switch(de){case"short":return{hours:2,label:"",icon:"",recovery:{sanity:20,health:5,energy:30}};case"medium":return{hours:6,label:"",icon:"",recovery:{sanity:60,health:15,energy:80}};case"long":return{hours:10,label:"",icon:"",recovery:{sanity:100,health:30,energy:100}}}},U=async()=>{M("saving"),await new Promise(de=>setTimeout(de,1e3)),u(),M("saved"),setTimeout(()=>M("idle"),2e3)},V=()=>{f(T,w)},ce=n.allowRest&&s.energy<100;n.allowSave;const se=n.allowTimeRewind&&i>1,xe=(de,Q,re)=>{const J=de/re*100;return a.jsxs("div",{style:be.statBarContainer,children:[a.jsx("div",{style:{...be.statBarFill,width:`${J}%`,backgroundColor:Q}}),a.jsxs("span",{style:be.statBarText,children:[de,"/",re]})]})};return a.jsx("div",{style:be.overlay,children:a.jsxs("div",{style:be.panel,children:[a.jsxs("div",{style:be.header,children:[a.jsx("h2",{style:be.title,children:" "}),a.jsx("button",{style:be.closeButton,onClick:g,children:""})]}),a.jsxs("div",{style:be.timeDisplay,children:[a.jsxs("div",{style:be.currentTime,children:[a.jsx("span",{style:be.timeIcon,children:""}),a.jsxs("span",{style:be.timeText,children:[" ",i," "]})]}),a.jsxs("div",{style:be.currentTime,children:[a.jsx("span",{style:be.timeIcon,children:""}),a.jsx("span",{style:be.timeText,children:q(e.hour,e.minute)})]})]}),a.jsxs("div",{style:be.statsPanel,children:[a.jsx("h3",{style:be.statsTitle,children:""}),a.jsxs("div",{style:be.statsGrid,children:[a.jsxs("div",{style:be.statItem,children:[a.jsx("span",{style:be.statLabel,children:" "}),xe(s.sanity,100,"#a29bfe")]}),a.jsxs("div",{style:be.statItem,children:[a.jsx("span",{style:be.statLabel,children:" "}),xe(s.health,100,"#00b894")]}),a.jsxs("div",{style:be.statItem,children:[a.jsx("span",{style:be.statLabel,children:" "}),xe(s.energy,100,"#fdcb6e")]})]})]}),n.allowRest&&a.jsxs("div",{style:be.actionSection,children:[a.jsx("h3",{style:be.sectionTitle,children:" "}),a.jsx("div",{style:be.sleepOptions,children:["short","medium","long"].map(de=>{const Q=G(de),re=C===de;return a.jsxs("button",{style:{...be.sleepOption,...re?be.sleepOptionSelected:{},...ce?{}:be.sleepOptionDisabled},onClick:()=>ce&&A(de),disabled:!ce,children:[a.jsx("span",{style:be.sleepIcon,children:Q.icon}),a.jsx("span",{style:be.sleepLabel,children:Q.label}),a.jsxs("span",{style:be.sleepTime,children:["+",Q.hours,""]}),a.jsxs("div",{style:be.sleepRecovery,children:[a.jsxs("span",{children:["+",Q.recovery.sanity]}),a.jsxs("span",{children:["+",Q.recovery.health]}),a.jsxs("span",{children:["+",Q.recovery.energy]})]})]},de)})}),a.jsx("button",{style:{...be.restButton,...ce?{}:be.restButtonDisabled},onClick:()=>ce&&r(C),disabled:!ce,children:ce?" ":s.energy>=100?" ":" "})]}),n.allowSave&&a.jsxs("div",{style:be.actionSection,children:[a.jsx("h3",{style:be.sectionTitle,children:" "}),a.jsxs("div",{style:be.saveSection,children:[a.jsx("p",{style:be.saveDescription,children:'""'}),x?a.jsxs("div",{style:be.saveConfirm,children:[a.jsx("span",{style:be.confirmText,children:""}),a.jsxs("div",{style:be.confirmButtons,children:[a.jsx("button",{style:be.confirmButton,onClick:()=>h(!1),children:""}),a.jsx("button",{style:be.confirmButtonPrimary,onClick:U,children:I==="saving"?"...":I==="saved"?" ":""})]})]}):a.jsx("button",{style:be.saveButton,onClick:()=>h(!0),children:" "})]})]}),n.allowTimeRewind&&a.jsxs("div",{style:be.actionSection,children:[a.jsx("h3",{style:be.sectionTitle,children:" "}),a.jsxs("div",{style:be.rewindSection,children:[a.jsx("p",{style:be.rewindWarning,children:" "}),a.jsxs("div",{style:be.rewindInputs,children:[a.jsxs("div",{style:be.rewindInputGroup,children:[a.jsx("label",{style:be.inputLabel,children:""}),a.jsx("select",{value:T,onChange:de=>E(Math.max(1,parseInt(de.target.value))),style:be.selectInput,children:Array.from({length:i-1},(de,Q)=>Q+1).map(de=>a.jsxs("option",{value:de,children:[" ",de," "]},de))})]}),a.jsxs("div",{style:be.rewindInputGroup,children:[a.jsx("label",{style:be.inputLabel,children:""}),a.jsx("select",{value:w,onChange:de=>R(parseInt(de.target.value)),style:be.selectInput,children:Array.from({length:16},(de,Q)=>Q+6).map(de=>a.jsx("option",{value:de,children:q(de,0)},de))})]})]}),a.jsx("div",{style:be.rewindPreview,children:a.jsxs("span",{children:[" ",T,"  ",q(w,0)]})}),v?a.jsxs("div",{style:be.rewindConfirm,children:[a.jsx("p",{style:be.confirmWarning,children:""}),a.jsxs("div",{style:be.confirmButtons,children:[a.jsx("button",{style:be.confirmButton,onClick:()=>b(!1),children:""}),a.jsx("button",{style:be.confirmButtonDanger,onClick:V,children:""})]})]}):a.jsx("button",{style:{...be.rewindButton,...se?{}:be.rewindButtonDisabled},onClick:()=>se&&b(!0),disabled:!se,children:" "})]})]}),!n.allowRest&&!n.allowSave&&!n.allowTimeRewind&&a.jsxs("div",{style:be.noFeatures,children:[a.jsx("span",{style:be.noFeaturesIcon,children:""}),a.jsx("p",{children:""})]})]})})},be={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},panel:{backgroundColor:"#1a1a2e",borderRadius:"16px",width:"100%",maxWidth:"500px",maxHeight:"85vh",display:"flex",flexDirection:"column",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",border:"1px solid rgba(255, 255, 255, 0.1)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},title:{margin:0,color:"#fff",fontSize:"20px",fontWeight:600},closeButton:{background:"none",border:"none",color:"#888",fontSize:"24px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s"},timeDisplay:{display:"flex",justifyContent:"center",gap:"24px",padding:"16px",backgroundColor:"rgba(255, 255, 255, 0.03)"},currentTime:{display:"flex",alignItems:"center",gap:"8px",color:"#fff",fontSize:"18px",fontWeight:500},timeIcon:{fontSize:"20px"},timeText:{fontVariantNumeric:"tabular-nums"},statsPanel:{padding:"16px 20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},statsTitle:{margin:"0 0 12px 0",color:"#888",fontSize:"12px",fontWeight:500,textTransform:"uppercase",letterSpacing:"1px"},statsGrid:{display:"flex",flexDirection:"column",gap:"10px"},statItem:{display:"flex",flexDirection:"column",gap:"4px"},statLabel:{fontSize:"13px",color:"#aaa"},statBarContainer:{height:"20px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"10px",overflow:"hidden",position:"relative"},statBarFill:{height:"100%",borderRadius:"10px",transition:"width 0.3s ease"},statBarText:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#fff",fontSize:"11px",fontWeight:600,textShadow:"0 1px 2px rgba(0,0,0,0.5)"},actionSection:{padding:"16px 20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},sectionTitle:{margin:"0 0 12px 0",color:"#fff",fontSize:"16px",fontWeight:600},sleepOptions:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",marginBottom:"12px"},sleepOption:{display:"flex",flexDirection:"column",alignItems:"center",padding:"12px 8px",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"rgba(255, 255, 255, 0.03)",color:"#fff",cursor:"pointer",transition:"all 0.2s"},sleepOptionSelected:{borderColor:"#6c5ce7",backgroundColor:"rgba(108, 92, 231, 0.15)"},sleepOptionDisabled:{opacity:.5,cursor:"not-allowed"},sleepIcon:{fontSize:"24px",marginBottom:"4px"},sleepLabel:{fontSize:"13px",fontWeight:500},sleepTime:{fontSize:"11px",color:"#888",marginTop:"2px"},sleepRecovery:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"4px",fontSize:"9px",color:"#00b894",marginTop:"6px"},restButton:{width:"100%",padding:"14px",borderRadius:"10px",border:"none",backgroundColor:"#6c5ce7",color:"#fff",fontSize:"16px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},restButtonDisabled:{backgroundColor:"#444",color:"#888",cursor:"not-allowed"},saveSection:{backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"12px",padding:"16px"},saveDescription:{color:"#888",fontSize:"13px",margin:"0 0 12px 0",lineHeight:1.5},saveButton:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"14px",cursor:"pointer",transition:"all 0.2s"},saveConfirm:{display:"flex",flexDirection:"column",gap:"12px"},confirmText:{color:"#fff",fontSize:"14px",textAlign:"center"},confirmButtons:{display:"flex",gap:"8px"},confirmButton:{flex:1,padding:"10px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)",backgroundColor:"transparent",color:"#888",fontSize:"14px",cursor:"pointer"},confirmButtonPrimary:{flex:1,padding:"10px",borderRadius:"8px",border:"none",backgroundColor:"#6c5ce7",color:"#fff",fontSize:"14px",cursor:"pointer"},rewindSection:{backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"12px",padding:"16px"},rewindWarning:{color:"#fdcb6e",fontSize:"12px",margin:"0 0 12px 0",lineHeight:1.5},rewindInputs:{display:"flex",gap:"12px",marginBottom:"12px"},rewindInputGroup:{flex:1,display:"flex",flexDirection:"column",gap:"6px"},inputLabel:{color:"#888",fontSize:"12px"},selectInput:{padding:"10px 12px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"14px",cursor:"pointer",outline:"none"},rewindPreview:{textAlign:"center",color:"#6c5ce7",fontSize:"14px",fontWeight:500,marginBottom:"12px"},rewindConfirm:{display:"flex",flexDirection:"column",gap:"12px"},confirmWarning:{color:"#ff7675",fontSize:"13px",textAlign:"center",margin:0},confirmButtonDanger:{flex:1,padding:"10px",borderRadius:"8px",border:"none",backgroundColor:"#d63031",color:"#fff",fontSize:"14px",cursor:"pointer"},rewindButton:{width:"100%",padding:"12px",borderRadius:"8px",border:"none",backgroundColor:"#0984e3",color:"#fff",fontSize:"14px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},rewindButtonDisabled:{backgroundColor:"#444",color:"#888",cursor:"not-allowed"},noFeatures:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px",color:"#666"},noFeaturesIcon:{fontSize:"48px",marginBottom:"12px"}},Z0=({character:n,currentDay:e,currentHour:i,onStartDialogue:s,onSendGift:r,onClose:u})=>{var w,R,I,M,q;const[f,g]=D.useState("dialogue"),[x,h]=D.useState(null),v=()=>{const G=i;return G>=5&&G<12?"":G>=12&&G<14?"":G>=14&&G<18?"":G>=18&&G<22?"":""},b=G=>G<20?{name:"",color:"#636e72",icon:""}:G<40?{name:"",color:"#0984e3",icon:""}:G<60?{name:"",color:"#00b894",icon:""}:G<80?{name:"",color:"#fdcb6e",icon:""}:G<100?{name:"",color:"#e17055",icon:""}:{name:"",color:"#d63031",icon:""},C=G=>G<20?{name:"",progress:G/20}:G<40?{name:"",progress:(G-20)/20}:G<60?{name:"",progress:(G-40)/20}:G<80?{name:"",progress:(G-60)/20}:{name:"",progress:Math.min(1,G/100)},A=b(n.affinity),T=C(n.intimacy),E=n.giftPreferences&&n.giftPreferences.length>0;return a.jsx("div",{style:he.overlay,children:a.jsxs("div",{style:he.panel,children:[a.jsxs("div",{style:he.header,children:[a.jsxs("div",{style:he.characterHeader,children:[a.jsx("span",{style:he.characterIcon,children:n.icon}),a.jsxs("div",{style:he.characterInfo,children:[a.jsx("h2",{style:he.characterName,children:n.name}),a.jsx("span",{style:he.characterTitle,children:n.title})]})]}),a.jsx("button",{style:he.closeButton,onClick:u,children:""})]}),a.jsxs("div",{style:he.tabs,children:[a.jsx("button",{style:{...he.tab,...f==="dialogue"?he.tabActive:{}},onClick:()=>g("dialogue"),children:" "}),a.jsx("button",{style:{...he.tab,...f==="profile"?he.tabActive:{}},onClick:()=>g("profile"),children:" "}),E&&a.jsx("button",{style:{...he.tab,...f==="gifts"?he.tabActive:{}},onClick:()=>g("gifts"),children:" "})]}),f==="dialogue"&&a.jsxs("div",{style:he.dialogueContent,children:[a.jsx("div",{style:he.greeting,children:a.jsxs("span",{style:he.greetingText,children:[v(),"",n.name,"..."]})}),a.jsxs("div",{style:he.affectionBar,children:[a.jsxs("div",{style:he.affectionHeader,children:[a.jsx("span",{style:he.affectionIcon,children:A.icon}),a.jsx("span",{style:he.affectionName,children:A.name}),a.jsxs("span",{style:he.affectionValue,children:[n.affinity,"/100"]})]}),a.jsx("div",{style:he.affectionBarBg,children:a.jsx("div",{style:{...he.affectionBarFill,width:`${n.affinity}%`,backgroundColor:A.color}})})]}),a.jsxs("div",{style:he.intimacyBar,children:[a.jsxs("div",{style:he.intimacyHeader,children:[a.jsx("span",{children:" "}),a.jsx("span",{style:he.intimacyName,children:T.name}),a.jsxs("span",{style:he.intimacyValue,children:[n.intimacy,"/100"]})]}),a.jsx("div",{style:he.intimacyBarBg,children:a.jsx("div",{style:{...he.intimacyBarFill,width:`${T.progress*100}%`}})})]}),a.jsxs("div",{style:he.dialogueList,children:[a.jsx("h4",{style:he.sectionTitle,children:""}),n.dailyDialogues&&n.dailyDialogues.length>0?n.dailyDialogues.map((G,U)=>a.jsxs("button",{style:he.dialogueItem,onClick:()=>s(G.id),children:[a.jsx("span",{style:he.dialogueIcon,children:""}),a.jsxs("div",{style:he.dialogueInfo,children:[a.jsx("span",{style:he.dialogueTitle,children:G.topic}),a.jsx("span",{style:he.dialoguePreview,children:G.preview})]}),a.jsx("span",{style:he.dialogueUnlock,children:G.affinityRequired<=n.affinity?"":`${G.affinityRequired}`})]},U)):a.jsx("div",{style:he.emptyDialogue,children:a.jsx("span",{children:"~"})})]}),n.activities&&n.activities.length>0&&a.jsxs("div",{style:he.activitySection,children:[a.jsx("h4",{style:he.sectionTitle,children:""}),n.activities.map((G,U)=>a.jsxs("div",{style:he.activityCard,children:[a.jsx("span",{style:he.activityIcon,children:G.icon}),a.jsxs("div",{style:he.activityInfo,children:[a.jsx("span",{style:he.activityName,children:G.name}),a.jsx("span",{style:he.activityDesc,children:G.description})]}),a.jsx("span",{style:he.activityCost,children:G.costType==="stars"?`${G.cost}`:`${G.cost}`})]},U))]})]}),f==="profile"&&a.jsxs("div",{style:he.profileContent,children:[a.jsxs("div",{style:he.profileSection,children:[a.jsx("h4",{style:he.sectionTitle,children:""}),a.jsxs("div",{style:he.infoGrid,children:[a.jsxs("div",{style:he.infoItem,children:[a.jsx("span",{style:he.infoLabel,children:""}),a.jsx("span",{style:he.infoValue,children:n.age||""})]}),a.jsxs("div",{style:he.infoItem,children:[a.jsx("span",{style:he.infoLabel,children:""}),a.jsx("span",{style:he.infoValue,children:n.occupation||""})]}),a.jsxs("div",{style:he.infoItem,children:[a.jsx("span",{style:he.infoLabel,children:""}),a.jsx("span",{style:he.infoValue,children:n.personality||""})]}),a.jsxs("div",{style:he.infoItem,children:[a.jsx("span",{style:he.infoLabel,children:""}),a.jsx("span",{style:he.infoValue,children:((w=n.interests)==null?void 0:w.join(""))||""})]})]})]}),a.jsxs("div",{style:he.profileSection,children:[a.jsx("h4",{style:he.sectionTitle,children:""}),a.jsxs("div",{style:he.preferences,children:[a.jsxs("div",{style:he.likes,children:[a.jsx("span",{style:he.prefTitle,children:" "}),a.jsx("div",{style:he.prefTags,children:((R=n.likes)==null?void 0:R.map((G,U)=>a.jsx("span",{style:he.prefTag,children:G},U)))||a.jsx("span",{style:he.noData,children:""})})]}),a.jsxs("div",{style:he.dislikes,children:[a.jsx("span",{style:he.prefTitle,children:" "}),a.jsx("div",{style:he.prefTags,children:((I=n.dislikes)==null?void 0:I.map((G,U)=>a.jsx("span",{style:he.prefTagDis,children:G},U)))||a.jsx("span",{style:he.noData,children:""})})]})]})]}),n.backstory&&a.jsxs("div",{style:he.profileSection,children:[a.jsx("h4",{style:he.sectionTitle,children:""}),a.jsx("p",{style:he.backstory,children:n.backstory})]})]}),f==="gifts"&&E&&a.jsxs("div",{style:he.giftsContent,children:[a.jsxs("div",{style:he.giftHeader,children:[a.jsx("p",{style:he.giftTip,children:""}),a.jsxs("p",{style:he.giftPreference,children:[" ",(M=n.giftPreferences)==null?void 0:M.join("")]})]}),a.jsx("div",{style:he.giftList,children:(q=n.giftPreferences)==null?void 0:q.map((G,U)=>a.jsxs("button",{style:{...he.giftItem,...x===G?he.giftItemSelected:{}},onClick:()=>h(x===G?null:G),children:[a.jsx("span",{style:he.giftIcon,children:""}),a.jsx("span",{style:he.giftName,children:G}),a.jsx("span",{style:he.giftBonus,children:"+10"})]},U))}),x&&a.jsxs("button",{style:he.sendGiftButton,onClick:()=>{r(n.id,x),h(null)},children:["  ",x]})]})]})})},he={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},panel:{backgroundColor:"#1a1a2e",borderRadius:"16px",width:"100%",maxWidth:"480px",maxHeight:"85vh",display:"flex",flexDirection:"column",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",border:"1px solid rgba(255, 255, 255, 0.1)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},characterHeader:{display:"flex",alignItems:"center",gap:"12px"},characterIcon:{fontSize:"48px",width:"64px",height:"64px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"12px"},characterInfo:{display:"flex",flexDirection:"column"},characterName:{margin:0,color:"#fff",fontSize:"20px",fontWeight:600},characterTitle:{color:"#888",fontSize:"13px",marginTop:"2px"},closeButton:{background:"none",border:"none",color:"#888",fontSize:"24px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s"},tabs:{display:"flex",padding:"12px 20px",gap:"8px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},tab:{flex:1,padding:"10px",borderRadius:"8px",border:"none",backgroundColor:"rgba(255, 255, 255, 0.05)",color:"#888",fontSize:"14px",cursor:"pointer",transition:"all 0.2s"},tabActive:{backgroundColor:"#6c5ce7",color:"#fff"},dialogueContent:{flex:1,padding:"16px 20px",overflowY:"auto"},greeting:{textAlign:"center",padding:"12px",backgroundColor:"rgba(108, 92, 231, 0.1)",borderRadius:"8px",marginBottom:"16px"},greetingText:{color:"#a29bfe",fontSize:"14px"},affectionBar:{marginBottom:"12px"},affectionHeader:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},affectionIcon:{fontSize:"16px"},affectionName:{color:"#fff",fontSize:"14px",fontWeight:500},affectionValue:{color:"#888",fontSize:"12px",marginLeft:"auto"},affectionBarBg:{height:"8px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"4px",overflow:"hidden"},affectionBarFill:{height:"100%",borderRadius:"4px",transition:"width 0.3s ease"},intimacyBar:{marginBottom:"16px"},intimacyHeader:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px",color:"#fff",fontSize:"13px"},intimacyName:{color:"#fdcb6e",fontWeight:500},intimacyValue:{color:"#888",fontSize:"12px",marginLeft:"auto"},intimacyBarBg:{height:"6px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"3px",overflow:"hidden"},intimacyBarFill:{height:"100%",backgroundColor:"#fd79a8",borderRadius:"3px",transition:"width 0.3s ease"},sectionTitle:{margin:"0 0 12px 0",color:"#888",fontSize:"12px",fontWeight:500,textTransform:"uppercase",letterSpacing:"1px"},dialogueList:{display:"flex",flexDirection:"column",gap:"8px"},dialogueItem:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"10px",border:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"rgba(255, 255, 255, 0.03)",color:"#fff",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},dialogueIcon:{fontSize:"20px"},dialogueInfo:{flex:1,display:"flex",flexDirection:"column",gap:"2px"},dialogueTitle:{fontSize:"14px",fontWeight:500},dialoguePreview:{fontSize:"12px",color:"#888"},dialogueUnlock:{fontSize:"11px",color:"#666"},emptyDialogue:{textAlign:"center",padding:"24px",color:"#666",fontSize:"13px"},activitySection:{marginTop:"20px"},activityCard:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"10px",border:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"rgba(255, 255, 255, 0.03)",marginBottom:"8px"},activityIcon:{fontSize:"24px"},activityInfo:{flex:1,display:"flex",flexDirection:"column",gap:"2px"},activityName:{color:"#fff",fontSize:"14px",fontWeight:500},activityDesc:{color:"#888",fontSize:"12px"},activityCost:{color:"#fdcb6e",fontSize:"13px",fontWeight:500},profileContent:{flex:1,padding:"16px 20px",overflowY:"auto"},profileSection:{marginBottom:"20px"},infoGrid:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},infoItem:{display:"flex",flexDirection:"column",gap:"4px",padding:"12px",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"8px"},infoLabel:{color:"#888",fontSize:"12px"},infoValue:{color:"#fff",fontSize:"14px",fontWeight:500},preferences:{display:"flex",gap:"16px"},likes:{flex:1},dislikes:{flex:1},prefTitle:{display:"block",fontSize:"13px",marginBottom:"8px"},prefTags:{display:"flex",flexWrap:"wrap",gap:"6px"},prefTag:{padding:"4px 10px",borderRadius:"12px",backgroundColor:"rgba(0, 184, 148, 0.2)",color:"#00b894",fontSize:"12px"},prefTagDis:{padding:"4px 10px",borderRadius:"12px",backgroundColor:"rgba(214, 48, 49, 0.2)",color:"#ff7675",fontSize:"12px"},noData:{color:"#666",fontSize:"12px"},backstory:{color:"#aaa",fontSize:"13px",lineHeight:1.7,margin:0},giftsContent:{flex:1,padding:"16px 20px",overflowY:"auto"},giftHeader:{marginBottom:"16px"},giftTip:{color:"#888",fontSize:"13px",margin:"0 0 8px 0"},giftPreference:{color:"#fdcb6e",fontSize:"13px",margin:0},giftList:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"16px"},giftItem:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",borderRadius:"10px",border:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"rgba(255, 255, 255, 0.03)",color:"#fff",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},giftItemSelected:{borderColor:"#e17055",backgroundColor:"rgba(225, 112, 85, 0.1)"},giftIcon:{fontSize:"20px"},giftName:{flex:1,fontSize:"14px"},giftBonus:{color:"#00b894",fontSize:"12px"},sendGiftButton:{width:"100%",padding:"14px",borderRadius:"10px",border:"none",backgroundColor:"#e17055",color:"#fff",fontSize:"15px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"}},ex=({quest:n,userStats:e,onStartQuest:i,onMakeChoice:s,onCompleteQuest:r,onClose:u})=>{const[f,g]=D.useState("overview"),[x,h]=D.useState(null),[v,b]=D.useState(null),C=U=>{switch(U){case"main":return{icon:"",color:"#fdcb6e",label:""};case"side":return{icon:"",color:"#00b894",label:""};case"daily":return{icon:"",color:"#0984e3",label:""};case"event":return{icon:"",color:"#e17055",label:""};default:return{icon:"",color:"#636e72",label:""}}},A=U=>U<=2?"#00b894":U<=4?"#fdcb6e":"#d63031",T=U=>U<=2?"":U<=4?"":"",E=(U,V)=>V>=U,w=U=>Object.entries(U).every(([V,ce])=>{const se=e[V]||0;return E(ce,se)}),R=n.requirements?w(n.requirements):!0,I=()=>{if(n.type==="choice")g("choices");else if(n.type==="skill_check"){const U=Math.random()*100<(n.successRate||50),V=U?n.successReward:n.failureReward;b({success:U,message:U?"":"...",reward:V})}else g("active"),i()},M=U=>{var ce;h(U);const V=(ce=n.choices)==null?void 0:ce.find(se=>se.id===U);if(V){const se=w(V.requirements||{}),xe=se?V.successReward:V.failureReward;b({success:se,message:se?V.successMessage:V.failureMessage,reward:xe})}},q=()=>{v!=null&&v.reward&&(r(v.reward),g("completed"),b(null))},G=C(n.type);return a.jsx("div",{style:Ce.overlay,children:a.jsxs("div",{style:Ce.panel,children:[a.jsxs("div",{style:Ce.header,children:[a.jsxs("div",{style:Ce.questHeader,children:[a.jsx("span",{style:{...Ce.questTypeIcon,color:G.color},children:G.icon}),a.jsxs("div",{style:Ce.questInfo,children:[a.jsx("h2",{style:Ce.questName,children:n.name}),a.jsxs("div",{style:Ce.questMeta,children:[a.jsx("span",{style:{...Ce.questType,backgroundColor:`${G.color}20`,color:G.color},children:G.label}),a.jsxs("span",{style:Ce.questDifficulty,children:[": ",a.jsx("span",{style:{color:A(n.difficulty)},children:T(n.difficulty)})]})]})]})]}),a.jsx("button",{style:Ce.closeButton,onClick:u,children:""})]}),f==="overview"&&a.jsxs("div",{style:Ce.overviewContent,children:[a.jsx("p",{style:Ce.questDescription,children:n.description}),n.requirements&&a.jsxs("div",{style:Ce.requirementsSection,children:[a.jsx("h4",{style:Ce.sectionTitle,children:""}),a.jsx("div",{style:Ce.requirementsList,children:Object.entries(n.requirements).map(([U,V])=>{const ce=e[U]||0,se=E(V,ce);return a.jsxs("div",{style:Ce.requirementItem,children:[a.jsx("span",{style:Ce.skillName,children:U}),a.jsxs("div",{style:Ce.skillBar,children:[a.jsx("div",{style:Ce.skillBarBg,children:a.jsx("div",{style:{...Ce.skillBarFill,width:`${Math.min(100,ce/V*100)}%`,backgroundColor:se?"#00b894":"#636e72"}})}),a.jsxs("span",{style:{...Ce.skillValue,color:se?"#00b894":"#fff"},children:[ce,"/",V]})]}),a.jsx("span",{style:Ce.requirementStatus,children:se?"":""})]},U)})})]}),a.jsxs("div",{style:Ce.rewardsSection,children:[a.jsx("h4",{style:Ce.sectionTitle,children:""}),a.jsx("div",{style:Ce.rewardsList,children:n.successReward&&a.jsxs(a.Fragment,{children:[n.successReward.vocabulary!==void 0&&a.jsxs("span",{style:Ce.rewardTag,children:[" +",n.successReward.vocabulary," "]}),n.successReward.grammar!==void 0&&a.jsxs("span",{style:Ce.rewardTag,children:[" +",n.successReward.grammar," "]}),n.successReward.vocal!==void 0&&a.jsxs("span",{style:Ce.rewardTag,children:[" +",n.successReward.vocal," "]}),n.successReward.freeWill!==void 0&&a.jsxs("span",{style:Ce.rewardTag,children:[" +",n.successReward.freeWill," "]}),n.successReward.stars!==void 0&&a.jsxs("span",{style:Ce.rewardTag,children:[" +",n.successReward.stars," "]}),n.successReward.items&&n.successReward.items.map((U,V)=>a.jsxs("span",{style:Ce.rewardTag,children:[" ",U]},V))]})})]}),a.jsx("button",{style:{...Ce.startButton,...R?{}:Ce.startButtonDisabled},onClick:I,disabled:!R,children:R?" ":" "})]}),f==="choices"&&n.choices&&a.jsxs("div",{style:Ce.choicesContent,children:[a.jsx("h4",{style:Ce.sectionTitle,children:""}),a.jsx("p",{style:Ce.choicesHint,children:""}),n.choices.map((U,V)=>a.jsxs("div",{style:{...Ce.choiceCard,...x===U.id?Ce.choiceCardSelected:{}},children:[a.jsxs("div",{style:Ce.choiceHeader,children:[a.jsx("span",{style:Ce.choiceNumber,children:String.fromCharCode(65+V)}),a.jsx("span",{style:Ce.choiceTitle,children:U.title})]}),a.jsx("p",{style:Ce.choiceDescription,children:U.description}),U.requirements&&a.jsxs("div",{style:Ce.choiceRequirements,children:[a.jsx("span",{children:": "}),Object.entries(U.requirements).map(([ce,se])=>{const xe=e[ce]||0,de=E(se,xe);return a.jsxs("span",{style:{...Ce.reqTag,...de?{}:Ce.reqTagFailed},children:[ce,": ",xe,"/",se," ",de?"":""]},ce)})]}),a.jsx("button",{style:{...Ce.makeChoiceButton,...w(U.requirements||{})?{}:Ce.makeChoiceButtonDisabled},onClick:()=>M(U.id),disabled:!w(U.requirements||{}),children:""})]},U.id))]}),v&&a.jsx("div",{style:Ce.resultOverlay,children:a.jsxs("div",{style:Ce.resultPanel,children:[a.jsx("span",{style:Ce.resultIcon,children:v.success?"":""}),a.jsx("h3",{style:Ce.resultTitle,children:v.success?"":""}),a.jsx("p",{style:Ce.resultMessage,children:v.message}),v.reward&&a.jsxs("div",{style:Ce.resultRewards,children:[a.jsx("h4",{style:Ce.resultRewardsTitle,children:":"}),a.jsxs("div",{style:Ce.resultRewardsList,children:[v.reward.vocabulary!==void 0&&a.jsxs("span",{style:Ce.resultRewardTag,children:[" +",v.reward.vocabulary]}),v.reward.grammar!==void 0&&a.jsxs("span",{style:Ce.resultRewardTag,children:[" +",v.reward.grammar]}),v.reward.vocal!==void 0&&a.jsxs("span",{style:Ce.resultRewardTag,children:[" +",v.reward.vocal]}),v.reward.freeWill!==void 0&&a.jsxs("span",{style:Ce.resultRewardTag,children:[" +",v.reward.freeWill]}),v.reward.stars!==void 0&&a.jsxs("span",{style:Ce.resultRewardTag,children:[" +",v.reward.stars]})]})]}),a.jsx("button",{style:Ce.claimButton,onClick:q,children:""})]})}),f==="completed"&&a.jsxs("div",{style:Ce.completedContent,children:[a.jsx("span",{style:Ce.completedIcon,children:""}),a.jsx("h3",{style:Ce.completedTitle,children:""}),a.jsx("p",{style:Ce.completedMessage,children:""}),a.jsx("button",{style:Ce.closeButtonLarge,onClick:u,children:""})]})]})})},Ce={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},panel:{backgroundColor:"#1a1a2e",borderRadius:"16px",width:"100%",maxWidth:"500px",maxHeight:"85vh",display:"flex",flexDirection:"column",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",border:"1px solid rgba(255, 255, 255, 0.1)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},questHeader:{display:"flex",alignItems:"center",gap:"12px"},questTypeIcon:{fontSize:"40px"},questInfo:{display:"flex",flexDirection:"column",gap:"4px"},questName:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},questMeta:{display:"flex",alignItems:"center",gap:"12px"},questType:{padding:"3px 10px",borderRadius:"10px",fontSize:"11px",fontWeight:500},questDifficulty:{color:"#888",fontSize:"12px"},closeButton:{background:"none",border:"none",color:"#888",fontSize:"24px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s"},overviewContent:{flex:1,padding:"20px",overflowY:"auto"},questDescription:{color:"#aaa",fontSize:"14px",lineHeight:1.6,margin:"0 0 20px 0"},sectionTitle:{margin:"0 0 12px 0",color:"#888",fontSize:"12px",fontWeight:500,textTransform:"uppercase",letterSpacing:"1px"},requirementsSection:{marginBottom:"20px"},requirementsList:{display:"flex",flexDirection:"column",gap:"10px"},requirementItem:{display:"flex",alignItems:"center",gap:"12px",padding:"10px",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"8px"},skillName:{color:"#fff",fontSize:"13px",width:"60px",textTransform:"capitalize"},skillBar:{flex:1,display:"flex",alignItems:"center",gap:"8px"},skillBarBg:{flex:1,height:"8px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"4px",overflow:"hidden"},skillBarFill:{height:"100%",borderRadius:"4px",transition:"width 0.3s ease"},skillValue:{fontSize:"12px",fontWeight:500,minWidth:"50px",textAlign:"right"},requirementStatus:{fontSize:"16px",width:"24px",textAlign:"center"},rewardsSection:{marginBottom:"20px"},rewardsList:{display:"flex",flexWrap:"wrap",gap:"8px"},rewardTag:{padding:"6px 12px",borderRadius:"12px",backgroundColor:"rgba(108, 92, 231, 0.2)",color:"#a29bfe",fontSize:"12px"},startButton:{width:"100%",padding:"14px",borderRadius:"10px",border:"none",backgroundColor:"#6c5ce7",color:"#fff",fontSize:"16px",fontWeight:600,cursor:"pointer",transition:"all 0.2s"},startButtonDisabled:{backgroundColor:"#444",color:"#888",cursor:"not-allowed"},choicesContent:{flex:1,padding:"20px",overflowY:"auto"},choicesHint:{color:"#888",fontSize:"13px",margin:"0 0 16px 0"},choiceCard:{borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)",backgroundColor:"rgba(255, 255, 255, 0.03)",padding:"16px",marginBottom:"12px"},choiceCardSelected:{borderColor:"#6c5ce7",backgroundColor:"rgba(108, 92, 231, 0.1)"},choiceHeader:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},choiceNumber:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:"rgba(108, 92, 231, 0.2)",color:"#a29bfe",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",fontWeight:600},choiceTitle:{color:"#fff",fontSize:"15px",fontWeight:500},choiceDescription:{color:"#aaa",fontSize:"13px",margin:"0 0 12px 0",lineHeight:1.5},choiceRequirements:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"6px",fontSize:"12px",color:"#888",marginBottom:"12px"},reqTag:{padding:"3px 8px",borderRadius:"8px",backgroundColor:"rgba(0, 184, 148, 0.2)",color:"#00b894"},reqTagFailed:{backgroundColor:"rgba(214, 48, 49, 0.2)",color:"#ff7675"},makeChoiceButton:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"#fff",fontSize:"14px",cursor:"pointer",transition:"all 0.2s"},makeChoiceButtonDisabled:{opacity:.5,cursor:"not-allowed"},resultOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"16px"},resultPanel:{backgroundColor:"#1a1a2e",borderRadius:"16px",padding:"30px",width:"90%",maxWidth:"400px",textAlign:"center"},resultIcon:{fontSize:"60px",marginBottom:"16px"},resultTitle:{margin:"0 0 12px 0",color:"#fff",fontSize:"24px"},resultMessage:{color:"#aaa",fontSize:"14px",margin:"0 0 20px 0"},resultRewards:{marginBottom:"20px"},resultRewardsTitle:{color:"#888",fontSize:"12px",margin:"0 0 12px 0"},resultRewardsList:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"8px"},resultRewardTag:{padding:"6px 12px",borderRadius:"12px",backgroundColor:"rgba(253, 203, 110, 0.2)",color:"#fdcb6e",fontSize:"13px"},claimButton:{width:"100%",padding:"14px",borderRadius:"10px",border:"none",backgroundColor:"#6c5ce7",color:"#fff",fontSize:"16px",fontWeight:600,cursor:"pointer"},completedContent:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px 20px"},completedIcon:{fontSize:"60px",marginBottom:"16px"},completedTitle:{margin:"0 0 8px 0",color:"#00b894",fontSize:"24px"},completedMessage:{color:"#888",fontSize:"14px",margin:"0 0 24px 0"},closeButtonLarge:{padding:"12px 40px",borderRadius:"10px",border:"1px solid rgba(255, 255, 255, 0.2)",backgroundColor:"transparent",color:"#fff",fontSize:"14px",cursor:"pointer"}},gw=({cellInfo:n,userStars:e,inventory:i,dayCount:s,onClose:r,onTrade:u,onUseItem:f,onRest:g,onSave:x,onTimeRewind:h,onStartQuest:v,onInteractCharacter:b,onUnlock:C})=>{const[A,T]=D.useState("overview"),[E,w]=D.useState(!1),[R,I]=D.useState(!1),[M,q]=D.useState(!1),[G,U]=D.useState(!1),[V,ce]=D.useState(!1),se=[{id:"overview",label:"",icon:""},...n.characters&&n.characters.length>0?[{id:"character",label:"",icon:""}]:[],...n.quests&&n.quests.length>0?[{id:"quest",label:"",icon:""}]:[],...n.shop&&n.shop.length>0?[{id:"trade",label:"",icon:""}]:[],...n.cellType==="home"?[{id:"home",label:"",icon:""}]:[],...n.lockFeatures?[{id:"lock",label:"",icon:""}]:[]],xe=Q=>{const re={home:"from-blue-500/20 to-purple-500/20 border-blue-400/30",hospital:"from-red-500/20 to-pink-500/20 border-red-400/30",bookstore:"from-amber-500/20 to-orange-500/20 border-amber-400/30",shop:"from-green-500/20 to-emerald-500/20 border-green-400/30",npc:"from-purple-500/20 to-pink-500/20 border-purple-400/30",quest:"from-yellow-500/20 to-amber-500/20 border-yellow-400/30",lock:"from-gray-500/20 to-slate-500/20 border-gray-400/30",normal:"from-[#C5A059]/10 to-[#C5A059]/5 border-[#C5A059]/30"};return re[Q]||re.normal},de=Q=>({home:" ",hospital:" ",bookstore:" ",shop:" ",npc:" ",quest:" ",lock:" ",normal:" "})[Q]||" ";if(E&&n.shop)return a.jsx(K0,{shopItems:n.shop,userStars:e,inventory:i,onPurchase:u,onClose:()=>w(!1)});if(R)return a.jsx(Q0,{inventory:i,onUseItem:Q=>f(Q,1),onClose:()=>I(!1)});if(M&&n.homeFeatures)return a.jsx(X0,{homeFeatures:n.homeFeatures,currentTime:{hour:12,minute:0},currentDay:s,userStats:{sanity:100,health:100,energy:100},onRest:g,onSave:x,onTimeRewind:h,onClose:()=>q(!1)});if(G&&n.characters&&n.characters.length>0){const Q=n.characters[0];return a.jsx(Z0,{character:Q,currentDay:s,currentHour:12,onStartDialogue:re=>b(Q.id,re),onSendGift:(re,J)=>console.log("Send gift:",re,J),onClose:()=>U(!1)})}if(V&&n.quests&&n.quests.length>0){const Q=n.quests[0];return a.jsx(ex,{quest:Q,userStats:{vocabulary:0,grammar:0,vocal:0,freeWill:0},onStartQuest:()=>v(Q),onMakeChoice:re=>console.log("Quest choice:",re),onCompleteQuest:re=>console.log("Quest complete:",re),onClose:()=>ce(!1)})}return a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:`w-full max-w-lg bg-gradient-to-br ${xe(n.cellType||"normal")} rounded-2xl border border-white/10 shadow-2xl overflow-hidden`,children:[a.jsxs("div",{className:"relative p-6 border-b border-white/10",children:[a.jsx("button",{onClick:r,className:"absolute top-4 right-4 w-8 h-8 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center text-white/60 hover:text-white transition-colors",children:""}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 rounded-xl bg-white/10 flex items-center justify-center text-4xl",children:n.icon}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:n.title}),a.jsx("p",{className:"text-sm text-white/60",children:n.description}),a.jsxs("div",{className:"mt-2 text-xs text-[#C5A059]",children:[de(n.cellType||"normal"),n.isCurrentLocation&&a.jsx("span",{className:"ml-3 px-2 py-0.5 bg-green-500/30 rounded text-green-300",children:""})]})]})]})]}),a.jsx("div",{className:"flex overflow-x-auto border-b border-white/10",children:se.map(Q=>a.jsxs("button",{onClick:()=>{Q.id==="trade"?w(!0):Q.id==="inventory"?I(!0):Q.id==="home"?q(!0):Q.id==="character"?U(!0):Q.id==="quest"?ce(!0):T(Q.id)},className:`flex-1 px-4 py-3 text-sm font-medium transition-all whitespace-nowrap
                ${A===Q.id?"text-[#C5A059] border-b-2 border-[#C5A059] bg-[#C5A059]/10":"text-white/60 hover:text-white hover:bg-white/5"}`,children:[a.jsx("span",{className:"mr-1",children:Q.icon}),Q.label]},Q.id))}),a.jsx("div",{className:"p-6 max-h-96 overflow-y-auto",children:A==="overview"&&a.jsxs("div",{className:"space-y-6",children:[n.visitCount!==void 0&&a.jsx("div",{className:"p-4 bg-white/5 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-white/60",children:""}),a.jsxs("span",{className:"text-white font-medium",children:[n.visitCount," "]})]})}),n.characters&&n.characters.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-[#C5A059] mb-3",children:" "}),a.jsx("div",{className:"space-y-2",children:n.characters.map(Q=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-lg hover:bg-white/10 cursor-pointer transition-colors",onClick:()=>{U(!0),T("character")},children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-lg overflow-hidden",children:Q.avatar?a.jsx("img",{src:Q.avatar,alt:Q.name,className:"w-full h-full object-cover"}):""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-white font-medium",children:Q.name}),a.jsx("div",{className:"text-xs text-white/60",children:Q.role})]}),Q.affinity!==void 0&&a.jsxs("div",{className:"text-xs text-[#C5A059]",children:[" ",Q.affinity]})]},Q.id))})]}),n.quests&&n.quests.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-[#C5A059] mb-3",children:" "}),a.jsx("div",{className:"space-y-2",children:n.quests.map(Q=>a.jsx("div",{className:`p-3 rounded-lg cursor-pointer transition-colors ${Q.isCompleted?"bg-green-500/10 border border-green-500/30":"bg-white/5 hover:bg-white/10"}`,onClick:()=>{ce(!0),T("quest")},children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg",children:Q.isCompleted?"":""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-white font-medium",children:Q.title}),a.jsx("div",{className:"text-xs text-white/60",children:Q.description})]}),Q.isMainQuest&&a.jsx("span",{className:"px-2 py-0.5 bg-yellow-500/20 rounded text-yellow-300 text-xs",children:""})]})},Q.id))})]}),n.shop&&n.shop.length>0&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-[#C5A059] mb-3",children:" "}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:n.shop.slice(0,4).map(Q=>a.jsx("div",{className:"p-3 bg-white/5 rounded-lg hover:bg-white/10 cursor-pointer transition-colors",onClick:()=>w(!0),children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xl",children:Q.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-white text-sm truncate",children:Q.name}),a.jsxs("div",{className:"text-xs text-[#C5A059]",children:[Q.cost," "]})]})]})},Q.id))}),a.jsxs("button",{onClick:()=>w(!0),className:"w-full mt-3 py-2 rounded-lg bg-[#C5A059]/20 hover:bg-[#C5A059]/30 text-[#C5A059] text-sm font-medium transition-colors",children:[" (",n.shop.length," )"]})]}),n.cellType==="home"&&n.homeFeatures&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-[#C5A059] mb-3",children:" "}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[n.homeFeatures.canRest&&a.jsxs("button",{onClick:()=>q(!0),className:"p-3 bg-white/5 rounded-lg hover:bg-white/10 text-left transition-colors",children:[a.jsx("div",{className:"text-lg",children:""}),a.jsx("div",{className:"text-white text-sm",children:""})]}),n.homeFeatures.canSave&&a.jsxs("button",{onClick:()=>q(!0),className:"p-3 bg-white/5 rounded-lg hover:bg-white/10 text-left transition-colors",children:[a.jsx("div",{className:"text-lg",children:""}),a.jsx("div",{className:"text-white text-sm",children:""})]}),n.homeFeatures.canTimeRewind&&a.jsxs("button",{onClick:()=>q(!0),className:"p-3 bg-white/5 rounded-lg hover:bg-white/10 text-left transition-colors",children:[a.jsx("div",{className:"text-lg",children:""}),a.jsx("div",{className:"text-white text-sm",children:""})]}),a.jsxs("button",{onClick:()=>I(!0),className:"p-3 bg-white/5 rounded-lg hover:bg-white/10 text-left transition-colors",children:[a.jsx("div",{className:"text-lg",children:""}),a.jsx("div",{className:"text-white text-sm",children:""})]})]})]}),n.lockFeatures&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-[#C5A059] mb-3",children:" "}),a.jsxs("div",{className:`p-4 rounded-lg ${n.lockFeatures.isLocked?"bg-gray-500/10 border border-gray-500/30":"bg-green-500/10 border border-green-500/30"}`,children:[a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsx("span",{className:n.lockFeatures.isLocked?"text-gray-400":"text-green-400",children:n.lockFeatures.isLocked?" ":" "})}),a.jsx("p",{className:"text-sm text-white/60 mb-3",children:n.lockFeatures.hint}),n.lockFeatures.isLocked&&a.jsx("div",{className:"text-xs text-white/40",children:n.lockFeatures.unlockCondition.map((Q,re)=>a.jsxs("div",{children:[" ",re+1,": ",Q.type," ( ",Q.value,")"]},re))})]})]})]})}),a.jsx("div",{className:"p-4 border-t border-white/10 bg-black/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-white/60",children:[a.jsx("span",{children:""}),a.jsxs("span",{children:[": ",a.jsx("span",{className:"text-[#C5A059] font-medium",children:e})]}),a.jsx("span",{className:"mx-2",children:"|"}),a.jsxs("span",{children:[" Day ",s]})]}),n.isCurrentLocation&&a.jsx("button",{onClick:()=>I(!0),className:"px-4 py-2 bg-[#C5A059]/20 hover:bg-[#C5A059]/30 text-[#C5A059] rounded-lg text-sm font-medium transition-colors",children:" "})]})})]})})},xw=({lockFeatures:n,userStats:e,completedQuests:i,unlockedAreas:s,onUnlock:r,onClose:u})=>{const[f,g]=D.useState(!1),[x,h]=D.useState(null),v=I=>{const M=I.current??b(I.type);return{met:M>=I.value,current:M,progress:Math.min(100,M/I.value*100)}},b=I=>{switch(I){case"vocabulary":return e.vocabulary;case"grammar":return e.grammar;case"vocal":return e.vocal;case"freeWill":return e.freeWill;case"stars":return e.stars;case"quests":return i.length;default:return 0}},C=I=>{switch(I){case"vocabulary":return"";case"grammar":return"";case"vocal":return"";case"freeWill":return"";case"stars":return"";case"quests":return"";case"time":return"";case"day":return"";default:return""}},A=I=>{switch(I){case"vocabulary":return"";case"grammar":return"";case"vocal":return"";case"freeWill":return"";case"stars":return"";case"quests":return"";case"time":return"";case"day":return"";default:return I}},T=()=>n.requirements?n.requirements.every(I=>v(I).met):!1,E=async()=>{if(!(!n.canUnlock||f)){g(!0),h(null);try{const I=n.unlockCost||{},M=await r(n.lockedAreaId,I);h({success:M,message:M?"":""})}catch{h({success:!1,message:""})}finally{g(!1)}}},w=T(),R=s.includes(n.lockedAreaId);return a.jsx("div",{style:_e.overlay,children:a.jsxs("div",{style:_e.panel,children:[a.jsxs("div",{style:_e.header,children:[a.jsxs("div",{style:_e.lockHeader,children:[a.jsx("span",{style:_e.lockIcon,children:""}),a.jsxs("div",{style:_e.lockInfo,children:[a.jsx("h2",{style:_e.lockTitle,children:n.displayName}),a.jsx("span",{style:_e.lockSubtitle,children:n.description})]})]}),a.jsx("button",{style:_e.closeButton,onClick:u,children:""})]}),n.visualHint&&a.jsxs("div",{style:_e.hintSection,children:[a.jsx("span",{style:_e.hintIcon,children:""}),a.jsx("span",{style:_e.hintText,children:n.visualHint})]}),n.requirements&&n.requirements.length>0&&a.jsxs("div",{style:_e.requirementsSection,children:[a.jsx("h4",{style:_e.sectionTitle,children:""}),a.jsx("div",{style:_e.requirementsList,children:n.requirements.map((I,M)=>{const q=v(I);return a.jsxs("div",{style:_e.requirementCard,children:[a.jsxs("div",{style:_e.requirementHeader,children:[a.jsx("span",{style:_e.requirementIcon,children:C(I.type)}),a.jsx("span",{style:_e.requirementLabel,children:A(I.type)}),a.jsx("span",{style:{..._e.requirementStatus,color:q.met?"#00b894":"#888"},children:q.met?" ":""})]}),a.jsxs("div",{style:_e.progressBar,children:[a.jsx("div",{style:_e.progressBarBg,children:a.jsx("div",{style:{..._e.progressBarFill,width:`${q.progress}%`,backgroundColor:q.met?"#00b894":"#636e72"}})}),a.jsxs("span",{style:_e.progressText,children:[q.current," / ",I.value]})]})]},M)})})]}),n.unlockCost&&Object.keys(n.unlockCost).length>0&&a.jsxs("div",{style:_e.costSection,children:[a.jsx("h4",{style:_e.sectionTitle,children:""}),a.jsx("div",{style:_e.costList,children:Object.entries(n.unlockCost).map(([I,M])=>{if(!M)return null;const q=b(I),G=q>=M;return a.jsxs("div",{style:{..._e.costItem,...G?{}:_e.costItemCannotAfford},children:[a.jsx("span",{style:_e.costIcon,children:C(I)}),a.jsx("span",{style:_e.costLabel,children:A(I)}),a.jsxs("span",{style:_e.costValue,children:[q," / ",M]}),a.jsx("span",{style:{..._e.costStatus,color:G?"#00b894":"#d63031"},children:G?"":""})]},I)})})]}),n.unlockMethods&&n.unlockMethods.length>0&&a.jsxs("div",{style:_e.methodsSection,children:[a.jsx("h4",{style:_e.sectionTitle,children:""}),a.jsx("div",{style:_e.methodsList,children:n.unlockMethods.map((I,M)=>a.jsxs("div",{style:_e.methodCard,children:[a.jsx("span",{style:_e.methodIcon,children:I.icon||""}),a.jsxs("div",{style:_e.methodInfo,children:[a.jsx("span",{style:_e.methodName,children:I.name}),a.jsx("span",{style:_e.methodDesc,children:I.description})]}),I.questId&&a.jsx("span",{style:_e.methodQuest,children:i.includes(I.questId)?"":""})]},M))})]}),R?a.jsxs("div",{style:_e.unlockedState,children:[a.jsx("span",{style:_e.unlockedIcon,children:""}),a.jsx("span",{style:_e.unlockedText,children:""})]}):a.jsxs("div",{style:_e.actionSection,children:[x&&a.jsxs("div",{style:{..._e.unlockResult,...x.success?_e.unlockResultSuccess:_e.unlockResultFail},children:[a.jsx("span",{children:x.success?"":""}),a.jsx("span",{children:x.message})]}),a.jsx("button",{style:{..._e.unlockButton,...w?{}:_e.unlockButtonDisabled,...f?_e.unlockButtonLoading:{}},onClick:E,disabled:!w||f,children:f?a.jsxs(a.Fragment,{children:[a.jsx("span",{style:_e.spinner,children:""}),"..."]}):w?n.unlockCost&&Object.keys(n.unlockCost).length>0?`  (: ${Object.entries(n.unlockCost).map(([I,M])=>`${C(I)}${M}`).join(" ")})`:" ":" "})]}),n.tips&&n.tips.length>0&&a.jsxs("div",{style:_e.tipsSection,children:[a.jsx("h4",{style:_e.tipsTitle,children:" "}),a.jsx("ul",{style:_e.tipsList,children:n.tips.map((I,M)=>a.jsx("li",{style:_e.tipItem,children:I},M))})]})]})})},_e={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,padding:"20px"},panel:{backgroundColor:"#1a1a2e",borderRadius:"16px",width:"100%",maxWidth:"500px",maxHeight:"85vh",display:"flex",flexDirection:"column",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",border:"1px solid rgba(255, 255, 255, 0.1)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},lockHeader:{display:"flex",alignItems:"center",gap:"12px"},lockIcon:{fontSize:"40px"},lockInfo:{display:"flex",flexDirection:"column",gap:"4px"},lockTitle:{margin:0,color:"#fff",fontSize:"18px",fontWeight:600},lockSubtitle:{color:"#888",fontSize:"13px"},closeButton:{background:"none",border:"none",color:"#888",fontSize:"24px",cursor:"pointer",padding:"4px 8px",borderRadius:"4px",transition:"all 0.2s"},hintSection:{display:"flex",alignItems:"center",gap:"10px",padding:"12px 20px",backgroundColor:"rgba(253, 203, 110, 0.1)",borderBottom:"1px solid rgba(253, 203, 110, 0.2)"},hintIcon:{fontSize:"18px"},hintText:{color:"#fdcb6e",fontSize:"13px"},sectionTitle:{margin:"0 0 12px 0",color:"#888",fontSize:"12px",fontWeight:500,textTransform:"uppercase",letterSpacing:"1px"},requirementsSection:{padding:"16px 20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},requirementsList:{display:"flex",flexDirection:"column",gap:"10px"},requirementCard:{padding:"12px",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"10px"},requirementHeader:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},requirementIcon:{fontSize:"18px"},requirementLabel:{color:"#fff",fontSize:"14px",fontWeight:500},requirementStatus:{fontSize:"12px",marginLeft:"auto",fontWeight:500},progressBar:{display:"flex",alignItems:"center",gap:"10px"},progressBarBg:{flex:1,height:"8px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"4px",overflow:"hidden"},progressBarFill:{height:"100%",borderRadius:"4px",transition:"width 0.3s ease"},progressText:{color:"#888",fontSize:"12px",minWidth:"60px",textAlign:"right"},costSection:{padding:"16px 20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},costList:{display:"flex",flexDirection:"column",gap:"8px"},costItem:{display:"flex",alignItems:"center",gap:"10px",padding:"10px 12px",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"8px"},costItemCannotAfford:{opacity:.7},costIcon:{fontSize:"16px"},costLabel:{color:"#aaa",fontSize:"13px"},costValue:{flex:1,textAlign:"right",color:"#fff",fontSize:"13px",fontVariantNumeric:"tabular-nums"},costStatus:{fontSize:"14px",fontWeight:600},methodsSection:{padding:"16px 20px",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},methodsList:{display:"flex",flexDirection:"column",gap:"8px"},methodCard:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",backgroundColor:"rgba(255, 255, 255, 0.03)",borderRadius:"10px",border:"1px solid rgba(255, 255, 255, 0.05)"},methodIcon:{fontSize:"24px"},methodInfo:{flex:1,display:"flex",flexDirection:"column",gap:"2px"},methodName:{color:"#fff",fontSize:"14px",fontWeight:500},methodDesc:{color:"#888",fontSize:"12px"},methodQuest:{fontSize:"12px",color:"#666"},unlockedState:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"20px",backgroundColor:"rgba(0, 184, 148, 0.1)",borderRadius:"12px",margin:"16px 20px"},unlockedIcon:{fontSize:"28px"},unlockedText:{color:"#00b894",fontSize:"18px",fontWeight:600},actionSection:{padding:"16px 20px"},unlockResult:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"12px",borderRadius:"10px",marginBottom:"12px",fontSize:"14px"},unlockResultSuccess:{backgroundColor:"rgba(0, 184, 148, 0.1)",color:"#00b894"},unlockResultFail:{backgroundColor:"rgba(214, 48, 49, 0.1)",color:"#ff7675"},unlockButton:{width:"100%",padding:"14px",borderRadius:"10px",border:"none",backgroundColor:"#6c5ce7",color:"#fff",fontSize:"15px",fontWeight:600,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.2s"},unlockButtonDisabled:{backgroundColor:"#444",color:"#888",cursor:"not-allowed"},unlockButtonLoading:{opacity:.8},spinner:{animation:"spin 1s linear infinite",fontSize:"18px"},tipsSection:{padding:"16px 20px",backgroundColor:"rgba(255, 255, 255, 0.02)",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},tipsTitle:{margin:"0 0 10px 0",color:"#888",fontSize:"13px",fontWeight:500},tipsList:{margin:0,paddingLeft:"20px",color:"#666",fontSize:"12px",lineHeight:1.8},tipItem:{color:"#777"}},yw=({stats:n,setStats:e,userInfo:i})=>a.jsx(vw,{stats:n,setStats:e,userInfo:i}),vw=({stats:n,setStats:e,userInfo:i})=>{var le,B;const s=D.useRef(null),[r,u]=D.useState([]),[f,g]=D.useState(0),[x,h]=D.useState(!1),[v,b]=D.useState(!1),[C,A]=D.useState(()=>dw()),T=ma(C.currentNode),E=T==null?void 0:T.dialogues[C.currentDialogueIndex],[w,R]=D.useState("map"),[I,M]=D.useState(null),[q,G]=D.useState(null);D.useEffect(()=>{uw(j=>{b(j)})},[]),D.useEffect(()=>{C.unlockedCells.length===0&&A(j=>({...j,unlockedCells:["intro_1"]}))},[]),D.useEffect(()=>{localStorage.setItem("ASAEL_STORY_PROGRESS",JSON.stringify(C))},[C]),D.useEffect(()=>{(async()=>{try{const Z=await xo().getAllNodesAsync();u(Z),g(Z.length),h(!0);const X=Z.find($=>$.cellType==="home");X&&(A($=>({...$,unlockedCells:Array.from(new Set([...$.unlockedCells,X.id])),currentNode:X.id})),console.log("[StoryView] :",X.id)),console.log("[StoryView] Map initialized with",Z.length,"nodes")}catch(Z){console.error("[StoryView] Failed to initialize map:",Z)}})()},[]);const U=async j=>{const Z=ma(j);if(!Z){console.warn(`Node ${j} not found`);return}if(!Z.title||!Z.icon||!Z.dialogues||Z.dialogues.length===0)console.log("[StoryView] ...");else if(!Z.dialogues||Z.dialogues.length===0){console.warn(`Node ${j} has no dialogues`);return}await lu(Z.hexCoord);const $=await xo().getAllNodesAsync();u($),g($.length);const N=ma(j);if(!N){console.warn(`Updated node ${j} not found`);return}A(F=>({...F,currentNode:N.id,currentDialogueIndex:0,playerPosition:N.hexCoord,unlockedCells:Array.from(new Set([...F.unlockedCells,N.id]))})),R("dialog")},V=j=>{if(j==="continue"){A(X=>({...X,currentDialogueIndex:X.currentDialogueIndex+1}));return}if(!(E!=null&&E.choices))return;const Z=E.choices.find(X=>X.id===j);if(Z){if(Z.nextDialogueId){const X=T==null?void 0:T.dialogues.findIndex($=>$.id===Z.nextDialogueId);if(X!==void 0&&X>=0){A($=>({...$,currentDialogueIndex:X}));return}}if(Z.nextNodeId){const X=ma(Z.nextNodeId);if(X){A($=>({...$,completedNodes:C.currentNode?Array.from(new Set([...$.completedNodes,C.currentNode])):$.completedNodes,currentNode:Z.nextNodeId,currentDialogueIndex:0,playerPosition:X.hexCoord,unlockedCells:Array.from(new Set([...$.unlockedCells,Z.nextNodeId]))})),X.rewards&&e($=>{var N,F,z,W;return{...$,stars:$.stars+(((N=X.rewards)==null?void 0:N.stars)||0),sanity:Math.max(0,Math.min(100,$.sanity+(((F=X.rewards)==null?void 0:F.sanity)||0))),vocal:Math.max(0,Math.min(100,$.vocal+(((z=X.rewards)==null?void 0:z.vocal)||0))),freeWill:Math.max(0,Math.min(100,$.freeWill+(((W=X.rewards)==null?void 0:W.freeWill)||0)))}});return}}A(X=>({...X,currentDialogueIndex:X.currentDialogueIndex+1}))}},ce=j=>{M((I==null?void 0:I.id)===j.id?null:j)},se=()=>{R("map"),M(null)},xe=()=>(T==null?void 0:T.location)||"",de=()=>Math.floor(C.completedNodes.length/3)+1,[Q,re]=D.useState(!1);D.useEffect(()=>{const j=setTimeout(()=>{re(!0)},1e3);return()=>clearTimeout(j)},[]);const J=I;return a.jsxs("div",{ref:s,className:"h-full w-full flex flex-col bg-black overflow-hidden absolute inset-0",children:[a.jsx(mw,{stats:n,currentLocation:xe(),dayCount:de(),userAvatar:(i==null?void 0:i.avatar)||n.uiPreferences.userAvatar,userNickname:(i==null?void 0:i.nickname)||n.uiPreferences.userNickname}),Q&&a.jsx("div",{className:"warning-banner-container",children:a.jsxs("div",{className:"warning-banner-content",children:[a.jsx("span",{className:"warning-icon",children:""}),a.jsx("span",{className:"warning-text",children:",,,,"})]})}),a.jsxs("div",{className:"flex-1 relative overflow-hidden min-h-0",children:[a.jsxs("div",{className:"absolute inset-0 z-0",children:[a.jsx("img",{src:"https://drive-cdn.mujian.me/20/Asael/b4a561ad-d370-40a5-a57a-ef61d31f081e_IMG_20260113_232830.webp",alt:"",className:"w-full h-full object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-blue-950/60 via-black/50 to-black/90 backdrop-blur-[1px]"})]}),w==="map"&&a.jsx("div",{className:"absolute inset-0 z-10",children:a.jsx(fw,{nodes:r,unlockedCells:C.unlockedCells,currentPosition:C.playerPosition,onCellClick:U,onCellInfoClick:ce,isGenerating:v,onTradingClick:j=>{j.shop&&j.shop.length>0&&G("trading")},onInventoryClick:()=>G("inventory"),onHomeClick:j=>{j.homeFeatures&&G("home")},onCharacterClick:(j,Z)=>{j.characters&&G("character")},onQuestClick:(j,Z)=>{j.quests&&G("quest")},onLockClick:j=>{j.lockFeatures&&G("lock")}})}),w==="dialog"&&a.jsx("div",{className:"absolute inset-0 z-10 flex flex-col",children:T&&E?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex-1 overflow-hidden min-h-0",children:a.jsx(hw,{dialogue:E,onChoiceSelect:V})}),a.jsxs("div",{className:"h-12 border-t border-[#C5A059]/20 flex items-center justify-between px-6 bg-black/40",children:[a.jsx("button",{onClick:se,className:"px-4 py-2 rounded-lg border border-[#C5A059]/40 hover:border-[#C5A059] bg-[#C5A059]/10 hover:bg-[#C5A059]/20 text-[#C5A059] text-sm font-ui transition-all",children:" "}),a.jsxs("div",{className:"text-xs text-white/60 font-ui",children:[C.currentDialogueIndex+1," / ",T.dialogues.length]})]})]}):a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-[#C5A059] text-2xl mb-4",children:""}),a.jsx("p",{className:"text-white/60 text-sm",children:"..."})]}),a.jsx("button",{onClick:se,className:"px-4 py-2 rounded-lg border border-[#C5A059]/40 hover:border-[#C5A059] bg-[#C5A059]/10 hover:bg-[#C5A059]/20 text-[#C5A059] text-sm font-ui transition-all",children:" "})]})})]}),J&&I&&a.jsx(gw,{cellInfo:J,userStars:n.stars,inventory:[],dayCount:de(),onClose:()=>M(null),onTrade:(j,Z)=>console.log("Trade:",j,Z),onUseItem:j=>console.log("Use item:",j),onRest:j=>console.log("Rest:",j),onSave:()=>console.log("Save"),onTimeRewind:(j,Z)=>console.log("Time rewind:",j,Z),onStartQuest:j=>console.log("Start quest:",j),onInteractCharacter:(j,Z)=>console.log("Character:",j,Z),onUnlock:async(j,Z)=>Z.stars&&n.stars>=Z.stars?(e(X=>({...X,stars:X.stars-Z.stars})),A(X=>({...X,unlockedCells:[...X.unlockedCells,j]})),await lu(J.hexCoord),u(Object.values(Tu())),!0):!1}),q==="trading"&&J&&a.jsx(K0,{shopItems:J.shop||[],userStars:n.stars,inventory:[],onPurchase:(j,Z)=>console.log("Purchase:",j,Z),onClose:()=>G(null)}),q==="inventory"&&a.jsx(Q0,{inventory:[],onUseItem:j=>console.log("Use:",j),onClose:()=>G(null)}),q==="home"&&a.jsx(X0,{homeFeatures:{allowRest:!0,allowSave:!0,allowTimeRewind:!0},currentTime:{hour:new Date().getHours(),minute:new Date().getMinutes()},currentDay:de(),userStats:{sanity:n.sanity,health:100,energy:100},onRest:j=>console.log("Rest:",j),onSave:()=>console.log("Save"),onTimeRewind:(j,Z)=>console.log("Rewind:",j,Z),onClose:()=>G(null)}),q==="character"&&J&&((le=J.characters)==null?void 0:le[0])&&a.jsx(Z0,{character:J.characters[0],currentDay:de(),currentHour:new Date().getHours(),onStartDialogue:j=>console.log("Dialogue:",j),onSendGift:(j,Z)=>console.log("Gift:",j,Z),onClose:()=>G(null)}),q==="quest"&&J&&((B=J.quests)==null?void 0:B[0])&&a.jsx(ex,{quest:J.quests[0],userStats:{vocabulary:100,grammar:50,vocal:50,freeWill:50},onStartQuest:()=>console.log("Start quest"),onMakeChoice:j=>console.log("Choice:",j),onCompleteQuest:j=>console.log("Complete:",j),onClose:()=>G(null)}),q==="lock"&&J&&J.lockFeatures&&a.jsx(xw,{lockFeatures:J.lockFeatures,userStats:{vocabulary:0,grammar:0,vocal:n.vocal,freeWill:n.freeWill,stars:n.stars},completedQuests:C.completedNodes,unlockedAreas:C.unlockedCells,onUnlock:async(j,Z)=>Z.stars&&n.stars>=Z.stars?(e(X=>({...X,stars:X.stars-Z.stars})),A(X=>({...X,unlockedCells:[...X.unlockedCells,j]})),await lu(J.hexCoord),u(Object.values(Tu())),!0):!1,onClose:()=>G(null)}),v&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:a.jsxs("div",{className:"flex flex-col items-center gap-4 p-8 bg-black/80 border border-[#C5A059]/40 rounded-2xl shadow-2xl",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-[#C5A059]/30 border-t-[#C5A059] rounded-full animate-spin"}),a.jsx("p",{className:"text-[#C5A059] text-lg font-ui tracking-wide",children:"AI ..."}),a.jsx("p",{className:"text-white/50 text-sm font-ui",children:""})]})}),a.jsx("style",{children:`
        @keyframes scrollWarning {
          0% {
            transform: translateX(100%);
          }
          100% {
            transform: translateX(-100%);
          }
        }

        .warning-banner-container {
          height: 32px;
          background: linear-gradient(90deg, transparent, rgba(220, 38, 38, 0.95), transparent);
          overflow: hidden;
          display: flex;
          align-items: center;
          border-bottom: 1px solid rgba(255, 0, 0, 0.3);
        }

        .warning-banner-content {
          display: flex;
          align-items: center;
          white-space: nowrap;
          animation: scrollWarning 15s linear infinite;
          padding-left: 100%;
        }

        .warning-icon {
          margin-right: 12px;
          font-size: 16px;
          animation: pulse 0.6s ease-in-out infinite alternate;
        }

        .warning-text {
          color: #fff;
          font-size: 14px;
          font-weight: bold;
          font-family: "Microsoft YaHei", "PingFang SC", sans-serif;
          letter-spacing: 3px;
          text-shadow: 0 0 8px rgba(255, 0, 0, 0.9), 0 0 16px rgba(255, 0, 0, 0.6);
        }

        @keyframes pulse {
          0% {
            opacity: 1;
            transform: scale(1);
          }
          100% {
            opacity: 0.6;
            transform: scale(1.15);
          }
        }
      `})]})},au=({label:n,value:e,onChange:i,presets:s,customPresets:r=[],fieldKey:u,onDeleteCustom:f,unlockedContent:g=[],isFeatureLocked:x=!1,isAvatar:h=!0})=>{const v=D.useRef(null),b={"https://i.postimg.cc/C1VsQWj7/Avatar1.webp":"Avatar1.webp","https://i.postimg.cc/7P9nKtbK/Avartar2.webp":"Avartar2.webp","https://i.postimg.cc/NGDkdCLN/Avartar3.webp":"Avartar3.webp","https://i.postimg.cc/9FjK3nBx/User_Avatar.webp":"User_Avatar.webp"},C=E=>E?E.startsWith("data:")?"LOCAL_BLOB":b[E]?b[E]:E.split("/").pop()||"unknown.webp":"",A=E=>{if(!E||E==="LOCAL_BLOB")return"";const w=Object.entries(b).find(([R,I])=>I===E);return w?w[0]:E},T=E=>{var R;if(x)return;const w=(R=E.target.files)==null?void 0:R[0];if(w){const I=new FileReader;I.onloadend=()=>i(I.result),I.readAsDataURL(w)}};return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("label",{className:"text-[10px] text-[#C5A059] uppercase tracking-[0.3em] font-ui font-bold",children:n}),e&&a.jsx("button",{onClick:()=>i(""),className:"text-[9px] text-white/30 hover:text-white transition-colors tracking-wider uppercase",children:""})]}),a.jsxs("div",{className:"resonance-stack-container no-scrollbar -mx-4",children:[s&&s.map((E,w)=>{const R=E.lockedId&&!g.includes(E.lockedId);return a.jsx("div",{onClick:()=>!R&&i(E.url),className:`resonance-card ${e===E.url?"active":""} ${R?"grayscale brightness-50 cursor-not-allowed opacity-50":""}`,style:{backgroundImage:`url('${E.url}')`},children:R&&a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/40",children:[a.jsx("span",{className:"text-sm",children:""}),a.jsx("span",{className:"text-[6px] text-[#C5A059] font-bold mt-1",children:"5"})]})},`preset-${w}`)}),r.map((E,w)=>a.jsxs("div",{onClick:()=>i(E),className:`resonance-card ${e===E?"active":""} border-amber-500/50`,style:{backgroundImage:`url('${E}')`},children:[a.jsx("div",{className:"custom-card-label",children:"Custom"}),a.jsx("button",{className:"delete-btn",onClick:R=>{R.stopPropagation(),f==null||f(E)},children:""})]},`custom-${w}`))]}),a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"flex gap-3 items-start",children:[a.jsx("input",{type:"text",disabled:x,value:C(e),onChange:E=>i(A(E.target.value)),placeholder:x?"":" URL...",className:`
              flex-1 bg-black/60 border text-xs transition-all rounded-lg px-3 py-2.5 font-mono tracking-tight
              ${x?"border-red-900/20 text-red-500/20 cursor-not-allowed italic":"border-white/10 text-white/80 focus:border-[#C5A059]/50 placeholder:text-white/20"}
            `}),a.jsx("button",{onClick:()=>{var E;return!x&&((E=v.current)==null?void 0:E.click())},className:`
              px-4 py-2.5 border text-[10px] font-ui tracking-wider whitespace-nowrap transition-all rounded-lg font-bold
              ${x?"border-red-900/20 text-red-500/20 cursor-not-allowed":"bg-[#C5A059]/10 border-[#C5A059]/40 text-[#C5A059] hover:bg-[#C5A059]/20"}
            `,children:x?"":""}),a.jsx("input",{type:"file",ref:v,onChange:T,accept:"image/*",className:"hidden"})]})}),e&&a.jsx("div",{className:"w-full aspect-square rounded-lg overflow-hidden border border-white/10 bg-black/40 shadow-inner",children:a.jsx("img",{src:e,className:"w-full h-full object-cover animate-in fade-in zoom-in-95 duration-500",alt:""})})]})},qg=[{value:"KO_CN",label:""},{value:"EN_CET4_CN",label:""},{value:"EN_CET6_CN",label:""},{value:"EN_IELTS_CN",label:""},{value:"EN_TOEFL_CN",label:""},{value:"EN_BEC_CN",label:"BEC"},{value:"FR_CN",label:""},{value:"JA_CN",label:""}],bw=["https://i.postimg.cc/9FjK3nBx/User_Avatar.webp"],ru=["https://i.postimg.cc/C1VsQWj7/Avatar1.webp","https://i.postimg.cc/7P9nKtbK/Avartar2.webp","https://i.postimg.cc/NGDkdCLN/Avartar3.webp"],Cw=({isOpen:n,onClose:e,onToggle:i,characters:s,currentCharacterId:r,onSwitchCharacter:u,onAddCharacter:f,onUpdateCharacter:g,onDeleteCharacter:x,onUpdateAttribute:h,onUpdateUserInfo:v,onUpdateCharacterStats:b,userInfo:C,stats:A})=>{const[T,E]=D.useState("list"),[w,R]=D.useState(null),[I,M]=D.useState({avatar:C.avatar,nickname:C.nickname,personality:C.personality}),[q,G]=D.useState([]),[U,V]=D.useState([]),[ce,se]=D.useState([]);s.find(X=>X.id===r)||s[0],D.useEffect(()=>{M({avatar:C.avatar,nickname:C.nickname,personality:C.personality})},[C]);const xe=()=>{E("add")},de=X=>{R({...X}),E("edit")},Q=()=>{w&&(g(w.id,w),R(null),E("list"))},re=()=>{v(I)},J=(X,$)=>a.jsx("div",{onClick:()=>{u(X.id),e()},className:`
        relative p-4 rounded-xl border-r-4 transition-all duration-300 cursor-pointer group backdrop-blur-sm
        ${$?"bg-white/10 border-[#C5A059] shadow-[-4px_0_15px_rgba(197,160,89,0.15)]":"bg-white/5 border-transparent hover:bg-white/10 hover:border-white/20"}
      `,children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`w-12 h-12 rounded-full overflow-hidden border-2 transition-all duration-300 ${$?"border-[#C5A059]":"border-white/20 group-hover:border-white/40"}`,children:a.jsx("img",{src:X.avatar,alt:X.name,className:"w-full h-full object-cover"})}),$&&a.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-[#C5A059] rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-2.5 h-2.5 text-black",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h4",{className:`text-sm font-medium truncate transition-colors ${$?"text-[#C5A059]":"text-white group-hover:text-white"}`,children:X.name}),X.isDefault&&a.jsx("span",{className:"text-[8px] px-1.5 py-0.5 bg-[#C5A059]/20 text-[#C5A059] rounded",children:""})]}),a.jsx("p",{className:"text-[10px] text-white/50 truncate",children:X.personalityPrompt||""})]}),a.jsx("button",{onClick:N=>{N.stopPropagation(),de(X)},className:`p-2 rounded-lg transition-all duration-200 ${$?"bg-[#C5A059]/20 text-[#C5A059]":"bg-white/5 text-white/50 hover:bg-white/10 hover:text-white"}`,children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]})},X.id),le=()=>a.jsxs("div",{className:"h-full flex flex-col animate-in slide-in-from-left duration-300",children:[a.jsxs("div",{className:"flex items-center gap-4 pb-6",children:[a.jsx("button",{onClick:()=>{E("list")},className:"p-1.5 hover:bg-white/5 rounded-lg transition-colors",children:a.jsx("svg",{className:"w-4 h-4 text-white/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 19l-7-7 7-7"})})}),a.jsx("h3",{className:"text-white/80 font-ui text-sm tracking-widest uppercase",children:""})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-6 no-scrollbar",children:[a.jsxs("div",{className:"flex flex-col items-center pb-2",children:[a.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden border border-[#C5A059]/30 shadow-[0_0_20px_rgba(197,160,89,0.15)]",children:a.jsx("img",{src:I.avatar,alt:"",className:"w-full h-full object-cover"})}),a.jsx("p",{className:"text-[10px] text-white/30 mt-3 tracking-wider",children:""})]}),a.jsx(au,{label:"",value:I.avatar,onChange:X=>M({...I,avatar:X}),presets:bw.map(X=>({url:X})),customPresets:q,fieldKey:"userAvatar",onDeleteCustom:X=>G($=>$.filter(N=>N!==X))}),a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[9px] text-[#C5A059]/60 uppercase tracking-[0.2em] font-ui",children:""}),a.jsx("input",{type:"text",value:I.nickname,onChange:X=>M({...I,nickname:X.target.value}),onBlur:re,className:"w-full bg-transparent border-b border-white/20 py-2 text-white text-sm focus:outline-none focus:border-[#C5A059] transition-colors placeholder:text-white/30",placeholder:""})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[9px] text-[#C5A059]/60 uppercase tracking-[0.2em] font-ui",children:""}),a.jsx("textarea",{value:I.personality||"",onChange:X=>M({...I,personality:X.target.value}),onBlur:re,className:"w-full h-16 bg-transparent border-b border-white/20 py-2 text-white/80 text-sm leading-relaxed focus:outline-none focus:border-[#C5A059] transition-colors resize-none placeholder:text-white/30",placeholder:"..."})]})]}),a.jsxs("div",{className:"py-4 border-t border-white/5",children:[a.jsx("p",{className:"text-[8px] text-white/30 uppercase tracking-[0.3em] text-center mb-4",children:""}),a.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-lg font-light text-white",children:C.totalConversationCount||0}),a.jsx("p",{className:"text-[8px] text-white/40 uppercase tracking-wider mt-1",children:""})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-lg font-light text-white",children:s.filter(X=>{var $;return($=X.conversationStats)==null?void 0:$.totalMessages}).reduce((X,$)=>{var N;return X+(((N=$.conversationStats)==null?void 0:N.totalMessages)||0)},0)}),a.jsx("p",{className:"text-[8px] text-white/40 uppercase tracking-wider mt-1",children:""})]})]})]})]}),a.jsx("div",{className:"pt-6 border-t border-white/5",children:a.jsx("button",{onClick:()=>{E("list")},className:"w-full py-2.5 text-white/40 text-[10px] hover:text-white transition-colors tracking-wider",children:""})})]}),B=()=>{var X;return w?a.jsxs("div",{className:"h-full flex flex-col animate-in slide-in-from-left duration-300",children:[a.jsxs("div",{className:"flex items-center gap-4 pb-6",children:[a.jsx("button",{onClick:()=>{R(null),E("list")},className:"p-1.5 hover:bg-white/5 rounded-lg transition-colors",children:a.jsx("svg",{className:"w-4 h-4 text-white/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 19l-7-7 7-7"})})}),a.jsx("h3",{className:"text-white/80 font-ui text-sm tracking-widest uppercase",children:""})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-6 no-scrollbar",children:[a.jsx(au,{label:"",value:w.avatar,onChange:$=>R({...w,avatar:$}),presets:((X=w.avatarPresets)!=null&&X.length?w.avatarPresets:ru).map($=>({url:$})),customPresets:U,fieldKey:"editCharacterAvatar",onDeleteCustom:$=>V(N=>N.filter(F=>F!==$))}),a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[9px] text-[#C5A059]/60 uppercase tracking-[0.2em] font-ui",children:""}),a.jsx("input",{type:"text",value:w.name,onChange:$=>R({...w,name:$.target.value}),className:"w-full bg-transparent border-b border-white/20 py-2 text-white text-sm focus:outline-none focus:border-[#C5A059] transition-colors",placeholder:""})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[9px] text-[#C5A059]/60 uppercase tracking-[0.2em] font-ui",children:""}),a.jsx("input",{type:"text",value:w.nickname||"",onChange:$=>R({...w,nickname:$.target.value}),className:"w-full bg-transparent border-b border-white/20 py-2 text-white/80 text-sm focus:outline-none focus:border-[#C5A059] transition-colors placeholder:text-white/30",placeholder:""})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[9px] text-[#C5A059]/60 uppercase tracking-[0.2em] font-ui",children:""}),a.jsx("select",{value:w.language,onChange:$=>R({...w,language:$.target.value}),className:"w-full bg-transparent border-b border-white/20 py-2 text-white text-sm focus:outline-none focus:border-[#C5A059] transition-colors appearance-none cursor-pointer",children:qg.map($=>a.jsx("option",{value:$.value,className:"bg-[#0A0E1A]",children:$.label},$.value))})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-[9px] text-[#C5A059]/60 uppercase tracking-[0.2em] font-ui",children:""}),a.jsx("button",{type:"button",onClick:()=>{const $=Wh("asael");$&&R({...w,personalityPrompt:$})},className:"text-[9px] text-[#C5A059]/60 hover:text-[#C5A059] transition-colors tracking-wider",children:""})]}),a.jsx("textarea",{value:w.personalityPrompt,onChange:$=>R({...w,personalityPrompt:$.target.value}),className:"w-full h-20 bg-transparent border-b border-white/20 py-2 text-white/80 text-sm leading-relaxed focus:outline-none focus:border-[#C5A059] transition-colors resize-none placeholder:text-white/30",placeholder:"..."})]}),w.languagePrompt&&a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[9px] text-[#C5A059]/60 uppercase tracking-[0.2em] font-ui",children:""}),a.jsx("textarea",{value:w.languagePrompt,onChange:$=>R({...w,languagePrompt:$.target.value}),className:"w-full h-16 bg-transparent border-b border-white/20 py-2 text-white/80 text-sm leading-relaxed focus:outline-none focus:border-[#C5A059] transition-colors resize-none placeholder:text-white/30",placeholder:"..."})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-[9px] text-[#C5A059]/60 uppercase tracking-[0.2em] font-ui",children:""}),a.jsx("span",{className:"text-[9px] text-white/30 tracking-wide",children:""})]}),a.jsx("div",{className:"space-y-2",children:w.attributes.map($=>a.jsxs("div",{className:"py-2",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-white/60 text-xs",children:$.icon||""}),a.jsx("span",{className:"text-white/80 text-xs tracking-wide",children:$.name})]}),a.jsxs("span",{className:"text-[#C5A059] text-xs",children:[$.value," / 100"]})]}),a.jsx("div",{className:"h-0.5 bg-white/10 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-[#C5A059] rounded-full",style:{width:`${parseInt($.value)||0}%`}})})]},$.id))})]})]}),a.jsxs("div",{className:"pt-6 border-t border-white/5 space-y-3",children:[a.jsx("button",{onClick:Q,className:"w-full py-2.5 bg-[#C5A059] text-black text-[10px] font-ui tracking-[0.2em] uppercase hover:bg-[#D4AF37] transition-colors",children:""}),a.jsx("button",{onClick:()=>{x(w.id),R(null),E("list")},className:"w-full py-2.5 text-white/40 text-[10px] hover:text-red-400 transition-colors tracking-wider",children:""})]})]}):null},j=({onSubmit:X,onCancel:$,customPresets:N,onDeleteCustom:F})=>{const[z,W]=D.useState({name:"",nickname:"",language:"KO_CN",avatar:ru[0],personalityPrompt:"",attributes:[{name:"",value:"50"},{name:"",value:"50"},{name:"",value:"50"}]}),ue=(fe,Ee,me)=>{W(ve=>({...ve,attributes:ve.attributes.map((je,qe)=>qe===fe?{...je,[Ee]:me}:je)}))};return a.jsxs("div",{className:"h-full flex flex-col animate-in slide-in-from-left duration-300",children:[a.jsxs("div",{className:"flex items-center gap-4 pb-6",children:[a.jsx("button",{onClick:$,className:"p-1.5 hover:bg-white/5 rounded-lg transition-colors",children:a.jsx("svg",{className:"w-4 h-4 text-white/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 19l-7-7 7-7"})})}),a.jsx("h3",{className:"text-white/80 font-ui text-sm tracking-widest uppercase",children:""})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto pr-2 space-y-6 no-scrollbar",children:[a.jsx(au,{label:"",value:z.avatar,onChange:fe=>W({...z,avatar:fe}),presets:ru.map(fe=>({url:fe})),customPresets:N,fieldKey:"newCharacterAvatar",onDeleteCustom:F}),a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[9px] text-[#C5A059]/60 uppercase tracking-[0.2em] font-ui",children:""}),a.jsx("input",{type:"text",value:z.name,onChange:fe=>W({...z,name:fe.target.value}),className:"w-full bg-transparent border-b border-white/20 py-2 text-white text-sm focus:outline-none focus:border-[#C5A059] transition-colors",placeholder:""})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[9px] text-[#C5A059]/60 uppercase tracking-[0.2em] font-ui",children:""}),a.jsx("input",{type:"text",value:z.nickname,onChange:fe=>W({...z,nickname:fe.target.value}),className:"w-full bg-transparent border-b border-white/20 py-2 text-white/80 text-sm focus:outline-none focus:border-[#C5A059] transition-colors placeholder:text-white/30",placeholder:""})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[9px] text-[#C5A059]/60 uppercase tracking-[0.2em] font-ui",children:""}),a.jsx("select",{value:z.language,onChange:fe=>W({...z,language:fe.target.value}),className:"w-full bg-transparent border-b border-white/20 py-2 text-white text-sm focus:outline-none focus:border-[#C5A059] transition-colors appearance-none cursor-pointer",children:qg.map(fe=>a.jsx("option",{value:fe.value,className:"bg-[#0A0E1A]",children:fe.label},fe.value))})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-[9px] text-[#C5A059]/60 uppercase tracking-[0.2em] font-ui",children:""}),a.jsx("button",{type:"button",onClick:()=>{const fe=Wh("asael");fe&&W({...z,personalityPrompt:fe})},className:"text-[9px] text-[#C5A059]/60 hover:text-[#C5A059] transition-colors tracking-wider",children:""})]}),a.jsx("textarea",{value:z.personalityPrompt,onChange:fe=>W({...z,personalityPrompt:fe.target.value}),className:"w-full h-20 bg-transparent border-b border-white/20 py-2 text-white/80 text-sm leading-relaxed focus:outline-none focus:border-[#C5A059] transition-colors resize-none placeholder:text-white/30",placeholder:"..."})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-[9px] text-[#C5A059]/60 uppercase tracking-[0.2em] font-ui",children:""}),a.jsx("span",{className:"text-[9px] text-white/30 tracking-wide",children:""})]}),a.jsx("div",{className:"space-y-2",children:z.attributes.map((fe,Ee)=>a.jsxs("div",{className:"py-2 space-y-1.5",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:fe.name,onChange:me=>ue(Ee,"name",me.target.value),className:"flex-1 bg-transparent border-b border-white/10 py-1 text-white/80 text-xs focus:outline-none focus:border-[#C5A059] transition-colors placeholder:text-white/30",placeholder:""}),a.jsxs("span",{className:"text-[#C5A059] text-xs",children:[fe.value," / 100"]})]}),a.jsx("div",{className:"h-0.5 bg-white/10 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-[#C5A059] rounded-full",style:{width:`${parseInt(fe.value)||0}%`}})})]},Ee))})]})]})]}),a.jsxs("div",{className:"pt-6 border-t border-white/5 space-y-3",children:[a.jsx("button",{onClick:()=>{z.name.trim()&&X(z)},className:"w-full py-2.5 bg-[#C5A059] text-black text-[10px] font-ui tracking-[0.2em] uppercase hover:bg-[#D4AF37] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!z.name.trim(),children:""}),a.jsx("button",{onClick:$,className:"w-full py-2.5 text-white/40 text-[10px] hover:text-white transition-colors tracking-wider",children:""})]})]})},Z=()=>a.jsx(j,{customPresets:ce,onDeleteCustom:X=>se($=>$.filter(N=>N!==X)),onSubmit:X=>{f({name:X.name,nickname:X.nickname||X.name,language:X.language,personalityPrompt:X.personalityPrompt,avatar:X.avatar,isDefault:!1,isActive:!1,attributes:X.attributes.map(($,N)=>({id:`attr_${N}`,name:$.name,value:$.value,icon:["","",""][N]}))}),E("list")},onCancel:()=>E("list")});return a.jsxs(a.Fragment,{children:[n&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 transition-opacity duration-300",onClick:e}),a.jsx("div",{className:`fixed top-0 right-0 h-full z-50 transform transition-transform duration-300 ease-out ${n?"translate-x-0":"translate-x-full"} md:w-80 w-full max-w-[85vw]`,children:a.jsxs("div",{className:"h-full bg-[#0F1528] flex flex-col md:rounded-l-2xl relative overflow-hidden",style:{backgroundImage:"url('https://drive-cdn.mujian.me/20/Asael/417a926c-d2e7-4a7e-b40c-40ce2ecd1f98_retouch_2026011323104469.webp')",backgroundSize:"cover",backgroundPosition:"center"},children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#0F1528]/90 via-[#0F1528]/70 to-[#0F1528]/90 pointer-events-none"}),a.jsxs("div",{className:"h-full flex flex-col relative z-10",children:[a.jsx("div",{className:"p-3 border-b border-white/10 bg-[#0F1528]/80 backdrop-blur-md",children:a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsxs("button",{onClick:()=>E("user"),className:"flex items-center gap-2 p-1.5 hover:bg-white/10 rounded-lg transition-colors group",title:"",children:[a.jsx("div",{className:"w-7 h-7 md:w-8 md:h-8 rounded-full overflow-hidden border border-white/20 group-hover:border-[#C5A059]/50 transition-colors",children:a.jsx("img",{src:C.avatar,alt:"",className:"w-full h-full object-cover"})}),a.jsx("h2",{className:"text-[#C5A059] font-ui tracking-widest text-sm md:text-xl uppercase",children:""})]})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:xe,className:"p-1.5 bg-[#C5A059]/20 hover:bg-[#C5A059]/30 rounded-lg transition-colors",title:"",children:a.jsx("svg",{className:"w-4 h-4 text-[#C5A059]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),a.jsx("button",{onClick:e,className:"p-1.5 bg-white/5 hover:bg-white/10 rounded-lg transition-colors",title:"",children:a.jsx("svg",{className:"w-4 h-4 text-white/70",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto no-scrollbar",children:[T==="list"&&a.jsx("div",{className:"p-2 space-y-1",children:s.map(X=>J(X,X.id===r))}),T==="edit"&&B(),T==="add"&&Z(),T==="user"&&le()]})]})]})})]})},Sw=({word:n,meaning:e,pronunciation:i,x:s,y:r,onClose:u,onSave:f})=>{const g=r<200?r+20:r-220,x=Math.max(10,Math.min(window.innerWidth-210,s-100));return a.jsx("div",{className:"fixed glass-panel p-5 rounded-sm z-[60] shadow-2xl w-52 animate-in fade-in zoom-in-95 duration-200 border-[#C5A059]/60",style:{top:`${g}px`,left:`${x}px`},children:a.jsxs("div",{className:"relative",children:[a.jsx("h3",{className:"ko-text text-2xl text-cyan-400 font-bold mb-1",children:n}),a.jsxs("p",{className:"text-[10px] text-white/40 italic font-ui mb-3",children:["[",i,"]"]}),a.jsx("div",{className:"deco-line mb-3 opacity-30 h-[1px] bg-gradient-to-r from-transparent via-[#C5A059] to-transparent"}),a.jsx("p",{className:"text-sm text-white mb-5 font-light",children:e}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("button",{onClick:()=>f({id:Date.now().toString(),original:n,meaning:e,pronunciation:i,timestamp:Date.now()}),className:"w-full py-2 btn-gold text-[10px] font-ui rounded-sm shadow-lg",children:""}),a.jsx("button",{onClick:u,className:"w-full py-2 bg-white/5 hover:bg-white/10 text-[10px] font-ui text-white/60 rounded-sm transition-colors",children:""})]})]})})},Aw=({onClose:n})=>{const[e,i]=D.useState(!1);return D.useEffect(()=>{const s=r=>{r.key==="Escape"&&n()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[n]),a.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"relative w-[320px] sm:w-[360px] group transition-all duration-700 aspect-video flex items-center justify-center",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[a.jsxs("div",{className:`transition-all flex flex-col items-center py-4 justify-between duration-500 group-hover:duration-700 bg-gradient-to-br from-[#1a1a2e] to-[#16213e] w-full h-full absolute border border-[#C5A059]/30 ${e?"-translate-y-16 scale-95":""}`,children:[a.jsxs("div",{className:"flex flex-col items-center gap-2 px-4 w-full flex-1 justify-center",children:[a.jsx("div",{className:"bg-[#C5A059]/10 border border-[#C5A059]/40 rounded-lg p-2 w-full",children:a.jsx("p",{className:"text-white text-base font-bold text-center",children:"()"})}),a.jsxs("div",{className:"bg-amber-900/20 border border-amber-600/30 rounded-lg p-2 w-full",children:[a.jsx("p",{className:"text-amber-400 text-l font-ui mb-1 text-center",children:" "}),a.jsx("p",{className:"text-white/70 text-l text-center leading-relaxed",children:"SDK AS "})]})]}),e&&a.jsx("button",{onClick:n,className:"mb-3 px-6 py-1.5 bg-[#C5A059] text-black text-xs font-bold rounded hover:bg-[#e7be5a] transition-colors animate-in fade-in slide-in-from-bottom-2",children:""})]}),a.jsx("button",{className:`seal bg-[#C5A059] text-black w-12 aspect-square rounded-full z-40 text-xs flex items-center justify-center font-bold [clip-path:polygon(50%_0%,_80%_10%,_100%_35%,_100%_70%,_80%_90%,_50%_100%,_20%_90%,_0%_70%,_0%_35%,_20%_10%)] transition-all duration-700 group-hover:opacity-0 group-hover:scale-75 group-hover:rotate-180 border-4 border-[#C5A059] ${e?"pointer-events-none":""}`,children:"AS 0.2.2"}),a.jsx("div",{className:"tp transition-all duration-1000 group-hover:duration-100 bg-[#0a0a0f] absolute group-hover:[clip-path:polygon(50%_0%,_100%_0,_0_0)] w-full h-full [clip-path:polygon(50%_50%,_100%_0,_0_0)]"}),a.jsx("div",{className:`lft transition-all duration-700 absolute w-full h-full bg-[#1a1a1a] [clip-path:polygon(50%_50%,_0_0,_0_100%)] ${e?"translate-y-12":""}`}),a.jsx("div",{className:`rgt transition-all duration-700 absolute w-full h-full bg-[#0a0a0f] [clip-path:polygon(50%_50%,_100%_0,_100%_100%)] ${e?"translate-y-12":""}`}),a.jsx("div",{className:`btm transition-all duration-700 absolute w-full h-full bg-[#1a1a1a] [clip-path:polygon(50%_50%,_100%_100%,_0_100%)] ${e?"translate-y-12":""}`})]})})};class _w{constructor(){this.db=un,this.STORAGE_KEYS={CONFIG:"SR_AI_CONFIG",MESSAGES:"ASAEL_MESSAGES",WORDBOOK:"ASAEL_WORDBOOK",STATS:"ASAEL_STATS",BEHAVIOR_COGNITIVE:"ASAEL_COGNITIVE_GRAPH",BEHAVIOR_DELETED:"ASAEL_DELETED_WORDS_BACKUP",BEHAVIOR_DAILY:"ASAEL_DAILY_STATS",BEHAVIOR_METADATA:"ASAEL_BEHAVIOR_METADATA",CASINO_USED_WORDS:"casino_used_words"}}async initialize(){await this.db.open(),console.log("[Migration] IndexedDB ")}async estimateStorage(){const e=[];for(const[i,s]of Object.entries(this.STORAGE_KEYS)){let r=0,u=0;try{const f=localStorage.getItem(s);f&&(r=new Blob([f]).size)}catch(f){console.error(`[Migration]  ${i} localStorage :`,f)}try{const f=this.getStoreName(i);f&&(u=await this.db.count(f))}catch(f){console.error(`[Migration]  ${i} IndexedDB :`,f)}e.push({key:s,localStorageSize:r,indexedDBCount:u,needsMigration:r>0&&u===0})}return e}async checkNeedsMigration(){try{if(localStorage.getItem("ASAEL_MIGRATED_TO_IDB"))return!1;for(const[,i]of Object.entries(this.STORAGE_KEYS)){const s=localStorage.getItem(i);if(s&&s.length>0)return!0}return!1}catch(e){return console.error("[Migration] :",e),!1}}getStoreName(e){return{CONFIG:"config",MESSAGES:"messages",WORDBOOK:"wordbook",STATS:"config",BEHAVIOR_COGNITIVE:"behavior",BEHAVIOR_DELETED:"deletedWords",BEHAVIOR_DAILY:"dailyStats",BEHAVIOR_METADATA:"config",CASINO_USED_WORDS:"config"}[e]||null}async migrateAll(){const e=Date.now();let i=0;const s=[];console.log("[Migration] ...");try{await this.migrateMessages(),i++,await this.migrateWordbook(),i++,await this.migrateBehaviorData(),i++,await this.migrateConfig(),i++,localStorage.setItem("ASAEL_MIGRATED_TO_IDB",Date.now().toString()),console.log("[Migration] ")}catch(r){const u=r instanceof Error?r.message:String(r);s.push(u),console.error("[Migration] :",r)}return{success:s.length===0,migratedCount:i,errors:s,duration:Date.now()-e}}async migrateMessages(){console.log("[Migration] ...");try{const e=localStorage.getItem(this.STORAGE_KEYS.MESSAGES);if(e){const i=JSON.parse(e);if(Array.isArray(i)&&i.length>0){const s=i.map((r,u)=>({...r,id:r.id||`msg_${Date.now()}_${u}`,characterId:r.characterId||void 0}));await this.db.clear("messages"),await this.db.bulkPut("messages",s),console.log(`[Migration]  ${s.length} `)}}else console.log("[Migration] ")}catch(e){throw console.error("[Migration] :",e),e}}async migrateWordbook(){console.log("[Migration] ...");try{const e=localStorage.getItem(this.STORAGE_KEYS.WORDBOOK);if(e){const i=JSON.parse(e);if(Array.isArray(i)&&i.length>0){const s=i.map((r,u)=>({...r,id:r.id||`word_${Date.now()}_${u}`,addedAt:r.timestamp||Date.now()}));await this.db.clear("wordbook"),await this.db.bulkPut("wordbook",s),console.log(`[Migration]  ${s.length} `)}}else console.log("[Migration] ")}catch(e){throw console.error("[Migration] :",e),e}}async migrateBehaviorData(){var e;console.log("[Migration] ...");try{const i=localStorage.getItem(ht.COGNITIVE_GRAPH);if(i){const u=JSON.parse(i),f=[];if((e=u.cognitiveGraph)!=null&&e.vocabulary)for(const[g,x]of Object.entries(u.cognitiveGraph.vocabulary))f.push({id:`behavior_${g}`,word:g,data:x,updatedAt:Date.now()});f.length>0&&(await this.db.clear("behavior"),await this.db.bulkPut("behavior",f),console.log(`[Migration]  ${f.length} `))}const s=localStorage.getItem(ht.DELETED_WORDS);if(s){const u=JSON.parse(s);if(Array.isArray(u)&&u.length>0){const f=u.map((g,x)=>({...g,id:`deleted_${Date.now()}_${x}`}));await this.db.clear("deletedWords"),await this.db.bulkPut("deletedWords",f),console.log(`[Migration]  ${f.length} `)}}const r=localStorage.getItem(ht.DAILY_STATS);if(r){const u=JSON.parse(r);if(Array.isArray(u)&&u.length>0){const f=u.map(g=>({...g,date:g.date||new Date().toISOString().split("T")[0]}));await this.db.clear("dailyStats"),await this.db.bulkPut("dailyStats",f),console.log(`[Migration]  ${f.length} `)}}console.log("[Migration] ")}catch(i){throw console.error("[Migration] :",i),i}}async migrateConfig(){console.log("[Migration] ...");const e=[{lsKey:this.STORAGE_KEYS.CONFIG,id:"config_ai"},{lsKey:this.STORAGE_KEYS.STATS,id:"config_stats"},{lsKey:this.STORAGE_KEYS.BEHAVIOR_METADATA,id:"config_behavior_metadata"},{lsKey:this.STORAGE_KEYS.CASINO_USED_WORDS,id:"config_casino_words"}];for(const{lsKey:i,id:s}of e)try{const r=localStorage.getItem(i);r&&(await this.db.put("config",{key:i,value:JSON.parse(r),id:s,updatedAt:Date.now()}),console.log(`[Migration] : ${i}`))}catch(r){console.error(`[Migration]  ${i} :`,r)}console.log("[Migration] ")}async rollback(){const e=Date.now();let i=0;const s=[];console.log("[Migration] ...");try{await this.db.clear("messages"),await this.db.clear("wordbook"),await this.db.clear("behavior"),await this.db.clear("deletedWords"),await this.db.clear("dailyStats"),await this.db.clear("config"),i=5,localStorage.removeItem("ASAEL_MIGRATED_TO_IDB"),console.log("[Migration] ")}catch(r){const u=r instanceof Error?r.message:String(r);s.push(u),console.error("[Migration] :",r)}return{success:s.length===0,migratedCount:i,errors:s,duration:Date.now()-e}}isMigrated(){return!!localStorage.getItem("ASAEL_MIGRATED_TO_IDB")}getMigrationTime(){const e=localStorage.getItem("ASAEL_MIGRATED_TO_IDB");return e?parseInt(e):null}async close(){await this.db.close()}}const Hg=new _w,Vg=[{id:"track_1",title:"",artist:"Aseal",url:"https://image2url.com/r2/bucket2/audio/1766805861352-0e243162-d4ec-472c-a8a2-d5ffa86ddb1e.mp3",cover:"https://i.postimg.cc/cJXWh07R/Album1.webp"},{id:"track_2",title:"",artist:"Aseal",url:"https://image2url.com/r2/bucket3/audio/1766883956622-56ef6bcd-b5cc-40b0-a594-045cce424bcc.mp3",cover:"https://i.postimg.cc/6TJxq3ws/Album2.webp"},{id:"track_3",title:"",artist:"Aseal (male & female voice)",url:"https://image2url.com/r2/bucket3/audio/1766894527841-b14308f8-692a-4802-9b51-45f070cf1238.mp3",cover:"https://i.postimg.cc/rFxKJRDS/Album3.webp",isLocked:!0}],Fg="asael",Tw=()=>{const[n,e]=D.useState("chat"),[i,s]=D.useState("chat"),[r,u]=D.useState(!1),[f,g]=D.useState(!1),[x,h]=D.useState(()=>{const O=localStorage.getItem("ASAEL_CHARACTERS");if(O)return JSON.parse(O);const te=Lv(Fg);return te?[te]:[]}),[v,b]=D.useState(()=>Fg),C=x.find(O=>O.id===v)||null,[A,T]=D.useState(()=>{const O=localStorage.getItem("ASAEL_USER_INFO");return O?JSON.parse(O):{avatar:"https://i.postimg.cc/9FjK3nBx/User_Avatar.webp",nickname:"Navigator",personality:"",totalConversationCount:0,lastConversationTime:void 0}}),[E,w]=D.useState(()=>{const O=localStorage.getItem("ASAEL_CHARACTER_MESSAGES");return O?JSON.parse(O):{}}),[R,I]=D.useState(()=>[]),[M,q]=D.useState([]),[G,U]=D.useState(0),[V,ce]=D.useState({isPlaying:!1,isLooping:!1,hasVocals:!0,currentTime:0,duration:0}),se=D.useRef(null),[xe,de]=D.useState(!1),Q=D.useRef({startTime:0,endTime:0,dataSize:0,status:"idle",error:null,messageCount:0}),[re,J]=D.useState(()=>{const O=localStorage.getItem("ASAEL_WORDBOOK");return O?JSON.parse(O):[]}),[le,B]=D.useState(()=>{const O=localStorage.getItem("ASAEL_STATS"),te={chatWallpaper:"",profileWallpaper:"https://i.postimg.cc/7h0Fqvt6/Wallpaper_youth.webp",voidWallpaper:"",aiAvatar:"https://i.postimg.cc/NGDkdCLN/Avartar3.webp",userAvatar:"https://i.postimg.cc/9FjK3nBx/User_Avatar.webp",aiNickname:"",userNickname:"Navigator",bubbleStyle:"classic",trainingBgFlashcard:"https://i.postimg.cc/TPKH1nNw/dreamina-7588463849087503643-1766827008308.webp",trainingBgChoice:"https://i.postimg.cc/Fs8QZFMq/IMG-20251227-174947.webp",trainingBgDictation:"https://i.postimg.cc/yYtzP6MG/IMG-20251227-175014.webp"},pe={level:1,exp:5,stars:20,sanity:80,vocal:95,freeWill:40,fluency:0,focus:100,unlockedAchievements:["first_encounter"],unlockedContent:[],turnCount:0,trainingTotalCount:0,trainingCorrectCount:0,memoryLog:[],customQuotes:[],uiPreferences:te,customUIAssets:{}};if(O){const ye=JSON.parse(O);return{...pe,...ye,uiPreferences:{...te,...ye.uiPreferences},customUIAssets:ye.customUIAssets||{}}}return pe}),j=Vg.filter(O=>!O.isLocked||le.unlockedContent.includes(O.id)),[Z,X]=D.useState(()=>!localStorage.getItem("ASAEL_HAS_VISITED")),$=()=>{localStorage.setItem("ASAEL_HAS_VISITED","true"),X(!1)},N=(O,te)=>{try{localStorage.setItem(O,JSON.stringify(te))}catch(pe){console.warn(`Failed to save ${O} to localStorage:`,pe),pe instanceof DOMException&&pe.name==="QuotaExceededError"&&(console.warn("localStorage quota exceeded, clearing old data..."),localStorage.clear())}};D.useEffect(()=>{N("ASAEL_MESSAGES",R)},[R]),D.useEffect(()=>{N("ASAEL_WORDBOOK",re)},[re]),D.useEffect(()=>{N("ASAEL_STATS",le)},[le]),D.useEffect(()=>{N("ASAEL_CHARACTERS",x)},[x]),D.useEffect(()=>{N("ASAEL_CURRENT_CHARACTER",v)},[v]),D.useEffect(()=>{N("ASAEL_USER_INFO",A)},[A]),D.useEffect(()=>{N("ASAEL_CHARACTER_MESSAGES",E)},[E]),D.useEffect(()=>{localStorage.getItem("ASAEL_MESSAGES")&&localStorage.removeItem("ASAEL_MESSAGES")},[]),D.useEffect(()=>{if(x.length>0){const O=x.find(te=>te.name===""||te.id.startsWith("char_asael_"));O&&w(te=>{const pe={...te};let ye=!1;return te.asael&&!te[O.id]&&(pe[O.id]=te.asael,delete pe.asael,ye=!0),(te["subject-07"]||te["Subject-07"])&&(delete pe["subject-07"],delete pe["Subject-07"],ye=!0),ye?pe:te})}},[x]),D.useEffect(()=>{if(x.length>0&&v==="asael"){const O=x.find(te=>te.name===""||te.id.startsWith("char_asael_"));O&&b(O.id)}},[x]),D.useEffect(()=>{(async()=>{try{if(console.log("[App] ..."),await Hg.checkNeedsMigration()){console.log("[App]  IndexedDB...");const pe=await Hg.migrateAll();console.log(`[App] : ${pe.migratedCount} ,  ${pe.duration}ms`)}else console.log("[App] ");await Promise.all([ji.initialize(),Na.initialize()]),console.log("[App] ")}catch(te){console.error("[App] :",te)}})()},[]),D.useEffect(()=>{const O=E[v]||[];I(O.map(te=>({id:te.id,role:te.role,content:te.content,translation:te.translation,narration:te.narration})))},[v,E]);const[F,z]=D.useState({isOpen:!1,word:"",meaning:"",pronunciation:"",x:0,y:0}),W=O=>{n!=="settings"&&s(n),e(O),g(!1)};D.useEffect(()=>{const O=new Audio;O.preload="auto",se.current=O;const te=()=>{O.duration&&!isNaN(O.duration)&&ce(ye=>({...ye,duration:O.duration}))},pe=()=>{O.loop||U(ye=>(ye+1)%j.length)};return O.addEventListener("loadedmetadata",te),O.addEventListener("durationchange",te),O.addEventListener("canplay",te),O.addEventListener("timeupdate",()=>ce(ye=>({...ye,currentTime:O.currentTime}))),O.addEventListener("ended",pe),()=>{O.pause(),O.src=""}},[j.length]),D.useEffect(()=>{const O=se.current;!O||!j[G]||(ce(te=>({...te,currentTime:0,duration:0})),O.pause(),O.src=j[G].url,O.load(),V.isPlaying&&O.play().catch(()=>ce(te=>({...te,isPlaying:!1}))))},[G,j.length]),D.useEffect(()=>{const O=se.current;O&&(V.isPlaying?O.paused&&O.play().catch(()=>ce(te=>({...te,isPlaying:!1}))):O.pause())},[V.isPlaying]),D.useEffect(()=>{se.current&&(se.current.loop=V.isLooping)},[V.isLooping]);const ue=O=>{se.current&&(se.current.currentTime=O)},fe=()=>U(O=>(O+1)%j.length),Ee=()=>U(O=>(O-1+j.length)%j.length);D.useEffect(()=>{const O=R.filter(te=>te.role==="user").length;O>0&&O!==le.turnCount&&(B(te=>({...te,turnCount:O})),O>0&&O%20===0&&me())},[R]);const me=async()=>{de(!0),Q.current={startTime:Date.now(),endTime:0,dataSize:0,status:"generating",error:null,messageCount:R.length},console.log("[Memory]  - :",R.length);try{const O=R.slice(-40).map(Be=>({id:Be.id,role:Be.role,content:Be.content}));console.log("[Memory] :",O.length);const te=await pE(O),pe=JSON.stringify(te);Q.current={...Q.current,endTime:Date.now(),dataSize:pe.length,status:"success"},console.log("[Memory]  - :",pe.length,", :",Q.current.endTime-Q.current.startTime,"ms");const ye={id:Date.now().toString(),timestamp:Date.now(),event:te.event,impression:te.impression,statChange:`S:${te.sanityChange>0?"+":""}${te.sanityChange}, V:${te.vocalChange>0?"+":""}${te.vocalChange}, W:${te.freeWillChange>0?"+":""}${te.freeWillChange}`};B(Be=>({...Be,sanity:Math.max(0,Math.min(100,Be.sanity+te.sanityChange)),vocal:Math.max(0,Math.min(100,Be.vocal+te.vocalChange)),freeWill:Math.max(0,Math.min(100,Be.freeWill+te.freeWillChange)),memoryLog:[ye,...Be.memoryLog]})),console.log("[Memory]  - ID:",ye.id,":",te.event)}catch(O){Q.current={...Q.current,endTime:Date.now(),status:"failed",error:O instanceof Error?O.message:String(O)},console.error("[Memory] :",Q.current.error)}finally{de(!1)}},ve=(O,te,pe,ye,Be)=>{z({isOpen:!0,word:O,meaning:te,pronunciation:pe,x:ye,y:Be})},je=O=>{if(!re.find(te=>te.original===O.original)){const te=le.turnCount,pe=Math.floor((te-1)/10),ye={...O,turnGroup:pe};J(Be=>[ye,...Be])}z(te=>({...te,isOpen:!1}))},qe=O=>J(te=>te.filter(pe=>pe.id!==O)),Je=O=>{q(te=>te.find(ye=>ye.id===O.id)?te.filter(ye=>ye.id!==O.id):te.length>=4?(alert("4"),te):[...te,O])},tt=O=>{const te=R.map(ye=>({id:ye.id,characterId:v,role:ye.role,content:ye.content,translation:ye.translation,narration:ye.narration,timestamp:ye.timestamp||Date.now()})),pe=E[O]||[];w(ye=>({...ye,[v]:te,[O]:pe})),I(pe.map(ye=>({id:ye.id,role:ye.role,content:ye.content,translation:ye.translation,narration:ye.narration}))),b(O),h(ye=>ye.map(Be=>Be.id===O?{...Be,isActive:!0,conversationStats:Be.conversationStats||{characterId:O,totalMessages:pe.filter(Ze=>Ze.role==="user").length,totalWords:pe.reduce((Ze,zo)=>Ze+zo.content.length,0),lastConversationTime:Date.now()}}:Be.id===v?{...Be,isActive:!1}:Be))},at=O=>{const te={...O,id:`char_${Date.now()}`,createdAt:Date.now(),updatedAt:Date.now(),conversationStats:{characterId:`char_${Date.now()}`,totalMessages:0,totalWords:0,lastConversationTime:0}};h(pe=>[...pe,te])},_t=(O,te)=>{h(pe=>pe.map(ye=>ye.id===O?{...ye,...te,updatedAt:Date.now()}:ye)),O===v&&(te.avatar||te.nickname)&&B(pe=>({...pe,uiPreferences:{...pe.uiPreferences,aiAvatar:te.avatar||pe.uiPreferences.aiAvatar,aiNickname:te.nickname||pe.uiPreferences.aiNickname}}))},Jt=(O,te)=>{h(pe=>pe.map(ye=>{var Be,Ze;return ye.id!==O?ye:{...ye,conversationStats:{characterId:O,totalMessages:(((Be=ye.conversationStats)==null?void 0:Be.totalMessages)||0)+1,totalWords:(((Ze=ye.conversationStats)==null?void 0:Ze.totalWords)||0)+te,lastConversationTime:Date.now()}}})),T(pe=>({...pe,totalConversationCount:pe.totalConversationCount+1,lastConversationTime:Date.now()}))},ne=O=>{h(te=>te.filter(pe=>pe.id!==O)),v===O&&b("asael")},Ne=(O,te,pe)=>{h(ye=>ye.map(Be=>Be.id!==O?Be:{...Be,attributes:Be.attributes.map(Ze=>Ze.id===te?{...Ze,value:pe}:Ze)}))};return a.jsxs("div",{className:"h-screen w-full flex overflow-hidden bg-black relative",children:[a.jsx(Uv,{activeView:n,lastView:i,setActiveView:W,toggleNovelMode:()=>u(!r),isNovelMode:r}),a.jsx("main",{className:"flex-1 relative overflow-hidden bg-[#050505]",children:a.jsxs("div",{className:"relative h-full w-full",children:[n==="chat"&&a.jsx(EE,{messages:R,setMessages:I,onWordClick:ve,setStats:B,stats:le,isNovelMode:r,pendingReferences:M,setPendingReferences:q,onOpenCharacterPanel:()=>g(!0),currentCharacter:C,userInfo:A,isCharacterPanelOpen:f,setIsCharacterPanelOpen:g}),n==="profile"&&a.jsx(UE,{stats:le,setStats:B,audioState:V,setAudioState:ce,seekAudio:ue,currentSong:j[G]||Vg[0],onNextSong:fe,onPrevSong:Ee}),n==="words"&&a.jsx(BE,{wordbook:re,onRemoveWord:qe,onToggleReference:Je,pendingReferences:M}),n==="training"&&a.jsx(PE,{wordbook:re,stats:le,setStats:B}),n==="meditation"&&a.jsx(OE,{setStats:B,stats:le}),n==="awards"&&a.jsx(zE,{stats:le,setStats:B}),n==="story"&&a.jsx(yw,{stats:le,setStats:B,userInfo:A}),n==="settings"&&a.jsx(QE,{})]})}),F.isOpen&&a.jsx(Sw,{...F,onClose:()=>z(O=>({...O,isOpen:!1})),onSave:je}),a.jsx(Cw,{isOpen:f,onClose:()=>g(!1),onToggle:()=>g(O=>!O),characters:x,currentCharacterId:v,onSwitchCharacter:tt,onAddCharacter:at,onUpdateCharacter:_t,onDeleteCharacter:ne,onUpdateAttribute:Ne,onUpdateUserInfo:O=>T(te=>({...te,...O})),onUpdateCharacterStats:Jt,userInfo:A,stats:le}),Z&&a.jsx(Aw,{onClose:$})]})},tx=document.getElementById("root");if(!tx)throw new Error("Root element not found");const Ew=kv.createRoot(tx);Ew.render(a.jsx(_v.StrictMode,{children:a.jsx(Tw,{})}));export{go as g};
